function dtts_range(satlong,eslat,eslong){return longdiffr=(eslong-satlong)/57.29578,p1=1280637796,p2=537859517.4912001,p3=1-Math.cos(eslat/57.29578)*Math.cos(-longdiffr),slantrange=Math.sqrt(p1+p2*p3)}function dtts_hrange(satlong,eslat,eslong){return longdiffr=(eslong-satlong)/57.29578,p1=1280637796,p2=537859517.4912001,p3=1-Math.cos(eslat/57.29578)*Math.cos(-longdiffr),hubtts=Math.sqrt(p1+p2*p3)}function calculate_dtts(data){var json=$.parseJSON(data);return slantrange=dtts_range(json.satlon,json.remlat,json.remlon),hubtts=dtts_hrange(json.satlon,json.hublat,json.hublon),remtts=slantrange/299,792458,dtts=remtts-hubtts/299,792458,1e3*dtts}function RGBColorParser(f){this.ok=!1,"#"==f.charAt(0)&&(f=f.substr(1,6)),f=f.replace(/ /g,""),f=f.toLowerCase();var b={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"};for(var g in b)f==g&&(f=b[g]);for(var e=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(i){return[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(i){return[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(i){return[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]}}],c=0;c<e.length;c++){var j=e[c].re,a=e[c].process,h=j.exec(f);if(h){var d=a(h);this.r=d[0],this.g=d[1],this.b=d[2],this.ok=!0}}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var l=this.r.toString(16),k=this.g.toString(16),i=this.b.toString(16);return 1==l.length&&(l="0"+l),1==k.length&&(k="0"+k),1==i.length&&(i="0"+i),"#"+l+k+i}}function printStackTrace(b){b=b||{guess:!0};var c=b.e||null,e=!!b.guess,d=new printStackTrace.implementation,a=d.run(c);return e?d.guessAnonymousFunctions(a):a}function lgc_init_info(el){return"info_div"in el?!0:"complete"==document.readyState?(el.info_div=el.parentNode.getElementsByClassName("info").item(0),els=el.info_div.getElementsByTagName("SPAN"),el.info_x=els[0],el.info_y=els[1],el.min_x=Number(el.getAttribute("min_x")),el.range_x=Number(el.getAttribute("max_x"))-el.min_x,el.min_y=Number(el.getAttribute("min_y")),el.range_y=Number(el.getAttribute("max_y"))-el.min_y,!0):!1}function lgc_move(info_div){"5px"==info_div.style.left?(info_div.style.left="",info_div.style.right="5px"):(info_div.style.right="",info_div.style.left="5px")}function lgc_disable_info(el){"info_div"in el&&(el.info_div.style.display="none")}function lgc_update_info(el,event){lgc_init_info(el)&&(r=el.getBoundingClientRect(),x=Math.floor(event.clientX-r.left),y=Math.floor(event.clientY-r.top),ts=Math.floor(x*el.range_x/(el.width-1))+el.min_x,d=new Date,d.setTime(1e3*ts),el.info_x.innerHTML=d.strftime(el.range_x<172800?"%H:%M":"%d %b<br/>%H:%M"),y_val=(el.height-1-y)*el.range_y/(el.height-1)+el.min_y,y_val=Math.abs(y_val)>100?Math.floor(y_val):Math.floor(10*y_val)/10,el.info_y.innerHTML=y_val,el.info_div.style.display="")}function lgc_scroll_graph(el,x){if(lgc_init_info(el)){for(r=el.getBoundingClientRect(),x-=r.left,x=Math.floor(x*el.range_x/(el.width-1))+el.min_x;(el=el.parentNode)&&"FORM"!=el.nodeName;);el.firstChild.nextSibling.value=x,$("#line_graph").submit()}}function lgc_enable_selector(el){el2=el.previousSibling.previousSibling,"DIV"!=el2.nodeName&&(el.style.display="none"),el2.style.display=""}function lgc_alignY(){for(els=document.querySelectorAll("td[name=line_graph_y]"),width=0,n=els.length,i=0;n>i;i++)w=parseInt(window.getComputedStyle(els[i]).width),w>width&&(width=w);for(i=0;n>i;i++)els[i].style.width=width+"px"}function ipMaskShorten(mask){for(var dec2bin=function(dec){for(var num=parseInt(dec,10),res=num.toString(2);res.length<8;)res="0"+res;return res},octets=mask.split("."),res=32,binary=dec2bin(octets[0])+dec2bin(octets[1])+dec2bin(octets[2])+dec2bin(octets[3]),i=0;32>i;i++)if("1"!=binary.substring(i,i+1)){res=i;break}return res}function supports_html5_storage(){try{return"localStorage"in window&&null!==window.localStorage}catch(e){return!1}}function tree_toggle(event){if($(event.target).hasClass("Expand")){var node=$(event.target).parent();if(!node.hasClass("ExpandLeaf")){var node_name=node.attr("id");node.hasClass("ExpandOpen")?(node.children("ul").slideUp("fast",function(){node.removeClass("ExpandOpen").addClass("ExpandClosed")}),supports_html5_storage()&&(localStorage[node_name]=1)):(node.removeClass("ExpandClosed").addClass("ExpandOpen"),node.children("ul").slideDown("fast",function(){}),supports_html5_storage()&&delete localStorage[node_name])}}}function page_refresh(){onContentLoad($.address.value())}function replaceContent(data){var jqObject=$("<div>"+data+"</div>");if(jqObject.find("#redirect_to").length)return $.address.value(jqObject.find("#redirect_to").val()),!1;if(jqObject.find("#switch_object").length){var obj=jqObject.find("#switch_object").val(),el=$("#menuitem_"+obj);if(el.length){$("#nav_tree span").removeClass("nav_selected"),$("#nav_tree .li_marker").remove(),$("#nav_tree .triangle_marker").remove(),el.addClass("nav_selected");var li_wrap=$("#"+el.attr("id").replace("item","group"));li_wrap.prepend('<div class="li_marker"></div><div class="triangle_marker"></div>'),$("#nav_tree").animate({scrollTop:$(".li_marker").offset().top},2e3)}}return jqObject.find(".contentContainer").length?($(".menuContainer").html(jqObject.find(".menuContainer").html()),$(".contentContainer").html(jqObject.find(".contentContainer").html()),jqObject.find(".xdebug-var-dump").length&&$(".contentContainer").append("<div>"+jqObject.find(".xdebug-var-dump").html()+"</div")):$(".contentContainer").html(data),!0}function onContentLoad(path,params){"undefined"==typeof params&&(params={}),$.get(path,params,function(data){replaceContent(data)&&onContentReady()})}function processTreeState(){var start=(new Date).getTime(),jsonstr=$("#tree_faults").val(),state=JSON&&JSON.parse(jsonstr)||$.parseJSON(jsonstr);$(".fail").removeClass("fail"),$(".off").removeClass("off"),$(".conf").removeClass("conf"),$(".redundant").removeClass("redundant"),$(".Content .warn").text(""),$(".Content .err").text(""),$(".running").removeClass("running");for(var i=0;i<state.length;i++){var item=$("#menuitem_"+state[i].id),children=$("#menugroup_"+state[i].id+" span"),warn=0!=state[i].warn?"+"+state[i].warn:"",err=0!=state[i].err?"+"+state[i].err:"";item.parent().find(".warn").text(warn),item.parent().find(".err").text(err),1==state[i].fail?children.addClass("fail"):2==state[i].fail?children.addClass("off"):3==state[i].fail?children.addClass("conf"):4==state[i].fail&&children.addClass("redundant"),state[i].running>0&&children.addClass("running");var time=state[i].timer,icondiv=item.closest("li").children(".Expand");if(state[i].timer?(icondiv.children("span").length||icondiv.html($("<span>").addClass("timer")),icondiv.children("span.timer").attr("data-time-left",time),icondiv.children("span.timer").attr("data-running",state[i].running)):icondiv.children("span.timer").remove(),i%100==0){var now=(new Date).getTime();console.log(i+" : "+(now-start))}}var end=(new Date).getTime();console.log("Tree state processed in: "+(end-start))}function bind_address(){$("a:not(.noaddr,.select2-search-choice-close,.ui-datepicker a, #world-map a, .dataTables_wrapper a)").address(function(){return $(this).attr("href")?$(this).attr("href").replace(/^#/,""):""})}function addDbFieldsHandlers(){$("input.db").on("keypress",function(e){if(e.ctrlKey||e.altKey||e.metaKey||e.which<32)return!0;var inp=String.fromCharCode(e.which),val=$(this).val();if(inp.match(/[\d]/)){var s=$(this).get(0).selectionStart,e=$(this).get(0).selectionEnd;e-s>0&&(val=""),val.length>4&&(val=parseFloat(val).toFixed(1))}else-1==val.indexOf(".")&&(val+="."),e.preventDefault();$(this).val(val)}),$("input.db").on("blur",function(){var val=$(this).val();val=parseFloat(val).toFixed(1),$(this).val(isNaN(val)?"0.0":val)})}function bind_monitoring_group_events(){}function bind_widget_handlers(){$(".allocation_stop").length&&$(".allocation_stop").click(function(){var allocation_id=$(this).attr("data-allocation-id");$.get("/frequency_plan/"+allocation_id+"/delete/",null,function(){updateTick()})}),$(".allocation_disable").length&&$(".allocation_disable").click(function(){var allocation_id=$(this).attr("data-allocation-id");$.get("/frequency_plan/"+allocation_id+"/disable/",null,function(){updateTick()})})}function bindDataTables(){{var object=$(".datatables:first"),columns=object.find("th").map(function(){return{data:$(this).attr("data-name")}});object.DataTable({scrollY:600,dom:"CfrtiS",ajax:"/remote/?update",serverSide:!0,deferRender:!0,columns:columns,initComplete:function(){$(".dataTables_scrollFoot").prependTo(".dataTables_scroll"),$(".dataTables_scrollBody tfoot").hide(),$(".datatables tfoot th").each(function(index){var th=$($(".datatables thead th")[index]),title=th.text();if(console.log(th.width()),0!=index){var input=$('<input type="text" placeholder="'+title+'" />');input.width(th.width()),$(this).append(input)}});var tables=object.DataTable();tables.columns().eq(0).each(function(colIdx){$("input",tables.column(colIdx).footer()).on("keyup change",function(){tables.column(colIdx).search(this.value).draw()})})}})}}function onContentReady(){function tdma_calc(slots_num,slot_size_bursts,sym_rate,mod_fec,inform_rate,direction){var mod=0,fec=0;0==mod_fec?(mod=2,fec=2/3):1==mod_fec?(mod=2,fec=5/6):2==mod_fec?(mod=3,fec=2/3):3==mod_fec?(mod=3,fec=5/6):4==mod_fec?(mod=1,fec=2/3):5==mod_fec&&(mod=1,fec=5/6),"inform_rate"==direction&&(sym_rate=inform_rate/(mod*fec));var total_slot_size_bytes,efficient_slot_size_bytes,slot_gap_symbols,slot_data_fec_symbols,slot_length,slot_duration,frame_duration,slot_rate,total_rate,efficient_slot_rate,efficient_total_rate,packet_splice_bytes=2,bytes_per_svlan=2,slot_begin_size_symbols=5,slot_unique_word_symbols=11,slot_end_symbols=5;return total_slot_size_bytes=0==mod_fec||2==mod_fec||4==mod_fec?32*slot_size_bursts:1==mod_fec||3==mod_fec||5==mod_fec?40*slot_size_bursts:0,efficient_slot_size_bytes=total_slot_size_bytes>0&&packet_splice_bytes>0&&bytes_per_svlan>0?total_slot_size_bytes-packet_splice_bytes-bytes_per_svlan:0,slot_gap_symbols=sym_rate>0?Math.floor(sym_rate/256)+10:0,slot_data_fec_symbols=total_slot_size_bytes>0?Math.ceil(8*total_slot_size_bytes/(mod*fec)):0,slot_length=slot_gap_symbols>0&&slot_begin_size_symbols>0&&slot_unique_word_symbols>0&&slot_data_fec_symbols>0&&slot_end_symbols>0?slot_gap_symbols+slot_begin_size_symbols+slot_unique_word_symbols+slot_data_fec_symbols+slot_end_symbols:0,slot_duration=slot_length>0&&sym_rate>0?slot_length/sym_rate:0,frame_duration=slots_num>0&&slot_duration>0?slots_num*slot_duration:0,$("#calc_tdma_slot_size").html(slot_length>0?slot_length+" symbols":""),$("#calc_tdma_slot_length").html(slot_duration>0?slot_duration.toFixed(3)+" ms":""),$("#calc_tdma_frame_length").html(frame_duration>0?frame_duration.toFixed(3)+" ms":""),slot_rate=total_slot_size_bytes>0&&frame_duration>0?8*total_slot_size_bytes/frame_duration:0,total_rate="sym_rate"==direction?sym_rate>0&&fec>0&&mod>0?sym_rate*fec*mod:0:$("#tdma_calc_total_rate").val(),efficient_slot_rate=efficient_slot_size_bytes>0&&frame_duration>0?8*efficient_slot_size_bytes/frame_duration:0,efficient_total_rate=efficient_slot_rate>0&&slots_num>0?efficient_slot_rate*slots_num:0,$("#tdma_calc_slot_rate").html(slot_rate>0?slot_rate.toFixed(3)+" kbit/s":""),"sym_rate"==direction?$("#tdma_calc_total_rate").val(total_rate>0?total_rate.toFixed(3):""):"inform_rate"==direction&&$("#calc_tdma_sym_rate").val(sym_rate>0?sym_rate.toFixed(3):""),$("#tdma_calc_slot_rate_efficient").html(efficient_slot_rate>0?efficient_slot_rate.toFixed(3)+" kbit/s":""),$("#tdma_calc_total_rate_efficient").html(efficient_total_rate>0?efficient_total_rate.toFixed(3)+" kbit/s":""),!0}unsubscribeAll(),$(".controller_insert").prop("disabled",!0).addClass("disabled"),setTimeout(function(){$(".controller_insert").prop("disabled",!1).removeClass("disabled")},3e3),$(".notice:not(.log .notice)").delay(3e3).hide("slide",{direction:"up"},200),$(".faketab").length&&$(".faketab").click(function(){var addr=$(this).attr("data-url");$.address.value(addr)}),$(".tab-content").addClass("clearfix").not(":first").hide(),$("ul.tabs").each(function(){var current=$(this).find("li.current");current.length<1&&$(this).find("li:first").addClass("current"),current=$(this).find("li.current span").attr("alt"),$(current).show()});var hash=$.address.hash();hash&&"tab"==hash.substring(0,3)&&$("ul.tabs").find("li span[alt=#"+hash+"]").click();var flag_ihelp;$(".ihelp").mouseenter(function(){flag_ihelp=!0;var selected=$(this),offset=selected.offset(),param_title=selected.attr("id");param_title=param_title.replace(/ihelp-/g,"").replace(/[\[]/g,"_").replace(/[\]]/g,"");var obj=[{what:"ihelp",datasrc:param_title,from:0,to:0}],req=JSON.stringify(obj?obj:"");$.ajax({url:"/update/",type:"POST",data:{req:req},success:function(data){""!=data&&flag_ihelp&&$(".ihelp-message").css({top:offset.top,left:offset.left+20}).html(data).show()}})}),$("body").on("mouseleave",".ihelp",function(){flag_ihelp=!1,$(".ihelp-message").hide()}),$("form").off("submit").on("submit",function(){var url=$(this).attr("action");url||(url=$.address.path());var form=$(this);if(validate($(this))){for(var postdata=form.serializeArray(),unchecked=$(this).find("input:checkbox:not(:checked)"),i=0;i<unchecked.length;i++)postdata.push({name:$(unchecked[i]).attr("name"),value:0});$.post(url,postdata,function(data){var jqObject=$("<div>"+data+"</div>");return jqObject.find("#redirect_to").length?void $.address.value(jqObject.find("#redirect_to").val()):jqObject.find("#redirect_page").length?void(window.location=jqObject.find("#redirect_page").val()):(need_load=!1,$.address.value(url),need_load=!0,replaceContent(data),void onContentReady())}).error(function(jqXHR,textStatus,errorThrown){replaceContent('<div class=".contentContainer">Ajax form submit error: '+errorThrown+" at "+url+"</div>")})}return!1}),bind_address();var fec_list_change=function(){var s1=[0,1,2,3,4],s2_sf=[5,6,7,8,9,10,11,12,13,15,16,17,18,19,21,22,23,24,25],s2_lf=[7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26],s2_mode=$("#dvb_mode input:checked").val(),frames_mode=$(".tdmtx_s2mode input:checked").val(),shown=[];shown=0==s2_mode?s1:2==frames_mode?s2_sf:s2_lf;for(var selectorlist=["select[name=controlleredit\\[tdmtx_fec\\]]","select[name=controlleredit\\[acm_fec2\\]]","select[name=controlleredit\\[acm_fec3\\]]","select[name=controlleredit\\[acm_fec4\\]]"],j=0;j<selectorlist.length;j++){var sel=$(selectorlist[j]),selopt=sel.find("option");selopt.hide();for(var now_selected=parseInt(sel.find("option:checked").val(),10),i=0;i<shown.length;i++)selopt.filter("option[value="+shown[i]+"]").show();-1==shown.indexOf(now_selected)&&sel.val(shown[0])}};if($("#dvb_mode input").change(function(){0!=$(this).val()?$(".tdmtx_s2mode").show():$(".tdmtx_s2mode").hide(),fec_list_change()}),fec_list_change(),$(".tdmtx_s2mode").change(function(){fec_list_change()}),$("table.sortable").each(function(){$(this).find("thead th").each(function(index){$(this).attr("rel",index)}),$(this).find("th,td").each(function(){$(this).attr("value",$(this).text())})}),$(".controller_delete").click(function(){var id=$(this).attr("data-item");return $.post("/controller_configure/"+id+"/delete/",function(data){"ok"==data.replace(/\s+/,"")?$.address.value("/controller_configure/"):alert(data)}),!1}),$(".controller_insert").one("click",function(){var self=$(this);if(!self.prop("disabled"))return self.prop("disabled",!0).addClass("disabled"),$.post("/controller_configure/insert/",$("#addcontroller").serializeArray(),function(data){"ok"==data.replace(/\s+/,"")?page_refresh():$("#adderror").html(data)}),!1}),$(".policy_check").length){var typestr="input[name=policyrule\\[action\\]]";$(typestr).change(function(){var val=$(typestr+":checked").val();0==val?($(".policy_check").show(),$(".policy_action").hide()):($(".policy_check").hide(),$(".policy_action").show())}),$(typestr).change();var tstr="select[name=policyrule\\[check_type\\]]";$(tstr).change(function(){var val=$(tstr).val();1==val||5==val||12==val?($(".policy_ch_equal").show(),$(".policy_range").hide(),$(".policy_ip").hide()):6==val||7==val?($(".policy_ch_equal").hide(),$(".policy_range").hide(),$(".policy_ip").show()):($(".policy_ch_equal").hide(),$(".policy_range").show(),$(".policy_ip").hide())}),$(tstr).change();var tstr2="select[name=policyrule\\[action_type\\]]";$(tstr2).change(function(){var val=$(tstr2).val();18==val?($(".policy_equal").hide(),$(".policy_select").show(),$(".policy_acm").hide()):19==val?($(".policy_equal").show(),$(".policy_select").hide(),$(".policy_acm").hide()):23==val?($(".policy_equal").hide(),$(".policy_select").hide(),$(".policy_acm").show()):($(".policy_equal").hide(),$(".policy_select").hide(),$(".policy_acm").hide())}),$(tstr2).change()}if($("#leavestatemsg").length&&bind_monitoring_group_events(),$("#routing_st_type").length){var typestr="#routing_st_type input";$(typestr).change(function(){var all=["routing_address","routing_gw","routing_mc_stream","routing_mc_static","routing_hubside","routing_la","routing_remote","routing_local","routing_con_st_qos","routing_st_con_qos","routing_st_side","routing_priv","routing_st_routing","routing_st_bridge","routing_multicast_tx"],show=[],val=$(typestr+":checked").val();switch(val){case"rt_ip_station":show=["routing_con_st_qos","routing_st_side","routing_address","routing_la","routing_hubside","routing_priv","routing_st_routing"];break;case"rt_static_station":show=["routing_con_st_qos","routing_st_side","routing_address","routing_gw","routing_hubside","routing_priv","routing_st_routing"];break;case"rt_multicast_rx":show=["routing_mc_static","routing_address","routing_gw","routing_mc_stream"];break;case"rt_multicast_tx":show=["routing_st_side","routing_address","routing_multicast_tx","routing_hubside","routing_st_routing"];break;case"rt_backroute":show=["routing_st_con_qos","routing_st_side","routing_address","routing_hubside","routing_st_routing"];break;case"rt_station_station":show=["routing_remote","routing_local","routing_hubside"];break;case"rt_bridge_station":show=["routing_con_st_qos","routing_hubside","routing_st_bridge"]}for(var i=0;i<all.length;i++)$("#"+all[i]).hide();for(var i=0;i<show.length;i++)$("#"+show[i]).show()}),$(typestr).change()}if($("#routing_con_type").length){var typestr="#routing_con_type input";$(typestr).change(function(){var all=["routing_address","routing_gw","routing_multicast_rx","routing_multicast_tx","routing_priv","routing_la","routing_vlan","routing_mc_static"],show=[],val=$(typestr+":checked").val();switch(val){case"rt_ip_con":show=["routing_address","routing_la","routing_priv","routing_vlan"];break;case"rt_static_con":show=["routing_address","routing_gw","routing_priv","routing_vlan"];break;case"rt_multicast_rx":show=["routing_multicast_rx","routing_address","routing_gw","routing_mc_static"];break;case"rt_multicast_tx":show=["routing_multicast_tx","routing_address","routing_vlan"]}for(var i=0;i<all.length;i++)$("#"+all[i]).hide();for(var i=0;i<show.length;i++)$("#"+show[i]).show()}),$(typestr).change()}$(".mr_what").length&&($(".mr_cond").change(function(){$("#value").hide(),(0==$(this).val()||1==$(this).val())&&$("#value").show()}),$(".mr_what").change(function(){what=$(".mr_what").val(),$("#value").hide(),$("#cond_value").hide(),$("#faults").hide(),$("#rx_faults").hide(),$("#tx_faults").hide(),$("#cond_faults").hide(),0==what?($("#faults").show(),$("#cond_faults").show()):1==what?($("#rx_faults").show(),$("#cond_faults").show()):2==what?($("#tx_faults").show(),$("#cond_faults").show()):($("#cond_value").show(),$(".mr_cond").change())}),$(".mr_what").change());var tstr3="input[name=remoteroute\\[type\\]]";if($(tstr3).length&&($(tstr3).change(function(){var val=$(tstr3+":checked").val();$("#gw_addr").hide(),$("#ip_addr1").hide(),$("#ip_addr2").hide(),$("#unicast").hide(),$("#mcrx").hide(),$("#net_addr").show(),"remote_route"==val?($("#unicast").show(),$("#gw_addr").show()):"remote_address"==val?($("#ip_addr1").show(),$("#ip_addr2").show(),$("#unicast").show(),$("#net_addr").hide()):"multicast_rx"==val&&$("#mcrx").show()}),$(tstr3).change()),$("#shaper").length)for(var types=["up","mir","lower","cbq","night"],i=0;i<types.length;i++){var typename="input[name=shaper\\["+types[i]+"_enable\\]]",mytype=types[i],changefunc=function(item,cb){return function(){$(cb).is(":checked")?$("#shaper_"+item).show():$("#shaper_"+item).hide()}};$(typename).change(changefunc(mytype,typename)),$(typename).change()}$(".roleselector").length&&($(".roleselector").change(function(){var roles=JSON.parse($("#u_roles").text()),role_id=$(".roleselector").val();$("#roletable .cb_userright").each(function(){var rolename=$(this).attr("name").match(/\[(.+)\]/)[1];-1!=$.inArray(rolename,roles[role_id])?$(this).prop("checked",!0):$(this).prop("checked",!1)})}),$("#u_set_all").click(function(){$("#roletable .cb_userright").prop("checked",!0)}),$("#u_set_none").click(function(){$("#roletable .cb_userright").prop("checked",!1)}),$("#u_set_invert").click(function(){$("#roletable .cb_userright").each(function(){$(this).prop("checked",!$(this).prop("checked"))})}));var autnm=$("#remote\\[auto_num\\]");if(autnm.length&&(autnm.change(function(){$(this).prop("checked")?$("#remote_number").hide():$("#remote_number").show()}),autnm.change()),autnm=$("#controlleredit\\[hubless_auto_num\\]"),autnm.length&&(autnm.change(function(){autnm.is(":checked")?$("#remote_number").hide():$("#remote_number").show()}),autnm.change()),$(".script_button").length&&$(".script_button").click(function(){$(".script_button").removeClass("inset"),$(this).addClass("inset")}),$("#corestart").length&&(subscribe({what:"core"}),$("#corestart button").click(function(){var cmd=$(this).attr("data-cmd").split("_");updateTick([{what:"core",pid:cmd[0],cmd:cmd[1]},{what:"navigation"}])})),$("#world-map").length&&!$(".leaflet-map-pane").length){worldMap=new L.Map("world-map",{center:[0,0],minZoom:1,maxZoom:7});var offlineTiles=L.tileLayer("/images/tiles/{z}/{x}/{y}.jpg",{tms:!0});worldMap.addLayer(offlineTiles);var map_graticule=null;$("#world-map-graticulize").click(function(){map_graticule||(map_graticule=L.graticule({interval:10,style:{color:"#777",opacity:1,fillColor:"#ccf",fillOpacity:0,weight:.5}})),$(this).is(":checked")?map_graticule.addTo(worldMap):worldMap.removeLayer(map_graticule)}),L.control.coordinates({useDMS:!0,labelTemplateLat:"N {y}",labelTemplateLng:"E {x}",useLatLngOrder:!0}).addTo(worldMap),iconDown=L.icon({iconUrl:"/css/images/marker_rounded_red.png",iconSize:[16,16],iconAnchor:[8,16],popupAnchor:[0,-8],className:"down"}),iconUp=L.icon({iconUrl:"/css/images/marker_rounded_yellow_green.png",iconSize:[16,16],iconAnchor:[8,16],popupAnchor:[0,-8],className:"up"});var m=JSON.parse($("#world-map-markers").text());markersLatLng=[],worldMapMarkers={};var markers_arr=[];markersCluster=new L.MarkerClusterGroup({showCoverageOnHover:!1,maxClusterRadius:15,spiderfyOnMaxZoom:!0,removeOutsideVisibleBounds:!1,zoomToBoundsOnClick:!1,iconCreateFunction:function(cluster){var markersQty=cluster.getChildCount();return new L.DivIcon({html:"<div><span>"+markersQty+"</span></div>",className:"marker-cluster marker-cluster-medium",iconSize:new L.Point(20,20)})}});for(var key in m){var icon=iconUp;1==m[key].state&&(icon=iconDown);var marker=new L.marker(L.latLng(m[key].latlng[0],m[key].latlng[1]),{icon:icon}).bindPopup('<a href="/remote_dashboard/'+key+'/" class="remote-link">'+m[key].name+"</a>");markersCluster.addLayer(marker),markersLatLng.push(m[key].latlng),worldMapMarkers[key]=marker,markers_arr.push(marker)}remotesMarkers=L.layerGroup(markers_arr),worldMap.addLayer(markersCluster),markersLatLng.length>0&&worldMap.fitBounds(markersLatLng);var MapResizeFunction=function(){if("fixed"!=$("#world-map").css("position")){var mapToolWidth=$(".topContainer.rightColumn").width(),mapToolHeight=$(window).height(),mapToolMarginLeft=$(".topContainer.rightColumn").offset().left;$("#world-map").css({position:"fixed",height:mapToolHeight-31,width:mapToolWidth,left:mapToolMarginLeft,top:0,"z-index":1e4}),markersLatLng.length>0&&worldMap.invalidateSize().fitBounds(markersLatLng),$("#world-map-tool").css({left:mapToolMarginLeft+mapToolWidth/2-$("#world-map-tool").outerWidth()/2}).show(),$(".world-map-tool-switcher").css({left:mapToolMarginLeft+mapToolWidth/2-$(".world-map-tool-switcher").outerWidth()/2}).show()}else $("#world-map").css({position:"relative",height:400,width:"100%",left:"auto",top:"auto","z-index":1e4}),$("#world-map-tool").hide(),$(".world-map-tool-switcher").hide(),markersLatLng.length>0&&worldMap.invalidateSize().fitBounds(markersLatLng)},MapFitScreenFunction=function(){markersLatLng.length>0&&worldMap.fitBounds(markersLatLng)},control=new(L.Control.extend({options:{position:"topright"},onAdd:function(){var myControls=L.DomUtil.create("div","world-map-controls"),fitScreen=L.DomUtil.create("button","world-map-fit-screen",myControls);L.DomEvent.addListener(fitScreen,"click",L.DomEvent.stopPropagation).addListener(fitScreen,"click",L.DomEvent.preventDefault).addListener(fitScreen,"click",MapFitScreenFunction),fitScreen.title="Click to fit";var fullScreenControl=(L.DomUtil.create("i","fa fa-crosshairs",fitScreen),L.DomUtil.create("button","world-map-state",myControls));L.DomEvent.addListener(fullScreenControl,"click",L.DomEvent.stopPropagation).addListener(fullScreenControl,"click",L.DomEvent.preventDefault).addListener(fullScreenControl,"click",MapResizeFunction),fullScreenControl.title="Click to expand";L.DomUtil.create("i","fa fa-expand",fullScreenControl);return myControls}}));worldMap.addControl(control),$(".leaflet-control-attribution").hide()}if($(".widgetdatasrc").each(function(){subscribe({what:"widget",datasrc:$(this).val()})}),$("#uhpgroupcommand\\[end_hm\\]").length&&update_time_calculator(),symrate_speed_calculator(),graphClickCallback=null,graphFormHandlers(),logFormHandlers(),userlogFormHandlers(),reportFormHandlers(),$(".remote_station_list").change(function(){var rid=$(this).val();updateTick([{what:"ip_and_static_list",datasrc:rid}])}),$(".remote_station_list").change(),$(".local_map_custom_ip").change(function(){$("#custom_ip").slideToggle()}),$(".local_map_custom_ip").prop("checked")?$("#custom_ip").show():$("#custom_ip").hide(),$(".droppable").length){var self=$(".droppable:first");self.droparea({instructions:"Try dragging a file here or choose below",over:"Drop file here",start:function(){},error:function(result){alert(result.error)},complete:function(result){result.error?alert(result.message):self.find(".current").html(result.message)}})}fpc||(fpc=new FrequencyPlannerControls),fpc.init(),bind_widget_handlers(),addDbFieldsHandlers(),$("input[data-validate=mask]").on("blur",function(){var val=$(this).val();val.match(/[\d]{1,3}\.[\d]{1,3}\.[\d]{1,3}\.[\d]{1,3}/)&&(val=ipMaskShorten(val)),val=(val+"").replace(/[^\d]/,""),$(this).val(val),$(this).closest("p").find()}),$("input[data-validate=mask]").on("keyup",function(){var txt=$(this).closest("p").find("span.form-horizontal-help"),mask=$(this).val();if(!(mask>32||0>mask)){var longmask=4294967295<<32-mask>>>0,longmasktext=((4278190080&longmask)>>>24).toString(10)+"."+((16711680&longmask)>>>16).toString(10)+"."+((65280&longmask)>>>8).toString(10)+"."+(255&longmask).toString(10);txt.text("Mask is "+longmasktext)}}),$(".timepicker").timepicker(),$(".priority_list").change(function(){3==$(this).val()?$(".policy_list").show():$(".policy_list").hide()}),$(".priority_list").change(),$(".multiselect").select2("destroy"),$(".multiselect").select2({width:"resolve"}),$(".multiselect_sort").select2({multiple:!0,query:function(options){var data={results:[]},list=options.element.attr("data-list"),jsondata=JSON.parse(list);data.results=jsondata,options.callback(data)},initSelection:function(element,callback){var data=JSON.parse(element.val());element.val(""),callback(data)}}).sortable({}),longlat();try{graphs={},buildgraph()}catch(e){}if($("#calculate_tdma_form").draggable(),$("#tdma_calc").click(function(){if($("#calculate_tdma_form").is(":visible"))$("#calculate_tdma_form").slideUp(100);else{var slots_num=$("#controlleredit\\[tdmaproto_slotsnum\\]").val(),slot_size_bursts=$("#controlleredit\\[tdmaproto_slotsize\\]").val(),sym_rate=$("#controlleredit\\[tdmrf_symrate\\]").val(),mod_fec=$("#controlleredit\\[tdmrf_fec\\]").val();$("#calc_tdma_slots_num").val(slots_num),$("#calc_tdma_slot_dimension").val(slot_size_bursts),$("#calc_tdma_sym_rate").val(sym_rate),$("#calc_tdma_mod_fec").val(mod_fec),tdma_calc(slots_num,slot_size_bursts,sym_rate,mod_fec,0,"sym_rate"),$("#calculate_tdma_form").slideDown(100)}}),$("#tdma_calc_close").click(function(){$("#calculate_tdma_form").slideUp(100)}),$("#calc_tdma_slot_dimension").change(function(){tdma_calc($("#calc_tdma_slots_num").val(),$("#calc_tdma_slot_dimension").val(),$("#calc_tdma_sym_rate").val(),$("#calc_tdma_mod_fec").val(),0,"sym_rate")}),$("#calc_tdma_mod_fec").change(function(){tdma_calc($("#calc_tdma_slots_num").val(),$("#calc_tdma_slot_dimension").val(),$("#calc_tdma_sym_rate").val(),$("#calc_tdma_mod_fec").val(),0,"sym_rate")
}),$("#calc_tdma_slots_num").keyup(function(){tdma_calc($("#calc_tdma_slots_num").val(),$("#calc_tdma_slot_dimension").val(),$("#calc_tdma_sym_rate").val(),$("#calc_tdma_mod_fec").val(),0,"sym_rate")}),$("#calc_tdma_sym_rate").keyup(function(){tdma_calc($("#calc_tdma_slots_num").val(),$("#calc_tdma_slot_dimension").val(),$("#calc_tdma_sym_rate").val(),$("#calc_tdma_mod_fec").val(),0,"sym_rate")}),$("#tdma_calc_total_rate").keyup(function(){tdma_calc($("#calc_tdma_slots_num").val(),$("#calc_tdma_slot_dimension").val(),0,$("#calc_tdma_mod_fec").val(),$("#tdma_calc_total_rate").val(),"inform_rate")}),$("#bandwidth\\[start_frequency\\]").length&&$("#bandwidth\\[start_frequency\\]").autoNumeric("init",{aSep:" ",vMin:"0",vMax:"40000000"}),$("#bandwidth\\[end_frequency\\]").length&&$("#bandwidth\\[end_frequency\\]").autoNumeric("init",{aSep:" ",vMin:"0",vMax:"40000000"}),$("#bandwidth\\[satellite_translation\\]").length&&$("#bandwidth\\[satellite_translation\\]").autoNumeric("init",{aSep:" ",vMin:"0",vMax:"40000000"}),$(".frequency_separated").autoNumeric("init",{aSep:" ",vMin:"0",vMax:"40000000"}),$("#controlleredit\\[tdmtx_freq\\]").length&&$("body").on("keyup","#controlleredit\\[tdmtx_freq\\]",function(){var tdmtx_freq=$("#controlleredit\\[tdmtx_freq\\]").val();if(tdmtx_freq=tdmtx_freq.replace(/[^0-9]/g,""),tdmtx_freq>=95e4&&205e4>=tdmtx_freq||tdmtx_freq>=4e6&&7e6>=tdmtx_freq||tdmtx_freq>=107e5&&18e6>=tdmtx_freq||tdmtx_freq>=265e5&&4e7>=tdmtx_freq){var bw_list_string=$("#bw_list").html();if("[]"!=bw_list_string){var bw_list=$.parseJSON(bw_list_string),satellite_translation=0;for(bw_item in bw_list){var start_frequency=Number(bw_list[bw_item].start_frequency),end_frequency=Number(bw_list[bw_item].end_frequency);tdmtx_freq>=start_frequency&&end_frequency>=tdmtx_freq&&(satellite_translation=bw_list[bw_item].satellite_translation)}var tdmrx_freq=tdmtx_freq-satellite_translation;tdmrx_freq>0?$("#controlleredit\\[tdmrx_freq\\]").autoNumeric("set",tdmrx_freq):$("#controlleredit\\[tdmrx_freq\\]").val("")}}}),$(".tdma_freq").length&&$("body").on("keyup",".tdma_freq",function(){var id=$(this).attr("id"),regex=/tdmrf_txfreq/g;if(regex.test(id)){var num=id.replace(/[^0-9]/g,""),tdma_rx_freq_id="#controlleredit\\[tdmrf_rxfreq_"+num+"\\]",tdma_tx_freq=$(this).val();if(tdma_tx_freq=tdma_tx_freq.replace(/[^0-9]/g,""),tdma_tx_freq>=95e4&&205e4>=tdma_tx_freq||tdma_tx_freq>=4e6&&7e6>=tdma_tx_freq||tdma_tx_freq>=107e5&&18e6>=tdma_tx_freq||tdma_tx_freq>=265e5&&4e7>=tdma_tx_freq){var bw_list_string=$("#bw_list").html();if("[]"!=bw_list_string){var bw_list=$.parseJSON(bw_list_string),sat_trans=0;for(bw_item in bw_list){var start_frequency=Number(bw_list[bw_item].start_frequency),end_frequency=Number(bw_list[bw_item].end_frequency),satellite_translation=Number(bw_list[bw_item].satellite_translation);tdma_tx_freq>=start_frequency&&end_frequency>=tdma_tx_freq&&(sat_trans=satellite_translation)}var tdma_rx_freq=tdma_tx_freq-sat_trans;tdma_rx_freq>0?$(tdma_rx_freq_id).autoNumeric("set",tdma_rx_freq):$(tdma_rx_freq_id).val("")}}}}),$('select[id*="controlleredit\\[acm_fec"]').length){var get_cn_limit=function(acm_id){switch(acm_id){case 9:cn_limit=3.3;break;case 10:cn_limit=4.2;break;case 11:cn_limit=5;break;case 12:cn_limit=5.5;break;case 13:cn_limit=6.4;break;case 14:cn_limit=6.5;break;case 15:cn_limit=7.6;break;case 16:cn_limit=7.5;break;case 17:cn_limit=8.6;break;case 18:cn_limit=9.9;break;case 19:cn_limit=11.3;break;case 20:cn_limit=11.3;break;case 21:cn_limit=10.3;break;case 22:cn_limit=11;break;case 23:cn_limit=11.8;break;case 24:cn_limit=12.2;break;case 25:cn_limit=13.4;break;case 26:cn_limit=13.5;break;default:cn_limit=""}return cn_limit};$('select[id*="controlleredit\\[acm_fec"]').change(function(){var acm_id=Number($(this).val()),cn_limit=get_cn_limit(acm_id);$(this).parent().siblings(".form-horizontal-help").html("C/N limit: "+(cn_limit+.1*Number($("#controlleredit\\[acm_cnremote\\]").val()))+" dB")}),$("#controlleredit\\[acm_cnremote\\]").blur(function(){$('select[id*="controlleredit\\[acm_fec"]').each(function(){var acm_id=Number($(this).val()),cn_limit=get_cn_limit(acm_id);$(this).parent().siblings(".form-horizontal-help").html("C/N limit: "+(cn_limit+.1*Number($("#controlleredit\\[acm_cnremote\\]").val()))+" dB")})})}if("undefined"!=typeof worldMap&&worldMap.on("popupopen",function(){$("a.remote-link").address(function(){return $(this).attr("href")?$(this).attr("href").replace(/^#/,""):""})}),$("#world-map-cloudiness").length&&$("#world-map-cloudiness").change(function(){"undefined"==typeof OpenWeatherMap_Clouds&&(OpenWeatherMap_Clouds=L.tileLayer("http://{s}.tile.openweathermap.org/map/clouds/{z}/{x}/{y}.png",{attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.99})),$("#world-map-cloudiness").is(":checked")?worldMap.addLayer(OpenWeatherMap_Clouds):worldMap.removeLayer(OpenWeatherMap_Clouds)}),$("#world-map-clusterize").length&&$("#world-map-clusterize").change(function(){$("#world-map-clusterize").is(":checked")?worldMap.removeLayer(remotesMarkers).addLayer(markersCluster):worldMap.removeLayer(markersCluster).addLayer(remotesMarkers)}),$(".world-map-tool-switcher").length&&$(".world-map-tool-switcher").click(function(){$(".world-map-tool-switcher").hasClass("opened")?($(".world-map-tool-switcher").removeClass("opened").addClass("closed"),$(".world-map-tool-switcher").animate({top:"-=39"},200),$("#world-map-tool").animate({height:2},200,function(){$(".world-map-tool-switcher i").removeClass("fa-caret-up").addClass("fa-caret-down")}),$("#world-map-tool-items").css({visibility:"hidden"})):$(".world-map-tool-switcher").hasClass("closed")&&($(".world-map-tool-switcher").removeClass("closed").addClass("opened"),$(".world-map-tool-switcher").animate({top:"+=39"},200,function(){$("#world-map-tool-items").css({visibility:"visible"})}),$("#world-map-tool").animate({height:41},200,function(){$(".world-map-tool-switcher i").removeClass("fa-caret-down").addClass("fa-caret-up")}))}),$("#world-map-tool").length&&$(".world-map-tool-item").click(function(){if($(".world-map-tool-item").removeClass("selected"),$(this).addClass("selected"),$(this).hasClass("world-map-tool-item-weather")&&$.get("/weather/","").done(function(data){var json=$.parseJSON(data);for(remote_id in worldMapMarkers)iconWeather=L.icon({iconUrl:getWeatherIcon(json[remote_id].icon),iconSize:[16,16],iconAnchor:[8,8],popupAnchor:[0,-4]}),worldMapMarkers[remote_id].setIcon(iconWeather),worldMapMarkers[remote_id].bindPopup(json[remote_id].weather_info)}),$(this).hasClass("world-map-tool-item-offline")){var current_markers=$("#world-map-markers").text(),updated_markers_parsed=$.parseJSON(updated_markers),current_markers_parsed=$.parseJSON(current_markers);for(var key in current_markers_parsed)key in updated_markers_parsed||worldMap.removeLayer(worldMapMarkers[key]),key in updated_markers_parsed&&(worldMapMarkers[key].bindPopup('<a href="/remote_dashboard/'+key+'/" class="remote-link">'+updated_markers_parsed[key].name+"</a>"),worldMapMarkers[key].setIcon(1==updated_markers_parsed[key].state?iconDown:iconUp));for(var key in updated_markers_parsed)if(!(key in current_markers_parsed)){var icon=iconUp;1==updated_markers_parsed[key].state&&(icon=iconDown);var marker=new L.marker(L.latLng(updated_markers_parsed[key].latlng[0],updated_markers_parsed[key].latlng[1]),{icon:icon}).bindPopup('<a href="/remote_dashboard/'+key+'/" class="remote-link">'+updated_markers_parsed[key].name+"</a>");worldMapMarkers[key]=marker,marker.addTo(worldMap)}}}),$("#uhpcommand\\[dtts_source\\]").length&&$("#uhpcommand\\[dtts_source\\]").change(function(){var dtts_source=$(this).val();if(2==dtts_source){var dtts_value=calculate_dtts($("#uhpcommand\\[latlon\\]").val());$("#uhpcommand\\[dtts_source\\]").after('<input inline="1" size="5" data-validate="int" name="uhpcommand[dtts_value]" id="uhpcommand[dtts_value]" type="text" value="0"> <span>&mu;S (recomended '+dtts_value.toFixed(0)+" &plusmn; 100, &mu;S)</span>")}else $("#uhpcommand\\[dtts_source\\]").nextAll().remove("")}),bindDataTables(),$("#uhpcommand\\[tlc_control\\]").length&&$("#uhpcommand\\[tlc_control\\]").change(function(){var tlc_control=$(this).val();2==tlc_control?$("#uhpcommand\\[set_max_lvl_section\\]").show():$("#uhpcommand\\[set_max_lvl_section\\]").hide()}),$("#nmssettings\\[api_token\\]").length&&$("#nmssettings\\[api_token_generate\\]").click(function(){$("#nmssettings\\[api_token\\]").val(randomStr(64))}),$("#acm_stat").length){var width=$("#acm_stat").width(),g_offset=($("#acm_stat").height(),$("#groups").offset()),cnvs_offset=$("#acm_stat_canvas").offset();$("#acm_stat_canvas").attr("width",width),$("#acm_stat_canvas").attr("height",g_offset.top-cnvs_offset.top-60);var cnvs=document.getElementById("acm_stat_canvas"),acm_data=$.parseJSON($("#acm_stat_data").html());asv=new AcmStat(cnvs,acm_data)}$("input[name=monitoringgroup\\[is_state\\]]").length&&$("input[name=monitoringgroup\\[is_state\\]]").change(function(){var group_type=$(this).val();0==group_type?($("label[for=monitoringgroup\\[msg\\]]").html("Event fire message"),$("#monitoringgroup\\[leave_msg\\]").closest("p").hide(),$("#monitoringgroup\\[leave_msg\\]").val("")):1==group_type&&($("label[for=monitoringgroup\\[msg\\]]").html("Enter state message"),$("#monitoringgroup\\[leave_msg\\]").closest("p").show())}),$(".es_btn").length&&$(".es_btn").click(function(){var es_btn=$(this),command=es_btn.data("command"),ids=[];ids.push(es_btn.data("id"));var network_id=es_btn.data("net_id");console.log(es_btn.data("types"));var types=es_btn.data("types")+"";if(types=types.split(","),es_btn.hasClass("updating")){es_btn.removeClass("updating").find("i").removeClass("fa-spin");var msg={command:8};ws_send(msg)}else{7==command&&es_btn.addClass("updating").find("i").addClass("fa-spin");for(var item in types){var msg={command:command,ids:ids,network_id:network_id,type:Number(types[item])};console.log(msg),ws_send(msg)}}}),$("#redundancy\\[enabled\\]").length&&$("#redundancy\\[enabled\\]").change(function(){$(this).is(":checked")?($("#redundancy\\[name\\]").prop("disabled",!1),$("#redundancy\\[address\\]").prop("disabled",!1),$("#redundancy\\[redundant_to\\]").prop("disabled",!1),$("#redundancy\\[hubless_serial_num\\]").prop("disabled",!1),$("#redundancy\\[redundancy_enabled\\]").prop("disabled",!1),$("#redundancy\\[fault_timeout\\]").prop("disabled",!1),$("#redundancy\\[link_timeout\\]").prop("disabled",!1)):($("#redundancy\\[name\\]").prop("disabled",!0),$("#redundancy\\[address\\]").prop("disabled",!0),$("#redundancy\\[redundant_to\\]").prop("disabled",!0),$("#redundancy\\[hubless_serial_num\\]").prop("disabled",!0),$("#redundancy\\[redundancy_enabled\\]").prop("disabled",!0),$("#redundancy\\[fault_timeout\\]").prop("disabled",!0),$("#redundancy\\[link_timeout\\]").prop("disabled",!0))})}function ws_create(){null===ws?ws=new WebSocket("ws://10.0.0.49/ws/"):ws.readyState>1&&(ws=new WebSocket("ws://10.0.0.49/ws/")),ws.onopen=function(){for(var i=0;i<ws_queue.length;i++)ws.send(JSON.stringify(ws_queue[i]));ws_queue=[]},ws.onmessage=function(event){var data=$.parseJSON(event.data);if(console.log(data),1==data.status)if(11==data.type){var src=$(".widgetdatasrc[value*='shaper']").val();src=src.replace(/WidgetRemoteGraph:/g,""),src=src.replace(/#.*/g,"");var points=JSON.stringify([[Math.floor(moment().utc().valueOf()/1e3),data.current_cir,data.current_bw,data.low_speed,data.med_speed,data.high_speed]]);pushtograph(src,points,"")}else for(item in data)$("."+item).length&&$("."+item).html(data[item]),$("."+item+" + .ext_stat_hint .ext_stat_updated").html(moment().format("YYYY-MM-DD HH:mm:ss"))}}function ws_send(msg){ws_create(),1==ws.readyState?ws.send(JSON.stringify(msg)):0==ws.readyState&&ws_queue.push(msg)}function getWeatherIcon(num){var iconList={101:"weather.png",201:"weather-moon.png",102:"weather-cloudy.png",202:"weather-moon-clouds.png",103:"weather-cloud.png",203:"weather-cloud.png",104:"weather-clouds.png",204:"weather-clouds.png",109:"weather-rain.png",209:"weather-rain.png",110:"weather-rain-little.png",210:"weather-rain-little.png",111:"weather-lightning.png",211:"weather-lightning.png",113:"weather-snow.png",213:"weather-snow.png",150:"weather-fog.png",250:"weather-fog.png",10000:"question_sign.png"};return"undefined"==typeof iconList[num]&&(iconList[num]="question_sign.png"),"/images/icons/weather/"+iconList[num]}function update_time_calculator(){var end_hm=$("#uhpgroupcommand\\[end_hm\\]"),start_hm=$("#uhpgroupcommand\\[start_hm\\]"),repeat_count=$("#uhpgroupcommand\\[repeat_count\\]"),repeat_interval=$("#uhpgroupcommand\\[repeat_interval\\]"),speed=$("#uhpgroupcommand\\[transmission_speed\\]"),onParameterChange=function(){var spd=parseInt(speed.val(),10);0==spd&&(spd=512);var st=start_hm.val().split(":"),start=Date.now().set({hour:parseInt(st[0],10),minute:parseInt(st[1],10)}),send_duration=Math.ceil(512/spd*10/60),rc=repeat_count.val(),ri=repeat_interval.val(),duration=rc*send_duration+(rc-1)*ri;start.addMinutes(duration),end_hm.val(start.toString("HH:mm"))};repeat_count.blur(onParameterChange),repeat_interval.blur(onParameterChange),start_hm.blur(onParameterChange),speed.blur(onParameterChange),onParameterChange()}function symrate_speed_calculator(){var calc=function(inf_to_sym){var fec_dividend=[2,4,6,10,14],fec_divisor=[2,3,4,6,8],long_frames_bitrates=[0,0,0,0,0,991,991,991,1191,1325,1491,1591,1658,1770,1793,1786,1987,2236,2487,2656,2689,2650,2981,3181,3317,3541,3585],short_frames_bitrates=[0,0,0,0,0,632,765,854,1165,1299,1432,1521,1610,1743,1743,1748,1948,2148,2415,2615,2615,2598,2864,3042,3220,3486,3486],k_transform=function(fec,mode,is_short_frame){if(1==mode)var modulator_bitrate=is_short_frame?short_frames_bitrates[fec]:long_frames_bitrates[fec],result=modulator_bitrate/1e3;else var k_fec=fec_dividend[fec]/fec_divisor[fec],k_rs=187/204,result=k_fec*k_rs;return result},mode=$(".dvbmode_selector:checked").val(),fec=$(".fec_selector").val(),rolloff=$(".roloff_selector").val(),inf=$(".calc_speed").val(),symrate=$(".calc_symrate").val(),shortframe=0;2==mode&&(mode=1,shortframe=1);var bw=0;2==inf_to_sym&&(bw=$(".calc_bandwidth").val(),symrate=bw/rolloff,$(".calc_symrate").val(Math.round(symrate)),inf_to_sym=0),inf_to_sym?(symrate=inf/k_transform(fec,mode,shortframe),bw=symrate*rolloff,$(".calc_symrate").val(Math.round(symrate)),$(".calc_bandwidth").val(Math.round(bw))):(inf=symrate*k_transform(fec,mode,shortframe),bw=symrate*rolloff,$(".calc_speed").val(Math.round(inf)),$(".calc_bandwidth").val(Math.round(bw)))};$(".dvbmode_selector").change(function(){$(".roloff_selector").val(0==$(this).val()?1.3:1.2)});var modechange=function(){var sel=$(".fec_selector"),selopt=sel.find("option");if(selopt.show(),0!=$(".dvbmode_selector:checked").val()){sel.val()<5&&sel.val(5);for(var i=0;5>i;i++)$(selopt[i]).hide()}else{sel.val()>=5&&sel.val(0);for(var i=5;i<selopt.length;i++)$(selopt[i]).hide()}};$(".calc_speed").blur(function(){calc(1)}),$(".calc_symrate").blur(function(){calc(0)}),$(".calc_bandwidth").blur(function(){calc(2)}),$(".roloff_selector").blur(function(){calc(1)}),$(".fec_selector").change(function(){calc(1)}),$(".dvbmode_selector").change(function(){modechange(),calc(1)}),$(".dvbmode_selector").change()}function tree_item_click(event,selected){var el;if(el="undefined"!=typeof selected?$("#"+selected):$(this).find("span"),0!=el.length){var idarr=el.attr("id").split("_"),net_id=idarr[1],obj_type=idarr[2],obj_id=idarr[3],switchme=function(){var path="";if("contextmenu"==event.type)switch(obj_type){case"0":case"1":path="/net_configure/";break;case"2":path="/remote_configure/?depth_all=1";break;case"3":path="/remote/"+obj_id+"/update/";break;case"4":path="/controller_configure/";break;case"5":path="/controller_configure/"+obj_id+"/";break;case"6":path="/network/"}else switch(obj_type){case"0":case"1":path="/net_usage/";break;case"2":path="/remote/?depth_all=1";break;case"3":path="/remote_dashboard/"+obj_id+"/";break;case"4":path="/hub_usage/";break;case"5":path="/controller_dashboard/"+obj_id+"/";break;case"6":path="/maintenance/"}need_load=!1,$.address.value(path),need_load=!0,onContentLoad(path,{net_id:net_id,obj_type:obj_type,obj_id:obj_id}),current_network=net_id};event&&switchme(),$("#nav_tree span").removeClass("nav_selected"),$("#nav_tree .li_marker").remove(),$("#nav_tree .triangle_marker").remove(),el.addClass("nav_selected");var li_wrap=$("#"+el.attr("id").replace("item","group"));return li_wrap.prepend('<div class="li_marker"></div><div class="triangle_marker"></div>'),!1}}function setIcon(event,icon){$(".iconsel").removeClass("current"),$(event.target).closest(".iconsel").addClass("current"),$("#remote\\[icon\\]").val(icon)}function setColor(event,color){$(".colorsel").removeClass("current"),$(event.target).closest(".colorsel").addClass("current"),$("#remote\\[color\\]").val(color),$(".icons").css("color",color)}function longlat(){$(".location").each(function(){if($('input[name="controlleredit[latitude]"]').length&&0==$('input[name*="latitude_deg"]').length||$('input[name="controlleredit[longitude]"]').length&&0==$('input[name*="longitude_deg"]').length||$('input[name="controlleredit[satlon]"]').length&&0==$('input[name*="satlon_deg"]').length||$('input[name="remote[latitude]"]').length&&0==$('input[name*="latitude_deg"]').length||$('input[name="remote[longitude]"]').length&&0==$('input[name*="longitude_deg"]').length){var mult=1e6,lonAbs=Math.abs(Math.round($(this).val()*mult)),deg=Math.floor(lonAbs/mult),min=Math.floor(60*(lonAbs/mult-Math.floor(lonAbs/mult))),sec=60*Math.floor(1e5*(60*(lonAbs/mult-Math.floor(lonAbs/mult))-Math.floor(60*(lonAbs/mult-Math.floor(lonAbs/mult)))))/1e5,sign=$(this).val()>=0?0:1;sec>30&&min++,min>59&&(min=0,deg++);var p=$(this).parent(),id=$(this).attr("id").substr(0,$(this).attr("id").length-1),degInp=$('<input type="text" size="4" maxlength="4" name="'+id+'_deg]"/>').val(deg).appendTo(p);p.append(" &deg; ");var minInp=$('<input type="text" size="2" maxlength="2" name="'+id+'_min]"/>').val(min).appendTo(p);p.append(" &prime; ");var signInp=$('<select class="narrow"/  name="'+id+'_dir]">'),isLongitude=$(this).hasClass("longitude")?1:0;isLongitude?signInp.append($('<option value="0"/>').text("East"),$('<option value="1"/>').text("West")):signInp.append($('<option value="0"/>').text("North"),$('<option value="1"/>').text("South")),signInp.val(sign),signInp.appendTo(p);var inp=$(this),change=function(){isLongitude?(degInp.val(degInp.val()%360),degInp.val()<0&&(sign=1,signInp.val(sign),degInp.val(Math.abs(degInp.val()))),degInp.val()>180&&degInp.val()<360&&(degInp.val(360-degInp.val()),sign=0==sign?1:0,signInp.val(sign))):(degInp.val()<0&&(sign=1,signInp.val(sign),degInp.val(Math.abs(degInp.val()))),degInp.val()>90&&degInp.val(90)),minInp.val(minInp.val()%60);var _sign=0==signInp.val()?1:-1,abs_d=Math.abs(Math.round(degInp.val()*mult)),abs_m=Math.abs(Math.round(minInp.val()*mult)/mult);abs_m=Math.abs(Math.round(abs_m*mult));var abs_s=0;inp.val(Math.round(abs_d+abs_m/60+abs_s/3600)*_sign/mult)};degInp.change(change),minInp.change(change),signInp.change(change)}})}function validate(what){var is_valid=function(type,n){switch(type){case"number":return!isNaN(parseFloat(n))&&isFinite(n);case"int":return"string"==typeof n&&(n=n.replace(/[^0-9.]/g,"")),is_valid("number",n)&&parseFloat(n)==parseInt(n,10);case"bw_range":return"string"==typeof n&&(n=n.replace(/[^0-9.]/g,"")),is_valid("int",n)&&(n>=9e5&&21e5>=n||n>=4e6&&7e6>=n||n>=107e5&&18e6>=n||n>=265e5&&4e7>=n);case"frequency":return"string"==typeof n&&(n=n.replace(/[^0-9.]/g,"")),is_valid("int",n)&&(n>=95e4&&205e4>=n||n>=4e6&&7e6>=n||n>=107e5&&18e6>=n||n>=265e5&&4e7>=n);case"bw_end_freq_sep":"string"==typeof n&&(n=n.replace(/[^0-9.]/g,""));var start_frequency=Number($("#bandwidth\\[start_frequency\\]").val());return is_valid("frequency",n)&&""!==start_frequency&&n>start_frequency&&(start_frequency>=95e4&&205e4>=start_frequency&&n>=95e4&&205e4>=n||start_frequency>=4e6&&7e6>=start_frequency&&n>=4e6&&7e6>=n||start_frequency>=107e5&&18e6>=start_frequency&&n>=107e5&&18e6>=n||start_frequency>=265e5&&4e7>=start_frequency&&n>=265e5&&4e7>=n)?!0:!1;case"bw_frequency_tx":"string"==typeof n&&(n=n.replace(/[^0-9.]/g,""));var bw_list_string=$("#bw_list").html();if("[]"==bw_list_string)return is_valid("frequency",n);var bw_list=$.parseJSON($("#bw_list").html());for(bw_item in bw_list){var start_frequency=Number(bw_list[bw_item].start_frequency),end_frequency=Number(bw_list[bw_item].end_frequency);if(n>=start_frequency&&end_frequency>=n)return!0}return!1;case"bw_frequency_rx":"string"==typeof n&&(n=n.replace(/[^0-9.]/g,""));var bw_list_string=$("#bw_list").html();if("[]"==bw_list_string)return is_valid("frequency",n);var bw_list=$.parseJSON(bw_list_string);for(bw_item in bw_list){var satellite_translation=Number(bw_list[bw_item].satellite_translation),start_frequency=Number(bw_list[bw_item].start_frequency),end_frequency=Number(bw_list[bw_item].end_frequency);if(n>=start_frequency-satellite_translation&&end_frequency-satellite_translation>=n)return!0}return!1;case"sr":return is_valid("int",n)&&n>=1&&32768>=n;case"tx":return is_valid("number",n)&&n>=1&&36>=n;case"cn":return is_valid("number",n)&&n>=.1&&30>=n;case"station":return is_valid("int",n)&&n>=1&&2048>=n;case"bw_active":return is_valid("int",n)&&n>=1&&255>=n;case"bw_idle":return is_valid("int",n)&&n>=1&&255>=n;case"bw_down":return is_valid("int",n)&&n>=1&&255>=n;case"bw_timeout":return is_valid("int",n)&&n>=0&&10>=n;case"mask":return"rt_ip_station"==$("input[name=remoteroute\\[typename\\]]:checked").val()?is_valid("int",n)&&n>=8&&32>=n:is_valid("int",n)&&n>=0&&32>=n;case"framelen":return is_valid("int",n)&&n>=16&&252>=n&&n%4==0;case"ip":var ip_parts=n.split(".");if(4!=ip_parts.length)return!1;for(i=0;4>i;i++){if(!is_valid("int",ip_parts[i]))return!1;if(ip_parts[i]<0||ip_parts[i]>255)return!1}return!0;case"tlc_cn":return is_valid("number",n)&&n>=1&&50>=n;case"tlc_max":return is_valid("number",n)&&n>=1&&36>=n;case"acm_and_fec":var fec_id=$("#controlleredit\\[tdmtx_fec\\]").val(),acm=$("#controlleredit\\[acm_enable\\]");return acm.is(":checked")&&9>fec_id?!1:!0;case"acm_ordering":var enabled=$("#controlleredit\\[acm_enable\\]").is(":checked"),cn_limit=0,prev_cn_limit=0,ordered=!0;return enabled&&($("select[name*=acm_fec]").each(function(){var curr_channel=Number($(this).val());switch(curr_channel){case 9:cn_limit=3.3;break;case 10:cn_limit=4.2;break;case 11:cn_limit=5;break;case 12:cn_limit=5.5;break;case 13:cn_limit=6.4;break;case 14:cn_limit=6.5;break;case 15:cn_limit=7.6;break;case 16:cn_limit=7.5;break;case 17:cn_limit=8.6;break;case 18:cn_limit=9.9;break;case 19:cn_limit=11.3;break;case 20:cn_limit=11.3;break;case 21:cn_limit=10.3;break;case 22:cn_limit=11;break;case 23:cn_limit=11.8;break;case 24:cn_limit=12.2;break;case 25:cn_limit=13.4;break;case 26:cn_limit=13.5}prev_cn_limit>=cn_limit&&(ordered=!1),prev_cn_limit=cn_limit}),!ordered)?!1:!0}return!0},invalid_messages=function(type){switch(type){case"number":return"Input a number";case"int":return"Input an integer";case"frequency":return"Frequency must be in ranges: 950..2050 MHz, ";case"sr":return"Symbol rate must be in range 1..32768";case"tx":return"Tx level must be between in range -360..-10";case"cn":return"Carrier-to-noise must be in range 1..300";case"station":return"Station must be in range 1..2048";case"acm_and_fec":return"With enabled acm must be equal or greater than QPSK 2/3";case"acm_ordering":return"ACM C/N's not in increasing order"}},resg=!0;if(what.find("input, select").each(function(){var val=$(this).val();if(validate_tdma_freq=!0,$(this).hasClass("tdma_freq")){var num=$(this).attr("id");num=num.replace(/[^0-9]/g,""),$("#controlleredit\\[tdmrf_enable_"+num+"\\]").is(":checked")||(validate_tdma_freq=!1),$(this).removeClass("error"),$(this).closest("p").find(".form-horizontal-help.error").removeClass("error").text("")}if($(this).attr("data-validate")&&!$(this).is(":hidden")&&validate_tdma_freq){$(this).removeClass("error"),$(this).closest("p").find(".form-horizontal-help.error").removeClass("error").text("");var types=$(this).attr("data-validate").split(" "),res=!0,i=0;for(i=0;i<types.length;i++)if(!is_valid(types[i],val)){res=!1;break}0==res&&(resg=!1,$(this).addClass("error"),$(this).closest("p").find(".form-horizontal-help").addClass("error").text(invalid_messages(types[i])))}}),$("span.error").length){var err_offset=$("span.error:first").offset(),err_width=$("span.error:first").width(),err_height=$("span.error:first").height();err_offset.top>=0&&err_offset.left>=0&&err_offset.left+err_width<=$(window).width()&&err_offset.top+err_height<=$(window).height()&&$("html, body").animate({scrollTop:$("span.error:first").offset().top-30},250)}return resg}function pushtograph(datasrc,data,annotations){var arrayUnique=function(array,getsortfieldfunc){for(var u={},a=[],l=array.length-1,i=l;i>=0;--i){var field=getsortfieldfunc(array[i]);u.hasOwnProperty(field)||(a.unshift(array[i]),u[field]=i+1)}return a};if(updategraph(datasrc),data=JSON.parse(data)){for(var ix=0;ix<data.length;ix++)data[ix][0]=new Date(1e3*data[ix][0]);var olddata=graphs[datasrc].data;olddata=olddata.concat(data),olddata=arrayUnique(olddata,function(item){return item[0].getTime()}),olddata.sort(function(a,b){return a[0].getTime()<b[0].getTime()?-1:1}),olddata.length>360&&(olddata=olddata.slice(olddata.length-360)),graphs[datasrc].graph.updateOptions({file:olddata}),graphs[datasrc].data=olddata;var oldannotations=graphs[datasrc].graph.annotations();if(annotations){if(annotations=JSON.parse(annotations),!annotations)return;annotations=transformAnnotationData(annotations),oldannotations=oldannotations.concat(annotations),oldannotations=arrayUnique(oldannotations,function(item){return item.x})}for(var minimal_time=olddata[0][0].getTime(),rotten=[],i=oldannotations.length-1;i>=0;i--)oldannotations[i].x<minimal_time&&(rotten=rotten.concat(oldannotations.splice(i,1)));rotten.length&&(rotten[0].x=minimal_time,oldannotations.unshift(rotten[0])),graphs[datasrc].graph.setAnnotations(oldannotations)}}function updategraph(datasrc){for(var from=parseInt((new Date).getTime()/1e3,10)-5,i=graphs[datasrc].data.length-1;i>=0;i--)if(null!=graphs[datasrc].data[i][1]){from=graphs[datasrc].data[i][0].getTime()/1e3-120;break}var to=parseInt(5+(new Date).getTime()/1e3,10);subscribe({what:"graph",datasrc:datasrc,from:from,to:to})}function logFormHandlers(){var form=$("#logc");if(form){var startDateField=$("#logcontrols\\[start_time\\]"),endDateField=$("#logcontrols\\[end_time\\]");if(startDateField.length&&endDateField.length){var onTypeChange=function(newval){0==newval?$("#log_daterange").hide():$("#log_daterange").show()},typeselector=$(".typeselector");onTypeChange($(".typeselector:checked").val()),typeselector.change(function(){onTypeChange($(this).val()),form.submit()}),$(".pickdate").datetimepicker({controlType:"select",timeFormat:"HH:mm",dateFormat:"yy-mm-dd",onClose:function(){var start=Date.parse(startDateField.val()),end=Date.parse(endDateField.val());start.compareTo(end)>0&&(startDateField.val(end.toString("yyyy-MM-dd HH:mm")),endDateField.val(start.toString("yyyy-MM-dd HH:mm"))),form.submit()}});var range=function(start,end){startDateField.val(start.toString("yyyy-MM-dd HH:mm")),endDateField.val(end.toString("yyyy-MM-dd HH:mm")),form.submit()},makeRange=function(hours,days,months){var date=new Date,date_utc=new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds()),s=date_utc.clone().add({seconds:$("#tzoffset").val(),hours:hours,days:days,months:months}),e=date_utc.add({seconds:$("#tzoffset").val()});range(s,e)};$("#show_hour").click(function(){makeRange(-1,0,0)}),$("#show_day").click(function(){makeRange(0,-1,0)}),$("#show_month").click(function(){makeRange(0,0,-1)})}}}function graphFormHandlers(){graphClickCallback=null;var form=$("#graph_form");if(form){var startDateField=$("#graph\\[start_time\\]"),endDateField=$("#graph\\[end_time\\]");if(startDateField.length&&endDateField.length){$(".pickdate").datetimepicker({controlType:"select",timeFormat:"HH:mm",dateFormat:"yy-mm-dd",onClose:function(){var start=Date.parse(startDateField.val()),end=Date.parse(endDateField.val());return start.compareTo(end)>0&&(startDateField.val(end.toString("yyyy-MM-dd HH:mm")),endDateField.val(start.toString("yyyy-MM-dd HH:mm"))),form.submit(),!1}}),$("#graph\\[source_type\\]").change(function(){form.submit()}),$("#graph\\[display_error\\]").change(function(){form.submit()}),$(".display_faults").change(function(){form.submit()}),$(".display_faults").prop("checked")&&$(".faultslegend").show();var pan=function(zoom,offset,center){var start=Date.parse(startDateField.val()),end=Date.parse(endDateField.val()),range=end.getTime()-start.getTime();center=center?new Date(center):start.clone().addMilliseconds(range/2),range*=zoom,12e4>range||(offset||(offset=0),offset*=range,start.setTime(center.clone().addMilliseconds(-range/2+offset)),end.setTime(center.clone().addMilliseconds(range/2+offset)),startDateField.val(start.toString("yyyy-MM-dd HH:mm")),endDateField.val(end.toString("yyyy-MM-dd HH:mm")),form.submit())},range=function(start,end){startDateField.val(start.toString("yyyy-MM-dd HH:mm")),endDateField.val(end.toString("yyyy-MM-dd HH:mm")),form.submit()},makeRange=function(hours,days,months){var date=new Date,date_utc=new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds()),s=date_utc.clone().add({seconds:$("#tzoffset").val(),hours:hours,days:days,months:months}),e=date_utc.add({seconds:$("#tzoffset").val()});range(s,e)};$("#show_hour").click(function(){makeRange(-1,0,0)}),$("#show_day").click(function(){makeRange(0,-1,0)}),$("#show_month").click(function(){makeRange(0,0,-1)}),graphClickCallback=function(e,x){pan(1,0,x)},$("#zoom_in").click(function(){pan(.8)}),$("#zoom_out").click(function(){pan(2)}),$("#scroll_left").click(function(){pan(1,-.5)}),$("#scroll_right").click(function(){pan(1,.5)})}}}function userlogFormHandlers(){var form=$("#ulogc");if(form.length){var startDateField=$("#useractivitylog\\[start_time\\]"),endDateField=$("#useractivitylog\\[end_time\\]");if(startDateField.length&&endDateField.length){var onTypeChange=function(newval){0==newval?$("#ulog_daterange").hide():$("#ulog_daterange").show()},typeselector=$(".typeselector");onTypeChange($(".typeselector:checked").val()),typeselector.change(function(){onTypeChange($(this).val()),form.submit()}),$(".actiontypeselector").change(function(){form.submit()}),$(".pickdate").datetimepicker({controlType:"select",timeFormat:"HH:mm",dateFormat:"yy-mm-dd",onClose:function(){var start=Date.parse(startDateField.val()),end=Date.parse(endDateField.val());start.compareTo(end)>0&&(startDateField.val(end.toString("yyyy-MM-dd HH:mm")),endDateField.val(start.toString("yyyy-MM-dd HH:mm"))),form.submit()}});var range=function(start,end){startDateField.val(start.toString("yyyy-MM-dd HH:mm")),endDateField.val(end.toString("yyyy-MM-dd HH:mm")),form.submit()},makeRange=function(hours,days,months){var date=new Date,date_utc=new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds()),s=date_utc.clone().add({seconds:$("#tzoffset").val(),hours:hours,days:days,months:months}),e=date_utc.add({seconds:$("#tzoffset").val()});range(s,e)};$("#ulog_show_hour").click(function(){makeRange(-1,0,0)}),$("#ulog_show_day").click(function(){makeRange(0,-1,0)}),$("#ulog_show_month").click(function(){makeRange(0,1,-1)});var setActivity=function(activityType){var activityField=$("#useractivitylog\\[activity\\]");activityField.val(activityType),form.submit()};$("#show_changes").click(function(){setActivity(1)}),$("#show_browse").click(function(){setActivity(2)})}}}function reportFormHandlers(){var form=$("#report-manager");if(form.length){var type_field=$("#report\\[type\\]"),object_field=$("#report\\[object_id\\]"),start_time_field=$("#report\\[start_time\\]"),end_time_field=$("#report\\[end_time\\]"),format_field=$("#report\\[format\\]");
$(".pickdate").datepicker({dateFormat:"yy-mm-dd"});var onFilterChange=function(){var type_id=$("#report\\[type\\]").val(),object_id=$("#report\\[object_id\\]").val(),start_time=$("#report\\[start_time\\]").val(),end_time=$("#report\\[end_time\\]").val(),format=$("#report\\[format\\]").val();""!=start_time&&""!=end_time&&$("#generate-report").prop("href","/report/?type="+type_id+"&object="+object_id+"&from="+start_time+"&to="+end_time+"&format="+format)};type_field.change(function(){onFilterChange()}),object_field.change(function(){onFilterChange()}),start_time_field.change(function(){onFilterChange()}),end_time_field.change(function(){onFilterChange()}),format_field.change(function(){onFilterChange()}),$("#report_day").click(function(){makeRange(0,0,0)}),$("#report_week").click(function(){makeRange(0,-6,0)}),$("#report_month").click(function(){makeRange(0,1,-1)});var makeRange=function(hours,days,months){var date=new Date,date_utc=new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds()),s=date_utc.clone().add({seconds:0,hours:hours,days:days,months:months}),e=date_utc.add({seconds:0});range(s,e)},range=function(start,end){start_time_field.val(start.toString("yyyy-MM-dd")),end_time_field.val(end.toString("yyyy-MM-dd")),onFilterChange()}}}function transformAnnotationData(annotations){for(var ix=0;ix<annotations.length;ix++)annotations[ix].x=1e3*annotations[ix].x,annotations[ix].icon=getWeatherIcon(annotations[ix].icon),annotations[ix].attachAtBottom=!0,annotations[ix].width=16,annotations[ix].height=16,annotations[ix].tickHeight=6;return annotations}function buildgraph(){$(".graphdiv").each(function(){var el=$(this),cont=el.closest(".graphcontainer"),labels=JSON.parse(cont.find(".glabels").text()),gplotlabels=cont.parent().find(".gplotlabels").get(0),data=JSON.parse(cont.find(".gdata").text()),faults=JSON.parse(cont.find(".gfaults").text()),datasrc=cont.find(".gdatasrc").text();datasrc=datasrc.replace(/#.*/g,"");var annotations=cont.find(".gannotations").text();annotations=annotations?JSON.parse(annotations):[],annotations=transformAnnotationData(annotations);var options=JSON.parse(cont.find(".gdataopt").text());if(options||(options={}),data&&data.length){for(var ix=0;ix<data.length;ix++)data[ix][0]=new Date(1e3*data[ix][0]);underlay_callback=function(ctx,area,g){if($(".display_faults").prop("checked")){var maxfaults=13,fault_possible_mask=58367,zoneh=area.h/maxfaults;ctx.fillStyle="rgb(255, 0, 0)";for(var ix=0;ix<faults.length;ix++){var ts=faults[ix][0],ts_next=ix+1<faults.length?faults[ix+1][0]:ts+5,fault=faults[ix][1],j=-1;if(fault)for(var i=0;16>i;i++)if(fault_possible_mask&1<<i&&j++,fault&1<<i){var centerY=j*zoneh+zoneh/2,centerX=g.toDomCoords(1e3*ts,0)[0],centerX2=g.toDomCoords(1e3*ts_next,0)[0],width=centerX2-centerX;ctx.fillRect(centerX-width/2,centerY-2,width,4)}}}};var error_bars=!1;$("#graph\\[display_error\\]").prop("checked")&&(error_bars=!0);var defaultOptions={labels:labels,yRangePad:2,colors:["#FF8300","DeepSkyBlue","darkgreen","purple","blue","orangered","red"],drawPoints:!1,drawGapEdgePoints:!0,animatedZooms:!1,customBars:error_bars,includeZero:!0,yAxisLabelWidth:50,labelsDiv:gplotlabels,legend:"always",labelsSeparateLines:!1,labelsDivStyles:{},maxNumberWidth:9,labelsKMB:!0,drawAxesAtZero:!0,strokeWidth:1.5,gridLineColor:"#ccc",clickCallback:graphClickCallback,axes:{x:{axisLabelFormatter:function(d,gran){var date_utc=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds());return date_utc.addSeconds($("#tzoffset").val()),Dygraph.dateAxisFormatter(date_utc,gran)},valueFormatter:function(date){var zeropad=Dygraph.zeropad,d=new Date(date),date_utc=new Date(d.getUTCFullYear(),d.getUTCMonth(),d.getUTCDate(),d.getUTCHours(),d.getUTCMinutes(),d.getUTCSeconds());date_utc.addSeconds($("#tzoffset").val());var year=""+date_utc.getFullYear(),month=zeropad(date_utc.getMonth()+1),day=zeropad(date_utc.getDate()),ret="",frac=3600*d.getHours()+60*d.getMinutes()+d.getSeconds();return frac&&(ret=" "+Dygraph.zeropad(date_utc.getHours())+":"+Dygraph.zeropad(date_utc.getMinutes())+":"+Dygraph.zeropad(date_utc.getSeconds())),year+"-"+month+"-"+day+ret}}},underlayCallback:underlay_callback};for(var key in options)defaultOptions[key]=options[key];var g=new Dygraph(el.get(0),data,defaultOptions);graphs[datasrc]={},graphs[datasrc].graph=g,graphs[datasrc].data=data,annotations.length&&graphs[datasrc].graph.setAnnotations(annotations),"undefined"==typeof options.update&&0!=options.update&&updategraph(datasrc)}})}function randomStr(m){var m=m||9;s="",r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";for(var i=0;m>i;i++)s+=r.charAt(Math.floor(Math.random()*r.length));return s}!function(e,t){function M(e){var t=e.length,n=b.type(e);return b.isWindow(e)?!1:1===e.nodeType&&t?!0:"array"===n||"function"!==n&&(0===t||"number"==typeof t&&t>0&&t-1 in e)}function F(e){var t=_[e]={};return b.each(e.match(w)||[],function(e,n){t[n]=!0}),t}function P(e,n,r,i){if(b.acceptData(e)){var o,a,s=b.expando,u="string"==typeof n,l=e.nodeType,p=l?b.cache:e,f=l?e[s]:e[s]&&s;if(f&&p[f]&&(i||p[f].data)||!u||r!==t)return f||(l?e[s]=f=c.pop()||b.guid++:f=s),p[f]||(p[f]={},l||(p[f].toJSON=b.noop)),("object"==typeof n||"function"==typeof n)&&(i?p[f]=b.extend(p[f],n):p[f].data=b.extend(p[f].data,n)),o=p[f],i||(o.data||(o.data={}),o=o.data),r!==t&&(o[b.camelCase(n)]=r),u?(a=o[n],null==a&&(a=o[b.camelCase(n)])):a=o,a}}function R(e,t,n){if(b.acceptData(e)){var r,i,o,a=e.nodeType,s=a?b.cache:e,u=a?e[b.expando]:b.expando;if(s[u]){if(t&&(o=n?s[u]:s[u].data)){b.isArray(t)?t=t.concat(b.map(t,b.camelCase)):t in o?t=[t]:(t=b.camelCase(t),t=t in o?[t]:t.split(" "));for(r=0,i=t.length;i>r;r++)delete o[t[r]];if(!(n?$:b.isEmptyObject)(o))return}(n||(delete s[u].data,$(s[u])))&&(a?b.cleanData([e],!0):b.support.deleteExpando||s!=s.window?delete s[u]:s[u]=null)}}}function W(e,n,r){if(r===t&&1===e.nodeType){var i="data-"+n.replace(B,"-$1").toLowerCase();if(r=e.getAttribute(i),"string"==typeof r){try{r="true"===r?!0:"false"===r?!1:"null"===r?null:+r+""===r?+r:O.test(r)?b.parseJSON(r):r}catch(o){}b.data(e,n,r)}else r=t}return r}function $(e){var t;for(t in e)if(("data"!==t||!b.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function it(){return!0}function ot(){return!1}function pt(e,t){do e=e[t];while(e&&1!==e.nodeType);return e}function ft(e,t,n){if(t=t||0,b.isFunction(t))return b.grep(e,function(e,r){var i=!!t.call(e,r,e);return i===n});if(t.nodeType)return b.grep(e,function(e){return e===t===n});if("string"==typeof t){var r=b.grep(e,function(e){return 1===e.nodeType});if(ut.test(t))return b.filter(t,r,!n);t=b.filter(t,r)}return b.grep(e,function(e){return b.inArray(e,t)>=0===n})}function dt(e){var t=ht.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function Lt(e,t){return e.getElementsByTagName(t)[0]||e.appendChild(e.ownerDocument.createElement(t))}function Ht(e){var t=e.getAttributeNode("type");return e.type=(t&&t.specified)+"/"+e.type,e}function qt(e){var t=Et.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Mt(e,t){for(var n,r=0;null!=(n=e[r]);r++)b._data(n,"globalEval",!t||b._data(t[r],"globalEval"))}function _t(e,t){if(1===t.nodeType&&b.hasData(e)){var n,r,i,o=b._data(e),a=b._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)b.event.add(t,n,s[n][r])}a.data&&(a.data=b.extend({},a.data))}}function Ft(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!b.support.noCloneEvent&&t[b.expando]){i=b._data(t);for(r in i.events)b.removeEvent(t,r,i.handle);t.removeAttribute(b.expando)}"script"===n&&t.text!==e.text?(Ht(t).text=e.text,qt(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),b.support.html5Clone&&e.innerHTML&&!b.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&Nt.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function Ot(e,n){var r,o,a=0,s=typeof e.getElementsByTagName!==i?e.getElementsByTagName(n||"*"):typeof e.querySelectorAll!==i?e.querySelectorAll(n||"*"):t;if(!s)for(s=[],r=e.childNodes||e;null!=(o=r[a]);a++)!n||b.nodeName(o,n)?s.push(o):b.merge(s,Ot(o,n));return n===t||n&&b.nodeName(e,n)?b.merge([e],s):s}function Bt(e){Nt.test(e.type)&&(e.defaultChecked=e.checked)}function tn(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=en.length;i--;)if(t=en[i]+n,t in e)return t;return r}function nn(e,t){return e=t||e,"none"===b.css(e,"display")||!b.contains(e.ownerDocument,e)}function rn(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=b._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&nn(r)&&(o[a]=b._data(r,"olddisplay",un(r.nodeName)))):o[a]||(i=nn(r),(n&&"none"!==n||!i)&&b._data(r,"olddisplay",i?n:b.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function on(e,t,n){var r=Vt.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function an(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=b.css(e,n+Zt[o],!0,i)),r?("content"===n&&(a-=b.css(e,"padding"+Zt[o],!0,i)),"margin"!==n&&(a-=b.css(e,"border"+Zt[o]+"Width",!0,i))):(a+=b.css(e,"padding"+Zt[o],!0,i),"padding"!==n&&(a+=b.css(e,"border"+Zt[o]+"Width",!0,i)));return a}function sn(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Rt(e),a=b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=Wt(e,t,o),(0>i||null==i)&&(i=e.style[t]),Yt.test(i))return i;r=a&&(b.support.boxSizingReliable||i===e.style[t]),i=parseFloat(i)||0}return i+an(e,t,n||(a?"border":"content"),r,o)+"px"}function un(e){var t=o,n=Gt[e];return n||(n=ln(e,t),"none"!==n&&n||(Pt=(Pt||b("<iframe frameborder='0' width='0' height='0'/>").css("cssText","display:block !important")).appendTo(t.documentElement),t=(Pt[0].contentWindow||Pt[0].contentDocument).document,t.write("<!doctype html><html><body>"),t.close(),n=ln(e,t),Pt.detach()),Gt[e]=n),n}function ln(e,t){var n=b(t.createElement(e)).appendTo(t.body),r=b.css(n[0],"display");return n.remove(),r}function gn(e,t,n,r){var i;if(b.isArray(t))b.each(t,function(t,i){n||pn.test(e)?r(e,i):gn(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==b.type(t))r(e,t);else for(i in t)gn(e+"["+i+"]",t[i],n,r)}function Hn(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(w)||[];if(b.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,n,r,i){function s(u){var l;return o[u]=!0,b.each(e[u]||[],function(e,u){var c=u(n,r,i);return"string"!=typeof c||a||o[c]?a?!(l=c):t:(n.dataTypes.unshift(c),s(c),!1)}),l}var o={},a=e===jn;return s(n.dataTypes[0])||!o["*"]&&s("*")}function Mn(e,n){var r,i,o=b.ajaxSettings.flatOptions||{};for(i in n)n[i]!==t&&((o[i]?e:r||(r={}))[i]=n[i]);return r&&b.extend(!0,e,r),e}function _n(e,n,r){var i,o,a,s,u=e.contents,l=e.dataTypes,c=e.responseFields;for(s in c)s in r&&(n[c[s]]=r[s]);for(;"*"===l[0];)l.shift(),o===t&&(o=e.mimeType||n.getResponseHeader("Content-Type"));if(o)for(s in u)if(u[s]&&u[s].test(o)){l.unshift(s);break}if(l[0]in r)a=l[0];else{for(s in r){if(!l[0]||e.converters[s+" "+l[0]]){a=s;break}i||(i=s)}a=a||i}return a?(a!==l[0]&&l.unshift(a),r[a]):t}function Fn(e,t){var n,r,i,o,a={},s=0,u=e.dataTypes.slice(),l=u[0];if(e.dataFilter&&(t=e.dataFilter(t,e.dataType)),u[1])for(i in e.converters)a[i.toLowerCase()]=e.converters[i];for(;r=u[++s];)if("*"!==r){if("*"!==l&&l!==r){if(i=a[l+" "+r]||a["* "+r],!i)for(n in a)if(o=n.split(" "),o[1]===r&&(i=a[l+" "+o[0]]||a["* "+o[0]])){i===!0?i=a[n]:a[n]!==!0&&(r=o[0],u.splice(s--,0,r));break}if(i!==!0)if(i&&e["throws"])t=i(t);else try{t=i(t)}catch(c){return{state:"parsererror",error:i?c:"No conversion from "+l+" to "+r}}}l=r}return{state:"success",data:t}}function In(){try{return new e.XMLHttpRequest}catch(t){}}function zn(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function Kn(){return setTimeout(function(){Xn=t}),Xn=b.now()}function Zn(e,t){b.each(t,function(t,n){for(var r=(Qn[t]||[]).concat(Qn["*"]),i=0,o=r.length;o>i;i++)if(r[i].call(e,t,n))return})}function er(e,t,n){var r,i,o=0,a=Gn.length,s=b.Deferred().always(function(){delete u.elem}),u=function(){if(i)return!1;for(var t=Xn||Kn(),n=Math.max(0,l.startTime+l.duration-t),r=n/l.duration||0,o=1-r,a=0,u=l.tweens.length;u>a;a++)l.tweens[a].run(o);return s.notifyWith(e,[l,o,n]),1>o&&u?n:(s.resolveWith(e,[l]),!1)},l=s.promise({elem:e,props:b.extend({},t),opts:b.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Xn||Kn(),duration:n.duration,tweens:[],createTween:function(t,n){var r=b.Tween(e,l.opts,t,n,l.opts.specialEasing[t]||l.opts.easing);return l.tweens.push(r),r},stop:function(t){var n=0,r=t?l.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)l.tweens[n].run(1);return t?s.resolveWith(e,[l,t]):s.rejectWith(e,[l,t]),this}}),c=l.props;for(tr(c,l.opts.specialEasing);a>o;o++)if(r=Gn[o].call(l,e,c,l.opts))return r;return Zn(l,c),b.isFunction(l.opts.start)&&l.opts.start.call(e,l),b.fx.timer(b.extend(u,{elem:e,anim:l,queue:l.opts.queue})),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always)}function tr(e,t){var n,r,i,o,a;for(i in e)if(r=b.camelCase(i),o=t[r],n=e[i],b.isArray(n)&&(o=n[1],n=e[i]=n[0]),i!==r&&(e[r]=n,delete e[i]),a=b.cssHooks[r],a&&"expand"in a){n=a.expand(n),delete e[r];for(i in n)i in e||(e[i]=n[i],t[i]=o)}else t[r]=o}function nr(e,t,n){var r,i,o,a,s,u,l,c,p,f=this,d=e.style,h={},g=[],m=e.nodeType&&nn(e);n.queue||(c=b._queueHooks(e,"fx"),null==c.unqueued&&(c.unqueued=0,p=c.empty.fire,c.empty.fire=function(){c.unqueued||p()}),c.unqueued++,f.always(function(){f.always(function(){c.unqueued--,b.queue(e,"fx").length||c.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[d.overflow,d.overflowX,d.overflowY],"inline"===b.css(e,"display")&&"none"===b.css(e,"float")&&(b.support.inlineBlockNeedsLayout&&"inline"!==un(e.nodeName)?d.zoom=1:d.display="inline-block")),n.overflow&&(d.overflow="hidden",b.support.shrinkWrapBlocks||f.always(function(){d.overflow=n.overflow[0],d.overflowX=n.overflow[1],d.overflowY=n.overflow[2]}));for(i in t)if(a=t[i],Vn.exec(a)){if(delete t[i],u=u||"toggle"===a,a===(m?"hide":"show"))continue;g.push(i)}if(o=g.length){s=b._data(e,"fxshow")||b._data(e,"fxshow",{}),"hidden"in s&&(m=s.hidden),u&&(s.hidden=!m),m?b(e).show():f.done(function(){b(e).hide()}),f.done(function(){var t;b._removeData(e,"fxshow");for(t in h)b.style(e,t,h[t])});for(i=0;o>i;i++)r=g[i],l=f.createTween(r,m?s[r]:0),h[r]=s[r]||b.style(e,r),r in s||(s[r]=l.start,m&&(l.end=l.start,l.start="width"===r||"height"===r?1:0))}}function rr(e,t,n,r,i){return new rr.prototype.init(e,t,n,r,i)}function ir(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=Zt[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function or(e){return b.isWindow(e)?e:9===e.nodeType?e.defaultView||e.parentWindow:!1}var n,r,i=typeof t,o=e.document,a=e.location,s=e.jQuery,u=e.$,l={},c=[],p="1.9.1",f=c.concat,d=c.push,h=c.slice,g=c.indexOf,m=l.toString,y=l.hasOwnProperty,v=p.trim,b=function(e,t){return new b.fn.init(e,t,r)},x=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,w=/\S+/g,T=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,N=/^(?:(<[\w\W]+>)[^>]*|#([\w-]*))$/,C=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,k=/^[\],:{}\s]*$/,E=/(?:^|:|,)(?:\s*\[)+/g,S=/\\(?:["\\\/bfnrt]|u[\da-fA-F]{4})/g,A=/"[^"\\\r\n]*"|true|false|null|-?(?:\d+\.|)\d+(?:[eE][+-]?\d+|)/g,j=/^-ms-/,D=/-([\da-z])/gi,L=function(e,t){return t.toUpperCase()},H=function(e){(o.addEventListener||"load"===e.type||"complete"===o.readyState)&&(q(),b.ready())},q=function(){o.addEventListener?(o.removeEventListener("DOMContentLoaded",H,!1),e.removeEventListener("load",H,!1)):(o.detachEvent("onreadystatechange",H),e.detachEvent("onload",H))};b.fn=b.prototype={jquery:p,constructor:b,init:function(e,n,r){var i,a;if(!e)return this;if("string"==typeof e){if(i="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:N.exec(e),!i||!i[1]&&n)return!n||n.jquery?(n||r).find(e):this.constructor(n).find(e);if(i[1]){if(n=n instanceof b?n[0]:n,b.merge(this,b.parseHTML(i[1],n&&n.nodeType?n.ownerDocument||n:o,!0)),C.test(i[1])&&b.isPlainObject(n))for(i in n)b.isFunction(this[i])?this[i](n[i]):this.attr(i,n[i]);return this}if(a=o.getElementById(i[2]),a&&a.parentNode){if(a.id!==i[2])return r.find(e);this.length=1,this[0]=a}return this.context=o,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):b.isFunction(e)?r.ready(e):(e.selector!==t&&(this.selector=e.selector,this.context=e.context),b.makeArray(e,this))},selector:"",length:0,size:function(){return this.length},toArray:function(){return h.call(this)},get:function(e){return null==e?this.toArray():0>e?this[this.length+e]:this[e]},pushStack:function(e){var t=b.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return b.each(this,e,t)},ready:function(e){return b.ready.promise().done(e),this},slice:function(){return this.pushStack(h.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},map:function(e){return this.pushStack(b.map(this,function(t,n){return e.call(t,n,t)}))},end:function(){return this.prevObject||this.constructor(null)},push:d,sort:[].sort,splice:[].splice},b.fn.init.prototype=b.fn,b.extend=b.fn.extend=function(){var e,n,r,i,o,a,s=arguments[0]||{},u=1,l=arguments.length,c=!1;for("boolean"==typeof s&&(c=s,s=arguments[1]||{},u=2),"object"==typeof s||b.isFunction(s)||(s={}),l===u&&(s=this,--u);l>u;u++)if(null!=(o=arguments[u]))for(i in o)e=s[i],r=o[i],s!==r&&(c&&r&&(b.isPlainObject(r)||(n=b.isArray(r)))?(n?(n=!1,a=e&&b.isArray(e)?e:[]):a=e&&b.isPlainObject(e)?e:{},s[i]=b.extend(c,a,r)):r!==t&&(s[i]=r));return s},b.extend({noConflict:function(t){return e.$===b&&(e.$=u),t&&e.jQuery===b&&(e.jQuery=s),b},isReady:!1,readyWait:1,holdReady:function(e){e?b.readyWait++:b.ready(!0)},ready:function(e){if(e===!0?!--b.readyWait:!b.isReady){if(!o.body)return setTimeout(b.ready);b.isReady=!0,e!==!0&&--b.readyWait>0||(n.resolveWith(o,[b]),b.fn.trigger&&b(o).trigger("ready").off("ready"))}},isFunction:function(e){return"function"===b.type(e)},isArray:Array.isArray||function(e){return"array"===b.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?l[m.call(e)]||"object":typeof e},isPlainObject:function(e){if(!e||"object"!==b.type(e)||e.nodeType||b.isWindow(e))return!1;try{if(e.constructor&&!y.call(e,"constructor")&&!y.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}var r;for(r in e);return r===t||y.call(e,r)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},error:function(e){throw Error(e)},parseHTML:function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||o;var r=C.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=b.buildFragment([e],t,i),i&&b(i).remove(),b.merge([],r.childNodes))},parseJSON:function(n){return e.JSON&&e.JSON.parse?e.JSON.parse(n):null===n?n:"string"==typeof n&&(n=b.trim(n),n&&k.test(n.replace(S,"@").replace(A,"]").replace(E,"")))?Function("return "+n)():(b.error("Invalid JSON: "+n),t)},parseXML:function(n){var r,i;if(!n||"string"!=typeof n)return null;try{e.DOMParser?(i=new DOMParser,r=i.parseFromString(n,"text/xml")):(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(n))}catch(o){r=t}return r&&r.documentElement&&!r.getElementsByTagName("parsererror").length||b.error("Invalid XML: "+n),r},noop:function(){},globalEval:function(t){t&&b.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(j,"ms-").replace(D,L)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,o=e.length,a=M(e);if(n){if(a)for(;o>i&&(r=t.apply(e[i],n),r!==!1);i++);else for(i in e)if(r=t.apply(e[i],n),r===!1)break}else if(a)for(;o>i&&(r=t.call(e[i],i,e[i]),r!==!1);i++);else for(i in e)if(r=t.call(e[i],i,e[i]),r===!1)break;return e},trim:v&&!v.call("﻿ ")?function(e){return null==e?"":v.call(e)}:function(e){return null==e?"":(e+"").replace(T,"")},makeArray:function(e,t){var n=t||[];return null!=e&&(M(Object(e))?b.merge(n,"string"==typeof e?[e]:e):d.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(g)return g.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,n){var r=n.length,i=e.length,o=0;if("number"==typeof r)for(;r>o;o++)e[i++]=n[o];else for(;n[o]!==t;)e[i++]=n[o++];return e.length=i,e},grep:function(e,t,n){var r,i=[],o=0,a=e.length;for(n=!!n;a>o;o++)r=!!t(e[o],o),n!==r&&i.push(e[o]);return i},map:function(e,t,n){var r,i=0,o=e.length,a=M(e),s=[];if(a)for(;o>i;i++)r=t(e[i],i,n),null!=r&&(s[s.length]=r);else for(i in e)r=t(e[i],i,n),null!=r&&(s[s.length]=r);return f.apply([],s)},guid:1,proxy:function(e,n){var r,i,o;return"string"==typeof n&&(o=e[n],n=e,e=o),b.isFunction(e)?(r=h.call(arguments,2),i=function(){return e.apply(n||this,r.concat(h.call(arguments)))},i.guid=e.guid=e.guid||b.guid++,i):t},access:function(e,n,r,i,o,a,s){var u=0,l=e.length,c=null==r;if("object"===b.type(r)){o=!0;for(u in r)b.access(e,n,u,r[u],!0,a,s)}else if(i!==t&&(o=!0,b.isFunction(i)||(s=!0),c&&(s?(n.call(e,i),n=null):(c=n,n=function(e,t,n){return c.call(b(e),n)})),n))for(;l>u;u++)n(e[u],r,s?i:i.call(e[u],u,n(e[u],r)));return o?e:c?n.call(e):l?n(e[0],r):a},now:function(){return(new Date).getTime()}}),b.ready.promise=function(t){if(!n)if(n=b.Deferred(),"complete"===o.readyState)setTimeout(b.ready);else if(o.addEventListener)o.addEventListener("DOMContentLoaded",H,!1),e.addEventListener("load",H,!1);else{o.attachEvent("onreadystatechange",H),e.attachEvent("onload",H);var r=!1;try{r=null==e.frameElement&&o.documentElement}catch(i){}r&&r.doScroll&&function a(){if(!b.isReady){try{r.doScroll("left")}catch(e){return setTimeout(a,50)}q(),b.ready()}}()}return n.promise(t)},b.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){l["[object "+t+"]"]=t.toLowerCase()}),r=b(o);var _={};b.Callbacks=function(e){e="string"==typeof e?_[e]||F(e):b.extend({},e);var n,r,i,o,a,s,u=[],l=!e.once&&[],c=function(t){for(r=e.memory&&t,i=!0,a=s||0,s=0,o=u.length,n=!0;u&&o>a;a++)if(u[a].apply(t[0],t[1])===!1&&e.stopOnFalse){r=!1;break}n=!1,u&&(l?l.length&&c(l.shift()):r?u=[]:p.disable())},p={add:function(){if(u){var t=u.length;!function i(t){b.each(t,function(t,n){var r=b.type(n);"function"===r?e.unique&&p.has(n)||u.push(n):n&&n.length&&"string"!==r&&i(n)})}(arguments),n?o=u.length:r&&(s=t,c(r))}return this},remove:function(){return u&&b.each(arguments,function(e,t){for(var r;(r=b.inArray(t,u,r))>-1;)u.splice(r,1),n&&(o>=r&&o--,a>=r&&a--)}),this},has:function(e){return e?b.inArray(e,u)>-1:!(!u||!u.length)},empty:function(){return u=[],this},disable:function(){return u=l=r=t,this},disabled:function(){return!u},lock:function(){return l=t,r||p.disable(),this},locked:function(){return!l},fireWith:function(e,t){return t=t||[],t=[e,t.slice?t.slice():t],!u||i&&!l||(n?l.push(t):c(t)),this},fire:function(){return p.fireWith(this,arguments),this},fired:function(){return!!i}};return p},b.extend({Deferred:function(e){var t=[["resolve","done",b.Callbacks("once memory"),"resolved"],["reject","fail",b.Callbacks("once memory"),"rejected"],["notify","progress",b.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return b.Deferred(function(n){b.each(t,function(t,o){var a=o[0],s=b.isFunction(e[t])&&e[t];i[o[1]](function(){var e=s&&s.apply(this,arguments);e&&b.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[a+"With"](this===r?n.promise():this,s?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?b.extend(e,r):r}},i={};return r.pipe=r.then,b.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var s,u,l,t=0,n=h.call(arguments),r=n.length,i=1!==r||e&&b.isFunction(e.promise)?r:0,o=1===i?e:b.Deferred(),a=function(e,t,n){return function(r){t[e]=this,n[e]=arguments.length>1?h.call(arguments):r,n===s?o.notifyWith(t,n):--i||o.resolveWith(t,n)}};if(r>1)for(s=Array(r),u=Array(r),l=Array(r);r>t;t++)n[t]&&b.isFunction(n[t].promise)?n[t].promise().done(a(t,l,n)).fail(o.reject).progress(a(t,u,s)):--i;return i||o.resolveWith(l,n),o.promise()}}),b.support=function(){var t,n,r,a,s,u,l,c,p,f,d=o.createElement("div");if(d.setAttribute("className","t"),d.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",n=d.getElementsByTagName("*"),r=d.getElementsByTagName("a")[0],!n||!r||!n.length)return{};s=o.createElement("select"),l=s.appendChild(o.createElement("option")),a=d.getElementsByTagName("input")[0],r.style.cssText="top:1px;float:left;opacity:.5",t={getSetAttribute:"t"!==d.className,leadingWhitespace:3===d.firstChild.nodeType,tbody:!d.getElementsByTagName("tbody").length,htmlSerialize:!!d.getElementsByTagName("link").length,style:/top/.test(r.getAttribute("style")),hrefNormalized:"/a"===r.getAttribute("href"),opacity:/^0.5/.test(r.style.opacity),cssFloat:!!r.style.cssFloat,checkOn:!!a.value,optSelected:l.selected,enctype:!!o.createElement("form").enctype,html5Clone:"<:nav></:nav>"!==o.createElement("nav").cloneNode(!0).outerHTML,boxModel:"CSS1Compat"===o.compatMode,deleteExpando:!0,noCloneEvent:!0,inlineBlockNeedsLayout:!1,shrinkWrapBlocks:!1,reliableMarginRight:!0,boxSizingReliable:!0,pixelPosition:!1},a.checked=!0,t.noCloneChecked=a.cloneNode(!0).checked,s.disabled=!0,t.optDisabled=!l.disabled;try{delete d.test}catch(h){t.deleteExpando=!1}a=o.createElement("input"),a.setAttribute("value",""),t.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),t.radioValue="t"===a.value,a.setAttribute("checked","t"),a.setAttribute("name","t"),u=o.createDocumentFragment(),u.appendChild(a),t.appendChecked=a.checked,t.checkClone=u.cloneNode(!0).cloneNode(!0).lastChild.checked,d.attachEvent&&(d.attachEvent("onclick",function(){t.noCloneEvent=!1}),d.cloneNode(!0).click());for(f in{submit:!0,change:!0,focusin:!0})d.setAttribute(c="on"+f,"t"),t[f+"Bubbles"]=c in e||d.attributes[c].expando===!1;return d.style.backgroundClip="content-box",d.cloneNode(!0).style.backgroundClip="",t.clearCloneStyle="content-box"===d.style.backgroundClip,b(function(){var n,r,a,s="padding:0;margin:0;border:0;display:block;box-sizing:content-box;-moz-box-sizing:content-box;-webkit-box-sizing:content-box;",u=o.getElementsByTagName("body")[0];u&&(n=o.createElement("div"),n.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",u.appendChild(n).appendChild(d),d.innerHTML="<table><tr><td></td><td>t</td></tr></table>",a=d.getElementsByTagName("td"),a[0].style.cssText="padding:0;margin:0;border:0;display:none",p=0===a[0].offsetHeight,a[0].style.display="",a[1].style.display="none",t.reliableHiddenOffsets=p&&0===a[0].offsetHeight,d.innerHTML="",d.style.cssText="box-sizing:border-box;-moz-box-sizing:border-box;-webkit-box-sizing:border-box;padding:1px;border:1px;display:block;width:4px;margin-top:1%;position:absolute;top:1%;",t.boxSizing=4===d.offsetWidth,t.doesNotIncludeMarginInBodyOffset=1!==u.offsetTop,e.getComputedStyle&&(t.pixelPosition="1%"!==(e.getComputedStyle(d,null)||{}).top,t.boxSizingReliable="4px"===(e.getComputedStyle(d,null)||{width:"4px"}).width,r=d.appendChild(o.createElement("div")),r.style.cssText=d.style.cssText=s,r.style.marginRight=r.style.width="0",d.style.width="1px",t.reliableMarginRight=!parseFloat((e.getComputedStyle(r,null)||{}).marginRight)),typeof d.style.zoom!==i&&(d.innerHTML="",d.style.cssText=s+"width:1px;padding:1px;display:inline;zoom:1",t.inlineBlockNeedsLayout=3===d.offsetWidth,d.style.display="block",d.innerHTML="<div></div>",d.firstChild.style.width="5px",t.shrinkWrapBlocks=3!==d.offsetWidth,t.inlineBlockNeedsLayout&&(u.style.zoom=1)),u.removeChild(n),n=d=a=r=null)}),n=s=u=l=r=a=null,t}();var O=/(?:\{[\s\S]*\}|\[[\s\S]*\])$/,B=/([A-Z])/g;b.extend({cache:{},expando:"jQuery"+(p+Math.random()).replace(/\D/g,""),noData:{embed:!0,object:"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000",applet:!0},hasData:function(e){return e=e.nodeType?b.cache[e[b.expando]]:e[b.expando],!!e&&!$(e)},data:function(e,t,n){return P(e,t,n)},removeData:function(e,t){return R(e,t)},_data:function(e,t,n){return P(e,t,n,!0)},_removeData:function(e,t){return R(e,t,!0)},acceptData:function(e){if(e.nodeType&&1!==e.nodeType&&9!==e.nodeType)return!1;var t=e.nodeName&&b.noData[e.nodeName.toLowerCase()];return!t||t!==!0&&e.getAttribute("classid")===t}}),b.fn.extend({data:function(e,n){var r,i,o=this[0],a=0,s=null;if(e===t){if(this.length&&(s=b.data(o),1===o.nodeType&&!b._data(o,"parsedAttrs"))){for(r=o.attributes;r.length>a;a++)i=r[a].name,i.indexOf("data-")||(i=b.camelCase(i.slice(5)),W(o,i,s[i]));b._data(o,"parsedAttrs",!0)}return s}return"object"==typeof e?this.each(function(){b.data(this,e)}):b.access(this,function(n){return n===t?o?W(o,e,b.data(o,e)):null:(this.each(function(){b.data(this,e,n)}),t)},null,n,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){b.removeData(this,e)})}}),b.extend({queue:function(e,n,r){var i;return e?(n=(n||"fx")+"queue",i=b._data(e,n),r&&(!i||b.isArray(r)?i=b._data(e,n,b.makeArray(r)):i.push(r)),i||[]):t},dequeue:function(e,t){t=t||"fx";var n=b.queue(e,t),r=n.length,i=n.shift(),o=b._queueHooks(e,t),a=function(){b.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),o.cur=i,i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return b._data(e,n)||b._data(e,n,{empty:b.Callbacks("once memory").add(function(){b._removeData(e,t+"queue"),b._removeData(e,n)})})}}),b.fn.extend({queue:function(e,n){var r=2;return"string"!=typeof e&&(n=e,e="fx",r--),r>arguments.length?b.queue(this[0],e):n===t?this:this.each(function(){var t=b.queue(this,e,n);b._queueHooks(this,e),"fx"===e&&"inprogress"!==t[0]&&b.dequeue(this,e)})},dequeue:function(e){return this.each(function(){b.dequeue(this,e)})},delay:function(e,t){return e=b.fx?b.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,n){var r,i=1,o=b.Deferred(),a=this,s=this.length,u=function(){--i||o.resolveWith(a,[a])};for("string"!=typeof e&&(n=e,e=t),e=e||"fx";s--;)r=b._data(a[s],e+"queueHooks"),r&&r.empty&&(i++,r.empty.add(u));return u(),o.promise(n)}});var I,z,X=/[\t\r\n]/g,U=/\r/g,V=/^(?:input|select|textarea|button|object)$/i,Y=/^(?:a|area)$/i,J=/^(?:checked|selected|autofocus|autoplay|async|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped)$/i,G=/^(?:checked|selected)$/i,Q=b.support.getSetAttribute,K=b.support.input;b.fn.extend({attr:function(e,t){return b.access(this,b.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){b.removeAttr(this,e)})},prop:function(e,t){return b.access(this,b.prop,e,t,arguments.length>1)},removeProp:function(e){return e=b.propFix[e]||e,this.each(function(){try{this[e]=t,delete this[e]
}catch(n){}})},addClass:function(e){var t,n,r,i,o,a=0,s=this.length,u="string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):" ")){for(o=0;i=t[o++];)0>r.indexOf(" "+i+" ")&&(r+=i+" ");n.className=b.trim(r)}return this},removeClass:function(e){var t,n,r,i,o,a=0,s=this.length,u=0===arguments.length||"string"==typeof e&&e;if(b.isFunction(e))return this.each(function(t){b(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(w)||[];s>a;a++)if(n=this[a],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(X," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");n.className=e?b.trim(r):""}return this},toggleClass:function(e,t){var n=typeof e,r="boolean"==typeof t;return this.each(b.isFunction(e)?function(n){b(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var o,a=0,s=b(this),u=t,l=e.match(w)||[];o=l[a++];)u=r?u:!s.hasClass(o),s[u?"addClass":"removeClass"](o);else(n===i||"boolean"===n)&&(this.className&&b._data(this,"__className__",this.className),this.className=this.className||e===!1?"":b._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(X," ").indexOf(t)>=0)return!0;return!1},val:function(e){var n,r,i,o=this[0];return arguments.length?(i=b.isFunction(e),this.each(function(n){var o,a=b(this);1===this.nodeType&&(o=i?e.call(this,n,a.val()):e,null==o?o="":"number"==typeof o?o+="":b.isArray(o)&&(o=b.map(o,function(e){return null==e?"":e+""})),r=b.valHooks[this.type]||b.valHooks[this.nodeName.toLowerCase()],r&&"set"in r&&r.set(this,o,"value")!==t||(this.value=o))})):o?(r=b.valHooks[o.type]||b.valHooks[o.nodeName.toLowerCase()],r&&"get"in r&&(n=r.get(o,"value"))!==t?n:(n=o.value,"string"==typeof n?n.replace(U,""):null==n?"":n)):void 0}}),b.extend({valHooks:{option:{get:function(e){var t=e.attributes.value;return!t||t.specified?e.value:e.text}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,u=0>i?s:o?i:0;s>u;u++)if(n=r[u],!(!n.selected&&u!==i||(b.support.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&b.nodeName(n.parentNode,"optgroup"))){if(t=b(n).val(),o)return t;a.push(t)}return a},set:function(e,t){var n=b.makeArray(t);return b(e).find("option").each(function(){this.selected=b.inArray(b(this).val(),n)>=0}),n.length||(e.selectedIndex=-1),n}}},attr:function(e,n,r){var o,a,s,u=e.nodeType;return e&&3!==u&&8!==u&&2!==u?typeof e.getAttribute===i?b.prop(e,n,r):(a=1!==u||!b.isXMLDoc(e),a&&(n=n.toLowerCase(),o=b.attrHooks[n]||(J.test(n)?z:I)),r===t?o&&a&&"get"in o&&null!==(s=o.get(e,n))?s:(typeof e.getAttribute!==i&&(s=e.getAttribute(n)),null==s?t:s):null!==r?o&&a&&"set"in o&&(s=o.set(e,r,n))!==t?s:(e.setAttribute(n,r+""),r):(b.removeAttr(e,n),t)):void 0},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(w);if(o&&1===e.nodeType)for(;n=o[i++];)r=b.propFix[n]||n,J.test(n)?!Q&&G.test(n)?e[b.camelCase("default-"+n)]=e[r]=!1:e[r]=!1:b.attr(e,n,""),e.removeAttribute(Q?n:r)},attrHooks:{type:{set:function(e,t){if(!b.support.radioValue&&"radio"===t&&b.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},propFix:{tabindex:"tabIndex",readonly:"readOnly","for":"htmlFor","class":"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder",contenteditable:"contentEditable"},prop:function(e,n,r){var i,o,a,s=e.nodeType;return e&&3!==s&&8!==s&&2!==s?(a=1!==s||!b.isXMLDoc(e),a&&(n=b.propFix[n]||n,o=b.propHooks[n]),r!==t?o&&"set"in o&&(i=o.set(e,r,n))!==t?i:e[n]=r:o&&"get"in o&&null!==(i=o.get(e,n))?i:e[n]):void 0},propHooks:{tabIndex:{get:function(e){var n=e.getAttributeNode("tabindex");return n&&n.specified?parseInt(n.value,10):V.test(e.nodeName)||Y.test(e.nodeName)&&e.href?0:t}}}}),z={get:function(e,n){var r=b.prop(e,n),i="boolean"==typeof r&&e.getAttribute(n),o="boolean"==typeof r?K&&Q?null!=i:G.test(n)?e[b.camelCase("default-"+n)]:!!i:e.getAttributeNode(n);return o&&o.value!==!1?n.toLowerCase():t},set:function(e,t,n){return t===!1?b.removeAttr(e,n):K&&Q||!G.test(n)?e.setAttribute(!Q&&b.propFix[n]||n,n):e[b.camelCase("default-"+n)]=e[n]=!0,n}},K&&Q||(b.attrHooks.value={get:function(e,n){var r=e.getAttributeNode(n);return b.nodeName(e,"input")?e.defaultValue:r&&r.specified?r.value:t},set:function(e,n,r){return b.nodeName(e,"input")?(e.defaultValue=n,t):I&&I.set(e,n,r)}}),Q||(I=b.valHooks.button={get:function(e,n){var r=e.getAttributeNode(n);return r&&("id"===n||"name"===n||"coords"===n?""!==r.value:r.specified)?r.value:t},set:function(e,n,r){var i=e.getAttributeNode(r);return i||e.setAttributeNode(i=e.ownerDocument.createAttribute(r)),i.value=n+="","value"===r||n===e.getAttribute(r)?n:t}},b.attrHooks.contenteditable={get:I.get,set:function(e,t,n){I.set(e,""===t?!1:t,n)}},b.each(["width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{set:function(e,r){return""===r?(e.setAttribute(n,"auto"),r):t}})})),b.support.hrefNormalized||(b.each(["href","src","width","height"],function(e,n){b.attrHooks[n]=b.extend(b.attrHooks[n],{get:function(e){var r=e.getAttribute(n,2);return null==r?t:r}})}),b.each(["href","src"],function(e,t){b.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}})),b.support.style||(b.attrHooks.style={get:function(e){return e.style.cssText||t},set:function(e,t){return e.style.cssText=t+""}}),b.support.optSelected||(b.propHooks.selected=b.extend(b.propHooks.selected,{get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}})),b.support.enctype||(b.propFix.enctype="encoding"),b.support.checkOn||b.each(["radio","checkbox"],function(){b.valHooks[this]={get:function(e){return null===e.getAttribute("value")?"on":e.value}}}),b.each(["radio","checkbox"],function(){b.valHooks[this]=b.extend(b.valHooks[this],{set:function(e,n){return b.isArray(n)?e.checked=b.inArray(b(e).val(),n)>=0:t}})});var Z=/^(?:input|select|textarea)$/i,et=/^key/,tt=/^(?:mouse|contextmenu)|click/,nt=/^(?:focusinfocus|focusoutblur)$/,rt=/^([^.]*)(?:\.(.+)|)$/;b.event={global:{},add:function(e,n,r,o,a){var s,u,l,c,p,f,d,h,g,m,y,v=b._data(e);if(v){for(r.handler&&(c=r,r=c.handler,a=c.selector),r.guid||(r.guid=b.guid++),(u=v.events)||(u=v.events={}),(f=v.handle)||(f=v.handle=function(e){return typeof b===i||e&&b.event.triggered===e.type?t:b.event.dispatch.apply(f.elem,arguments)},f.elem=e),n=(n||"").match(w)||[""],l=n.length;l--;)s=rt.exec(n[l])||[],g=y=s[1],m=(s[2]||"").split(".").sort(),p=b.event.special[g]||{},g=(a?p.delegateType:p.bindType)||g,p=b.event.special[g]||{},d=b.extend({type:g,origType:y,data:o,handler:r,guid:r.guid,selector:a,needsContext:a&&b.expr.match.needsContext.test(a),namespace:m.join(".")},c),(h=u[g])||(h=u[g]=[],h.delegateCount=0,p.setup&&p.setup.call(e,o,m,f)!==!1||(e.addEventListener?e.addEventListener(g,f,!1):e.attachEvent&&e.attachEvent("on"+g,f))),p.add&&(p.add.call(e,d),d.handler.guid||(d.handler.guid=r.guid)),a?h.splice(h.delegateCount++,0,d):h.push(d),b.event.global[g]=!0;e=null}},remove:function(e,t,n,r,i){var o,a,s,u,l,c,p,f,d,h,g,m=b.hasData(e)&&b._data(e);if(m&&(c=m.events)){for(t=(t||"").match(w)||[""],l=t.length;l--;)if(s=rt.exec(t[l])||[],d=g=s[1],h=(s[2]||"").split(".").sort(),d){for(p=b.event.special[d]||{},d=(r?p.delegateType:p.bindType)||d,f=c[d]||[],s=s[2]&&RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),u=o=f.length;o--;)a=f[o],!i&&g!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,p.remove&&p.remove.call(e,a));u&&!f.length&&(p.teardown&&p.teardown.call(e,h,m.handle)!==!1||b.removeEvent(e,d,m.handle),delete c[d])}else for(d in c)b.event.remove(e,d+t[l],n,r,!0);b.isEmptyObject(c)&&(delete m.handle,b._removeData(e,"events"))}},trigger:function(n,r,i,a){var s,u,l,c,p,f,d,h=[i||o],g=y.call(n,"type")?n.type:n,m=y.call(n,"namespace")?n.namespace.split("."):[];if(l=f=i=i||o,3!==i.nodeType&&8!==i.nodeType&&!nt.test(g+b.event.triggered)&&(g.indexOf(".")>=0&&(m=g.split("."),g=m.shift(),m.sort()),u=0>g.indexOf(":")&&"on"+g,n=n[b.expando]?n:new b.Event(g,"object"==typeof n&&n),n.isTrigger=!0,n.namespace=m.join("."),n.namespace_re=n.namespace?RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,n.result=t,n.target||(n.target=i),r=null==r?[n]:b.makeArray(r,[n]),p=b.event.special[g]||{},a||!p.trigger||p.trigger.apply(i,r)!==!1)){if(!a&&!p.noBubble&&!b.isWindow(i)){for(c=p.delegateType||g,nt.test(c+g)||(l=l.parentNode);l;l=l.parentNode)h.push(l),f=l;f===(i.ownerDocument||o)&&h.push(f.defaultView||f.parentWindow||e)}for(d=0;(l=h[d++])&&!n.isPropagationStopped();)n.type=d>1?c:p.bindType||g,s=(b._data(l,"events")||{})[n.type]&&b._data(l,"handle"),s&&s.apply(l,r),s=u&&l[u],s&&b.acceptData(l)&&s.apply&&s.apply(l,r)===!1&&n.preventDefault();if(n.type=g,!(a||n.isDefaultPrevented()||p._default&&p._default.apply(i.ownerDocument,r)!==!1||"click"===g&&b.nodeName(i,"a")||!b.acceptData(i)||!u||!i[g]||b.isWindow(i))){f=i[u],f&&(i[u]=null),b.event.triggered=g;try{i[g]()}catch(v){}b.event.triggered=t,f&&(i[u]=f)}return n.result}},dispatch:function(e){e=b.event.fix(e);var n,r,i,o,a,s=[],u=h.call(arguments),l=(b._data(this,"events")||{})[e.type]||[],c=b.event.special[e.type]||{};if(u[0]=e,e.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,e)!==!1){for(s=b.event.handlers.call(this,e,l),n=0;(o=s[n++])&&!e.isPropagationStopped();)for(e.currentTarget=o.elem,a=0;(i=o.handlers[a++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(i.namespace))&&(e.handleObj=i,e.data=i.data,r=((b.event.special[i.origType]||{}).handle||i.handler).apply(o.elem,u),r!==t&&(e.result=r)===!1&&(e.preventDefault(),e.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,e),e.result}},handlers:function(e,n){var r,i,o,a,s=[],u=n.delegateCount,l=e.target;if(u&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(o=[],a=0;u>a;a++)i=n[a],r=i.selector+" ",o[r]===t&&(o[r]=i.needsContext?b(r,this).index(l)>=0:b.find(r,this,null,[l]).length),o[r]&&o.push(i);o.length&&s.push({elem:l,handlers:o})}return n.length>u&&s.push({elem:this,handlers:n.slice(u)}),s},fix:function(e){if(e[b.expando])return e;var t,n,r,i=e.type,a=e,s=this.fixHooks[i];for(s||(this.fixHooks[i]=s=tt.test(i)?this.mouseHooks:et.test(i)?this.keyHooks:{}),r=s.props?this.props.concat(s.props):this.props,e=new b.Event(a),t=r.length;t--;)n=r[t],e[n]=a[n];return e.target||(e.target=a.srcElement||o),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,s.filter?s.filter(e,a):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,n){var r,i,a,s=n.button,u=n.fromElement;return null==e.pageX&&null!=n.clientX&&(i=e.target.ownerDocument||o,a=i.documentElement,r=i.body,e.pageX=n.clientX+(a&&a.scrollLeft||r&&r.scrollLeft||0)-(a&&a.clientLeft||r&&r.clientLeft||0),e.pageY=n.clientY+(a&&a.scrollTop||r&&r.scrollTop||0)-(a&&a.clientTop||r&&r.clientTop||0)),!e.relatedTarget&&u&&(e.relatedTarget=u===e.target?n.toElement:u),e.which||s===t||(e.which=1&s?1:2&s?3:4&s?2:0),e}},special:{load:{noBubble:!0},click:{trigger:function(){return b.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):t}},focus:{trigger:function(){if(this!==o.activeElement&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===o.activeElement&&this.blur?(this.blur(),!1):t},delegateType:"focusout"},beforeunload:{postDispatch:function(e){e.result!==t&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=b.extend(new b.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?b.event.trigger(i,null,t):b.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},b.removeEvent=o.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===i&&(e[r]=null),e.detachEvent(r,n))},b.Event=function(e,n){return this instanceof b.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault()?it:ot):this.type=e,n&&b.extend(this,n),this.timeStamp=e&&e.timeStamp||b.now(),this[b.expando]=!0,t):new b.Event(e,n)},b.Event.prototype={isDefaultPrevented:ot,isPropagationStopped:ot,isImmediatePropagationStopped:ot,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=it,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=it,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=it,this.stopPropagation()}},b.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){b.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!b.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),b.support.submitBubbles||(b.event.special.submit={setup:function(){return b.nodeName(this,"form")?!1:(b.event.add(this,"click._submit keypress._submit",function(e){var n=e.target,r=b.nodeName(n,"input")||b.nodeName(n,"button")?n.form:t;r&&!b._data(r,"submitBubbles")&&(b.event.add(r,"submit._submit",function(e){e._submit_bubble=!0}),b._data(r,"submitBubbles",!0))}),t)},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&b.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return b.nodeName(this,"form")?!1:(b.event.remove(this,"._submit"),t)}}),b.support.changeBubbles||(b.event.special.change={setup:function(){return Z.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(b.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),b.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),b.event.simulate("change",this,e,!0)})),!1):(b.event.add(this,"beforeactivate._change",function(e){var t=e.target;Z.test(t.nodeName)&&!b._data(t,"changeBubbles")&&(b.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||b.event.simulate("change",this.parentNode,e,!0)}),b._data(t,"changeBubbles",!0))}),t)},handle:function(e){var n=e.target;return this!==n||e.isSimulated||e.isTrigger||"radio"!==n.type&&"checkbox"!==n.type?e.handleObj.handler.apply(this,arguments):t},teardown:function(){return b.event.remove(this,"._change"),!Z.test(this.nodeName)}}),b.support.focusinBubbles||b.each({focus:"focusin",blur:"focusout"},function(e,t){var n=0,r=function(e){b.event.simulate(t,e.target,b.event.fix(e),!0)};b.event.special[t]={setup:function(){0===n++&&o.addEventListener(e,r,!0)},teardown:function(){0===--n&&o.removeEventListener(e,r,!0)}}}),b.fn.extend({on:function(e,n,r,i,o){var a,s;if("object"==typeof e){"string"!=typeof n&&(r=r||n,n=t);for(a in e)this.on(a,n,r,e[a],o);return this}if(null==r&&null==i?(i=n,r=n=t):null==i&&("string"==typeof n?(i=r,r=t):(i=r,r=n,n=t)),i===!1)i=ot;else if(!i)return this;return 1===o&&(s=i,i=function(e){return b().off(e),s.apply(this,arguments)},i.guid=s.guid||(s.guid=b.guid++)),this.each(function(){b.event.add(this,e,i,r,n)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,n,r){var i,o;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,b(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(o in e)this.off(o,n,e[o]);return this}return(n===!1||"function"==typeof n)&&(r=n,n=t),r===!1&&(r=ot),this.each(function(){b.event.remove(this,e,r,n)})},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},trigger:function(e,t){return this.each(function(){b.event.trigger(e,t,this)})},triggerHandler:function(e,n){var r=this[0];return r?b.event.trigger(e,n,r,!0):t}}),function(e,t){function rt(e){return Y.test(e+"")}function it(){var e,t=[];return e=function(n,r){return t.push(n+=" ")>i.cacheLength&&delete e[t.shift()],e[n]=r}}function ot(e){return e[x]=!0,e}function at(e){var t=p.createElement("div");try{return e(t)}catch(n){return!1}finally{t=null}}function st(e,t,n,r){var i,o,a,s,u,l,f,g,m,v;if((t?t.ownerDocument||t:w)!==p&&c(t),t=t||p,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(!d&&!r){if(i=J.exec(e))if(a=i[1]){if(9===s){if(o=t.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&y(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return H.apply(n,q.call(t.getElementsByTagName(e),0)),n;if((a=i[3])&&T.getByClassName&&t.getElementsByClassName)return H.apply(n,q.call(t.getElementsByClassName(a),0)),n}if(T.qsa&&!h.test(e)){if(f=!0,g=x,m=t,v=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(l=ft(e),(f=t.getAttribute("id"))?g=f.replace(K,"\\$&"):t.setAttribute("id",g),g="[id='"+g+"'] ",u=l.length;u--;)l[u]=g+dt(l[u]);m=V.test(e)&&t.parentNode||t,v=l.join(",")}if(v)try{return H.apply(n,q.call(m.querySelectorAll(v),0)),n}catch(b){}finally{f||t.removeAttribute("id")}}}return wt(e.replace(W,"$1"),t,n,r)}function ut(e,t){var n=t&&e,r=n&&(~t.sourceIndex||j)-(~e.sourceIndex||j);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function ct(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function pt(e){return ot(function(t){return t=+t,ot(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function ft(e,t){var n,r,o,a,s,u,l,c=E[e+" "];if(c)return t?0:c.slice(0);for(s=e,u=[],l=i.preFilter;s;){(!n||(r=$.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),u.push(o=[])),n=!1,(r=I.exec(s))&&(n=r.shift(),o.push({value:n,type:r[0].replace(W," ")}),s=s.slice(n.length));for(a in i.filter)!(r=U[a].exec(s))||l[a]&&!(r=l[a](r))||(n=r.shift(),o.push({value:n,type:a,matches:r}),s=s.slice(n.length));if(!n)break}return t?s.length:s?st.error(e):E(e,u).slice(0)}function dt(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function ht(e,t,n){var i=t.dir,o=n&&"parentNode"===i,a=C++;return t.first?function(t,n,r){for(;t=t[i];)if(1===t.nodeType||o)return e(t,n,r)}:function(t,n,s){var u,l,c,p=N+" "+a;if(s){for(;t=t[i];)if((1===t.nodeType||o)&&e(t,n,s))return!0}else for(;t=t[i];)if(1===t.nodeType||o)if(c=t[x]||(t[x]={}),(l=c[i])&&l[0]===p){if((u=l[1])===!0||u===r)return u===!0}else if(l=c[i]=[p],l[1]=e(t,n,s)||r,l[1]===!0)return!0}}function gt(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function mt(e,t,n,r,i){for(var o,a=[],s=0,u=e.length,l=null!=t;u>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),l&&t.push(s));return a}function yt(e,t,n,r,i,o){return r&&!r[x]&&(r=yt(r)),i&&!i[x]&&(i=yt(i,o)),ot(function(o,a,s,u){var l,c,p,f=[],d=[],h=a.length,g=o||xt(t||"*",s.nodeType?[s]:s,[]),m=!e||!o&&t?g:mt(g,f,e,s,u),y=n?i||(o?e:h||r)?[]:a:m;if(n&&n(m,y,s,u),r)for(l=mt(y,d),r(l,[],s,u),c=l.length;c--;)(p=l[c])&&(y[d[c]]=!(m[d[c]]=p));if(o){if(i||e){if(i){for(l=[],c=y.length;c--;)(p=y[c])&&l.push(m[c]=p);i(null,y=[],l,u)}for(c=y.length;c--;)(p=y[c])&&(l=i?M.call(o,p):f[c])>-1&&(o[l]=!(a[l]=p))}}else y=mt(y===a?y.splice(h,y.length):y),i?i(null,a,y,u):H.apply(a,y)})}function vt(e){for(var t,n,r,o=e.length,a=i.relative[e[0].type],s=a||i.relative[" "],u=a?1:0,c=ht(function(e){return e===t},s,!0),p=ht(function(e){return M.call(t,e)>-1},s,!0),f=[function(e,n,r){return!a&&(r||n!==l)||((t=n).nodeType?c(e,n,r):p(e,n,r))}];o>u;u++)if(n=i.relative[e[u].type])f=[ht(gt(f),n)];else{if(n=i.filter[e[u].type].apply(null,e[u].matches),n[x]){for(r=++u;o>r&&!i.relative[e[r].type];r++);return yt(u>1&&gt(f),u>1&&dt(e.slice(0,u-1)).replace(W,"$1"),n,r>u&&vt(e.slice(u,r)),o>r&&vt(e=e.slice(r)),o>r&&dt(e))}f.push(n)}return gt(f)}function bt(e,t){var n=0,o=t.length>0,a=e.length>0,s=function(s,u,c,f,d){var h,g,m,y=[],v=0,b="0",x=s&&[],w=null!=d,T=l,C=s||a&&i.find.TAG("*",d&&u.parentNode||u),k=N+=null==T?1:Math.random()||.1;for(w&&(l=u!==p&&u,r=n);null!=(h=C[b]);b++){if(a&&h){for(g=0;m=e[g++];)if(m(h,u,c)){f.push(h);break}w&&(N=k,r=++n)}o&&((h=!m&&h)&&v--,s&&x.push(h))}if(v+=b,o&&b!==v){for(g=0;m=t[g++];)m(x,y,u,c);if(s){if(v>0)for(;b--;)x[b]||y[b]||(y[b]=L.call(f));y=mt(y)}H.apply(f,y),w&&!s&&y.length>0&&v+t.length>1&&st.uniqueSort(f)}return w&&(N=k,l=T),x};return o?ot(s):s}function xt(e,t,n){for(var r=0,i=t.length;i>r;r++)st(e,t[r],n);return n}function wt(e,t,n,r){var o,a,u,l,c,p=ft(e);if(!r&&1===p.length){if(a=p[0]=p[0].slice(0),a.length>2&&"ID"===(u=a[0]).type&&9===t.nodeType&&!d&&i.relative[a[1].type]){if(t=i.find.ID(u.matches[0].replace(et,tt),t)[0],!t)return n;e=e.slice(a.shift().value.length)}for(o=U.needsContext.test(e)?0:a.length;o--&&(u=a[o],!i.relative[l=u.type]);)if((c=i.find[l])&&(r=c(u.matches[0].replace(et,tt),V.test(a[0].type)&&t.parentNode||t))){if(a.splice(o,1),e=r.length&&dt(a),!e)return H.apply(n,q.call(r,0)),n;break}}return s(e,p)(r,t,d,n,V.test(e)),n}function Tt(){}var n,r,i,o,a,s,u,l,c,p,f,d,h,g,m,y,v,x="sizzle"+-new Date,w=e.document,T={},N=0,C=0,k=it(),E=it(),S=it(),A=typeof t,j=1<<31,D=[],L=D.pop,H=D.push,q=D.slice,M=D.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},_="[\\x20\\t\\r\\n\\f]",F="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=F.replace("w","w#"),B="([*^$|!~]?=)",P="\\["+_+"*("+F+")"+_+"*(?:"+B+_+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+O+")|)|)"+_+"*\\]",R=":("+F+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+P.replace(3,8)+")*)|.*)\\)|)",W=RegExp("^"+_+"+|((?:^|[^\\\\])(?:\\\\.)*)"+_+"+$","g"),$=RegExp("^"+_+"*,"+_+"*"),I=RegExp("^"+_+"*([\\x20\\t\\r\\n\\f>+~])"+_+"*"),z=RegExp(R),X=RegExp("^"+O+"$"),U={ID:RegExp("^#("+F+")"),CLASS:RegExp("^\\.("+F+")"),NAME:RegExp("^\\[name=['\"]?("+F+")['\"]?\\]"),TAG:RegExp("^("+F.replace("w","w*")+")"),ATTR:RegExp("^"+P),PSEUDO:RegExp("^"+R),CHILD:RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+_+"*(even|odd|(([+-]|)(\\d*)n|)"+_+"*(?:([+-]|)"+_+"*(\\d+)|))"+_+"*\\)|)","i"),needsContext:RegExp("^"+_+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+_+"*((?:-\\d)?\\d*)"+_+"*\\)|)(?=[^-]|$)","i")},V=/[\x20\t\r\n\f]*[+~]/,Y=/^[^{]+\{\s*\[native code/,J=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,G=/^(?:input|select|textarea|button)$/i,Q=/^h\d$/i,K=/'|\\/g,Z=/\=[\x20\t\r\n\f]*([^'"\]]*)[\x20\t\r\n\f]*\]/g,et=/\\([\da-fA-F]{1,6}[\x20\t\r\n\f]?|.)/g,tt=function(e,t){var n="0x"+t-65536;return n!==n?t:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)};try{q.call(w.documentElement.childNodes,0)[0].nodeType}catch(nt){q=function(e){for(var t,n=[];t=this[e++];)n.push(t);return n}}a=st.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?"HTML"!==t.nodeName:!1},c=st.setDocument=function(e){var n=e?e.ownerDocument||e:w;return n!==p&&9===n.nodeType&&n.documentElement?(p=n,f=n.documentElement,d=a(n),T.tagNameNoComments=at(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),T.attributes=at(function(e){e.innerHTML="<select></select>";var t=typeof e.lastChild.getAttribute("multiple");return"boolean"!==t&&"string"!==t}),T.getByClassName=at(function(e){return e.innerHTML="<div class='hidden e'></div><div class='hidden'></div>",e.getElementsByClassName&&e.getElementsByClassName("e").length?(e.lastChild.className="e",2===e.getElementsByClassName("e").length):!1}),T.getByName=at(function(e){e.id=x+0,e.innerHTML="<a name='"+x+"'></a><div name='"+x+"'></div>",f.insertBefore(e,f.firstChild);var t=n.getElementsByName&&n.getElementsByName(x).length===2+n.getElementsByName(x+0).length;return T.getIdNotName=!n.getElementById(x),f.removeChild(e),t}),i.attrHandle=at(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild&&typeof e.firstChild.getAttribute!==A&&"#"===e.firstChild.getAttribute("href")})?{}:{href:function(e){return e.getAttribute("href",2)},type:function(e){return e.getAttribute("type")}},T.getIdNotName?(i.find.ID=function(e,t){if(typeof t.getElementById!==A&&!d){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(i.find.ID=function(e,n){if(typeof n.getElementById!==A&&!d){var r=n.getElementById(e);return r?r.id===e||typeof r.getAttributeNode!==A&&r.getAttributeNode("id").value===e?[r]:t:[]}},i.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==A&&e.getAttributeNode("id");return n&&n.value===t}}),i.find.TAG=T.tagNameNoComments?function(e,n){return typeof n.getElementsByTagName!==A?n.getElementsByTagName(e):t}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},i.find.NAME=T.getByName&&function(e,n){return typeof n.getElementsByName!==A?n.getElementsByName(name):t},i.find.CLASS=T.getByClassName&&function(e,n){return typeof n.getElementsByClassName===A||d?t:n.getElementsByClassName(e)},g=[],h=[":focus"],(T.qsa=rt(n.querySelectorAll))&&(at(function(e){e.innerHTML="<select><option selected=''></option></select>",e.querySelectorAll("[selected]").length||h.push("\\["+_+"*(?:checked|disabled|ismap|multiple|readonly|selected|value)"),e.querySelectorAll(":checked").length||h.push(":checked")}),at(function(e){e.innerHTML="<input type='hidden' i=''/>",e.querySelectorAll("[i^='']").length&&h.push("[*^$]="+_+"*(?:\"\"|'')"),e.querySelectorAll(":enabled").length||h.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),h.push(",.*:")})),(T.matchesSelector=rt(m=f.matchesSelector||f.mozMatchesSelector||f.webkitMatchesSelector||f.oMatchesSelector||f.msMatchesSelector))&&at(function(e){T.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),g.push("!=",R)}),h=RegExp(h.join("|")),g=RegExp(g.join("|")),y=rt(f.contains)||f.compareDocumentPosition?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},v=f.compareDocumentPosition?function(e,t){var r;return e===t?(u=!0,0):(r=t.compareDocumentPosition&&e.compareDocumentPosition&&e.compareDocumentPosition(t))?1&r||e.parentNode&&11===e.parentNode.nodeType?e===n||y(w,e)?-1:t===n||y(w,t)?1:0:4&r?-1:1:e.compareDocumentPosition?-1:1}:function(e,t){var r,i=0,o=e.parentNode,a=t.parentNode,s=[e],l=[t];if(e===t)return u=!0,0;if(!o||!a)return e===n?-1:t===n?1:o?-1:a?1:0;if(o===a)return ut(e,t);for(r=e;r=r.parentNode;)s.unshift(r);for(r=t;r=r.parentNode;)l.unshift(r);for(;s[i]===l[i];)i++;return i?ut(s[i],l[i]):s[i]===w?-1:l[i]===w?1:0},u=!1,[0,0].sort(v),T.detectDuplicates=u,p):p},st.matches=function(e,t){return st(e,null,null,t)},st.matchesSelector=function(e,t){if((e.ownerDocument||e)!==p&&c(e),t=t.replace(Z,"='$1']"),!(!T.matchesSelector||d||g&&g.test(t)||h.test(t)))try{var n=m.call(e,t);if(n||T.disconnectedMatch||e.document&&11!==e.document.nodeType)return n}catch(r){}return st(t,p,null,[e]).length>0},st.contains=function(e,t){return(e.ownerDocument||e)!==p&&c(e),y(e,t)},st.attr=function(e,t){var n;return(e.ownerDocument||e)!==p&&c(e),d||(t=t.toLowerCase()),(n=i.attrHandle[t])?n(e):d||T.attributes?e.getAttribute(t):((n=e.getAttributeNode(t))||e.getAttribute(t))&&e[t]===!0?t:n&&n.specified?n.value:null},st.error=function(e){throw Error("Syntax error, unrecognized expression: "+e)},st.uniqueSort=function(e){var t,n=[],r=1,i=0;if(u=!T.detectDuplicates,e.sort(v),u){for(;t=e[r];r++)t===e[r-1]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return e},o=st.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=o(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r];r++)n+=o(t);return n},i=st.selectors={cacheLength:50,createPseudo:ot,match:U,find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||st.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&st.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return U.CHILD.test(e[0])?null:(e[4]?e[2]=e[4]:n&&z.test(n)&&(t=ft(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){return"*"===e?function(){return!0}:(e=e.replace(et,tt).toLowerCase(),function(t){return t.nodeName&&t.nodeName.toLowerCase()===e})},CLASS:function(e){var t=k[e+" "];return t||(t=RegExp("(^|"+_+")"+e+"("+_+"|$)"))&&k(e,function(e){return t.test(e.className||typeof e.getAttribute!==A&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=st.attr(r,e);return null==i?"!="===t:t?(i+="","="===t?i===n:"!="===t?i!==n:"^="===t?n&&0===i.indexOf(n):"*="===t?n&&i.indexOf(n)>-1:"$="===t?n&&i.slice(-n.length)===n:"~="===t?(" "+i+" ").indexOf(n)>-1:"|="===t?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,u){var l,c,p,f,d,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,y=s&&t.nodeName.toLowerCase(),v=!u&&!s;if(m){if(o){for(;g;){for(p=t;p=p[g];)if(s?p.nodeName.toLowerCase()===y:1===p.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&v){for(c=m[x]||(m[x]={}),l=c[e]||[],d=l[0]===N&&l[1],f=l[0]===N&&l[2],p=d&&m.childNodes[d];p=++d&&p&&p[g]||(f=d=0)||h.pop();)if(1===p.nodeType&&++f&&p===t){c[e]=[N,d,f];break}}else if(v&&(l=(t[x]||(t[x]={}))[e])&&l[0]===N)f=l[1];else for(;(p=++d&&p&&p[g]||(f=d=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==y:1!==p.nodeType)||!++f||(v&&((p[x]||(p[x]={}))[e]=[N,f]),p!==t)););return f-=i,f===r||0===f%r&&f/r>=0}}},PSEUDO:function(e,t){var n,r=i.pseudos[e]||i.setFilters[e.toLowerCase()]||st.error("unsupported pseudo: "+e);return r[x]?r(t):r.length>1?(n=[e,e,"",t],i.setFilters.hasOwnProperty(e.toLowerCase())?ot(function(e,n){for(var i,o=r(e,t),a=o.length;a--;)i=M.call(e,o[a]),e[i]=!(n[i]=o[a])}):function(e){return r(e,0,n)}):r}},pseudos:{not:ot(function(e){var t=[],n=[],r=s(e.replace(W,"$1"));return r[x]?ot(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),!n.pop()}}),has:ot(function(e){return function(t){return st(e,t).length>0}}),contains:ot(function(e){return function(t){return(t.textContent||t.innerText||o(t)).indexOf(e)>-1
}}),lang:ot(function(e){return X.test(e||"")||st.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=d?t.getAttribute("xml:lang")||t.getAttribute("lang"):t.lang)return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===f},focus:function(e){return e===p.activeElement&&(!p.hasFocus||p.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeName>"@"||3===e.nodeType||4===e.nodeType)return!1;return!0},parent:function(e){return!i.pseudos.empty(e)},header:function(e){return Q.test(e.nodeName)},input:function(e){return G.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||t.toLowerCase()===e.type)},first:pt(function(){return[0]}),last:pt(function(e,t){return[t-1]}),eq:pt(function(e,t,n){return[0>n?n+t:n]}),even:pt(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:pt(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:pt(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:pt(function(e,t,n){for(var r=0>n?n+t:n;t>++r;)e.push(r);return e})}};for(n in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})i.pseudos[n]=lt(n);for(n in{submit:!0,reset:!0})i.pseudos[n]=ct(n);s=st.compile=function(e,t){var n,r=[],i=[],o=S[e+" "];if(!o){for(t||(t=ft(e)),n=t.length;n--;)o=vt(t[n]),o[x]?r.push(o):i.push(o);o=S(e,bt(i,r))}return o},i.pseudos.nth=i.pseudos.eq,i.filters=Tt.prototype=i.pseudos,i.setFilters=new Tt,c(),st.attr=b.attr,b.find=st,b.expr=st.selectors,b.expr[":"]=b.expr.pseudos,b.unique=st.uniqueSort,b.text=st.getText,b.isXMLDoc=st.isXML,b.contains=st.contains}(e);var at=/Until$/,st=/^(?:parents|prev(?:Until|All))/,ut=/^.[^:#\[\.,]*$/,lt=b.expr.match.needsContext,ct={children:!0,contents:!0,next:!0,prev:!0};b.fn.extend({find:function(e){var t,n,r,i=this.length;if("string"!=typeof e)return r=this,this.pushStack(b(e).filter(function(){for(t=0;i>t;t++)if(b.contains(r[t],this))return!0}));for(n=[],t=0;i>t;t++)b.find(e,this[t],n);return n=this.pushStack(i>1?b.unique(n):n),n.selector=(this.selector?this.selector+" ":"")+e,n},has:function(e){var t,n=b(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(b.contains(this,n[t]))return!0})},not:function(e){return this.pushStack(ft(this,e,!1))},filter:function(e){return this.pushStack(ft(this,e,!0))},is:function(e){return!!e&&("string"==typeof e?lt.test(e)?b(e,this.context).index(this[0])>=0:b.filter(e,this).length>0:this.filter(e).length>0)},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=lt.test(e)||"string"!=typeof e?b(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n.ownerDocument&&n!==t&&11!==n.nodeType;){if(a?a.index(n)>-1:b.find.matchesSelector(n,e)){o.push(n);break}n=n.parentNode}return this.pushStack(o.length>1?b.unique(o):o)},index:function(e){return e?"string"==typeof e?b.inArray(this[0],b(e)):b.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){var n="string"==typeof e?b(e,t):b.makeArray(e&&e.nodeType?[e]:e),r=b.merge(this.get(),n);return this.pushStack(b.unique(r))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),b.fn.andSelf=b.fn.addBack,b.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return b.dir(e,"parentNode")},parentsUntil:function(e,t,n){return b.dir(e,"parentNode",n)},next:function(e){return pt(e,"nextSibling")},prev:function(e){return pt(e,"previousSibling")},nextAll:function(e){return b.dir(e,"nextSibling")},prevAll:function(e){return b.dir(e,"previousSibling")},nextUntil:function(e,t,n){return b.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return b.dir(e,"previousSibling",n)},siblings:function(e){return b.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return b.sibling(e.firstChild)},contents:function(e){return b.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:b.merge([],e.childNodes)}},function(e,t){b.fn[e]=function(n,r){var i=b.map(this,t,n);return at.test(e)||(r=n),r&&"string"==typeof r&&(i=b.filter(r,i)),i=this.length>1&&!ct[e]?b.unique(i):i,this.length>1&&st.test(e)&&(i=i.reverse()),this.pushStack(i)}}),b.extend({filter:function(e,t,n){return n&&(e=":not("+e+")"),1===t.length?b.find.matchesSelector(t[0],e)?[t[0]]:[]:b.find.matches(e,t)},dir:function(e,n,r){for(var i=[],o=e[n];o&&9!==o.nodeType&&(r===t||1!==o.nodeType||!b(o).is(r));)1===o.nodeType&&i.push(o),o=o[n];return i},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}});var ht="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",gt=/ jQuery\d+="(?:null|\d+)"/g,mt=RegExp("<(?:"+ht+")[\\s/>]","i"),yt=/^\s+/,vt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bt=/<([\w:]+)/,xt=/<tbody/i,wt=/<|&#?\w+;/,Tt=/<(?:script|style|link)/i,Nt=/^(?:checkbox|radio)$/i,Ct=/checked\s*(?:[^=]|=\s*.checked.)/i,kt=/^$|\/(?:java|ecma)script/i,Et=/^true\/(.*)/,St=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,At={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:b.support.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},jt=dt(o),Dt=jt.appendChild(o.createElement("div"));At.optgroup=At.option,At.tbody=At.tfoot=At.colgroup=At.caption=At.thead,At.th=At.td,b.fn.extend({text:function(e){return b.access(this,function(e){return e===t?b.text(this):this.empty().append((this[0]&&this[0].ownerDocument||o).createTextNode(e))},null,e,arguments.length)},wrapAll:function(e){if(b.isFunction(e))return this.each(function(t){b(this).wrapAll(e.call(this,t))});if(this[0]){var t=b(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(b.isFunction(e)?function(t){b(this).wrapInner(e.call(this,t))}:function(){var t=b(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=b.isFunction(e);return this.each(function(n){b(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){b.nodeName(this,"body")||b(this).replaceWith(this.childNodes)}).end()},append:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.appendChild(e)})},prepend:function(){return this.domManip(arguments,!0,function(e){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&this.insertBefore(e,this.firstChild)})},before:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,!1,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=0;null!=(n=this[r]);r++)(!e||b.filter(e,[n]).length>0)&&(t||1!==n.nodeType||b.cleanData(Ot(n)),n.parentNode&&(t&&b.contains(n.ownerDocument,n)&&Mt(Ot(n,"script")),n.parentNode.removeChild(n)));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&b.cleanData(Ot(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&b.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null==e?!1:e,t=null==t?e:t,this.map(function(){return b.clone(this,e,t)})},html:function(e){return b.access(this,function(e){var n=this[0]||{},r=0,i=this.length;if(e===t)return 1===n.nodeType?n.innerHTML.replace(gt,""):t;if(!("string"!=typeof e||Tt.test(e)||!b.support.htmlSerialize&&mt.test(e)||!b.support.leadingWhitespace&&yt.test(e)||At[(bt.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(vt,"<$1></$2>");try{for(;i>r;r++)n=this[r]||{},1===n.nodeType&&(b.cleanData(Ot(n,!1)),n.innerHTML=e);n=0}catch(o){}}n&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(e){var t=b.isFunction(e);return t||"string"==typeof e||(e=b(e).not(this).detach()),this.domManip([e],!0,function(e){var t=this.nextSibling,n=this.parentNode;n&&(b(this).remove(),n.insertBefore(e,t))})},detach:function(e){return this.remove(e,!0)},domManip:function(e,n,r){e=f.apply([],e);var i,o,a,s,u,l,c=0,p=this.length,d=this,h=p-1,g=e[0],m=b.isFunction(g);if(m||!(1>=p||"string"!=typeof g||b.support.checkClone)&&Ct.test(g))return this.each(function(i){var o=d.eq(i);m&&(e[0]=g.call(this,i,n?o.html():t)),o.domManip(e,n,r)});if(p&&(l=b.buildFragment(e,this[0].ownerDocument,!1,this),i=l.firstChild,1===l.childNodes.length&&(l=i),i)){for(n=n&&b.nodeName(i,"tr"),s=b.map(Ot(l,"script"),Ht),a=s.length;p>c;c++)o=l,c!==h&&(o=b.clone(o,!0,!0),a&&b.merge(s,Ot(o,"script"))),r.call(n&&b.nodeName(this[c],"table")?Lt(this[c],"tbody"):this[c],o,c);if(a)for(u=s[s.length-1].ownerDocument,b.map(s,qt),c=0;a>c;c++)o=s[c],kt.test(o.type||"")&&!b._data(o,"globalEval")&&b.contains(u,o)&&(o.src?b.ajax({url:o.src,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0}):b.globalEval((o.text||o.textContent||o.innerHTML||"").replace(St,"")));l=i=null}return this}}),b.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){b.fn[e]=function(e){for(var n,r=0,i=[],o=b(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),b(o[r])[t](n),d.apply(i,n.get());return this.pushStack(i)}}),b.extend({clone:function(e,t,n){var r,i,o,a,s,u=b.contains(e.ownerDocument,e);if(b.support.html5Clone||b.isXMLDoc(e)||!mt.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Dt.innerHTML=e.outerHTML,Dt.removeChild(o=Dt.firstChild)),!(b.support.noCloneEvent&&b.support.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||b.isXMLDoc(e)))for(r=Ot(o),s=Ot(e),a=0;null!=(i=s[a]);++a)r[a]&&Ft(i,r[a]);if(t)if(n)for(s=s||Ot(e),r=r||Ot(o),a=0;null!=(i=s[a]);a++)_t(i,r[a]);else _t(e,o);return r=Ot(o,"script"),r.length>0&&Mt(r,!u&&Ot(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,u,l,c,p=e.length,f=dt(t),d=[],h=0;p>h;h++)if(o=e[h],o||0===o)if("object"===b.type(o))b.merge(d,o.nodeType?[o]:o);else if(wt.test(o)){for(s=s||f.appendChild(t.createElement("div")),u=(bt.exec(o)||["",""])[1].toLowerCase(),c=At[u]||At._default,s.innerHTML=c[1]+o.replace(vt,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!b.support.leadingWhitespace&&yt.test(o)&&d.push(t.createTextNode(yt.exec(o)[0])),!b.support.tbody)for(o="table"!==u||xt.test(o)?"<table>"!==c[1]||xt.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)b.nodeName(l=o.childNodes[i],"tbody")&&!l.childNodes.length&&o.removeChild(l);for(b.merge(d,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else d.push(t.createTextNode(o));for(s&&f.removeChild(s),b.support.appendChecked||b.grep(Ot(d,"input"),Bt),h=0;o=d[h++];)if((!r||-1===b.inArray(o,r))&&(a=b.contains(o.ownerDocument,o),s=Ot(f.appendChild(o),"script"),a&&Mt(s),n))for(i=0;o=s[i++];)kt.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,r,o,a,s=0,u=b.expando,l=b.cache,p=b.support.deleteExpando,f=b.event.special;null!=(n=e[s]);s++)if((t||b.acceptData(n))&&(o=n[u],a=o&&l[o])){if(a.events)for(r in a.events)f[r]?b.event.remove(n,r):b.removeEvent(n,r,a.handle);l[o]&&(delete l[o],p?delete n[u]:typeof n.removeAttribute!==i?n.removeAttribute(u):n[u]=null,c.push(o))}}});var Pt,Rt,Wt,$t=/alpha\([^)]*\)/i,It=/opacity\s*=\s*([^)]*)/,zt=/^(top|right|bottom|left)$/,Xt=/^(none|table(?!-c[ea]).+)/,Ut=/^margin/,Vt=RegExp("^("+x+")(.*)$","i"),Yt=RegExp("^("+x+")(?!px)[a-z%]+$","i"),Jt=RegExp("^([+-])=("+x+")","i"),Gt={BODY:"block"},Qt={position:"absolute",visibility:"hidden",display:"block"},Kt={letterSpacing:0,fontWeight:400},Zt=["Top","Right","Bottom","Left"],en=["Webkit","O","Moz","ms"];b.fn.extend({css:function(e,n){return b.access(this,function(e,n,r){var i,o,a={},s=0;if(b.isArray(n)){for(o=Rt(e),i=n.length;i>s;s++)a[n[s]]=b.css(e,n[s],!1,o);return a}return r!==t?b.style(e,n,r):b.css(e,n)},e,n,arguments.length>1)},show:function(){return rn(this,!0)},hide:function(){return rn(this)},toggle:function(e){var t="boolean"==typeof e;return this.each(function(){(t?e:nn(this))?b(this).show():b(this).hide()})}}),b.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Wt(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":b.support.cssFloat?"cssFloat":"styleFloat"},style:function(e,n,r,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var o,a,s,u=b.camelCase(n),l=e.style;if(n=b.cssProps[u]||(b.cssProps[u]=tn(l,u)),s=b.cssHooks[n]||b.cssHooks[u],r===t)return s&&"get"in s&&(o=s.get(e,!1,i))!==t?o:l[n];if(a=typeof r,"string"===a&&(o=Jt.exec(r))&&(r=(o[1]+1)*o[2]+parseFloat(b.css(e,n)),a="number"),!(null==r||"number"===a&&isNaN(r)||("number"!==a||b.cssNumber[u]||(r+="px"),b.support.clearCloneStyle||""!==r||0!==n.indexOf("background")||(l[n]="inherit"),s&&"set"in s&&(r=s.set(e,r,i))===t)))try{l[n]=r}catch(c){}}},css:function(e,n,r,i){var o,a,s,u=b.camelCase(n);return n=b.cssProps[u]||(b.cssProps[u]=tn(e.style,u)),s=b.cssHooks[n]||b.cssHooks[u],s&&"get"in s&&(a=s.get(e,!0,r)),a===t&&(a=Wt(e,n,i)),"normal"===a&&n in Kt&&(a=Kt[n]),""===r||r?(o=parseFloat(a),r===!0||b.isNumeric(o)?o||0:a):a},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i}}),e.getComputedStyle?(Rt=function(t){return e.getComputedStyle(t,null)},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s.getPropertyValue(n)||s[n]:t,l=e.style;return s&&(""!==u||b.contains(e.ownerDocument,e)||(u=b.style(e,n)),Yt.test(u)&&Ut.test(n)&&(i=l.width,o=l.minWidth,a=l.maxWidth,l.minWidth=l.maxWidth=l.width=u,u=s.width,l.width=i,l.minWidth=o,l.maxWidth=a)),u}):o.documentElement.currentStyle&&(Rt=function(e){return e.currentStyle},Wt=function(e,n,r){var i,o,a,s=r||Rt(e),u=s?s[n]:t,l=e.style;return null==u&&l&&l[n]&&(u=l[n]),Yt.test(u)&&!zt.test(n)&&(i=l.left,o=e.runtimeStyle,a=o&&o.left,a&&(o.left=e.currentStyle.left),l.left="fontSize"===n?"1em":u,u=l.pixelLeft+"px",l.left=i,a&&(o.left=a)),""===u?"auto":u}),b.each(["height","width"],function(e,n){b.cssHooks[n]={get:function(e,r,i){return r?0===e.offsetWidth&&Xt.test(b.css(e,"display"))?b.swap(e,Qt,function(){return sn(e,n,i)}):sn(e,n,i):t},set:function(e,t,r){var i=r&&Rt(e);return on(e,t,r?an(e,n,r,b.support.boxSizing&&"border-box"===b.css(e,"boxSizing",!1,i),i):0)}}}),b.support.opacity||(b.cssHooks.opacity={get:function(e,t){return It.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=b.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===b.trim(o.replace($t,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=$t.test(o)?o.replace($t,i):o+" "+i)}}),b(function(){b.support.reliableMarginRight||(b.cssHooks.marginRight={get:function(e,n){return n?b.swap(e,{display:"inline-block"},Wt,[e,"marginRight"]):t}}),!b.support.pixelPosition&&b.fn.position&&b.each(["top","left"],function(e,n){b.cssHooks[n]={get:function(e,r){return r?(r=Wt(e,n),Yt.test(r)?b(e).position()[n]+"px":r):t}}})}),b.expr&&b.expr.filters&&(b.expr.filters.hidden=function(e){return 0>=e.offsetWidth&&0>=e.offsetHeight||!b.support.reliableHiddenOffsets&&"none"===(e.style&&e.style.display||b.css(e,"display"))},b.expr.filters.visible=function(e){return!b.expr.filters.hidden(e)}),b.each({margin:"",padding:"",border:"Width"},function(e,t){b.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+Zt[r]+t]=o[r]||o[r-2]||o[0];return i}},Ut.test(e)||(b.cssHooks[e+t].set=on)});var cn=/%20/g,pn=/\[\]$/,fn=/\r?\n/g,dn=/^(?:submit|button|image|reset|file)$/i,hn=/^(?:input|select|textarea|keygen)/i;b.fn.extend({serialize:function(){return b.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=b.prop(this,"elements");return e?b.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!b(this).is(":disabled")&&hn.test(this.nodeName)&&!dn.test(e)&&(this.checked||!Nt.test(e))}).map(function(e,t){var n=b(this).val();return null==n?null:b.isArray(n)?b.map(n,function(e){return{name:t.name,value:e.replace(fn,"\r\n")}}):{name:t.name,value:n.replace(fn,"\r\n")}}).get()}}),b.param=function(e,n){var r,i=[],o=function(e,t){t=b.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(n===t&&(n=b.ajaxSettings&&b.ajaxSettings.traditional),b.isArray(e)||e.jquery&&!b.isPlainObject(e))b.each(e,function(){o(this.name,this.value)});else for(r in e)gn(r,e[r],n,o);return i.join("&").replace(cn,"+")},b.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){b.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),b.fn.hover=function(e,t){return this.mouseenter(e).mouseleave(t||e)};var mn,yn,vn=b.now(),bn=/\?/,xn=/#.*$/,wn=/([?&])_=[^&]*/,Tn=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Nn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Cn=/^(?:GET|HEAD)$/,kn=/^\/\//,En=/^([\w.+-]+:)(?:\/\/([^\/?#:]*)(?::(\d+)|)|)/,Sn=b.fn.load,An={},jn={},Dn="*/".concat("*");try{yn=a.href}catch(Ln){yn=o.createElement("a"),yn.href="",yn=yn.href}mn=En.exec(yn.toLowerCase())||[],b.fn.load=function(e,n,r){if("string"!=typeof e&&Sn)return Sn.apply(this,arguments);var i,o,a,s=this,u=e.indexOf(" ");return u>=0&&(i=e.slice(u,e.length),e=e.slice(0,u)),b.isFunction(n)?(r=n,n=t):n&&"object"==typeof n&&(a="POST"),s.length>0&&b.ajax({url:e,type:a,dataType:"html",data:n}).done(function(e){o=arguments,s.html(i?b("<div>").append(b.parseHTML(e)).find(i):e)}).complete(r&&function(e,t){s.each(r,o||[e.responseText,t,e])}),this},b.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){b.fn[t]=function(e){return this.on(t,e)}}),b.each(["get","post"],function(e,n){b[n]=function(e,r,i,o){return b.isFunction(r)&&(o=o||i,i=r,r=t),b.ajax({url:e,type:n,dataType:o,data:r,success:i})}}),b.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:yn,type:"GET",isLocal:Nn.test(mn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Dn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText"},converters:{"* text":e.String,"text html":!0,"text json":b.parseJSON,"text xml":b.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Mn(Mn(e,b.ajaxSettings),t):Mn(b.ajaxSettings,e)},ajaxPrefilter:Hn(An),ajaxTransport:Hn(jn),ajax:function(e,n){function k(e,n,r,i){var c,y,v,w,T,C=n;2!==x&&(x=2,s&&clearTimeout(s),l=t,a=i||"",N.readyState=e>0?4:0,r&&(w=_n(p,N,r)),e>=200&&300>e||304===e?(p.ifModified&&(T=N.getResponseHeader("Last-Modified"),T&&(b.lastModified[o]=T),T=N.getResponseHeader("etag"),T&&(b.etag[o]=T)),204===e?(c=!0,C="nocontent"):304===e?(c=!0,C="notmodified"):(c=Fn(p,w),C=c.state,y=c.data,v=c.error,c=!v)):(v=C,(e||!C)&&(C="error",0>e&&(e=0))),N.status=e,N.statusText=(n||C)+"",c?h.resolveWith(f,[y,C,N]):h.rejectWith(f,[N,C,v]),N.statusCode(m),m=t,u&&d.trigger(c?"ajaxSuccess":"ajaxError",[N,p,c?y:v]),g.fireWith(f,[N,C]),u&&(d.trigger("ajaxComplete",[N,p]),--b.active||b.event.trigger("ajaxStop")))}"object"==typeof e&&(n=e,e=t),n=n||{};var r,i,o,a,s,u,l,c,p=b.ajaxSetup({},n),f=p.context||p,d=p.context&&(f.nodeType||f.jquery)?b(f):b.event,h=b.Deferred(),g=b.Callbacks("once memory"),m=p.statusCode||{},y={},v={},x=0,T="canceled",N={readyState:0,getResponseHeader:function(e){var t;if(2===x){if(!c)for(c={};t=Tn.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===x?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return x||(e=v[n]=v[n]||e,y[e]=t),this},overrideMimeType:function(e){return x||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>x)for(t in e)m[t]=[m[t],e[t]];else N.always(e[N.status]);return this},abort:function(e){var t=e||T;return l&&l.abort(t),k(0,t),this}};if(h.promise(N).complete=g.add,N.success=N.done,N.error=N.fail,p.url=((e||p.url||yn)+"").replace(xn,"").replace(kn,mn[1]+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=b.trim(p.dataType||"*").toLowerCase().match(w)||[""],null==p.crossDomain&&(r=En.exec(p.url.toLowerCase()),p.crossDomain=!(!r||r[1]===mn[1]&&r[2]===mn[2]&&(r[3]||("http:"===r[1]?80:443))==(mn[3]||("http:"===mn[1]?80:443)))),p.data&&p.processData&&"string"!=typeof p.data&&(p.data=b.param(p.data,p.traditional)),qn(An,p,n,N),2===x)return N;u=p.global,u&&0===b.active++&&b.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Cn.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bn.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=wn.test(o)?o.replace(wn,"$1_="+vn++):o+(bn.test(o)?"&":"?")+"_="+vn++)),p.ifModified&&(b.lastModified[o]&&N.setRequestHeader("If-Modified-Since",b.lastModified[o]),b.etag[o]&&N.setRequestHeader("If-None-Match",b.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&N.setRequestHeader("Content-Type",p.contentType),N.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+Dn+"; q=0.01":""):p.accepts["*"]);for(i in p.headers)N.setRequestHeader(i,p.headers[i]);if(p.beforeSend&&(p.beforeSend.call(f,N,p)===!1||2===x))return N.abort();T="abort";for(i in{success:1,error:1,complete:1})N[i](p[i]);if(l=qn(jn,p,n,N)){N.readyState=1,u&&d.trigger("ajaxSend",[N,p]),p.async&&p.timeout>0&&(s=setTimeout(function(){N.abort("timeout")},p.timeout));try{x=1,l.send(y,k)}catch(C){if(!(2>x))throw C;k(-1,C)}}else k(-1,"No Transport");return N},getScript:function(e,n){return b.get(e,t,n,"script")},getJSON:function(e,t,n){return b.get(e,t,n,"json")}}),b.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return b.globalEval(e),e}}}),b.ajaxPrefilter("script",function(e){e.cache===t&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),b.ajaxTransport("script",function(e){if(e.crossDomain){var n,r=o.head||b("head")[0]||o.documentElement;return{send:function(t,i){n=o.createElement("script"),n.async=!0,e.scriptCharset&&(n.charset=e.scriptCharset),n.src=e.url,n.onload=n.onreadystatechange=function(e,t){(t||!n.readyState||/loaded|complete/.test(n.readyState))&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),n=null,t||i(200,"success"))},r.insertBefore(n,r.firstChild)},abort:function(){n&&n.onload(t,!0)}}}});var On=[],Bn=/(=)\?(?=&|$)|\?\?/;b.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=On.pop()||b.expando+"_"+vn++;return this[e]=!0,e}}),b.ajaxPrefilter("json jsonp",function(n,r,i){var o,a,s,u=n.jsonp!==!1&&(Bn.test(n.url)?"url":"string"==typeof n.data&&!(n.contentType||"").indexOf("application/x-www-form-urlencoded")&&Bn.test(n.data)&&"data");return u||"jsonp"===n.dataTypes[0]?(o=n.jsonpCallback=b.isFunction(n.jsonpCallback)?n.jsonpCallback():n.jsonpCallback,u?n[u]=n[u].replace(Bn,"$1"+o):n.jsonp!==!1&&(n.url+=(bn.test(n.url)?"&":"?")+n.jsonp+"="+o),n.converters["script json"]=function(){return s||b.error(o+" was not called"),s[0]},n.dataTypes[0]="json",a=e[o],e[o]=function(){s=arguments},i.always(function(){e[o]=a,n[o]&&(n.jsonpCallback=r.jsonpCallback,On.push(o)),s&&b.isFunction(a)&&a(s[0]),s=a=t}),"script"):t});var Pn,Rn,Wn=0,$n=e.ActiveXObject&&function(){var e;for(e in Pn)Pn[e](t,!0)};b.ajaxSettings.xhr=e.ActiveXObject?function(){return!this.isLocal&&In()||zn()}:In,Rn=b.ajaxSettings.xhr(),b.support.cors=!!Rn&&"withCredentials"in Rn,Rn=b.support.ajax=!!Rn,Rn&&b.ajaxTransport(function(n){if(!n.crossDomain||b.support.cors){var r;return{send:function(i,o){var a,s,u=n.xhr();if(n.username?u.open(n.type,n.url,n.async,n.username,n.password):u.open(n.type,n.url,n.async),n.xhrFields)for(s in n.xhrFields)u[s]=n.xhrFields[s];n.mimeType&&u.overrideMimeType&&u.overrideMimeType(n.mimeType),n.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");try{for(s in i)u.setRequestHeader(s,i[s])}catch(l){}u.send(n.hasContent&&n.data||null),r=function(e,i){var s,l,c,p;try{if(r&&(i||4===u.readyState))if(r=t,a&&(u.onreadystatechange=b.noop,$n&&delete Pn[a]),i)4!==u.readyState&&u.abort();else{p={},s=u.status,l=u.getAllResponseHeaders(),"string"==typeof u.responseText&&(p.text=u.responseText);try{c=u.statusText}catch(f){c=""}s||!n.isLocal||n.crossDomain?1223===s&&(s=204):s=p.text?200:404}}catch(d){i||o(-1,d)}p&&o(s,c,p,l)},n.async?4===u.readyState?setTimeout(r):(a=++Wn,$n&&(Pn||(Pn={},b(e).unload($n)),Pn[a]=r),u.onreadystatechange=r):r()},abort:function(){r&&r(t,!0)}}}});var Xn,Un,Vn=/^(?:toggle|show|hide)$/,Yn=RegExp("^(?:([+-])=|)("+x+")([a-z%]*)$","i"),Jn=/queueHooks$/,Gn=[nr],Qn={"*":[function(e,t){var n,r,i=this.createTween(e,t),o=Yn.exec(t),a=i.cur(),s=+a||0,u=1,l=20;if(o){if(n=+o[2],r=o[3]||(b.cssNumber[e]?"":"px"),"px"!==r&&s){s=b.css(i.elem,e,!0)||n||1;do u=u||".5",s/=u,b.style(i.elem,e,s+r);while(u!==(u=i.cur()/a)&&1!==u&&--l)}i.unit=r,i.start=s,i.end=o[1]?s+(o[1]+1)*n:n}return i}]};b.Animation=b.extend(er,{tweener:function(e,t){b.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],Qn[n]=Qn[n]||[],Qn[n].unshift(t)},prefilter:function(e,t){t?Gn.unshift(e):Gn.push(e)}}),b.Tween=rr,rr.prototype={constructor:rr,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(b.cssNumber[n]?"":"px")},cur:function(){var e=rr.propHooks[this.prop];return e&&e.get?e.get(this):rr.propHooks._default.get(this)},run:function(e){var t,n=rr.propHooks[this.prop];return this.pos=t=this.options.duration?b.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):rr.propHooks._default.set(this),this}},rr.prototype.init.prototype=rr.prototype,rr.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=b.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){b.fx.step[e.prop]?b.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[b.cssProps[e.prop]]||b.cssHooks[e.prop])?b.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},rr.propHooks.scrollTop=rr.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},b.each(["toggle","show","hide"],function(e,t){var n=b.fn[t];b.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(ir(t,!0),e,r,i)}}),b.fn.extend({fadeTo:function(e,t,n,r){return this.filter(nn).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=b.isEmptyObject(e),o=b.speed(t,n,r),a=function(){var t=er(this,b.extend({},e),o);a.finish=function(){t.stop(!0)},(i||b._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,n,r){var i=function(e){var t=e.stop;delete e.stop,t(r)};return"string"!=typeof e&&(r=n,n=e,e=t),n&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,n=null!=e&&e+"queueHooks",o=b.timers,a=b._data(this);if(n)a[n]&&a[n].stop&&i(a[n]);else for(n in a)a[n]&&a[n].stop&&Jn.test(n)&&i(a[n]);for(n=o.length;n--;)o[n].elem!==this||null!=e&&o[n].queue!==e||(o[n].anim.stop(r),t=!1,o.splice(n,1));(t||!r)&&b.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=b._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=b.timers,a=r?r.length:0;for(n.finish=!0,b.queue(this,e,[]),i&&i.cur&&i.cur.finish&&i.cur.finish.call(this),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),b.each({slideDown:ir("show"),slideUp:ir("hide"),slideToggle:ir("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){b.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),b.speed=function(e,t,n){var r=e&&"object"==typeof e?b.extend({},e):{complete:n||!n&&t||b.isFunction(e)&&e,duration:e,easing:n&&t||t&&!b.isFunction(t)&&t};return r.duration=b.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in b.fx.speeds?b.fx.speeds[r.duration]:b.fx.speeds._default,(null==r.queue||r.queue===!0)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){b.isFunction(r.old)&&r.old.call(this),r.queue&&b.dequeue(this,r.queue)},r},b.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},b.timers=[],b.fx=rr.prototype.init,b.fx.tick=function(){var e,n=b.timers,r=0;for(Xn=b.now();n.length>r;r++)e=n[r],e()||n[r]!==e||n.splice(r--,1);n.length||b.fx.stop(),Xn=t},b.fx.timer=function(e){e()&&b.timers.push(e)&&b.fx.start()},b.fx.interval=13,b.fx.start=function(){Un||(Un=setInterval(b.fx.tick,b.fx.interval))},b.fx.stop=function(){clearInterval(Un),Un=null},b.fx.speeds={slow:600,fast:200,_default:400},b.fx.step={},b.expr&&b.expr.filters&&(b.expr.filters.animated=function(e){return b.grep(b.timers,function(t){return e===t.elem}).length}),b.fn.offset=function(e){if(arguments.length)return e===t?this:this.each(function(t){b.offset.setOffset(this,e,t)});var n,r,o={top:0,left:0},a=this[0],s=a&&a.ownerDocument;return s?(n=s.documentElement,b.contains(n,a)?(typeof a.getBoundingClientRect!==i&&(o=a.getBoundingClientRect()),r=or(s),{top:o.top+(r.pageYOffset||n.scrollTop)-(n.clientTop||0),left:o.left+(r.pageXOffset||n.scrollLeft)-(n.clientLeft||0)}):o):void 0},b.offset={setOffset:function(e,t,n){var r=b.css(e,"position");"static"===r&&(e.style.position="relative");var p,f,i=b(e),o=i.offset(),a=b.css(e,"top"),s=b.css(e,"left"),u=("absolute"===r||"fixed"===r)&&b.inArray("auto",[a,s])>-1,l={},c={};u?(c=i.position(),p=c.top,f=c.left):(p=parseFloat(a)||0,f=parseFloat(s)||0),b.isFunction(t)&&(t=t.call(e,n,o)),null!=t.top&&(l.top=t.top-o.top+p),null!=t.left&&(l.left=t.left-o.left+f),"using"in t?t.using.call(e,l):i.css(l)}},b.fn.extend({position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===b.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),b.nodeName(e[0],"html")||(n=e.offset()),n.top+=b.css(e[0],"borderTopWidth",!0),n.left+=b.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-b.css(r,"marginTop",!0),left:t.left-n.left-b.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||o.documentElement;e&&!b.nodeName(e,"html")&&"static"===b.css(e,"position");)e=e.offsetParent;
return e||o.documentElement})}}),b.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var r=/Y/.test(n);b.fn[e]=function(i){return b.access(this,function(e,i,o){var a=or(e);return o===t?a?n in a?a[n]:a.document.documentElement[i]:e[i]:(a?a.scrollTo(r?b(a).scrollLeft():o,r?o:b(a).scrollTop()):e[i]=o,t)},e,i,arguments.length,null)}}),b.each({Height:"height",Width:"width"},function(e,n){b.each({padding:"inner"+e,content:n,"":"outer"+e},function(r,i){b.fn[i]=function(i,o){var a=arguments.length&&(r||"boolean"!=typeof i),s=r||(i===!0||o===!0?"margin":"border");return b.access(this,function(n,r,i){var o;return b.isWindow(n)?n.document.documentElement["client"+e]:9===n.nodeType?(o=n.documentElement,Math.max(n.body["scroll"+e],o["scroll"+e],n.body["offset"+e],o["offset"+e],o["client"+e])):i===t?b.css(n,r,s):b.style(n,r,i,s)},n,a?i:t,a,null)}})}),e.jQuery=e.$=b,"function"==typeof define&&define.amd&&define.amd.jQuery&&define("jquery",[],function(){return b})}(window),function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,t.href&&i&&"map"===r.nodeName.toLowerCase()?(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o)):!1):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return"number"==typeof t?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length)for(var i,s,r=e(this[0]);r.length&&r[0]!==document;){if(i=r.css("position"),("absolute"===i||"relative"===i||"fixed"===i)&&(s=parseInt(r.css("zIndex"),10),!isNaN(s)&&0!==s))return s;r=r.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e(function(){var t=document.body,n=t.appendChild(n=document.createElement("div"));n.offsetHeight,e.extend(n.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===n.offsetHeight,e.support.selectstart="onselectstart"in n,t.removeChild(n).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i="Width"===r?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return"number"!=typeof t?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=t.length?!0:!1,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(i&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},contains:e.contains,hasScroll:function(t,n){if("hidden"===e(t).css("overflow"))return!1;var r=n&&"left"===n?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)},isOverAxis:function(e,t,n){return e>t&&t+n>e},isOver:function(t,n,r,i,s,o){return e.ui.isOverAxis(t,r,s)&&e.ui.isOverAxis(n,i,o)}}))}(jQuery),function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var r,n=0;null!=(r=t[n]);n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a=t.split(".")[0];t=t.split(".")[1],i=a+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[a]=e[a]||{},s=e[a][t],o=e[a][t]=function(e,t){return this._createWidget?void(arguments.length&&this._createWidget(e,t)):new o(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,i){e.isFunction(i)&&(r[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},r=function(e){return n.prototype[t].apply(this,e)};return function(){var s,t=this._super,n=this._superApply;return this._super=e,this._superApply=r,s=i.apply(this,arguments),this._super=t,this._superApply=n,s}}())}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},r,{constructor:o,namespace:a,widgetName:t,widgetBaseClass:i,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){for(var u,a,i=r.call(arguments,1),s=0,o=i.length;o>s;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(n[u]=e.isPlainObject(a)?e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u="string"==typeof o,a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,this.each(u?function(){var r,i=e.data(this,s);return i?e.isFunction(i[o])&&"_"!==o.charAt(0)?(r=i[o].apply(i,a),r!==i&&r!==t?(f=r&&r.jquery?f.pushStack(r.get()):r,!1):void 0):e.error("no such method '"+o+"' for "+n+" widget instance"):e.error("cannot call methods on "+n+" prior to initialization; attempted to call method '"+o+"'")}:function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetName,this),e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var s,o,u,i=n;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof n)if(i={},s=n.split("."),n=s.shift(),s.length){for(o=i[n]=e.widget.extend({},this.options[n]),u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];if(n=s.pop(),r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;"boolean"!=typeof t&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){return t||s.options.disabled!==!0&&!e(this).hasClass("ui-state-disabled")?("string"==typeof o?s[o]:o).apply(s,arguments):void 0}"string"!=typeof o&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return("string"==typeof e?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];if(r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent,s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){"string"==typeof i&&(i={effect:i});var o,u=i?i===!0||"number"==typeof i?n:i.effect||n:t;i=i||{},"number"==typeof i&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&(e.effects.effect[u]||e.uiBackCompat!==!1&&e.effects[u])?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}}),e.uiBackCompat!==!1&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(e){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){return!0===e.data(n.target,t.widgetName+".preventClickEvent")?(e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(!n){this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=1===t.which,s="string"==typeof this.options.cancel&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;return i&&!s&&this._mouseCapture(t)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(t)!==!1,!this._mouseStarted)?(t.preventDefault(),!0):(!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0)):!0}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i="scroll"===n||"auto"===n&&t.width<t.element[0].scrollWidth,s="scroll"===r||"auto"===r&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,d,v,m,g=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=g[0],E=(t.collision||"flip").split(" "),S={};return 9===w.nodeType?(l=g.width(),d=g.height(),v={top:0,left:0}):e.isWindow(w)?(l=g.width(),d=g.height(),v={top:g.scrollTop(),left:g.scrollLeft()}):w.preventDefault?(t.at="left top",l=d=0,v={top:w.pageY,left:w.pageX}):(l=g.outerWidth(),d=g.outerHeight(),v=g.offset()),m=e.extend({},v),e.each(["my","at"],function(){var n,r,e=(t[this]||"").split(" ");1===e.length&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),S[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),1===E.length&&(E[1]=E[0]),"right"===t.at[0]?m.left+=l:"center"===t.at[0]&&(m.left+=l/2),"bottom"===t.at[1]?m.top+=d:"center"===t.at[1]&&(m.top+=d/2),n=h(S.at,l,d),m.left+=n[0],m.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),w=p(this,"marginLeft"),x=p(this,"marginTop"),T=f+w+p(this,"marginRight")+b.width,N=c+x+p(this,"marginBottom")+b.height,C=e.extend({},m),k=h(S.my,a.outerWidth(),a.outerHeight());"right"===t.my[0]?C.left-=f:"center"===t.my[0]&&(C.left-=f/2),"bottom"===t.my[1]?C.top-=c:"center"===t.my[1]&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:w,marginTop:x},e.each(["left","top"],function(r,i){e.ui.position[E[r]]&&e.ui.position[E[r]][i](C,{targetWidth:l,targetHeight:d,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:y,elem:a})}),e.fn.bgiframe&&a.bgiframe(),t.using&&(u=function(e){var n=v.left-C.left,s=n+l-f,o=v.top-C.top,u=o+d-c,h={target:{element:g,left:v.left,top:v.top,width:l,height:d},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:0>s?"left":n>0?"right":"center",vertical:0>u?"top":o>0?"bottom":"middle"};f>l&&i(n+s)<l&&(h.horizontal="center"),c>d&&i(o+u)<d&&(h.vertical="middle"),h.important=r(i(n),i(s))>r(i(o),i(u))?"horizontal":"vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var f,n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i;t.collisionWidth>s?u>0&&0>=a?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):e.left=a>0&&0>=u?i:u>a?i+s-t.collisionWidth:i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var f,n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i;t.collisionHeight>s?u>0&&0>=a?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):e.top=a>0&&0>=u?i:u>a?i+s-t.collisionHeight:i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var p,d,n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,c="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,h=-2*t.offset[0];0>a?(p=e.left+l+c+h+t.collisionWidth-s-r,(0>p||p<i(a))&&(e.left+=l+c+h)):f>0&&(d=e.left-t.collisionPosition.marginLeft+l+c+h-o,(d>0||i(d)<f)&&(e.left+=l+c+h))},top:function(e,t){var d,v,n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l="top"===t.my[1],c=l?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,h="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,p=-2*t.offset[1];0>a?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(0>v||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&11>i,t.innerHTML="",n.removeChild(t)}(),e.uiBackCompat!==!1&&function(e){var n=e.fn.position;e.fn.position=function(r){if(!r||!r.offset)return n.call(this,r);var i=r.offset.split(" "),s=r.at.split(" ");return 1===i.length&&(i[1]=i[0]),/^\d/.test(i[0])&&(i[0]="+"+i[0]),/^\d/.test(i[1])&&(i[1]="+"+i[1]),1===s.length&&(/left|center|right/.test(s[0])?s[1]="center":(s[1]=s[0],s[0]="center")),n.call(this,e.extend(r,{at:s[0]+i[0]+" "+s[1]+i[1],offset:t}))}}(jQuery)}(jQuery),function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"==this.options.helper&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).is(".ui-resizable-handle")?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(n=e.ui.ddmanager.drop(this,t)),this.dropped&&(n=this.dropped,this.dropped=!1);for(var r=this.element[0],i=!1;r&&(r=r.parentNode);)r==document&&(i=!0);if(!i&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!n||"valid"==this.options.revert&&n||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,n)){var s=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){s._trigger("stop",t)!==!1&&s._clear()})}else this._trigger("stop",t)!==!1&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=this.options.handle&&e(this.options.handle,this.element).length?!1:!0;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):"clone"==n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"==n.appendTo?this.element[0].parentNode:n.appendTo),r[0]!=this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var n=e(t.containment),r=n[0];if(!r)return;var s=(n.offset(),"hidden"!=e(r).css("overflow"));this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(s?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName),s=t.pageX,o=t.pageY;if(this.originalPosition){var u;if(this.containment){if(this.relative_container){var a=this.relative_container.offset();u=[this.containment[0]+a.left,this.containment[1]+a.top,this.containment[2]+a.left,this.containment[3]+a.top]}else u=this.containment;t.pageX-this.offset.click.left<u[0]&&(s=u[0]+this.offset.click.left),t.pageY-this.offset.click.top<u[1]&&(o=u[1]+this.offset.click.top),t.pageX-this.offset.click.left>u[2]&&(s=u[2]+this.offset.click.left),t.pageY-this.offset.click.top>u[3]&&(o=u[3]+this.offset.click.top)}if(n.grid){var f=n.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1]:this.originalPageY;o=u&&(f-this.offset.click.top<u[1]||f-this.offset.click.top>u[3])?f-this.offset.click.top<u[1]?f+n.grid[1]:f-n.grid[1]:f;var l=n.grid[0]?this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0]:this.originalPageX;s=u&&(l-this.offset.click.left<u[0]||l-this.offset.click.left>u[2])?l-this.offset.click.left<u[0]?l+n.grid[0]:l-n.grid[0]:l}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("draggable"),i=e.extend({},n,{item:r.element});
e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==r.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("draggable"),i=this;e.each(r.sortables,function(){var o=!1,u=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(o=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!=u&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(u.instance.element[0],this.instance.element[0])&&(o=!1),o})),o?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var r=e("body"),i=e(this).data("draggable").options;r.css("cursor")&&(i._cursor=r.css("cursor")),r.css("cursor",i.cursor)},stop:function(){var r=e(this).data("draggable").options;r._cursor&&e("body").css("cursor",r._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var r=e(this).data("draggable");r.scrollParent[0]!=document&&"HTML"!=r.scrollParent[0].tagName&&(r.overflowOffset=r.scrollParent.offset())},drag:function(t){var r=e(this).data("draggable"),i=r.options,s=!1;r.scrollParent[0]!=document&&"HTML"!=r.scrollParent[0].tagName?(i.axis&&"x"==i.axis||(r.overflowOffset.top+r.scrollParent[0].offsetHeight-t.pageY<i.scrollSensitivity?r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop+i.scrollSpeed:t.pageY-r.overflowOffset.top<i.scrollSensitivity&&(r.scrollParent[0].scrollTop=s=r.scrollParent[0].scrollTop-i.scrollSpeed)),i.axis&&"y"==i.axis||(r.overflowOffset.left+r.scrollParent[0].offsetWidth-t.pageX<i.scrollSensitivity?r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft+i.scrollSpeed:t.pageX-r.overflowOffset.left<i.scrollSensitivity&&(r.scrollParent[0].scrollLeft=s=r.scrollParent[0].scrollLeft-i.scrollSpeed))):(i.axis&&"x"==i.axis||(t.pageY-e(document).scrollTop()<i.scrollSensitivity?s=e(document).scrollTop(e(document).scrollTop()-i.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<i.scrollSensitivity&&(s=e(document).scrollTop(e(document).scrollTop()+i.scrollSpeed))),i.axis&&"y"==i.axis||(t.pageX-e(document).scrollLeft()<i.scrollSensitivity?s=e(document).scrollLeft(e(document).scrollLeft()-i.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<i.scrollSensitivity&&(s=e(document).scrollLeft(e(document).scrollLeft()+i.scrollSpeed)))),s!==!1&&e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(r,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var r=e(this).data("draggable"),i=r.options;r.snapElements=[],e(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var t=e(this),n=t.offset();this!=r.element[0]&&r.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:n.top,left:n.left})})},drag:function(t,n){for(var r=e(this).data("draggable"),i=r.options,s=i.snapTolerance,o=n.offset.left,u=o+r.helperProportions.width,a=n.offset.top,f=a+r.helperProportions.height,l=r.snapElements.length-1;l>=0;l--){var c=r.snapElements[l].left,h=c+r.snapElements[l].width,p=r.snapElements[l].top,d=p+r.snapElements[l].height;if(o>c-s&&h+s>o&&a>p-s&&d+s>a||o>c-s&&h+s>o&&f>p-s&&d+s>f||u>c-s&&h+s>u&&a>p-s&&d+s>a||u>c-s&&h+s>u&&f>p-s&&d+s>f){if("inner"!=i.snapMode){var v=Math.abs(p-f)<=s,m=Math.abs(d-a)<=s,g=Math.abs(c-u)<=s,y=Math.abs(h-o)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p-r.helperProportions.height,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c-r.helperProportions.width}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h}).left-r.margins.left)}var b=v||m||g||y;if("outer"!=i.snapMode){var v=Math.abs(p-a)<=s,m=Math.abs(d-f)<=s,g=Math.abs(c-o)<=s,y=Math.abs(h-u)<=s;v&&(n.position.top=r._convertPositionTo("relative",{top:p,left:0}).top-r.margins.top),m&&(n.position.top=r._convertPositionTo("relative",{top:d-r.helperProportions.height,left:0}).top-r.margins.top),g&&(n.position.left=r._convertPositionTo("relative",{top:0,left:c}).left-r.margins.left),y&&(n.position.left=r._convertPositionTo("relative",{top:0,left:h-r.helperProportions.width}).left-r.margins.left)}!r.snapElements[l].snapping&&(v||m||g||y||b)&&r.options.snap.snap&&r.options.snap.snap.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=v||m||g||y||b}else r.snapElements[l].snapping&&r.options.snap.release&&r.options.snap.release.call(r.element,t,e.extend(r._uiHash(),{snapItem:r.snapElements[l].item})),r.snapElements[l].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(){var r=e(this).data("draggable").options,i=e.makeArray(e(r.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(i.length){var s=parseInt(i[0].style.zIndex)||0;e(i).each(function(e){this.style.zIndex=s+e}),this[0].style.zIndex=s+i.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})}(jQuery),function(e){e.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var t=this.options,n=t.accept;this.isover=0,this.isout=1,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var t=e.ui.ddmanager.droppables[this.options.scope],n=0;n<t.length;n++)t[n]==this&&t.splice(n,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){"accept"==t&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!=this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current;if(!r||(r.currentItem||r.element)[0]==this.element[0])return!1;var i=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"droppable");return t.options.greedy&&!t.options.disabled&&t.options.scope==r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance)?(i=!0,!1):void 0}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(t,n,r){if(!n.offset)return!1;var i=(t.positionAbs||t.position.absolute).left,s=i+t.helperProportions.width,o=(t.positionAbs||t.position.absolute).top,u=o+t.helperProportions.height,a=n.offset.left,f=a+n.proportions.width,l=n.offset.top,c=l+n.proportions.height;switch(r){case"fit":return i>=a&&f>=s&&o>=l&&c>=u;case"intersect":return a<i+t.helperProportions.width/2&&s-t.helperProportions.width/2<f&&l<o+t.helperProportions.height/2&&u-t.helperProportions.height/2<c;case"pointer":var h=(t.positionAbs||t.position.absolute).left+(t.clickOffset||t.offset.click).left,p=(t.positionAbs||t.position.absolute).top+(t.clickOffset||t.offset.click).top,d=e.ui.isOver(p,h,l,a,n.proportions.height,n.proportions.width);return d;case"touch":return(o>=l&&c>=o||u>=l&&c>=u||l>o&&u>c)&&(i>=a&&f>=i||s>=a&&f>=s||a>i&&s>f);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r=e.ui.ddmanager.droppables[t.options.scope]||[],i=n?n.type:null,s=(t.currentItem||t.element).find(":data(droppable)").andSelf();e:for(var o=0;o<r.length;o++)if(!(r[o].options.disabled||t&&!r[o].accept.call(r[o].element[0],t.currentItem||t.element))){for(var u=0;u<s.length;u++)if(s[u]==r[o].element[0]){r[o].proportions.height=0;continue e}r[o].visible="none"!=r[o].element.css("display"),r[o].visible&&("mousedown"==i&&r[o]._activate.call(r[o],n),r[o].offset=r[o].element.offset(),r[o].proportions={width:r[o].element[0].offsetWidth,height:r[o].element[0].offsetHeight})}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,n)))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var r=e.ui.intersect(t,this,this.options.tolerance),i=r||1!=this.isover?r&&0==this.isover?"isover":null:"isout";if(i){var s;if(this.options.greedy){var o=this.options.scope,u=this.element.parents(":data(droppable)").filter(function(){return e.data(this,"droppable").options.scope===o});u.length&&(s=e.data(u[0],"droppable"),s.greedyChild="isover"==i?1:0)}s&&"isover"==i&&(s.isover=0,s.isout=1,s._out.call(s,n)),this[i]=1,this["isout"==i?"isover":"isout"]=0,this["isover"==i?"_over":"_out"].call(this,n),s&&"isout"==i&&(s.isout=0,s.isover=1,s._over.call(s,n))}}})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}}(jQuery),function(e){e.widget("ui.resizable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var t=this,n=this.options;if(this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!n.aspectRatio,aspectRatio:n.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:n.helper||n.ghost||n.animate?n.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=n.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var r=this.handles.split(",");this.handles={};for(var i=0;i<r.length;i++){var s=e.trim(r[i]),o="ui-resizable-"+s,u=e('<div class="ui-resizable-handle '+o+'"></div>');u.css({zIndex:n.zIndex}),"se"==s&&u.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[s]=".ui-resizable-"+s,this.element.append(u)}}this._renderAxis=function(t){t=t||this.element;for(var n in this.handles){if(this.handles[n].constructor==String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var r=e(this.handles[n],this.element),i=0;i=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth();var s=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join("");t.css(s,i),this._proportionallyResize()}e(this.handles[n]).length}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!t.resizing){if(this.className)var e=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);t.axis=e&&e[1]?e[1]:"se"}}),n.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){n.disabled||(e(this).removeClass("ui-resizable-autohide"),t._handles.show())}).mouseleave(function(){n.disabled||t.resizing||(e(this).addClass("ui-resizable-autohide"),t._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){t(this.element);var n=this.element;this.originalElement.css({position:n.css("position"),width:n.outerWidth(),height:n.outerHeight(),top:n.css("top"),left:n.css("left")}).insertAfter(n),n.remove()}return this.originalElement.css("resize",this.originalResizeStyle),t(this.originalElement),this},_mouseCapture:function(t){var n=!1;for(var r in this.handles)e(this.handles[r])[0]==t.target&&(n=!0);return!this.options.disabled&&n},_mouseStart:function(t){var r=this.options,i=this.element.position(),s=this.element;this.resizing=!0,this.documentScroll={top:e(document).scrollTop(),left:e(document).scrollLeft()},(s.is(".ui-draggable")||/absolute/.test(s.css("position")))&&s.css({position:"absolute",top:i.top,left:i.left}),this._renderProxy();var o=n(this.helper.css("left")),u=n(this.helper.css("top"));r.containment&&(o+=e(r.containment).scrollLeft()||0,u+=e(r.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:u},this.size=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalSize=this._helper?{width:s.outerWidth(),height:s.outerHeight()}:{width:s.width(),height:s.height()},this.originalPosition={left:o,top:u},this.sizeDiff={width:s.outerWidth()-s.width(),height:s.outerHeight()-s.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio="number"==typeof r.aspectRatio?r.aspectRatio:this.originalSize.width/this.originalSize.height||1;var a=e(".ui-resizable-"+this.axis).css("cursor");return e("body").css("cursor","auto"==a?this.axis+"-resize":a),s.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(e){var t=this.helper,s=(this.options,this.originalMousePosition),o=this.axis,u=e.pageX-s.left||0,a=e.pageY-s.top||0,f=this._change[o];if(!f)return!1;var l=f.apply(this,[e,u,a]);return this._updateVirtualBoundaries(e.shiftKey),(this._aspectRatio||e.shiftKey)&&(l=this._updateRatio(l,e)),l=this._respectSize(l,e),this._propagate("resize",e),t.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(l),this._trigger("resize",e,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n=this.options,r=this;if(this._helper){var i=this._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:r.sizeDiff.height,u=s?0:r.sizeDiff.width,a={width:r.helper.width()-u,height:r.helper.height()-o},f=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,l=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;n.animate||this.element.css(e.extend(a,{top:l,left:f})),r.helper.height(r.size.height),r.helper.width(r.size.width),this._helper&&!n.animate&&this._proportionallyResize()}return e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var n,i,s,o,u,t=this.options;u={minWidth:r(t.minWidth)?t.minWidth:0,maxWidth:r(t.maxWidth)?t.maxWidth:1/0,minHeight:r(t.minHeight)?t.minHeight:0,maxHeight:r(t.maxHeight)?t.maxHeight:1/0},(this._aspectRatio||e)&&(n=u.minHeight*this.aspectRatio,s=u.minWidth/this.aspectRatio,i=u.maxHeight*this.aspectRatio,o=u.maxWidth/this.aspectRatio,n>u.minWidth&&(u.minWidth=n),s>u.minHeight&&(u.minHeight=s),i<u.maxWidth&&(u.maxWidth=i),o<u.maxHeight&&(u.maxHeight=o)),this._vBoundaries=u},_updateCache:function(e){this.options;this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var i=(this.options,this.position),s=this.size,o=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),"sw"==o&&(e.left=i.left+(s.width-e.width),e.top=null),"nw"==o&&(e.top=i.top+(s.height-e.height),e.left=i.left+(s.width-e.width)),e},_respectSize:function(e,t){var i=(this.helper,this._vBoundaries),o=(this._aspectRatio||t.shiftKey,this.axis),u=r(e.width)&&i.maxWidth&&i.maxWidth<e.width,a=r(e.height)&&i.maxHeight&&i.maxHeight<e.height,f=r(e.width)&&i.minWidth&&i.minWidth>e.width,l=r(e.height)&&i.minHeight&&i.minHeight>e.height;f&&(e.width=i.minWidth),l&&(e.height=i.minHeight),u&&(e.width=i.maxWidth),a&&(e.height=i.maxHeight);var c=this.originalPosition.left+this.originalSize.width,h=this.position.top+this.size.height,p=/sw|nw|w/.test(o),d=/nw|ne|n/.test(o);f&&p&&(e.left=c-i.minWidth),u&&p&&(e.left=c-i.maxWidth),l&&d&&(e.top=h-i.minHeight),a&&d&&(e.top=h-i.maxHeight);var v=!e.width&&!e.height;return v&&!e.left&&e.top?e.top=null:v&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var n=this.helper||this.element,r=0;r<this._proportionallyResizeElements.length;r++){var i=this._proportionallyResizeElements[r];if(!this.borderDif){var s=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],o=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];this.borderDif=e.map(s,function(e,t){var n=parseInt(e,10)||0,r=parseInt(o[t],10)||0;return n+r})}i.css({height:n.height()-this.borderDif[0]-this.borderDif[2]||0,width:n.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;if(this.elementOffset=t.offset(),this._helper){this.helper=this.helper||e('<div style="overflow:hidden;"></div>');var r=e.ui.ie6?1:0,i=e.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+i,height:this.element.outerHeight()+i,position:"absolute",left:this.elementOffset.left-r+"px",top:this.elementOffset.top-r+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var i=(this.options,this.originalSize),s=this.originalPosition;return{left:s.left+t,width:i.width-t}},n:function(e,t,n){var i=(this.options,this.originalSize),s=this.originalPosition;return{top:s.top+n,height:i.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),"resize"!=t&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var r=e(this).data("resizable"),i=r.options,s=function(t){e(t).each(function(){var t=e(this);t.data("resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):e.each(i.alsoResize,function(e){s(e)})},resize:function(t,n){var r=e(this).data("resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};"object"!=typeof i.alsoResize||i.alsoResize.nodeType?a(i.alsoResize):e.each(i.alsoResize,function(e,t){a(e,t)})},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var r=e(this).data("resizable"),i=r.options,s=r._proportionallyResizeElements,o=s.length&&/textarea/i.test(s[0].nodeName),u=o&&e.ui.hasScroll(s[0],"left")?0:r.sizeDiff.height,a=o?0:r.sizeDiff.width,f={width:r.size.width-a,height:r.size.height-u},l=parseInt(r.element.css("left"),10)+(r.position.left-r.originalPosition.left)||null,c=parseInt(r.element.css("top"),10)+(r.position.top-r.originalPosition.top)||null;r.element.animate(e.extend(f,c&&l?{top:c,left:l}:{}),{duration:i.animateDuration,easing:i.animateEasing,step:function(){var n={width:parseInt(r.element.css("width"),10),height:parseInt(r.element.css("height"),10),top:parseInt(r.element.css("top"),10),left:parseInt(r.element.css("left"),10)};s&&s.length&&e(s[0]).css({width:n.width,height:n.height}),r._updateCache(n),r._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var i=e(this).data("resizable"),s=i.options,o=i.element,u=s.containment,a=u instanceof e?u.get(0):/parent/.test(u)?o.parent().get(0):u;if(a)if(i.containerElement=e(a),/document/.test(u)||u==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight};else{var f=e(a),l=[];e(["Top","Right","Left","Bottom"]).each(function(e,t){l[e]=n(f.css("padding"+t))}),i.containerOffset=f.offset(),i.containerPosition=f.position(),i.containerSize={height:f.innerHeight()-l[3],width:f.innerWidth()-l[1]};var c=i.containerOffset,h=i.containerSize.height,p=i.containerSize.width,d=e.ui.hasScroll(a,"left")?a.scrollWidth:p,v=e.ui.hasScroll(a)?a.scrollHeight:h;i.parentData={element:a,left:c.left,top:c.top,width:d,height:v}}},resize:function(t){var r=e(this).data("resizable"),i=r.options,o=(r.containerSize,r.containerOffset),a=(r.size,r.position),f=r._aspectRatio||t.shiftKey,l={top:0,left:0},c=r.containerElement;c[0]!=document&&/static/.test(c.css("position"))&&(l=o),a.left<(r._helper?o.left:0)&&(r.size.width=r.size.width+(r._helper?r.position.left-o.left:r.position.left-l.left),f&&(r.size.height=r.size.width/r.aspectRatio),r.position.left=i.helper?o.left:0),a.top<(r._helper?o.top:0)&&(r.size.height=r.size.height+(r._helper?r.position.top-o.top:r.position.top),f&&(r.size.width=r.size.height*r.aspectRatio),r.position.top=r._helper?o.top:0),r.offset.left=r.parentData.left+r.position.left,r.offset.top=r.parentData.top+r.position.top;var h=Math.abs((r._helper?r.offset.left-l.left:r.offset.left-l.left)+r.sizeDiff.width),p=Math.abs((r._helper?r.offset.top-l.top:r.offset.top-o.top)+r.sizeDiff.height),d=r.containerElement.get(0)==r.element.parent().get(0),v=/relative|absolute/.test(r.containerElement.css("position"));d&&v&&(h-=r.parentData.left),h+r.size.width>=r.parentData.width&&(r.size.width=r.parentData.width-h,f&&(r.size.height=r.size.width/r.aspectRatio)),p+r.size.height>=r.parentData.height&&(r.size.height=r.parentData.height-p,f&&(r.size.width=r.size.height*r.aspectRatio))},stop:function(){var r=e(this).data("resizable"),i=r.options,o=(r.position,r.containerOffset),u=r.containerPosition,a=r.containerElement,f=e(r.helper),l=f.offset(),c=f.outerWidth()-r.sizeDiff.width,h=f.outerHeight()-r.sizeDiff.height;r._helper&&!i.animate&&/relative/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h}),r._helper&&!i.animate&&/static/.test(a.css("position"))&&e(this).css({left:l.left-u.left-o.left,width:c,height:h})}}),e.ui.plugin.add("resizable","ghost",{start:function(){var r=e(this).data("resizable"),i=r.options,s=r.size;r.ghost=r.originalElement.clone(),r.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),r.ghost.appendTo(r.helper)},resize:function(){{var r=e(this).data("resizable");r.options}r.ghost&&r.ghost.css({position:"relative",height:r.size.height,width:r.size.width})},stop:function(){{var r=e(this).data("resizable");r.options}r.ghost&&r.helper&&r.helper.get(0).removeChild(r.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(t){{var r=e(this).data("resizable"),i=r.options,s=r.size,o=r.originalSize,u=r.originalPosition,a=r.axis;i._aspectRatio||t.shiftKey}i.grid="number"==typeof i.grid?[i.grid,i.grid]:i.grid;var l=Math.round((s.width-o.width)/(i.grid[0]||1))*(i.grid[0]||1),c=Math.round((s.height-o.height)/(i.grid[1]||1))*(i.grid[1]||1);/^(se|s|e)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c):/^(ne)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c):/^(sw)$/.test(a)?(r.size.width=o.width+l,r.size.height=o.height+c,r.position.left=u.left-l):(r.size.width=o.width+l,r.size.height=o.height+c,r.position.top=u.top-c,r.position.left=u.left-l)}});var n=function(e){return parseInt(e,10)||0},r=function(e){return!isNaN(parseInt(e,10))}}(jQuery),function(e){e.widget("ui.selectable",e.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var t=this;this.element.addClass("ui-selectable"),this.dragged=!1;var n;this.refresh=function(){n=e(t.options.filter,t.element[0]),n.addClass("ui-selectee"),n.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=n.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this;if(this.opos=[t.pageX,t.pageY],!this.options.disabled){var r=this.options;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.clientX,top:t.clientY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().andSelf().each(function(){var r=e.data(this,"selectable-item");if(r){var i=!t.metaKey&&!t.ctrlKey||!r.$element.hasClass("ui-selected");return r.$element.removeClass(i?"ui-unselecting":"ui-selected").addClass(i?"ui-selecting":"ui-unselecting"),r.unselecting=!i,r.selecting=i,r.selected=i,i?n._trigger("selecting",t,{selecting:r.element}):n._trigger("unselecting",t,{unselecting:r.element}),!1}})}},_mouseDrag:function(t){var n=this;
if(this.dragged=!0,!this.options.disabled){var r=this.options,i=this.opos[0],s=this.opos[1],o=t.pageX,u=t.pageY;if(i>o){var a=o;o=i,i=a}if(s>u){var a=u;u=s,s=a}return this.helper.css({left:i,top:s,width:o-i,height:u-s}),this.selectees.each(function(){var a=e.data(this,"selectable-item");if(a&&a.element!=n.element[0]){var f=!1;"touch"==r.tolerance?f=!(a.left>o||a.right<i||a.top>u||a.bottom<s):"fit"==r.tolerance&&(f=a.left>i&&a.right<o&&a.top>s&&a.bottom<u),f?(a.selected&&(a.$element.removeClass("ui-selected"),a.selected=!1),a.unselecting&&(a.$element.removeClass("ui-unselecting"),a.unselecting=!1),a.selecting||(a.$element.addClass("ui-selecting"),a.selecting=!0,n._trigger("selecting",t,{selecting:a.element}))):(a.selecting&&((t.metaKey||t.ctrlKey)&&a.startselected?(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.$element.addClass("ui-selected"),a.selected=!0):(a.$element.removeClass("ui-selecting"),a.selecting=!1,a.startselected&&(a.$element.addClass("ui-unselecting"),a.unselecting=!0),n._trigger("unselecting",t,{unselecting:a.element}))),a.selected&&!t.metaKey&&!t.ctrlKey&&!a.startselected&&(a.$element.removeClass("ui-selected"),a.selected=!1,a.$element.addClass("ui-unselecting"),a.unselecting=!0,n._trigger("unselecting",t,{unselecting:a.element})))}}),!1}},_mouseStop:function(t){var n=this;this.dragged=!1;this.options;return e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})}(jQuery),function(e){e.widget("ui.sortable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?"x"===e.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){"disabled"===t?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(t);{var i=null;e(t.target).parents().each(function(){return e.data(this,r.widgetName+"-item")==r?(i=e(this),!1):void 0})}if(e.data(t.target,r.widgetName+"-item")==r&&(i=e(t.target)),!i)return!1;if(this.options.handle&&!n){var o=!1;if(e(this.options.handle,i).find("*").andSelf().each(function(){this==t.target&&(o=!0)}),!o)return!1}return this.currentItem=i,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),i.containment&&this._setContainment(),i.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",i.cursor)),i.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",i.opacity)),i.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",i.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!r)for(var s=this.containers.length-1;s>=0;s--)this.containers[s]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var n=this.options,r=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<n.scrollSensitivity?this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop+n.scrollSpeed:t.pageY-this.overflowOffset.top<n.scrollSensitivity&&(this.scrollParent[0].scrollTop=r=this.scrollParent[0].scrollTop-n.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<n.scrollSensitivity?this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft+n.scrollSpeed:t.pageX-this.overflowOffset.left<n.scrollSensitivity&&(this.scrollParent[0].scrollLeft=r=this.scrollParent[0].scrollLeft-n.scrollSpeed)):(t.pageY-e(document).scrollTop()<n.scrollSensitivity?r=e(document).scrollTop(e(document).scrollTop()-n.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<n.scrollSensitivity&&(r=e(document).scrollTop(e(document).scrollTop()+n.scrollSpeed)),t.pageX-e(document).scrollLeft()<n.scrollSensitivity?r=e(document).scrollLeft(e(document).scrollLeft()-n.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<n.scrollSensitivity&&(r=e(document).scrollLeft(e(document).scrollLeft()+n.scrollSpeed))),r!==!1&&e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var i=this.items.length-1;i>=0;i--){var s=this.items[i],o=s.item[0],u=this._intersectsWithPointer(s);if(u&&s.instance===this.currentContainer&&o!=this.currentItem[0]&&this.placeholder[1==u?"next":"prev"]()[0]!=o&&!e.contains(this.placeholder[0],o)&&("semi-dynamic"==this.options.type?!e.contains(this.element[0],o):!0)){if(this.direction=1==u?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(s))break;this._rearrange(t,s),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(t){if(e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t),this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&a>r+f&&t+l>s&&o>t+l;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(t){var n="x"===this.options.axis||e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),r="y"===this.options.axis||e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=n&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&"right"==o||"down"==s?2:1:s&&("down"==s?2:1):!1},_intersectsWithSides:function(t){var n=e.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),r=e.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?"right"==s&&r||"left"==s&&!r:i&&("down"==i&&n||"up"==i&&!n)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return 0!=e&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return 0!=e&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor==String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n=[],r=[],i=this._connectWith();if(i&&t)for(var s=i.length-1;s>=0;s--)for(var o=e(i[s]),u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&r.push([e.isFunction(a.options.items)?a.options.items.call(a.element):e(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a])}r.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var s=r.length-1;s>=0;s--)r[s][0].each(function(){n.push(this)});return e(n)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]==e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n=this.items,r=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],i=this._connectWith();if(i&&this.ready)for(var s=i.length-1;s>=0;s--)for(var o=e(i[s]),u=o.length-1;u>=0;u--){var a=e.data(o[u],this.widgetName);a&&a!=this&&!a.options.disabled&&(r.push([e.isFunction(a.options.items)?a.options.items.call(a.element[0],t,{item:this.currentItem}):e(a.options.items,a.element),a]),this.containers.push(a))}for(var s=r.length-1;s>=0;s--)for(var f=r[s][1],l=r[s][0],u=0,c=l.length;c>u;u++){var h=e(l[u]);h.data(this.widgetName+"-item",f),n.push({item:h,instance:f,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var n=this.items.length-1;n>=0;n--){var r=this.items[n];if(r.instance==this.currentContainer||!this.currentContainer||r.item[0]==this.currentItem[0]){var i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item;t||(r.width=i.outerWidth(),r.height=i.outerHeight());var s=i.offset();r.left=s.left,r.top=s.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var n=this.containers.length-1;n>=0;n--){var s=this.containers[n].element.offset();this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight()}return this},_createPlaceholder:function(t){t=t||this;var n=t.options;if(!n.placeholder||n.placeholder.constructor==String){var r=n.placeholder;n.placeholder={element:function(){var n=e(document.createElement(t.currentItem[0].nodeName)).addClass(r||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return r||(n.style.visibility="hidden"),n},update:function(e,i){(!r||n.forcePlaceholderSize)&&(i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10)))}}}t.placeholder=e(n.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),n.placeholder.update(t,t.placeholder)},_contactContainers:function(t){for(var n=null,r=null,i=this.containers.length-1;i>=0;i--)if(!e.contains(this.currentItem[0],this.containers[i].element[0]))if(this._intersectsWith(this.containers[i].containerCache)){if(n&&e.contains(this.containers[i].element[0],n.element[0]))continue;n=this.containers[i],r=i}else this.containers[i].containerCache.over&&(this.containers[i]._trigger("out",t,this._uiHash(this)),this.containers[i].containerCache.over=0);if(n)if(1===this.containers.length)this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1;else{for(var s=1e4,o=null,u=this.containers[r].floating?"left":"top",a=this.containers[r].floating?"width":"height",f=this.positionAbs[u]+this.offset.click[u],l=this.items.length-1;l>=0;l--)if(e.contains(this.containers[r].element[0],this.items[l].item[0])&&this.items[l].item[0]!=this.currentItem[0]){var c=this.items[l].item.offset()[u],h=!1;Math.abs(c-f)>Math.abs(c+this.items[l][a]-f)&&(h=!0,c+=this.items[l][a]),Math.abs(c-f)<s&&(s=Math.abs(c-f),o=this.items[l],this.direction=h?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[r],o?this._rearrange(t,o,null,!0):this._rearrange(t,null,this.containers[r].element,!0),this._trigger("change",t,this._uiHash()),this.containers[r]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[r]._trigger("over",t,this._uiHash(this)),this.containers[r].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):"clone"==n.helper?this.currentItem.clone():this.currentItem;return r.parents("body").length||e("parent"!=n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(""==r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),("document"==t.containment||"window"==t.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(t.containment)){var n=e(t.containment)[0],r=e(t.containment).offset(),i="hidden"!=e(n).css("overflow");this.containment=[r.left+(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0)-this.margins.left,r.top+(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0)-this.margins.top,r.left+(i?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,r.top+(i?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(t,n){n||(n=this.position);var r="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(s[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*r}},_generatePosition:function(t){var n=this.options,r="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,i=/(html|body)/i.test(r[0].tagName);"relative"==this.cssPosition&&(this.scrollParent[0]==document||this.scrollParent[0]==this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset());var s=t.pageX,o=t.pageY;if(this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),n.grid)){var u=this.originalPageY+Math.round((o-this.originalPageY)/n.grid[1])*n.grid[1];o=this.containment&&(u-this.offset.click.top<this.containment[1]||u-this.offset.click.top>this.containment[3])?u-this.offset.click.top<this.containment[1]?u+n.grid[1]:u-n.grid[1]:u;var a=this.originalPageX+Math.round((s-this.originalPageX)/n.grid[0])*n.grid[0];s=this.containment&&(a-this.offset.click.left<this.containment[0]||a-this.offset.click.left>this.containment[2])?a-this.offset.click.left<this.containment[0]?a+n.grid[0]:a-n.grid[0]:a}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():i?0:r.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():i?0:r.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i==this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var i in this._storedCSS)("auto"==this._storedCSS[i]||"static"==this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&r.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!=this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!=this.currentItem.parent()[0])&&!n&&r.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(r.push(function(e){this._trigger("remove",e,this._uiHash())}),r.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(var i=this.containers.length-1;i>=0;i--)n||r.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[i])),this.containers[i].containerCache.over=0);if(this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}if(n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!n){for(var i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(e){var t="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return e.delegate(t,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(t,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?e.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(e,t){$.extend(e,t);for(var n in t)(null==t[n]||t[n]==undefined)&&(e[n]=t[n]);return e}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return extendRemove(this._defaults,e||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(e,t){var n=e[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1");return{id:n,input:e,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:t,dpDiv:t?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(e,t){var n=$(e);t.append=$([]),t.trigger=$([]),n.hasClass(this.markerClassName)||(this._attachments(n,t),n.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),this._autoSize(t),$.data(e,PROP_NAME,t),t.settings.disabled&&this._disableDatepicker(e))},_attachments:function(e,t){var n=this._get(t,"appendText"),r=this._get(t,"isRTL");t.append&&t.append.remove(),n&&(t.append=$('<span class="'+this._appendClass+'">'+n+"</span>"),e[r?"before":"after"](t.append)),e.unbind("focus",this._showDatepicker),t.trigger&&t.trigger.remove();var i=this._get(t,"showOn");if(("focus"==i||"both"==i)&&e.focus(this._showDatepicker),"button"==i||"both"==i){var s=this._get(t,"buttonText"),o=this._get(t,"buttonImage");t.trigger=$(this._get(t,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:s,title:s}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==o?s:$("<img/>").attr({src:o,alt:s,title:s}))),e[r?"before":"after"](t.trigger),t.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==e[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=e[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(e[0])):$.datepicker._showDatepicker(e[0]),!1})}},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t=new Date(2009,11,20),n=this._get(e,"dateFormat");if(n.match(/[DM]/)){var r=function(e){for(var t=0,n=0,r=0;r<e.length;r++)e[r].length>t&&(t=e[r].length,n=r);return n};t.setMonth(r(this._get(e,n.match(/MM/)?"monthNames":"monthNamesShort"))),t.setDate(r(this._get(e,n.match(/DD/)?"dayNames":"dayNamesShort"))+20-t.getDay())}e.input.attr("size",this._formatDate(e,t).length)}},_inlineDatepicker:function(e,t){var n=$(e);n.hasClass(this.markerClassName)||(n.addClass(this.markerClassName).append(t.dpDiv).bind("setData.datepicker",function(e,n,r){t.settings[n]=r}).bind("getData.datepicker",function(e,n){return this._get(t,n)}),$.data(e,PROP_NAME,t),this._setDate(t,this._getDefaultDate(t),!0),this._updateDatepicker(t),this._updateAlternate(t),t.settings.disabled&&this._disableDatepicker(e),t.dpDiv.css("display","block"))},_dialogDatepicker:function(e,t,n,r,i){var s=this._dialogInst;if(!s){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),s=this._dialogInst=this._newInst(this._dialogInput,!1),s.settings={},$.data(this._dialogInput[0],PROP_NAME,s)
}if(extendRemove(s.settings,r||{}),t=t&&t.constructor==Date?this._formatDate(s,t):t,this._dialogInput.val(t),this._pos=i?i.length?i:[i.pageX,i.pageY]:null,!this._pos){var u=document.documentElement.clientWidth,a=document.documentElement.clientHeight,f=document.documentElement.scrollLeft||document.body.scrollLeft,l=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[u/2-100+f,a/2-150+l]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),s.settings.onSelect=n,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,s),this},_destroyDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var r=e.nodeName.toLowerCase();$.removeData(e,PROP_NAME),"input"==r?(n.append.remove(),n.trigger.remove(),t.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):("div"==r||"span"==r)&&t.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var r=e.nodeName.toLowerCase();if("input"==r)e.disabled=!1,n.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==r||"span"==r){var i=t.children("."+this._inlineClass);i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t})}},_disableDatepicker:function(e){var t=$(e),n=$.data(e,PROP_NAME);if(t.hasClass(this.markerClassName)){var r=e.nodeName.toLowerCase();if("input"==r)e.disabled=!0,n.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==r||"span"==r){var i=t.children("."+this._inlineClass);i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(t){return t==e?null:t}),this._disabledInputs[this._disabledInputs.length]=e}},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]==e)return!0;return!1},_getInst:function(e){try{return $.data(e,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(e,t,n){var r=this._getInst(e);if(2==arguments.length&&"string"==typeof t)return"defaults"==t?$.extend({},$.datepicker._defaults):r?"all"==t?$.extend({},r.settings):this._get(r,t):null;var i=t||{};if("string"==typeof t&&(i={},i[t]=n),r){this._curInst==r&&this._hideDatepicker();var s=this._getDateDatepicker(e,!0),o=this._getMinMaxDate(r,"min"),u=this._getMinMaxDate(r,"max");extendRemove(r.settings,i),null!==o&&i.dateFormat!==undefined&&i.minDate===undefined&&(r.settings.minDate=this._formatDate(r,o)),null!==u&&i.dateFormat!==undefined&&i.maxDate===undefined&&(r.settings.maxDate=this._formatDate(r,u)),this._attachments($(e),r),this._autoSize(r),this._setDate(r,s),this._updateAlternate(r),this._updateDatepicker(r)}},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(e){var t=$.datepicker._getInst(e.target),n=!0,r=t.dpDiv.is(".ui-datepicker-rtl");if(t._keyEvent=!0,$.datepicker._datepickerShowing)switch(e.keyCode){case 9:$.datepicker._hideDatepicker(),n=!1;break;case 13:var i=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",t.dpDiv);i[0]&&$.datepicker._selectDay(e.target,t.selectedMonth,t.selectedYear,i[0]);var s=$.datepicker._get(t,"onSelect");if(s){var o=$.datepicker._formatDate(t);s.apply(t.input?t.input[0]:null,[o,t])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 35:(e.ctrlKey||e.metaKey)&&$.datepicker._clearDate(e.target),n=e.ctrlKey||e.metaKey;break;case 36:(e.ctrlKey||e.metaKey)&&$.datepicker._gotoToday(e.target),n=e.ctrlKey||e.metaKey;break;case 37:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?1:-1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?-$.datepicker._get(t,"stepBigMonths"):-$.datepicker._get(t,"stepMonths"),"M");break;case 38:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,-7,"D"),n=e.ctrlKey||e.metaKey;break;case 39:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,r?-1:1,"D"),n=e.ctrlKey||e.metaKey,e.originalEvent.altKey&&$.datepicker._adjustDate(e.target,e.ctrlKey?+$.datepicker._get(t,"stepBigMonths"):+$.datepicker._get(t,"stepMonths"),"M");break;case 40:(e.ctrlKey||e.metaKey)&&$.datepicker._adjustDate(e.target,7,"D"),n=e.ctrlKey||e.metaKey;break;default:n=!1}else 36==e.keyCode&&e.ctrlKey?$.datepicker._showDatepicker(this):n=!1;n&&(e.preventDefault(),e.stopPropagation())},_doKeyPress:function(e){var t=$.datepicker._getInst(e.target);if($.datepicker._get(t,"constrainInput")){var n=$.datepicker._possibleChars($.datepicker._get(t,"dateFormat")),r=String.fromCharCode(e.charCode==undefined?e.keyCode:e.charCode);return e.ctrlKey||e.metaKey||" ">r||!n||n.indexOf(r)>-1}},_doKeyUp:function(e){var t=$.datepicker._getInst(e.target);if(t.input.val()!=t.lastVal)try{var n=$.datepicker.parseDate($.datepicker._get(t,"dateFormat"),t.input?t.input.val():null,$.datepicker._getFormatConfig(t));n&&($.datepicker._setDateFromField(t),$.datepicker._updateAlternate(t),$.datepicker._updateDatepicker(t))}catch(r){$.datepicker.log(r)}return!0},_showDatepicker:function(e){if(e=e.target||e,"input"!=e.nodeName.toLowerCase()&&(e=$("input",e.parentNode)[0]),!$.datepicker._isDisabledDatepicker(e)&&$.datepicker._lastInput!=e){var t=$.datepicker._getInst(e);$.datepicker._curInst&&$.datepicker._curInst!=t&&($.datepicker._curInst.dpDiv.stop(!0,!0),t&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var n=$.datepicker._get(t,"beforeShow"),r=n?n.apply(e,[e,t]):{};if(r!==!1){extendRemove(t.settings,r),t.lastVal=null,$.datepicker._lastInput=e,$.datepicker._setDateFromField(t),$.datepicker._inDialog&&(e.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(e),$.datepicker._pos[1]+=e.offsetHeight);var i=!1;$(e).parents().each(function(){return i|="fixed"==$(this).css("position"),!i});var s={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,t.dpDiv.empty(),t.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(t),s=$.datepicker._checkOffset(t,s,i),t.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":i?"fixed":"absolute",display:"none",left:s.left+"px",top:s.top+"px"}),!t.inline){var o=$.datepicker._get(t,"showAnim"),u=$.datepicker._get(t,"duration"),a=function(){var e=t.dpDiv.find("iframe.ui-datepicker-cover");if(e.length){var n=$.datepicker._getBorders(t.dpDiv);e.css({left:-n[0],top:-n[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()})}};t.dpDiv.zIndex($(e).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?t.dpDiv.show(o,$.datepicker._get(t,"showOptions"),u,a):t.dpDiv[o||"show"](o?u:null,a),(!o||!u)&&a(),t.input.is(":visible")&&!t.input.is(":disabled")&&t.input.focus(),$.datepicker._curInst=t}}}},_updateDatepicker:function(e){this.maxRows=4;var t=$.datepicker._getBorders(e.dpDiv);instActive=e,e.dpDiv.empty().append(this._generateHTML(e)),this._attachHandlers(e);var n=e.dpDiv.find("iframe.ui-datepicker-cover");!n.length||n.css({left:-t[0],top:-t[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()}),e.dpDiv.find("."+this._dayOverClass+" a").mouseover();var r=this._getNumberOfMonths(e),i=r[1],s=17;if(e.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),i>1&&e.dpDiv.addClass("ui-datepicker-multi-"+i).css("width",s*i+"em"),e.dpDiv[(1!=r[0]||1!=r[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),e.dpDiv[(this._get(e,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),e==$.datepicker._curInst&&$.datepicker._datepickerShowing&&e.input&&e.input.is(":visible")&&!e.input.is(":disabled")&&e.input[0]!=document.activeElement&&e.input.focus(),e.yearshtml){var o=e.yearshtml;setTimeout(function(){o===e.yearshtml&&e.yearshtml&&e.dpDiv.find("select.ui-datepicker-year:first").replaceWith(e.yearshtml),o=e.yearshtml=null},0)}},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(e,t,n){var r=e.dpDiv.outerWidth(),i=e.dpDiv.outerHeight(),s=e.input?e.input.outerWidth():0,o=e.input?e.input.outerHeight():0,u=document.documentElement.clientWidth+(n?0:$(document).scrollLeft()),a=document.documentElement.clientHeight+(n?0:$(document).scrollTop());return t.left-=this._get(e,"isRTL")?r-s:0,t.left-=n&&t.left==e.input.offset().left?$(document).scrollLeft():0,t.top-=n&&t.top==e.input.offset().top+o?$(document).scrollTop():0,t.left-=Math.min(t.left,t.left+r>u&&u>r?Math.abs(t.left+r-u):0),t.top-=Math.min(t.top,t.top+i>a&&a>i?Math.abs(i+o):0),t},_findPos:function(e){for(var t=this._getInst(e),n=this._get(t,"isRTL");e&&("hidden"==e.type||1!=e.nodeType||$.expr.filters.hidden(e));)e=e[n?"previousSibling":"nextSibling"];var r=$(e).offset();return[r.left,r.top]},_hideDatepicker:function(e){var t=this._curInst;if(t&&(!e||t==$.data(e,PROP_NAME))&&this._datepickerShowing){var n=this._get(t,"showAnim"),r=this._get(t,"duration"),i=function(){$.datepicker._tidyDialog(t)};$.effects&&($.effects.effect[n]||$.effects[n])?t.dpDiv.hide(n,$.datepicker._get(t,"showOptions"),r,i):t.dpDiv["slideDown"==n?"slideUp":"fadeIn"==n?"fadeOut":"hide"](n?r:null,i),n||i(),this._datepickerShowing=!1;var s=this._get(t,"onClose");s&&s.apply(t.input?t.input[0]:null,[t.input?t.input.val():"",t]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(e){if($.datepicker._curInst){var t=$(e.target),n=$.datepicker._getInst(t[0]);(t[0].id!=$.datepicker._mainDivId&&0==t.parents("#"+$.datepicker._mainDivId).length&&!t.hasClass($.datepicker.markerClassName)&&!t.closest("."+$.datepicker._triggerClass).length&&$.datepicker._datepickerShowing&&(!$.datepicker._inDialog||!$.blockUI)||t.hasClass($.datepicker.markerClassName)&&$.datepicker._curInst!=n)&&$.datepicker._hideDatepicker()}},_adjustDate:function(e,t,n){var r=$(e),i=this._getInst(r[0]);this._isDisabledDatepicker(r[0])||(this._adjustInstDate(i,t+("M"==n?this._get(i,"showCurrentAtPos"):0),n),this._updateDatepicker(i))},_gotoToday:function(e){var t=$(e),n=this._getInst(t[0]);if(this._get(n,"gotoCurrent")&&n.currentDay)n.selectedDay=n.currentDay,n.drawMonth=n.selectedMonth=n.currentMonth,n.drawYear=n.selectedYear=n.currentYear;else{var r=new Date;n.selectedDay=r.getDate(),n.drawMonth=n.selectedMonth=r.getMonth(),n.drawYear=n.selectedYear=r.getFullYear()}this._notifyChange(n),this._adjustDate(t)},_selectMonthYear:function(e,t,n){var r=$(e),i=this._getInst(r[0]);i["selected"+("M"==n?"Month":"Year")]=i["draw"+("M"==n?"Month":"Year")]=parseInt(t.options[t.selectedIndex].value,10),this._notifyChange(i),this._adjustDate(r)},_selectDay:function(e,t,n,r){var i=$(e);if(!$(r).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(i[0])){var s=this._getInst(i[0]);s.selectedDay=s.currentDay=$("a",r).html(),s.selectedMonth=s.currentMonth=t,s.selectedYear=s.currentYear=n,this._selectDate(e,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))}},_clearDate:function(e){{var t=$(e);this._getInst(t[0])}this._selectDate(t,"")},_selectDate:function(e,t){var n=$(e),r=this._getInst(n[0]);t=null!=t?t:this._formatDate(r),r.input&&r.input.val(t),this._updateAlternate(r);var i=this._get(r,"onSelect");i?i.apply(r.input?r.input[0]:null,[t,r]):r.input&&r.input.trigger("change"),r.inline?this._updateDatepicker(r):(this._hideDatepicker(),this._lastInput=r.input[0],"object"!=typeof r.input[0]&&r.input.focus(),this._lastInput=null)},_updateAlternate:function(e){var t=this._get(e,"altField");if(t){var n=this._get(e,"altFormat")||this._get(e,"dateFormat"),r=this._getDate(e),i=this.formatDate(n,r,this._getFormatConfig(e));$(t).each(function(){$(this).val(i)})}},noWeekends:function(e){var t=e.getDay();return[t>0&&6>t,""]},iso8601Week:function(e){var t=new Date(e.getTime());t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1},parseDate:function(e,t,n){if(null==e||null==t)throw"Invalid arguments";if(t="object"==typeof t?t.toString():t+"",""==t)return null;var r=(n?n.shortYearCutoff:null)||this._defaults.shortYearCutoff;r="string"!=typeof r?r:(new Date).getFullYear()%100+parseInt(r,10);for(var i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=-1,f=-1,l=-1,c=-1,h=!1,p=function(t){var n=y+1<e.length&&e.charAt(y+1)==t;return n&&y++,n},d=function(e){var n=p(e),r="@"==e?14:"!"==e?20:"y"==e&&n?4:"o"==e?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=t.substring(g).match(i);if(!s)throw"Missing number at position "+g;return g+=s[0].length,parseInt(s[0],10)},v=function(e,n,r){var i=$.map(p(e)?r:n,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)}),s=-1;if($.each(i,function(e,n){var r=n[1];return t.substr(g,r.length).toLowerCase()==r.toLowerCase()?(s=n[0],g+=r.length,!1):void 0}),-1!=s)return s+1;throw"Unknown name at position "+g},m=function(){if(t.charAt(g)!=e.charAt(y))throw"Unexpected literal at position "+g;g++},g=0,y=0;y<e.length;y++)if(h)"'"!=e.charAt(y)||p("'")?m():h=!1;else switch(e.charAt(y)){case"d":l=d("d");break;case"D":v("D",i,s);break;case"o":c=d("o");break;case"m":f=d("m");break;case"M":f=v("M",o,u);break;case"y":a=d("y");break;case"@":var b=new Date(d("@"));a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"!":var b=new Date((d("!")-this._ticksTo1970)/1e4);a=b.getFullYear(),f=b.getMonth()+1,l=b.getDate();break;case"'":p("'")?m():h=!0;break;default:m()}if(g<t.length){var w=t.substr(g);if(!/^\s+/.test(w))throw"Extra/unparsed characters found in date: "+w}if(-1==a?a=(new Date).getFullYear():100>a&&(a+=(new Date).getFullYear()-(new Date).getFullYear()%100+(r>=a?0:-100)),c>-1)for(f=1,l=c;;){var E=this._getDaysInMonth(a,f-1);if(E>=l)break;f++,l-=E}var b=this._daylightSavingAdjust(new Date(a,f-1,l));if(b.getFullYear()!=a||b.getMonth()+1!=f||b.getDate()!=l)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,i=(n?n.dayNames:null)||this._defaults.dayNames,s=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,o=(n?n.monthNames:null)||this._defaults.monthNames,u=function(t){var n=h+1<e.length&&e.charAt(h+1)==t;return n&&h++,n},a=function(e,t,n){var r=""+t;if(u(e))for(;r.length<n;)r="0"+r;return r},f=function(e,t,n,r){return u(e)?r[t]:n[t]},l="",c=!1;if(t)for(var h=0;h<e.length;h++)if(c)"'"!=e.charAt(h)||u("'")?l+=e.charAt(h):c=!1;else switch(e.charAt(h)){case"d":l+=a("d",t.getDate(),2);break;case"D":l+=f("D",t.getDay(),r,i);break;case"o":l+=a("o",Math.round((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()-new Date(t.getFullYear(),0,0).getTime())/864e5),3);break;case"m":l+=a("m",t.getMonth()+1,2);break;case"M":l+=f("M",t.getMonth(),s,o);break;case"y":l+=u("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":l+=t.getTime();break;case"!":l+=1e4*t.getTime()+this._ticksTo1970;break;case"'":u("'")?l+="'":c=!0;break;default:l+=e.charAt(h)}return l},_possibleChars:function(e){for(var t="",n=!1,r=function(t){var n=i+1<e.length&&e.charAt(i+1)==t;return n&&i++,n},i=0;i<e.length;i++)if(n)"'"!=e.charAt(i)||r("'")?t+=e.charAt(i):n=!1;else switch(e.charAt(i)){case"d":case"m":case"y":case"@":t+="0123456789";break;case"D":case"M":return null;case"'":r("'")?t+="'":n=!0;break;default:t+=e.charAt(i)}return t},_get:function(e,t){return e.settings[t]!==undefined?e.settings[t]:this._defaults[t]},_setDateFromField:function(e,t){if(e.input.val()!=e.lastVal){var i,s,n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null;i=s=this._getDefaultDate(e);var o=this._getFormatConfig(e);try{i=this.parseDate(n,r,o)||s}catch(u){this.log(u),r=t?"":r}e.selectedDay=i.getDate(),e.drawMonth=e.selectedMonth=i.getMonth(),e.drawYear=e.selectedYear=i.getFullYear(),e.currentDay=r?i.getDate():0,e.currentMonth=r?i.getMonth():0,e.currentYear=r?i.getFullYear():0,this._adjustInstDate(e)}},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(e,t,n){var r=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},i=function(t){try{return $.datepicker.parseDate($.datepicker._get(e,"dateFormat"),t,$.datepicker._getFormatConfig(e))}catch(n){}for(var r=(t.toLowerCase().match(/^c/)?$.datepicker._getDate(e):null)||new Date,i=r.getFullYear(),s=r.getMonth(),o=r.getDate(),u=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,a=u.exec(t);a;){switch(a[2]||"d"){case"d":case"D":o+=parseInt(a[1],10);break;case"w":case"W":o+=7*parseInt(a[1],10);break;case"m":case"M":s+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s));break;case"y":case"Y":i+=parseInt(a[1],10),o=Math.min(o,$.datepicker._getDaysInMonth(i,s))}a=u.exec(t)}return new Date(i,s,o)},s=null==t||""===t?n:"string"==typeof t?i(t):"number"==typeof t?isNaN(t)?n:r(t):new Date(t.getTime());return s=s&&"Invalid Date"==s.toString()?n:s,s&&(s.setHours(0),s.setMinutes(0),s.setSeconds(0),s.setMilliseconds(0)),this._daylightSavingAdjust(s)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!=e.selectedMonth||s!=e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&""==e.input.val()?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(e){var t=this._get(e,"stepMonths"),n="#"+e.id.replace(/\\\\/g,"\\");e.dpDiv.find("[data-handler]").map(function(){var e={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,-t,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(n,+t,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(n)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(n,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(n,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),e[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t=new Date;t=this._daylightSavingAdjust(new Date(t.getFullYear(),t.getMonth(),t.getDate()));var n=this._get(e,"isRTL"),r=this._get(e,"showButtonPanel"),i=this._get(e,"hideIfNoPrevNext"),s=this._get(e,"navigationAsDateFormat"),o=this._getNumberOfMonths(e),u=this._get(e,"showCurrentAtPos"),a=this._get(e,"stepMonths"),f=1!=o[0]||1!=o[1],l=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),c=this._getMinMaxDate(e,"min"),h=this._getMinMaxDate(e,"max"),p=e.drawMonth-u,d=e.drawYear;if(0>p&&(p+=12,d--),h){var v=this._daylightSavingAdjust(new Date(h.getFullYear(),h.getMonth()-o[0]*o[1]+1,h.getDate()));for(v=c&&c>v?c:v;this._daylightSavingAdjust(new Date(d,p,1))>v;)p--,0>p&&(p=11,d--)}e.drawMonth=p,e.drawYear=d;var m=this._get(e,"prevText");m=s?this.formatDate(m,this._daylightSavingAdjust(new Date(d,p-a,1)),this._getFormatConfig(e)):m;var g=this._canAdjustMonth(e,-1,d,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>":i?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"e":"w")+'">'+m+"</span></a>",y=this._get(e,"nextText");y=s?this.formatDate(y,this._daylightSavingAdjust(new Date(d,p+a,1)),this._getFormatConfig(e)):y;var b=this._canAdjustMonth(e,1,d,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>":i?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+y+'"><span class="ui-icon ui-icon-circle-triangle-'+(n?"w":"e")+'">'+y+"</span></a>",w=this._get(e,"currentText"),E=this._get(e,"gotoCurrent")&&e.currentDay?l:t;w=s?this.formatDate(w,E,this._getFormatConfig(e)):w;var S=e.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(e,"closeText")+"</button>",x=r?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(n?S:"")+(this._isInRange(e,E)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+w+"</button>":"")+(n?"":S)+"</div>":"",T=parseInt(this._get(e,"firstDay"),10);T=isNaN(T)?0:T;for(var N=this._get(e,"showWeek"),C=this._get(e,"dayNames"),L=(this._get(e,"dayNamesShort"),this._get(e,"dayNamesMin")),A=this._get(e,"monthNames"),O=this._get(e,"monthNamesShort"),M=this._get(e,"beforeShowDay"),_=this._get(e,"showOtherMonths"),D=this._get(e,"selectOtherMonths"),H=(this._get(e,"calculateWeek")||this.iso8601Week,this._getDefaultDate(e)),B="",j=0;j<o[0];j++){var F="";this.maxRows=4;for(var I=0;I<o[1];I++){var q=this._daylightSavingAdjust(new Date(d,p,e.selectedDay)),R=" ui-corner-all",U="";if(f){if(U+='<div class="ui-datepicker-group',o[1]>1)switch(I){case 0:U+=" ui-datepicker-group-first",R=" ui-corner-"+(n?"right":"left");break;case o[1]-1:U+=" ui-datepicker-group-last",R=" ui-corner-"+(n?"left":"right");break;default:U+=" ui-datepicker-group-middle",R=""}U+='">'}U+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+R+'">'+(/all|left/.test(R)&&0==j?n?b:g:"")+(/all|right/.test(R)&&0==j?n?g:b:"")+this._generateMonthYearHeader(e,p,d,c,h,j>0||I>0,A,O)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var z=N?'<th class="ui-datepicker-week-col">'+this._get(e,"weekHeader")+"</th>":"",W=0;7>W;W++){var X=(W+T)%7;z+="<th"+((W+T+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+C[X]+'">'+L[X]+"</span></th>"}U+=z+"</tr></thead><tbody>";var V=this._getDaysInMonth(d,p);d==e.selectedYear&&p==e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,V));var J=(this._getFirstDayOfMonth(d,p)-T+7)%7,K=Math.ceil((J+V)/7),Q=f&&this.maxRows>K?this.maxRows:K;this.maxRows=Q;for(var G=this._daylightSavingAdjust(new Date(d,p,1-J)),Y=0;Q>Y;Y++){U+="<tr>";for(var Z=N?'<td class="ui-datepicker-week-col">'+this._get(e,"calculateWeek")(G)+"</td>":"",W=0;7>W;W++){var et=M?M.apply(e.input?e.input[0]:null,[G]):[!0,""],tt=G.getMonth()!=p,nt=tt&&!D||!et[0]||c&&c>G||h&&G>h;Z+='<td class="'+((W+T+6)%7>=5?" ui-datepicker-week-end":"")+(tt?" ui-datepicker-other-month":"")+(G.getTime()==q.getTime()&&p==e.selectedMonth&&e._keyEvent||H.getTime()==G.getTime()&&H.getTime()==q.getTime()?" "+this._dayOverClass:"")+(nt?" "+this._unselectableClass+" ui-state-disabled":"")+(tt&&!_?"":" "+et[1]+(G.getTime()==l.getTime()?" "+this._currentClass:"")+(G.getTime()==t.getTime()?" ui-datepicker-today":""))+'"'+(tt&&!_||!et[2]?"":' title="'+et[2]+'"')+(nt?"":' data-handler="selectDay" data-event="click" data-month="'+G.getMonth()+'" data-year="'+G.getFullYear()+'"')+">"+(tt&&!_?"&#xa0;":nt?'<span class="ui-state-default">'+G.getDate()+"</span>":'<a class="ui-state-default'+(G.getTime()==t.getTime()?" ui-state-highlight":"")+(G.getTime()==l.getTime()?" ui-state-active":"")+(tt?" ui-priority-secondary":"")+'" href="#">'+G.getDate()+"</a>")+"</td>",G.setDate(G.getDate()+1),G=this._daylightSavingAdjust(G)}U+=Z+"</tr>"}p++,p>11&&(p=0,d++),U+="</tbody></table>"+(f?"</div>"+(o[0]>0&&I==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),F+=U}B+=F}return B+=x+($.ui.ie6&&!e.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),e._keyEvent=!1,B},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a=this._get(e,"changeMonth"),f=this._get(e,"changeYear"),l=this._get(e,"showMonthAfterYear"),c='<div class="ui-datepicker-title">',h="";if(s||!a)h+='<span class="ui-datepicker-month">'+o[t]+"</span>";else{var p=r&&r.getFullYear()==n,d=i&&i.getFullYear()==n;h+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var v=0;12>v;v++)(!p||v>=r.getMonth())&&(!d||v<=i.getMonth())&&(h+='<option value="'+v+'"'+(v==t?' selected="selected"':"")+">"+u[v]+"</option>");h+="</select>"}if(l||(c+=h+(!s&&a&&f?"":"&#xa0;")),!e.yearshtml)if(e.yearshtml="",s||!f)c+='<span class="ui-datepicker-year">'+n+"</span>";else{var m=this._get(e,"yearRange").split(":"),g=(new Date).getFullYear(),y=function(e){var t=e.match(/c[+-].*/)?n+parseInt(e.substring(1),10):e.match(/[+-].*/)?g+parseInt(e,10):parseInt(e,10);return isNaN(t)?g:t},b=y(m[0]),w=Math.max(b,y(m[1]||""));for(b=r?Math.max(b,r.getFullYear()):b,w=i?Math.min(w,i.getFullYear()):w,e.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';w>=b;b++)e.yearshtml+='<option value="'+b+'"'+(b==n?' selected="selected"':"")+">"+b+"</option>";e.yearshtml+="</select>",c+=e.yearshtml,e.yearshtml=null}return c+=this._get(e,"yearSuffix"),l&&(c+=(!s&&a&&f?"":"&#xa0;")+h),c+="</div>"},_adjustInstDate:function(e,t,n){var r=e.drawYear+("Y"==n?t:0),i=e.drawMonth+("M"==n?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+("D"==n?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),("M"==n||"Y"==n)&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&n>t?n:t;return i=r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return null==t?[1,1]:"number"==typeof t?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return new Date(e,t,1).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(0>t?t:i[0]*i[1]),1));return 0>t&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max");return(!n||t.getTime()>=n.getTime())&&(!r||t.getTime()<=r.getTime())},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t="string"!=typeof t?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?"object"==typeof t?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),$.fn.datepicker=function(e){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var t=Array.prototype.slice.call(arguments,1);return"string"!=typeof e||"isDisabled"!=e&&"getDate"!=e&&"widget"!=e?"option"==e&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t)):this.each(function(){"string"==typeof e?$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this].concat(t)):$.datepicker._attachDatepicker(this,e)}):$.datepicker["_"+e+"Datepicker"].apply($.datepicker,[this[0]].concat(t))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(e){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,r,i=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",u=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(i.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),i.range&&(i.range===!0&&(i.values||(i.values=[this._valueMin(),this._valueMin()]),i.values.length&&2!==i.values.length&&(i.values=[i.values[0],i.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===i.range||"max"===i.range?" ui-slider-range-"+i.range:""))),r=i.values&&i.values.length||1,t=s.length;r>t;t++)u.push(o);this.handles=s.add(e(u.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){i.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){i.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");
switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u),r===!1))return}switch(o=this.options.step,i=s=this.options.values&&this.options.values.length?this.values(u):this.value(),t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));i>n&&(i=n,s=e(this),o=t)}),c.range===!0&&this.values(1)===c.min&&(o+=1,s=e(this.handles[o])),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return"horizontal"===this.orientation?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),0>r&&(r=0),"vertical"===this.orientation&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),2===this.options.values.length&&this.options.range===!0&&(0===t&&n>r||1===t&&r>n)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("change",e,n)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0),void 0):this._value()},values:function(t,n){var r,i,s;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t),void 0;if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(r=this.options.values,i=arguments[0],s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;switch(e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),r=0;i>r;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(n=this.options.values.slice(),r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return 2*Math.abs(n)>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l["horizontal"===a.orientation?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&("horizontal"===a.orientation?(0===r&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),1===r&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(0===r&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),1===r&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l["horizontal"===this.orientation?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),"max"===o&&"horizontal"===this.orientation&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),"max"===o&&"vertical"===this.orientation&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))}})}(jQuery),jQuery.effects||function(e,t){var n=e.uiBackCompat!==!1,r="ui-effects-";e.effects={effect:{}},function(t,n){function p(e,t,n){var r=a[t.type]||{};return null==e?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function d(e){var n=o(),r=n._rgba=[];return e=e.toLowerCase(),h(s,function(t,i){var s,o=i.re.exec(e),a=o&&i.parse(o),f=i.space||"rgba";return a?(s=n[f](a),n[u[f].cache]=s[u[f].cache],r=n._rgba=s._rgba,!1):void 0}),r.length?("0,0,0,0"===r.join()&&t.extend(r,c.transparent),n):c[e]}function v(e,t,n){return n=(n+1)%1,1>6*n?e+(t-e)*n*6:1>2*n?t:2>3*n?e+(t-e)*(2/3-n)*6:e}var c,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),i=/^([\-+])=\s*(\d+\.?\d*)/,s=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(e){return[2.55*e[1],2.55*e[2],2.55*e[3],e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],o=t.Color=function(e,n,r,i){return new t.Color.fn.parse(e,n,r,i)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},a={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},f=o.support={},l=t("<p>")[0],h=t.each;l.style.cssText="background-color:rgba(1,1,1,.5)",f.rgba=l.style.backgroundColor.indexOf("rgba")>-1,h(u,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),o.fn=t.extend(o.prototype,{parse:function(r,i,s,a){if(r===n)return this._rgba=[null,null,null,null],this;(r.jquery||r.nodeType)&&(r=t(r).css(i),i=n);var f=this,l=t.type(r),v=this._rgba=[];return i!==n&&(r=[r,i,s,a],l="array"),"string"===l?this.parse(d(r)||c._default):"array"===l?(h(u.rgba.props,function(e,t){v[t.idx]=p(r[t.idx],t)}),this):"object"===l?(r instanceof o?h(u,function(e,t){r[t.cache]&&(f[t.cache]=r[t.cache].slice())}):h(u,function(t,n){var i=n.cache;h(n.props,function(e,t){if(!f[i]&&n.to){if("alpha"===e||null==r[e])return;f[i]=n.to(f._rgba)}f[i][t.idx]=p(r[e],t,!0)}),f[i]&&e.inArray(null,f[i].slice(0,3))<0&&(f[i][3]=1,n.from&&(f._rgba=n.from(f[i])))}),this):void 0},is:function(e){var t=o(e),n=!0,r=this;return h(u,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],h(i.props,function(e,t){return null!=o[t.idx]?n=o[t.idx]===s[t.idx]:void 0})),n}),n},_space:function(){var e=[],t=this;return h(u,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=o(e),r=n._space(),i=u[r],s=0===this.alpha()?o("transparent"):this,f=s[i.cache]||i.to(s._rgba),l=f.slice();return n=n[i.cache],h(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],u=a[r.type]||{};null!==o&&(null===s?l[i]=o:(u.mod&&(o-s>u.mod/2?s+=u.mod:s-o>u.mod/2&&(s-=u.mod)),l[i]=p((o-s)*t+s,r)))}),this[r](l)},blend:function(e){if(1===this._rgba[3])return this;var n=this._rgba.slice(),r=n.pop(),i=o(e)._rgba;return o(t.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var e="rgba(",n=t.map(this._rgba,function(e,t){return null==e?t>2?1:0:e});return 1===n[3]&&(n.pop(),e="rgb("),e+n.join()+")"},toHslaString:function(){var e="hsla(",n=t.map(this.hsla(),function(e,t){return null==e&&(e=t>2?1:0),t&&3>t&&(e=Math.round(100*e)+"%"),e});return 1===n[3]&&(n.pop(),e="hsl("),e+n.join()+")"},toHexString:function(e){var n=this._rgba.slice(),r=n.pop();return e&&n.push(~~(255*r)),"#"+t.map(n,function(e){return e=(e||0).toString(16),1===e.length?"0"+e:e}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),o.fn.parse.prototype=o.fn,u.hsla.to=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var l,c,t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=.5*a;return l=o===s?0:t===s?60*(n-r)/u+360:n===s?60*(r-t)/u+120:60*(t-n)/u+240,c=0===f||1===f?f:.5>=f?u/a:u/(2-a),[Math.round(l)%360,c,f,null==i?1:i]},u.hsla.from=function(e){if(null==e[0]||null==e[1]||null==e[2])return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=.5>=r?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(255*v(o,s,t+1/3)),Math.round(255*v(o,s,t)),Math.round(255*v(o,s,t-1/3)),i]},h(u,function(e,r){var s=r.props,u=r.cache,a=r.to,f=r.from;o.fn[e]=function(e){if(a&&!this[u]&&(this[u]=a(this._rgba)),e===n)return this[u].slice();var r,i=t.type(e),l="array"===i||"object"===i?e:arguments,c=this[u].slice();return h(s,function(e,t){var n=l["object"===i?e:t.idx];null==n&&(n=c[t.idx]),c[t.idx]=p(n,t)}),f?(r=o(f(c)),r[u]=c,r):o(c)},h(s,function(n,r){o.fn[n]||(o.fn[n]=function(s){var l,o=t.type(s),u="alpha"===n?this._hsla?"hsla":"rgba":e,a=this[u](),f=a[r.idx];return"undefined"===o?f:("function"===o&&(s=s.call(this,f),o=t.type(s)),null==s&&r.empty?this:("string"===o&&(l=i.exec(s),l&&(s=f+parseFloat(l[2])*("+"===l[1]?1:-1))),a[r.idx]=s,this[u](a)))})})}),h(r,function(e,n){t.cssHooks[n]={set:function(e,r){var i,s,u="";if("string"!==t.type(r)||(i=d(r))){if(r=o(i||r),!f.rgba&&1!==r._rgba[3]){for(s="backgroundColor"===n?e.parentNode:e;(""===u||"transparent"===u)&&s&&s.style;)try{u=t.css(s,"backgroundColor"),s=s.parentNode}catch(a){}r=r.blend(u&&"transparent"!==u?u:"_default")}r=r.toRgbaString()}try{e.style[n]=r}catch(l){}}},t.fx.step[n]=function(e){e.colorInit||(e.start=o(e.elem,n),e.end=o(e.end),e.colorInit=!0),t.cssHooks[n].set(e.elem,e.start.transition(e.end,e.pos))}}),t.cssHooks.borderColor={expand:function(e){var t={};return h(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},c=t.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var r,i,t=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={};if(t&&t.length&&t[0]&&t[t[0]])for(i=t.length;i--;)r=t[i],"string"==typeof t[r]&&(n[e.camelCase(r)]=t[r]);else for(r in t)"string"==typeof t[r]&&(n[r]=t[r]);return n}function s(t,n){var s,o,i={};for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){("none"!==e.end&&!e.setAttr||1===e.pos&&!e.setAttr)&&(jQuery.style(e.elem,n,e.end),e.setAttr=!0)}}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var u,r=e(this),o=r.attr("class")||"",f=a.children?r.find("*").andSelf():r;f=f.map(function(){var t=e(this);return{el:t,start:i.call(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i.call(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=jQuery.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return"boolean"==typeof r||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function i(t,n,r,i){return e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},null==n&&(n={}),e.isFunction(n)&&(i=n,r=null,n={}),("number"==typeof n||e.fx.speeds[n])&&(i=r,r=n,n={}),e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:"number"==typeof r?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function s(t){return!t||"number"==typeof t||e.fx.speeds[t]?!0:"string"!=typeof t||e.effects.effect[t]?!1:n&&e.effects[t]?!1:!0}e.extend(e.effects,{version:"1.9.2",save:function(e,t){for(var n=0;n<t.length;n++)null!==t[n]&&e.data(r+t[n],e[0].style[t[n]])},restore:function(e,n){var i,s;for(s=0;s<n.length;s++)null!==n[s]&&(i=e.data(r+n[s]),i===t&&(i=""),e.css(n[s],i))},setMode:function(e,t){return"toggle"===t&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),"static"===t.css("position")?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function a(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,s=t.mode;(r.is(":hidden")?"hide"===s:"show"===s)?u():o.call(r[0],t,u)}var t=i.apply(this,arguments),r=t.mode,s=t.queue,o=e.effects.effect[t.effect],u=!o&&n&&e.effects[t.effect];return e.fx.off||!o&&!u?r?this[r](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):o?s===!1?this.each(a):this.queue(s||"fx",a):u.call(this,{options:t,duration:t.duration,callback:t.complete,mode:t.mode})},_show:e.fn.show,show:function(e){if(s(e))return this._show.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(s(e))return this._hide.apply(this,arguments);var t=i.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(s(t)||"boolean"==typeof t||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=i.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return 0===e||1===e?e:-Math.pow(2,8*(e-1))*Math.sin((80*(e-1)-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){for(var t,n=4;e<((t=Math.pow(2,--n))-1)/11;);return 1/Math.pow(4,3-n)-7.5625*Math.pow((3*t-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return.5>e?n(2*e)/2:1-n(-2*e+2)/2}})}()}(jQuery),function(e){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}}(jQuery),function(e){e.effects.effect.slide=function(t,n){var l,r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o="show"===s,u=t.direction||"left",a="up"===u||"down"===u?"top":"left",f="up"===u||"left"===u,c={};e.effects.save(r,i),r.show(),l=t.distance||r["top"===a?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){"hide"===s&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}}(jQuery),function($){function Timepicker(){this.regional=[],this.regional[""]={currentText:"Now",closeText:"Done",amNames:["AM","A"],pmNames:["PM","P"],timeFormat:"HH:mm",timeSuffix:"",timeOnlyTitle:"Choose Time",timeText:"Time",hourText:"Hour",minuteText:"Minute",secondText:"Second",millisecText:"Millisecond",timezoneText:"Time Zone",isRTL:!1},this._defaults={showButtonPanel:!0,timeOnly:!1,showHour:!0,showMinute:!0,showSecond:!1,showMillisec:!1,showTimezone:!1,showTime:!0,stepHour:1,stepMinute:1,stepSecond:1,stepMillisec:1,hour:0,minute:0,second:0,millisec:0,timezone:null,useLocalTimezone:!1,defaultTimezone:"+0000",hourMin:0,minuteMin:0,secondMin:0,millisecMin:0,hourMax:23,minuteMax:59,secondMax:59,millisecMax:999,minDateTime:null,maxDateTime:null,onSelect:null,hourGrid:0,minuteGrid:0,secondGrid:0,millisecGrid:0,alwaysSetTime:!0,separator:" ",altFieldTimeOnly:!0,altTimeFormat:null,altSeparator:null,altTimeSuffix:null,pickerTimeFormat:null,pickerTimeSuffix:null,showTimepicker:!0,timezoneIso8601:!1,timezoneList:null,addSliderAccess:!1,sliderAccessArgs:null,controlType:"slider",defaultValue:null,parse:"strict"},$.extend(this._defaults,this.regional[""])}if($.ui.timepicker=$.ui.timepicker||{},!$.ui.timepicker.version){$.extend($.ui,{timepicker:{version:"1.1.1"}}),$.extend(Timepicker.prototype,{$input:null,$altInput:null,$timeObj:null,inst:null,hour_slider:null,minute_slider:null,second_slider:null,millisec_slider:null,timezone_select:null,hour:0,minute:0,second:0,millisec:0,timezone:null,defaultTimezone:"+0000",hourMinOriginal:null,minuteMinOriginal:null,secondMinOriginal:null,millisecMinOriginal:null,hourMaxOriginal:null,minuteMaxOriginal:null,secondMaxOriginal:null,millisecMaxOriginal:null,ampm:"",formattedDate:"",formattedTime:"",formattedDateTime:"",timezoneList:null,units:["hour","minute","second","millisec"],control:null,setDefaults:function(settings){return extendRemove(this._defaults,settings||{}),this},_newInst:function($input,o){var tp_inst=new Timepicker,inlineSettings={},fns={},overrides,i;for(var attrName in this._defaults)if(this._defaults.hasOwnProperty(attrName)){var attrValue=$input.attr("time:"+attrName);if(attrValue)try{inlineSettings[attrName]=eval(attrValue)}catch(err){inlineSettings[attrName]=attrValue}}overrides={beforeShow:function(input,dp_inst){return $.isFunction(tp_inst._defaults.evnts.beforeShow)?tp_inst._defaults.evnts.beforeShow.call($input[0],input,dp_inst,tp_inst):void 0},onChangeMonthYear:function(year,month,dp_inst){tp_inst._updateDateTime(dp_inst),$.isFunction(tp_inst._defaults.evnts.onChangeMonthYear)&&tp_inst._defaults.evnts.onChangeMonthYear.call($input[0],year,month,dp_inst,tp_inst)},onClose:function(dateText,dp_inst){tp_inst.timeDefined===!0&&""!==$input.val()&&tp_inst._updateDateTime(dp_inst),$.isFunction(tp_inst._defaults.evnts.onClose)&&tp_inst._defaults.evnts.onClose.call($input[0],dateText,dp_inst,tp_inst)}};for(i in overrides)overrides.hasOwnProperty(i)&&(fns[i]=o[i]||null);if(tp_inst._defaults=$.extend({},this._defaults,inlineSettings,o,overrides,{evnts:fns,timepicker:tp_inst}),tp_inst.amNames=$.map(tp_inst._defaults.amNames,function(val){return val.toUpperCase()}),tp_inst.pmNames=$.map(tp_inst._defaults.pmNames,function(val){return val.toUpperCase()}),"string"==typeof tp_inst._defaults.controlType?(void 0===$.fn[tp_inst._defaults.controlType]&&(tp_inst._defaults.controlType="select"),tp_inst.control=tp_inst._controls[tp_inst._defaults.controlType]):tp_inst.control=tp_inst._defaults.controlType,null===tp_inst._defaults.timezoneList){var timezoneList=["-1200","-1100","-1000","-0930","-0900","-0800","-0700","-0600","-0500","-0430","-0400","-0330","-0300","-0200","-0100","+0000","+0100","+0200","+0300","+0330","+0400","+0430","+0500","+0530","+0545","+0600","+0630","+0700","+0800","+0845","+0900","+0930","+1000","+1030","+1100","+1130","+1200","+1245","+1300","+1400"];tp_inst._defaults.timezoneIso8601&&(timezoneList=$.map(timezoneList,function(val){return"+0000"==val?"Z":val.substring(0,3)+":"+val.substring(3)})),tp_inst._defaults.timezoneList=timezoneList}return tp_inst.timezone=tp_inst._defaults.timezone,tp_inst.hour=tp_inst._defaults.hour,tp_inst.minute=tp_inst._defaults.minute,tp_inst.second=tp_inst._defaults.second,tp_inst.millisec=tp_inst._defaults.millisec,tp_inst.ampm="",tp_inst.$input=$input,o.altField&&(tp_inst.$altInput=$(o.altField).css({cursor:"pointer"}).focus(function(){$input.trigger("focus")})),(0===tp_inst._defaults.minDate||0===tp_inst._defaults.minDateTime)&&(tp_inst._defaults.minDate=new Date),(0===tp_inst._defaults.maxDate||0===tp_inst._defaults.maxDateTime)&&(tp_inst._defaults.maxDate=new Date),void 0!==tp_inst._defaults.minDate&&tp_inst._defaults.minDate instanceof Date&&(tp_inst._defaults.minDateTime=new Date(tp_inst._defaults.minDate.getTime())),void 0!==tp_inst._defaults.minDateTime&&tp_inst._defaults.minDateTime instanceof Date&&(tp_inst._defaults.minDate=new Date(tp_inst._defaults.minDateTime.getTime())),void 0!==tp_inst._defaults.maxDate&&tp_inst._defaults.maxDate instanceof Date&&(tp_inst._defaults.maxDateTime=new Date(tp_inst._defaults.maxDate.getTime())),void 0!==tp_inst._defaults.maxDateTime&&tp_inst._defaults.maxDateTime instanceof Date&&(tp_inst._defaults.maxDate=new Date(tp_inst._defaults.maxDateTime.getTime())),tp_inst.$input.bind("focus",function(){tp_inst._onFocus()}),tp_inst},_addTimePicker:function(dp_inst){var currDT=this.$altInput&&this._defaults.altFieldTimeOnly?this.$input.val()+" "+this.$altInput.val():this.$input.val();this.timeDefined=this._parseTime(currDT),this._limitMinMaxDateTime(dp_inst,!1),this._injectTimePicker()},_parseTime:function(timeString,withDate){if(this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),withDate||!this._defaults.timeOnly){var dp_dateFormat=$.datepicker._get(this.inst,"dateFormat");try{var parseRes=parseDateTimeInternal(dp_dateFormat,this._defaults.timeFormat,timeString,$.datepicker._getFormatConfig(this.inst),this._defaults);if(!parseRes.timeObj)return!1;$.extend(this,parseRes.timeObj)}catch(err){return $.datepicker.log("Error parsing the date/time string: "+err+"\ndate/time string = "+timeString+"\ntimeFormat = "+this._defaults.timeFormat+"\ndateFormat = "+dp_dateFormat),!1}return!0}var timeObj=$.datepicker.parseTime(this._defaults.timeFormat,timeString,this._defaults);return timeObj?($.extend(this,timeObj),!0):!1},_injectTimePicker:function(){var $dp=this.inst.dpDiv,o=this.inst.settings,tp_inst=this,litem="",uitem="",max={},gridSize={},size=null;if(0===$dp.find("div.ui-timepicker-div").length&&o.showTimepicker){for(var noDisplay=' style="display:none;"',html='<div class="ui-timepicker-div'+(o.isRTL?" ui-timepicker-rtl":"")+'"><dl><dt class="ui_tpicker_time_label"'+(o.showTime?"":noDisplay)+">"+o.timeText+'</dt><dd class="ui_tpicker_time"'+(o.showTime?"":noDisplay)+"></dd>",i=0,l=this.units.length;l>i;i++){if(litem=this.units[i],uitem=litem.substr(0,1).toUpperCase()+litem.substr(1),max[litem]=parseInt(o[litem+"Max"]-(o[litem+"Max"]-o[litem+"Min"])%o["step"+uitem],10),gridSize[litem]=0,html+='<dt class="ui_tpicker_'+litem+'_label"'+(o["show"+uitem]?"":noDisplay)+">"+o[litem+"Text"]+'</dt><dd class="ui_tpicker_'+litem+'"><div class="ui_tpicker_'+litem+'_slider"'+(o["show"+uitem]?"":noDisplay)+"></div>",o["show"+uitem]&&o[litem+"Grid"]>0){if(html+='<div style="padding-left: 1px"><table class="ui-tpicker-grid-label"><tr>',"hour"==litem)for(var h=o[litem+"Min"];h<=max[litem];h+=parseInt(o[litem+"Grid"],10)){gridSize[litem]++;var tmph=$.datepicker.formatTime(useAmpm(o.pickerTimeFormat||o.timeFormat)?"hht":"HH",{hour:h},o);html+='<td data-for="'+litem+'">'+tmph+"</td>"}else for(var m=o[litem+"Min"];m<=max[litem];m+=parseInt(o[litem+"Grid"],10))gridSize[litem]++,html+='<td data-for="'+litem+'">'+(10>m?"0":"")+m+"</td>";html+="</tr></table></div>"}html+="</dd>"}html+='<dt class="ui_tpicker_timezone_label"'+(o.showTimezone?"":noDisplay)+">"+o.timezoneText+"</dt>",html+='<dd class="ui_tpicker_timezone" '+(o.showTimezone?"":noDisplay)+"></dd>",html+="</dl></div>";var $tp=$(html);o.timeOnly===!0&&($tp.prepend('<div class="ui-widget-header ui-helper-clearfix ui-corner-all"><div class="ui-datepicker-title">'+o.timeOnlyTitle+"</div></div>"),$dp.find(".ui-datepicker-header, .ui-datepicker-calendar").hide());for(var i=0,l=tp_inst.units.length;l>i;i++)litem=tp_inst.units[i],uitem=litem.substr(0,1).toUpperCase()+litem.substr(1),tp_inst[litem+"_slider"]=tp_inst.control.create(tp_inst,$tp.find(".ui_tpicker_"+litem+"_slider"),litem,tp_inst[litem],o[litem+"Min"],max[litem],o["step"+uitem]),o["show"+uitem]&&o[litem+"Grid"]>0&&(size=100*gridSize[litem]*o[litem+"Grid"]/(max[litem]-o[litem+"Min"]),$tp.find(".ui_tpicker_"+litem+" table").css({width:size+"%",marginLeft:o.isRTL?"0":size/(-2*gridSize[litem])+"%",marginRight:o.isRTL?size/(-2*gridSize[litem])+"%":"0",borderCollapse:"collapse"}).find("td").click(function(){var $t=$(this),h=$t.html(),n=parseInt(h.replace(/[^0-9]/g),10),ap=h.replace(/[^apm]/gi),f=$t.data("for");"hour"==f&&(-1!==ap.indexOf("p")&&12>n?n+=12:-1!==ap.indexOf("a")&&12===n&&(n=0)),tp_inst.control.value(tp_inst,tp_inst[f+"_slider"],litem,n),tp_inst._onTimeChange(),tp_inst._onSelectHandler()}).css({cursor:"pointer",width:100/gridSize[litem]+"%",textAlign:"center",overflow:"hidden"}));if(this.timezone_select=$tp.find(".ui_tpicker_timezone").append("<select></select>").find("select"),$.fn.append.apply(this.timezone_select,$.map(o.timezoneList,function(val){return $("<option />").val("object"==typeof val?val.value:val).text("object"==typeof val?val.label:val)})),"undefined"!=typeof this.timezone&&null!==this.timezone&&""!==this.timezone){var local_date=new Date(this.inst.selectedYear,this.inst.selectedMonth,this.inst.selectedDay,12),local_timezone=$.timepicker.timeZoneOffsetString(local_date);local_timezone==this.timezone?selectLocalTimeZone(tp_inst):this.timezone_select.val(this.timezone)}else"undefined"!=typeof this.hour&&null!==this.hour&&""!==this.hour?this.timezone_select.val(o.defaultTimezone):selectLocalTimeZone(tp_inst);this.timezone_select.change(function(){tp_inst._defaults.useLocalTimezone=!1,tp_inst._onTimeChange()});var $buttonPanel=$dp.find(".ui-datepicker-buttonpane");if($buttonPanel.length?$buttonPanel.before($tp):$dp.append($tp),this.$timeObj=$tp.find(".ui_tpicker_time"),null!==this.inst){var timeDefined=this.timeDefined;this._onTimeChange(),this.timeDefined=timeDefined}if(this._defaults.addSliderAccess){var sliderAccessArgs=this._defaults.sliderAccessArgs,rtl=this._defaults.isRTL;
sliderAccessArgs.isRTL=rtl,setTimeout(function(){if(0===$tp.find(".ui-slider-access").length){$tp.find(".ui-slider:visible").sliderAccess(sliderAccessArgs);var sliderAccessWidth=$tp.find(".ui-slider-access:eq(0)").outerWidth(!0);sliderAccessWidth&&$tp.find("table:visible").each(function(){var $g=$(this),oldWidth=$g.outerWidth(),oldMarginLeft=$g.css(rtl?"marginRight":"marginLeft").toString().replace("%",""),newWidth=oldWidth-sliderAccessWidth,newMarginLeft=oldMarginLeft*newWidth/oldWidth+"%",css={width:newWidth,marginRight:0,marginLeft:0};css[rtl?"marginRight":"marginLeft"]=newMarginLeft,$g.css(css)})}},10)}}},_limitMinMaxDateTime:function(dp_inst,adjustSliders){var o=this._defaults,dp_date=new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay);if(this._defaults.showTimepicker){if(null!==$.datepicker._get(dp_inst,"minDateTime")&&void 0!==$.datepicker._get(dp_inst,"minDateTime")&&dp_date){var minDateTime=$.datepicker._get(dp_inst,"minDateTime"),minDateTimeDate=new Date(minDateTime.getFullYear(),minDateTime.getMonth(),minDateTime.getDate(),0,0,0,0);(null===this.hourMinOriginal||null===this.minuteMinOriginal||null===this.secondMinOriginal||null===this.millisecMinOriginal)&&(this.hourMinOriginal=o.hourMin,this.minuteMinOriginal=o.minuteMin,this.secondMinOriginal=o.secondMin,this.millisecMinOriginal=o.millisecMin),dp_inst.settings.timeOnly||minDateTimeDate.getTime()==dp_date.getTime()?(this._defaults.hourMin=minDateTime.getHours(),this.hour<=this._defaults.hourMin?(this.hour=this._defaults.hourMin,this._defaults.minuteMin=minDateTime.getMinutes(),this.minute<=this._defaults.minuteMin?(this.minute=this._defaults.minuteMin,this._defaults.secondMin=minDateTime.getSeconds(),this.second<=this._defaults.secondMin?(this.second=this._defaults.secondMin,this._defaults.millisecMin=minDateTime.getMilliseconds()):(this.millisec<this._defaults.millisecMin&&(this.millisec=this._defaults.millisecMin),this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)):(this._defaults.hourMin=this.hourMinOriginal,this._defaults.minuteMin=this.minuteMinOriginal,this._defaults.secondMin=this.secondMinOriginal,this._defaults.millisecMin=this.millisecMinOriginal)}if(null!==$.datepicker._get(dp_inst,"maxDateTime")&&void 0!==$.datepicker._get(dp_inst,"maxDateTime")&&dp_date){var maxDateTime=$.datepicker._get(dp_inst,"maxDateTime"),maxDateTimeDate=new Date(maxDateTime.getFullYear(),maxDateTime.getMonth(),maxDateTime.getDate(),0,0,0,0);(null===this.hourMaxOriginal||null===this.minuteMaxOriginal||null===this.secondMaxOriginal)&&(this.hourMaxOriginal=o.hourMax,this.minuteMaxOriginal=o.minuteMax,this.secondMaxOriginal=o.secondMax,this.millisecMaxOriginal=o.millisecMax),dp_inst.settings.timeOnly||maxDateTimeDate.getTime()==dp_date.getTime()?(this._defaults.hourMax=maxDateTime.getHours(),this.hour>=this._defaults.hourMax?(this.hour=this._defaults.hourMax,this._defaults.minuteMax=maxDateTime.getMinutes(),this.minute>=this._defaults.minuteMax?(this.minute=this._defaults.minuteMax,this._defaults.secondMax=maxDateTime.getSeconds()):this.second>=this._defaults.secondMax?(this.second=this._defaults.secondMax,this._defaults.millisecMax=maxDateTime.getMilliseconds()):(this.millisec>this._defaults.millisecMax&&(this.millisec=this._defaults.millisecMax),this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)):(this._defaults.hourMax=this.hourMaxOriginal,this._defaults.minuteMax=this.minuteMaxOriginal,this._defaults.secondMax=this.secondMaxOriginal,this._defaults.millisecMax=this.millisecMaxOriginal)}if(void 0!==adjustSliders&&adjustSliders===!0){var hourMax=parseInt(this._defaults.hourMax-(this._defaults.hourMax-this._defaults.hourMin)%this._defaults.stepHour,10),minMax=parseInt(this._defaults.minuteMax-(this._defaults.minuteMax-this._defaults.minuteMin)%this._defaults.stepMinute,10),secMax=parseInt(this._defaults.secondMax-(this._defaults.secondMax-this._defaults.secondMin)%this._defaults.stepSecond,10),millisecMax=parseInt(this._defaults.millisecMax-(this._defaults.millisecMax-this._defaults.millisecMin)%this._defaults.stepMillisec,10);this.hour_slider&&(this.control.options(this,this.hour_slider,"hour",{min:this._defaults.hourMin,max:hourMax}),this.control.value(this,this.hour_slider,"hour",this.hour)),this.minute_slider&&(this.control.options(this,this.minute_slider,"minute",{min:this._defaults.minuteMin,max:minMax}),this.control.value(this,this.minute_slider,"minute",this.minute)),this.second_slider&&(this.control.options(this,this.second_slider,"second",{min:this._defaults.secondMin,max:secMax}),this.control.value(this,this.second_slider,"second",this.second)),this.millisec_slider&&(this.control.options(this,this.millisec_slider,"millisec",{min:this._defaults.millisecMin,max:millisecMax}),this.control.value(this,this.millisec_slider,"millisec",this.millisec))}}},_onTimeChange:function(){var hour=this.hour_slider?this.control.value(this,this.hour_slider,"hour"):!1,minute=this.minute_slider?this.control.value(this,this.minute_slider,"minute"):!1,second=this.second_slider?this.control.value(this,this.second_slider,"second"):!1,millisec=this.millisec_slider?this.control.value(this,this.millisec_slider,"millisec"):!1,timezone=this.timezone_select?this.timezone_select.val():!1,o=this._defaults,pickerTimeFormat=o.pickerTimeFormat||o.timeFormat,pickerTimeSuffix=o.pickerTimeSuffix||o.timeSuffix;"object"==typeof hour&&(hour=!1),"object"==typeof minute&&(minute=!1),"object"==typeof second&&(second=!1),"object"==typeof millisec&&(millisec=!1),"object"==typeof timezone&&(timezone=!1),hour!==!1&&(hour=parseInt(hour,10)),minute!==!1&&(minute=parseInt(minute,10)),second!==!1&&(second=parseInt(second,10)),millisec!==!1&&(millisec=parseInt(millisec,10));var ampm=o[12>hour?"amNames":"pmNames"][0],hasChanged=hour!=this.hour||minute!=this.minute||second!=this.second||millisec!=this.millisec||this.ampm.length>0&&12>hour!=(-1!==$.inArray(this.ampm.toUpperCase(),this.amNames))||null===this.timezone&&timezone!=this.defaultTimezone||null!==this.timezone&&timezone!=this.timezone;hasChanged&&(hour!==!1&&(this.hour=hour),minute!==!1&&(this.minute=minute),second!==!1&&(this.second=second),millisec!==!1&&(this.millisec=millisec),timezone!==!1&&(this.timezone=timezone),this.inst||(this.inst=$.datepicker._getInst(this.$input[0])),this._limitMinMaxDateTime(this.inst,!0)),useAmpm(o.timeFormat)&&(this.ampm=ampm),this.formattedTime=$.datepicker.formatTime(o.timeFormat,this,o),this.$timeObj&&this.$timeObj.text(pickerTimeFormat===o.timeFormat?this.formattedTime+pickerTimeSuffix:$.datepicker.formatTime(pickerTimeFormat,this,o)+pickerTimeSuffix),this.timeDefined=!0,hasChanged&&this._updateDateTime()},_onSelectHandler:function(){var onSelect=this._defaults.onSelect||this.inst.settings.onSelect,inputEl=this.$input?this.$input[0]:null;onSelect&&inputEl&&onSelect.apply(inputEl,[this.formattedDateTime,this])},_updateDateTime:function(dp_inst){dp_inst=this.inst||dp_inst;var dt=$.datepicker._daylightSavingAdjust(new Date(dp_inst.selectedYear,dp_inst.selectedMonth,dp_inst.selectedDay)),dateFmt=$.datepicker._get(dp_inst,"dateFormat"),formatCfg=$.datepicker._getFormatConfig(dp_inst),timeAvailable=null!==dt&&this.timeDefined;this.formattedDate=$.datepicker.formatDate(dateFmt,null===dt?new Date:dt,formatCfg);var formattedDateTime=this.formattedDate;if(this._defaults.timeOnly===!0?formattedDateTime=this.formattedTime:this._defaults.timeOnly!==!0&&(this._defaults.alwaysSetTime||timeAvailable)&&(formattedDateTime+=this._defaults.separator+this.formattedTime+this._defaults.timeSuffix),this.formattedDateTime=formattedDateTime,this._defaults.showTimepicker)if(this.$altInput&&this._defaults.altFieldTimeOnly===!0)this.$altInput.val(this.formattedTime),this.$input.val(this.formattedDate);else if(this.$altInput){this.$input.val(formattedDateTime);var altFormattedDateTime="",altSeparator=this._defaults.altSeparator?this._defaults.altSeparator:this._defaults.separator,altTimeSuffix=this._defaults.altTimeSuffix?this._defaults.altTimeSuffix:this._defaults.timeSuffix;altFormattedDateTime=this._defaults.altFormat?$.datepicker.formatDate(this._defaults.altFormat,null===dt?new Date:dt,formatCfg):this.formattedDate,altFormattedDateTime&&(altFormattedDateTime+=altSeparator),altFormattedDateTime+=this._defaults.altTimeFormat?$.datepicker.formatTime(this._defaults.altTimeFormat,this,this._defaults)+altTimeSuffix:this.formattedTime+altTimeSuffix,this.$altInput.val(altFormattedDateTime)}else this.$input.val(formattedDateTime);else this.$input.val(this.formattedDate);this.$input.trigger("change")},_onFocus:function(){if(!this.$input.val()&&this._defaults.defaultValue){this.$input.val(this._defaults.defaultValue);var inst=$.datepicker._getInst(this.$input.get(0)),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&tp_inst._defaults.timeOnly&&inst.input.val()!=inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.datepicker.log(err)}}},_controls:{slider:{create:function(tp_inst,obj,unit,val,min,max,step){var rtl=tp_inst._defaults.isRTL;return obj.prop("slide",null).slider({orientation:"horizontal",value:rtl?-1*val:val,min:rtl?-1*max:min,max:rtl?-1*min:max,step:step,slide:function(event,ui){tp_inst.control.value(tp_inst,$(this),unit,rtl?-1*ui.value:ui.value),tp_inst._onTimeChange()},stop:function(){tp_inst._onSelectHandler()}})},options:function(tp_inst,obj,unit,opts,val){if(tp_inst._defaults.isRTL){if("string"==typeof opts)return"min"==opts||"max"==opts?void 0!==val?obj.slider(opts,-1*val):Math.abs(obj.slider(opts)):obj.slider(opts);var min=opts.min,max=opts.max;return opts.min=opts.max=null,void 0!==min&&(opts.max=-1*min),void 0!==max&&(opts.min=-1*max),obj.slider(opts)}return"string"==typeof opts&&void 0!==val?obj.slider(opts,val):obj.slider(opts)},value:function(tp_inst,obj,unit,val){return tp_inst._defaults.isRTL?void 0!==val?obj.slider("value",-1*val):Math.abs(obj.slider("value")):void 0!==val?obj.slider("value",val):obj.slider("value")}},select:{create:function(tp_inst,obj,unit,val,min,max,step){for(var sel='<select class="ui-timepicker-select" data-unit="'+unit+'" data-min="'+min+'" data-max="'+max+'" data-step="'+step+'">',i=(-1!==tp_inst._defaults.timeFormat.indexOf("t")?"toLowerCase":"toUpperCase",min);max>=i;i+=step)sel+='<option value="'+i+'"'+(i==val?" selected":"")+">",sel+="hour"==unit&&useAmpm(tp_inst._defaults.pickerTimeFormat||tp_inst._defaults.timeFormat)?$.datepicker.formatTime("hh TT",{hour:i},tp_inst._defaults):"millisec"==unit||i>=10?i:"0"+i.toString(),sel+="</option>";return sel+="</select>",obj.children("select").remove(),$(sel).appendTo(obj).change(function(){tp_inst._onTimeChange(),tp_inst._onSelectHandler()}),obj},options:function(tp_inst,obj,unit,opts,val){var o={},$t=obj.children("select");if("string"==typeof opts){if(void 0===val)return $t.data(opts);o[opts]=val}else o=opts;return tp_inst.control.create(tp_inst,obj,$t.data("unit"),$t.val(),o.min||$t.data("min"),o.max||$t.data("max"),o.step||$t.data("step"))},value:function(tp_inst,obj,unit,val){var $t=obj.children("select");return void 0!==val?$t.val(val):$t.val()}}}}),$.fn.extend({timepicker:function(o){o=o||{};var tmp_args=Array.prototype.slice.call(arguments);return"object"==typeof o&&(tmp_args[0]=$.extend(o,{timeOnly:!0})),$(this).each(function(){$.fn.datetimepicker.apply($(this),tmp_args)})},datetimepicker:function(o){o=o||{};var tmp_args=arguments;return"string"==typeof o?"getDate"==o?$.fn.datepicker.apply($(this[0]),tmp_args):this.each(function(){var $t=$(this);$t.datepicker.apply($t,tmp_args)}):this.each(function(){var $t=$(this);$t.datepicker($.timepicker._newInst($t,o)._defaults)})}}),$.datepicker.parseDateTime=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var parseRes=parseDateTimeInternal(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings);if(parseRes.timeObj){var t=parseRes.timeObj;parseRes.date.setHours(t.hour,t.minute,t.second,t.millisec)}return parseRes.date},$.datepicker.parseTime=function(timeFormat,timeString,options){var o=extendRemove(extendRemove({},$.timepicker._defaults),options||{}),strictParse=function(f,s,o){var treg,getPatternAmpm=function(amNames,pmNames){var markers=[];return amNames&&$.merge(markers,amNames),pmNames&&$.merge(markers,pmNames),markers=$.map(markers,function(val){return val.replace(/[.*+?|()\[\]{}\\]/g,"\\$&")}),"("+markers.join("|")+")?"},getFormatPositions=function(timeFormat){var finds=timeFormat.toLowerCase().match(/(h{1,2}|m{1,2}|s{1,2}|l{1}|t{1,2}|z|'.*?')/g),orders={h:-1,m:-1,s:-1,l:-1,t:-1,z:-1};if(finds)for(var i=0;i<finds.length;i++)-1==orders[finds[i].toString().charAt(0)]&&(orders[finds[i].toString().charAt(0)]=i+1);return orders},regstr="^"+f.toString().replace(/([hH]{1,2}|mm?|ss?|[tT]{1,2}|[lz]|'.*?')/g,function(match){switch(match.charAt(0).toLowerCase()){case"h":return"(\\d?\\d)";case"m":return"(\\d?\\d)";case"s":return"(\\d?\\d)";case"l":return"(\\d?\\d?\\d)";case"z":return"(z|[-+]\\d\\d:?\\d\\d|\\S+)?";case"t":return getPatternAmpm(o.amNames,o.pmNames);default:return"("+match.replace(/\'/g,"").replace(/(\.|\$|\^|\\|\/|\(|\)|\[|\]|\?|\+|\*)/g,function(m){return"\\"+m})+")?"}}).replace(/\s/g,"\\s?")+o.timeSuffix+"$",order=getFormatPositions(f),ampm="";treg=s.match(new RegExp(regstr,"i"));var resTime={hour:0,minute:0,second:0,millisec:0};if(treg){if(-1!==order.t&&(void 0===treg[order.t]||0===treg[order.t].length?(ampm="",resTime.ampm=""):(ampm=-1!==$.inArray(treg[order.t].toUpperCase(),o.amNames)?"AM":"PM",resTime.ampm=o["AM"==ampm?"amNames":"pmNames"][0])),-1!==order.h&&(resTime.hour="AM"==ampm&&"12"==treg[order.h]?0:"PM"==ampm&&"12"!=treg[order.h]?parseInt(treg[order.h],10)+12:Number(treg[order.h])),-1!==order.m&&(resTime.minute=Number(treg[order.m])),-1!==order.s&&(resTime.second=Number(treg[order.s])),-1!==order.l&&(resTime.millisec=Number(treg[order.l])),-1!==order.z&&void 0!==treg[order.z]){var tz=treg[order.z].toUpperCase();switch(tz.length){case 1:tz=o.timezoneIso8601?"Z":"+0000";break;case 5:o.timezoneIso8601&&(tz="0000"==tz.substring(1)?"Z":tz.substring(0,3)+":"+tz.substring(3));break;case 6:o.timezoneIso8601?"00:00"==tz.substring(1)&&(tz="Z"):tz="Z"==tz||"00:00"==tz.substring(1)?"+0000":tz.replace(/:/,"")}resTime.timezone=tz}return resTime}return!1},looseParse=function(f,s,o){try{var d=new Date("2012-01-01 "+s);return{hour:d.getHours(),minutes:d.getMinutes(),seconds:d.getSeconds(),millisec:d.getMilliseconds(),timezone:$.timepicker.timeZoneOffsetString(d)}}catch(err){try{return strictParse(f,s,o)}catch(err2){$.datepicker.log("Unable to parse \ntimeString: "+s+"\ntimeFormat: "+f)}}return!1};return"function"==typeof o.parse?o.parse(timeFormat,timeString,o):"loose"===o.parse?looseParse(timeFormat,timeString,o):strictParse(timeFormat,timeString,o)},$.datepicker.formatTime=function(format,time,options){options=options||{},options=$.extend({},$.timepicker._defaults,options),time=$.extend({hour:0,minute:0,second:0,millisec:0,timezone:"+0000"},time);var tmptime=format,ampmName=options.amNames[0],hour=parseInt(time.hour,10);return hour>11&&(ampmName=options.pmNames[0]),tmptime=tmptime.replace(/(?:HH?|hh?|mm?|ss?|[tT]{1,2}|[lz]|('.*?'|".*?"))/g,function(match){switch(match){case"HH":return("0"+hour).slice(-2);case"H":return hour;case"hh":return("0"+convert24to12(hour)).slice(-2);case"h":return convert24to12(hour);case"mm":return("0"+time.minute).slice(-2);case"m":return time.minute;case"ss":return("0"+time.second).slice(-2);case"s":return time.second;case"l":return("00"+time.millisec).slice(-3);case"z":return null===time.timezone?options.defaultTimezone:time.timezone;case"T":return ampmName.charAt(0).toUpperCase();case"TT":return ampmName.toUpperCase();case"t":return ampmName.charAt(0).toLowerCase();case"tt":return ampmName.toLowerCase();default:return match.replace(/\'/g,"")||"'"}}),tmptime=$.trim(tmptime)},$.datepicker._base_selectDate=$.datepicker._selectDate,$.datepicker._selectDate=function(id,dateStr){var inst=this._getInst($(id)[0]),tp_inst=this._get(inst,"timepicker");tp_inst?(tp_inst._limitMinMaxDateTime(inst,!0),inst.inline=inst.stay_open=!0,this._base_selectDate(id,dateStr),inst.inline=inst.stay_open=!1,this._notifyChange(inst),this._updateDatepicker(inst)):this._base_selectDate(id,dateStr)},$.datepicker._base_updateDatepicker=$.datepicker._updateDatepicker,$.datepicker._updateDatepicker=function(inst){var input=inst.input[0];if(!($.datepicker._curInst&&$.datepicker._curInst!=inst&&$.datepicker._datepickerShowing&&$.datepicker._lastInput!=input||"boolean"==typeof inst.stay_open&&inst.stay_open!==!1)){this._base_updateDatepicker(inst);var tp_inst=this._get(inst,"timepicker");if(tp_inst&&(tp_inst._addTimePicker(inst),tp_inst._defaults.useLocalTimezone)){var date=new Date(inst.selectedYear,inst.selectedMonth,inst.selectedDay,12);selectLocalTimeZone(tp_inst,date),tp_inst._onTimeChange()}}},$.datepicker._base_doKeyPress=$.datepicker._doKeyPress,$.datepicker._doKeyPress=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&$.datepicker._get(inst,"constrainInput")){var ampm=useAmpm(tp_inst._defaults.timeFormat),dateChars=$.datepicker._possibleChars($.datepicker._get(inst,"dateFormat")),datetimeChars=tp_inst._defaults.timeFormat.toString().replace(/[hms]/g,"").replace(/TT/g,ampm?"APM":"").replace(/Tt/g,ampm?"AaPpMm":"").replace(/tT/g,ampm?"AaPpMm":"").replace(/T/g,ampm?"AP":"").replace(/tt/g,ampm?"apm":"").replace(/t/g,ampm?"ap":"")+" "+tp_inst._defaults.separator+tp_inst._defaults.timeSuffix+(tp_inst._defaults.showTimezone?tp_inst._defaults.timezoneList.join(""):"")+tp_inst._defaults.amNames.join("")+tp_inst._defaults.pmNames.join("")+dateChars,chr=String.fromCharCode(void 0===event.charCode?event.keyCode:event.charCode);return event.ctrlKey||" ">chr||!dateChars||datetimeChars.indexOf(chr)>-1}return $.datepicker._base_doKeyPress(event)},$.datepicker._base_updateAlternate=$.datepicker._updateAlternate,$.datepicker._updateAlternate=function(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var altField=tp_inst._defaults.altField;if(altField){var date=(tp_inst._defaults.altFormat||tp_inst._defaults.dateFormat,this._getDate(inst)),formatCfg=$.datepicker._getFormatConfig(inst),altFormattedDateTime="",altSeparator=tp_inst._defaults.altSeparator?tp_inst._defaults.altSeparator:tp_inst._defaults.separator,altTimeSuffix=tp_inst._defaults.altTimeSuffix?tp_inst._defaults.altTimeSuffix:tp_inst._defaults.timeSuffix,altTimeFormat=null!==tp_inst._defaults.altTimeFormat?tp_inst._defaults.altTimeFormat:tp_inst._defaults.timeFormat;altFormattedDateTime+=$.datepicker.formatTime(altTimeFormat,tp_inst,tp_inst._defaults)+altTimeSuffix,tp_inst._defaults.timeOnly||tp_inst._defaults.altFieldTimeOnly||(altFormattedDateTime=tp_inst._defaults.altFormat?$.datepicker.formatDate(tp_inst._defaults.altFormat,null===date?new Date:date,formatCfg)+altSeparator+altFormattedDateTime:tp_inst.formattedDate+altSeparator+altFormattedDateTime),$(altField).val(altFormattedDateTime)}}else $.datepicker._base_updateAlternate(inst)},$.datepicker._base_doKeyUp=$.datepicker._doKeyUp,$.datepicker._doKeyUp=function(event){var inst=$.datepicker._getInst(event.target),tp_inst=$.datepicker._get(inst,"timepicker");if(tp_inst&&tp_inst._defaults.timeOnly&&inst.input.val()!=inst.lastVal)try{$.datepicker._updateDatepicker(inst)}catch(err){$.datepicker.log(err)}return $.datepicker._base_doKeyUp(event)},$.datepicker._base_gotoToday=$.datepicker._gotoToday,$.datepicker._gotoToday=function(id){var inst=this._getInst($(id)[0]),$dp=inst.dpDiv;this._base_gotoToday(id);var tp_inst=this._get(inst,"timepicker");selectLocalTimeZone(tp_inst);var now=new Date;this._setTime(inst,now),$(".ui-datepicker-today",$dp).click()},$.datepicker._disableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate"),tp_inst&&(tp_inst._defaults.showTimepicker=!1,tp_inst._updateDateTime(inst))}},$.datepicker._enableTimepickerDatepicker=function(target){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");$(target).datepicker("getDate"),tp_inst&&(tp_inst._defaults.showTimepicker=!0,tp_inst._addTimePicker(inst),tp_inst._updateDateTime(inst))}},$.datepicker._setTime=function(inst,date){var tp_inst=this._get(inst,"timepicker");if(tp_inst){var defaults=tp_inst._defaults;tp_inst.hour=date?date.getHours():defaults.hour,tp_inst.minute=date?date.getMinutes():defaults.minute,tp_inst.second=date?date.getSeconds():defaults.second,tp_inst.millisec=date?date.getMilliseconds():defaults.millisec,tp_inst._limitMinMaxDateTime(inst,!0),tp_inst._onTimeChange(),tp_inst._updateDateTime(inst)}},$.datepicker._setTimeDatepicker=function(target,date,withDate){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){this._setDateFromField(inst);var tp_date;date&&("string"==typeof date?(tp_inst._parseTime(date,withDate),tp_date=new Date,tp_date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec)):tp_date=new Date(date.getTime()),"Invalid Date"==tp_date.toString()&&(tp_date=void 0),this._setTime(inst,tp_date))}}},$.datepicker._base_setDateDatepicker=$.datepicker._setDateDatepicker,$.datepicker._setDateDatepicker=function(target,date){var inst=this._getInst(target);if(inst){var tp_date=date instanceof Date?new Date(date.getTime()):date;this._updateDatepicker(inst),this._base_setDateDatepicker.apply(this,arguments),this._setTimeDatepicker(target,tp_date,!0)}},$.datepicker._base_getDateDatepicker=$.datepicker._getDateDatepicker,$.datepicker._getDateDatepicker=function(target,noDefault){var inst=this._getInst(target);if(inst){var tp_inst=this._get(inst,"timepicker");if(tp_inst){void 0===inst.lastVal&&this._setDateFromField(inst,noDefault);var date=this._getDate(inst);return date&&tp_inst._parseTime($(target).val(),tp_inst.timeOnly)&&date.setHours(tp_inst.hour,tp_inst.minute,tp_inst.second,tp_inst.millisec),date}return this._base_getDateDatepicker(target,noDefault)}},$.datepicker._base_parseDate=$.datepicker.parseDate,$.datepicker.parseDate=function(format,value,settings){var date;try{date=this._base_parseDate(format,value,settings)}catch(err){date=this._base_parseDate(format,value.substring(0,value.length-(err.length-err.indexOf(":")-2)),settings),$.datepicker.log("Error parsing the date string: "+err+"\ndate string = "+value+"\ndate format = "+format)}return date},$.datepicker._base_formatDate=$.datepicker._formatDate,$.datepicker._formatDate=function(inst){var tp_inst=this._get(inst,"timepicker");return tp_inst?(tp_inst._updateDateTime(inst),tp_inst.$input.val()):this._base_formatDate(inst)},$.datepicker._base_optionDatepicker=$.datepicker._optionDatepicker,$.datepicker._optionDatepicker=function(target,name,value){var name_clone,inst=this._getInst(target);if(!inst)return null;var tp_inst=this._get(inst,"timepicker");if(tp_inst){var prop,min=null,max=null,onselect=null,overrides=tp_inst._defaults.evnts,fns={};if("string"==typeof name){if("minDate"===name||"minDateTime"===name)min=value;else if("maxDate"===name||"maxDateTime"===name)max=value;else if("onSelect"===name)onselect=value;else if(overrides.hasOwnProperty(name)){if("undefined"==typeof value)return overrides[name];fns[name]=value,name_clone={}}}else if("object"==typeof name){name.minDate?min=name.minDate:name.minDateTime?min=name.minDateTime:name.maxDate?max=name.maxDate:name.maxDateTime&&(max=name.maxDateTime);for(prop in overrides)overrides.hasOwnProperty(prop)&&name[prop]&&(fns[prop]=name[prop])}for(prop in fns)fns.hasOwnProperty(prop)&&(overrides[prop]=fns[prop],name_clone||(name_clone=$.extend({},name)),delete name_clone[prop]);if(name_clone&&isEmptyObject(name_clone))return;min?(min=0===min?new Date:new Date(min),tp_inst._defaults.minDate=min,tp_inst._defaults.minDateTime=min):max?(max=0===max?new Date:new Date(max),tp_inst._defaults.maxDate=max,tp_inst._defaults.maxDateTime=max):onselect&&(tp_inst._defaults.onSelect=onselect)}return void 0===value?this._base_optionDatepicker.call($.datepicker,target,name):this._base_optionDatepicker.call($.datepicker,target,name_clone||name,value)};var isEmptyObject=function(obj){var prop;for(prop in obj)if(obj.hasOwnProperty(obj))return!1;return!0},extendRemove=function(target,props){$.extend(target,props);for(var name in props)(null===props[name]||void 0===props[name])&&(target[name]=props[name]);return target},useAmpm=function(timeFormat){return-1!==timeFormat.indexOf("t")&&-1!==timeFormat.indexOf("h")},convert24to12=function(hour){return hour>12&&(hour-=12),0==hour&&(hour=12),String(hour)},splitDateTime=function(dateFormat,dateTimeString,dateSettings,timeSettings){try{var separator=timeSettings&&timeSettings.separator?timeSettings.separator:$.timepicker._defaults.separator,format=timeSettings&&timeSettings.timeFormat?timeSettings.timeFormat:$.timepicker._defaults.timeFormat,timeParts=format.split(separator),timePartsLen=timeParts.length,allParts=dateTimeString.split(separator),allPartsLen=allParts.length;if(allPartsLen>1)return[allParts.splice(0,allPartsLen-timePartsLen).join(separator),allParts.splice(0,timePartsLen).join(separator)]}catch(err){if($.datepicker.log("Could not split the date from the time. Please check the following datetimepicker options\nthrown error: "+err+"\ndateTimeString"+dateTimeString+"\ndateFormat = "+dateFormat+"\nseparator = "+timeSettings.separator+"\ntimeFormat = "+timeSettings.timeFormat),err.indexOf(":")>=0){{var dateStringLength=dateTimeString.length-(err.length-err.indexOf(":")-2);dateTimeString.substring(dateStringLength)}return[$.trim(dateTimeString.substring(0,dateStringLength)),$.trim(dateTimeString.substring(dateStringLength))]}throw err}return[dateTimeString,""]},parseDateTimeInternal=function(dateFormat,timeFormat,dateTimeString,dateSettings,timeSettings){var date,splitRes=splitDateTime(dateFormat,dateTimeString,dateSettings,timeSettings);if(date=$.datepicker._base_parseDate(dateFormat,splitRes[0],dateSettings),""!==splitRes[1]){var timeString=splitRes[1],parsedTime=$.datepicker.parseTime(timeFormat,timeString,timeSettings);if(null===parsedTime)throw"Wrong time format";return{date:date,timeObj:parsedTime}}return{date:date}},selectLocalTimeZone=function(tp_inst,date){if(tp_inst&&tp_inst.timezone_select){tp_inst._defaults.useLocalTimezone=!0;var now="undefined"!=typeof date?date:new Date,tzoffset=$.timepicker.timeZoneOffsetString(now);tp_inst._defaults.timezoneIso8601&&(tzoffset=tzoffset.substring(0,3)+":"+tzoffset.substring(3)),tp_inst.timezone_select.val(tzoffset)}};$.timepicker=new Timepicker,$.timepicker.timeZoneOffsetString=function(date){var off=-1*date.getTimezoneOffset(),minutes=off%60,hours=(off-minutes)/60;return(off>=0?"+":"-")+("0"+(101*hours).toString()).substr(-2)+("0"+(101*minutes).toString()).substr(-2)},$.timepicker.timeRange=function(startTime,endTime,options){return $.timepicker.handleRange("timepicker",startTime,endTime,options)},$.timepicker.dateTimeRange=function(startTime,endTime,options){$.timepicker.dateRange(startTime,endTime,options,"datetimepicker")},$.timepicker.dateRange=function(startTime,endTime,options,method){method=method||"datepicker",$.timepicker.handleRange(method,startTime,endTime,options)},$.timepicker.handleRange=function(method,startTime,endTime,options){function checkDates(changed,other,dateText){other.val()&&new Date(startTime.val())>new Date(endTime.val())&&other.val(dateText)}function selected(changed,other,option){if($(changed).val()){var date=$(changed)[method].call($(changed),"getDate");date.getTime&&$(other)[method].call($(other),"option",option,date)}}return $.fn[method].call(startTime,$.extend({onClose:function(dateText){checkDates(this,endTime,dateText)},onSelect:function(){selected(this,endTime,"minDate")}},options,options.start)),$.fn[method].call(endTime,$.extend({onClose:function(dateText){checkDates(this,startTime,dateText)},onSelect:function(){selected(this,startTime,"maxDate")}},options,options.end)),"timepicker"!=method&&options.reformat&&$([startTime,endTime]).each(function(){var format=$(this)[method].call($(this),"option","dateFormat"),date=new Date($(this).val());$(this).val()&&date&&$(this).val($.datepicker.formatDate(format,date))}),checkDates(startTime,endTime,startTime.val()),selected(startTime,endTime,"minDate"),selected(endTime,startTime,"maxDate"),$([startTime.get(0),endTime.get(0)])},$.timepicker.version="1.1.1"}}(jQuery),function($){$.address=function(){var UNDEFINED,_frame,_trigger=function(name){var e=$.extend($.Event(name),function(){for(var parameters={},parameterNames=$.address.parameterNames(),i=0,l=parameterNames.length;l>i;i++)parameters[parameterNames[i]]=$.address.parameter(parameterNames[i]);return{value:$.address.value(),path:$.address.path(),pathNames:$.address.pathNames(),parameterNames:parameterNames,parameters:parameters,queryString:$.address.queryString()}}.call($.address));return $($.address).trigger(e),e},_array=function(obj){return Array.prototype.slice.call(obj)},_bind=function(){return $().bind.apply($($.address),Array.prototype.slice.call(arguments)),$.address},_unbind=function(){return $().unbind.apply($($.address),Array.prototype.slice.call(arguments)),$.address},_supportsState=function(){return _h.pushState&&_opts.state!==UNDEFINED},_hrefState=function(){return("/"+_l.pathname.replace(new RegExp(_opts.state),"")+_l.search+(_hrefHash()?"#"+_hrefHash():"")).replace(_re,"/")},_hrefHash=function(){var index=_l.href.indexOf("#");return-1!=index?_l.href.substr(index+1):""},_href=function(){return _supportsState()?_hrefState():_hrefHash()},_window=function(){try{return top.document!==UNDEFINED&&top.document.title!==UNDEFINED?top:window}catch(e){return window}},_js=function(){return"javascript"},_strict=function(value){return value=value.toString(),(_opts.strict&&"/"!=value.substr(0,1)?"/":"")+value},_cssint=function(el,value){return parseInt(el.css(value),10)},_listen=function(){if(!_silent){var hash=_href(),diff=decodeURI(_value)!=decodeURI(hash);diff&&(_msie&&7>_version?_l.reload():(_msie&&!_hashchange&&_opts.history&&_st(_html,50),_value=hash,_update(FALSE)))}},_update=function(internal){return _st(_track,10),_trigger(CHANGE).isDefaultPrevented()||_trigger(internal?INTERNAL_CHANGE:EXTERNAL_CHANGE).isDefaultPrevented()},_track=function(){if("null"!==_opts.tracker&&_opts.tracker!==NULL){var fn=$.isFunction(_opts.tracker)?_opts.tracker:_t[_opts.tracker],value=(_l.pathname+_l.search+($.address&&!_supportsState()?$.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");$.isFunction(fn)?fn(value):$.isFunction(_t.urchinTracker)?_t.urchinTracker(value):_t.pageTracker!==UNDEFINED&&$.isFunction(_t.pageTracker._trackPageview)?_t.pageTracker._trackPageview(value):_t._gaq!==UNDEFINED&&$.isFunction(_t._gaq.push)&&_t._gaq.push(["_trackPageview",decodeURI(value)])}},_html=function(){var src=_js()+":"+FALSE+";document.open();document.writeln('<html><head><title>"+_d.title.replace(/\'/g,"\\'")+"</title><script>var "+ID+' = "'+encodeURIComponent(_href()).replace(/\'/g,"\\'")+(_d.domain!=_l.hostname?'";document.domain="'+_d.domain:"")+"\";</script></head></html>');document.close();";7>_version?_frame.src=src:_frame.contentWindow.location.replace(src)},_options=function(){if(_url&&-1!=_qi){var i,param,params=_url.substr(_qi+1).split("&");for(i=0;i<params.length;i++)param=params[i].split("="),/^(autoUpdate|history|strict|wrap)$/.test(param[0])&&(_opts[param[0]]=isNaN(param[1])?/^(true|yes)$/i.test(param[1]):0!==parseInt(param[1],10)),/^(state|tracker)$/.test(param[0])&&(_opts[param[0]]=param[1]);_url=NULL}_value=_href()},_load=function(){if(!_loaded){if(_loaded=TRUE,_options(),$('a[rel*="address:"]').address(),_opts.wrap){{var body=$("body");
$("body > *").wrapAll('<div style="padding:'+(_cssint(body,"marginTop")+_cssint(body,"paddingTop"))+"px "+(_cssint(body,"marginRight")+_cssint(body,"paddingRight"))+"px "+(_cssint(body,"marginBottom")+_cssint(body,"paddingBottom"))+"px "+(_cssint(body,"marginLeft")+_cssint(body,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+ID+'" style="height:100%;overflow:auto;position:relative;'+(_webkit&&!window.statusbar.visible?"resize:both;":"")+'" />')}$("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"}),_webkit&&$('<style type="text/css" />').appendTo("head").text("#"+ID+"::-webkit-resizer { background-color: #fff; }")}if(_msie&&!_hashchange){var frameset=_d.getElementsByTagName("frameset")[0];_frame=_d.createElement((frameset?"":"i")+"frame"),_frame.src=_js()+":"+FALSE,frameset?(frameset.insertAdjacentElement("beforeEnd",_frame),frameset[frameset.cols?"cols":"rows"]+=",0",_frame.noResize=TRUE,_frame.frameBorder=_frame.frameSpacing=0):(_frame.style.display="none",_frame.style.width=_frame.style.height=0,_frame.tabIndex=-1,_d.body.insertAdjacentElement("afterBegin",_frame)),_st(function(){$(_frame).bind("load",function(){var win=_frame.contentWindow;_value=win[ID]!==UNDEFINED?win[ID]:"",_value!=_href()&&(_update(FALSE),_l.hash=_value)}),_frame.contentWindow[ID]===UNDEFINED&&_html()},50)}_st(function(){_trigger("init"),_update(FALSE)},1),_supportsState()||(_msie&&_version>7||!_msie&&_hashchange?_t.addEventListener?_t.addEventListener(HASH_CHANGE,_listen,FALSE):_t.attachEvent&&_t.attachEvent("on"+HASH_CHANGE,_listen):_si(_listen,50)),"state"in window.history&&$(window).trigger("popstate")}},_popstate=function(){decodeURI(_value)!=decodeURI(_href())&&(_value=_href(),_update(FALSE))},_unload=function(){_t.removeEventListener?_t.removeEventListener(HASH_CHANGE,_listen,FALSE):_t.detachEvent&&_t.detachEvent("on"+HASH_CHANGE,_listen)},_uaMatch=function(ua){ua=ua.toLowerCase();var match=/(chrome)[ \/]([\w.]+)/.exec(ua)||/(webkit)[ \/]([\w.]+)/.exec(ua)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(ua)||/(msie) ([\w.]+)/.exec(ua)||ua.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(ua)||[];return{browser:match[1]||"",version:match[2]||"0"}},_detectBrowser=function(){var browser={},matched=_uaMatch(navigator.userAgent);return matched.browser&&(browser[matched.browser]=!0,browser.version=matched.version),browser.chrome?browser.webkit=!0:browser.webkit&&(browser.safari=!0),browser},NULL=null,ID="jQueryAddress",STRING="string",HASH_CHANGE="hashchange",INIT="init",CHANGE="change",INTERNAL_CHANGE="internalChange",EXTERNAL_CHANGE="externalChange",TRUE=!0,FALSE=!1,_opts={autoUpdate:TRUE,history:TRUE,strict:TRUE,wrap:FALSE},_browser=_detectBrowser(),_version=parseFloat(_browser.version),_webkit=_browser.webkit||_browser.safari,_msie=!$.support.opacity,_t=_window(),_d=_t.document,_h=_t.history,_l=_t.location,_si=setInterval,_st=setTimeout,_re=/\/{2,9}/g,_agent=navigator.userAgent,_hashchange="on"+HASH_CHANGE in _t,_url=$("script:last").attr("src"),_qi=_url?_url.indexOf("?"):-1,_title=_d.title,_silent=FALSE,_loaded=FALSE,_juststart=TRUE,_updating=FALSE,_value=_href();if(_msie){_version=parseFloat(_agent.substr(_agent.indexOf("MSIE")+4)),_d.documentMode&&_d.documentMode!=_version&&(_version=8!=_d.documentMode?7:8);var pc=_d.onpropertychange;_d.onpropertychange=function(){pc&&pc.call(_d),_d.title!=_title&&-1!=_d.title.indexOf("#"+_href())&&(_d.title=_title)}}if(_h.navigationMode&&(_h.navigationMode="compatible"),"complete"==document.readyState)var interval=setInterval(function(){$.address&&(_load(),clearInterval(interval))},50);else _options(),$(_load);return $(window).bind("popstate",_popstate).bind("unload",_unload),{bind:function(){return _bind.apply(this,_array(arguments))},unbind:function(){return _unbind.apply(this,_array(arguments))},init:function(){return _bind.apply(this,[INIT].concat(_array(arguments)))},change:function(){return _bind.apply(this,[CHANGE].concat(_array(arguments)))},internalChange:function(){return _bind.apply(this,[INTERNAL_CHANGE].concat(_array(arguments)))},externalChange:function(){return _bind.apply(this,[EXTERNAL_CHANGE].concat(_array(arguments)))},baseURL:function(){var url=_l.href;return-1!=url.indexOf("#")&&(url=url.substr(0,url.indexOf("#"))),/\/$/.test(url)&&(url=url.substr(0,url.length-1)),url},autoUpdate:function(value){return value!==UNDEFINED?(_opts.autoUpdate=value,this):_opts.autoUpdate},history:function(value){return value!==UNDEFINED?(_opts.history=value,this):_opts.history},state:function(value){if(value!==UNDEFINED){_opts.state=value;var hrefState=_hrefState();return _opts.state!==UNDEFINED&&(_h.pushState?"/#/"==hrefState.substr(0,3)&&_l.replace(_opts.state.replace(/^\/$/,"")+hrefState.substr(2)):"/"!=hrefState&&hrefState.replace(/^\/#/,"")!=_hrefHash()&&_st(function(){_l.replace(_opts.state.replace(/^\/$/,"")+"/#"+hrefState)},1)),this}return _opts.state},strict:function(value){return value!==UNDEFINED?(_opts.strict=value,this):_opts.strict},tracker:function(value){return value!==UNDEFINED?(_opts.tracker=value,this):_opts.tracker},wrap:function(value){return value!==UNDEFINED?(_opts.wrap=value,this):_opts.wrap},update:function(){return _updating=TRUE,this.value(_value),_updating=FALSE,this},title:function(value){return value!==UNDEFINED?(_st(function(){_title=_d.title=value,_juststart&&_frame&&_frame.contentWindow&&_frame.contentWindow.document&&(_frame.contentWindow.document.title=value,_juststart=FALSE)},50),this):_d.title},value:function(value){if(value!==UNDEFINED){if(value=_strict(value),"/"==value&&(value=""),_value==value&&!_updating)return;if(_value=value,_opts.autoUpdate||_updating){if(_update(TRUE))return this;_supportsState()?_h[_opts.history?"pushState":"replaceState"]({},"",_opts.state.replace(/\/$/,"")+(""===_value?"/":_value)):(_silent=TRUE,_webkit?_opts.history?_l.hash="#"+_value:_l.replace("#"+_value):_value!=_href()&&(_opts.history?_l.hash="#"+_value:_l.replace("#"+_value)),_msie&&!_hashchange&&_opts.history&&_st(_html,50),_webkit?_st(function(){_silent=FALSE},1):_silent=FALSE)}return this}return _strict(_value)},path:function(value){if(value!==UNDEFINED){var qs=this.queryString(),hash=this.hash();return this.value(value+(qs?"?"+qs:"")+(hash?"#"+hash:"")),this}return _strict(_value).split("#")[0].split("?")[0]},pathNames:function(){var path=this.path(),names=path.replace(_re,"/").split("/");return("/"==path.substr(0,1)||0===path.length)&&names.splice(0,1),"/"==path.substr(path.length-1,1)&&names.splice(names.length-1,1),names},queryString:function(value){if(value!==UNDEFINED){var hash=this.hash();return this.value(this.path()+(value?"?"+value:"")+(hash?"#"+hash:"")),this}var arr=_value.split("?");return arr.slice(1,arr.length).join("?").split("#")[0]},parameter:function(name,value,append){var i,params;if(value!==UNDEFINED){var names=this.parameterNames();for(params=[],value=value===UNDEFINED||value===NULL?"":value.toString(),i=0;i<names.length;i++){var n=names[i],v=this.parameter(n);typeof v==STRING&&(v=[v]),n==name&&(v=value===NULL||""===value?[]:append?v.concat([value]):[value]);for(var j=0;j<v.length;j++)params.push(n+"="+v[j])}return-1==$.inArray(name,names)&&value!==NULL&&""!==value&&params.push(name+"="+value),this.queryString(params.join("&")),this}if(value=this.queryString()){var r=[];for(params=value.split("&"),i=0;i<params.length;i++){var p=params[i].split("=");p[0]==name&&r.push(p.slice(1).join("="))}if(0!==r.length)return 1!=r.length?r:r[0]}},parameterNames:function(){var qs=this.queryString(),names=[];if(qs&&-1!=qs.indexOf("="))for(var params=qs.split("&"),i=0;i<params.length;i++){var name=params[i].split("=")[0];-1==$.inArray(name,names)&&names.push(name)}return names},hash:function(value){if(value!==UNDEFINED)return this.value(_value.split("#")[0]+(value?"#"+value:"")),this;var arr=_value.split("#");return arr.slice(1,arr.length).join("#")}}}(),$.fn.address=function(fn){return $(this).each(function(){$(this).data("address")||$(this).on("click",function(e){if(e.shiftKey||e.ctrlKey||e.metaKey||2==e.which)return!0;var target=e.currentTarget;if($(target).is("a")){e.preventDefault();var value=fn?fn.call(target):/address:/.test($(target).attr("rel"))?$(target).attr("rel").split("address:")[1].split(" ")[0]:void 0===$.address.state()||/^\/?$/.test($.address.state())?$(target).attr("href").replace(/^(#\!?|\.)/,""):$(target).attr("href").replace(new RegExp("^(.*"+$.address.state()+"|\\.)"),"");$.address.value(value)}}).on("submit",function(e){var target=e.currentTarget;if($(target).is("form")){e.preventDefault();var action=$(target).attr("action"),value=fn?fn.call(target):(-1!=action.indexOf("?")?action.replace(/&$/,""):action+"?")+$(target).serialize();$.address.value(value)}}).data("address",!0)}),this}}(jQuery),!function(t,e,i){var n=t.L,o={};o.version="0.7.3","object"==typeof module&&"object"==typeof module.exports?module.exports=o:"function"==typeof define&&define.amd&&define(o),o.noConflict=function(){return t.L=n,this},t.L=o,o.Util={extend:function(t){var e,i,n,o,s=Array.prototype.slice.call(arguments,1);for(i=0,n=s.length;n>i;i++){o=s[i]||{};for(e in o)o.hasOwnProperty(e)&&(t[e]=o[e])}return t},bind:function(t,e){var i=arguments.length>2?Array.prototype.slice.call(arguments,2):null;return function(){return t.apply(e,i||arguments)}},stamp:function(){var t=0,e="_leaflet_id";return function(i){return i[e]=i[e]||++t,i[e]}}(),invokeEach:function(t,e,i){var n,o;if("object"==typeof t){o=Array.prototype.slice.call(arguments,3);for(n in t)e.apply(i,[n,t[n]].concat(o));return!0}return!1},limitExecByInterval:function(t,e,i){var n,o;return function s(){var a=arguments;return n?void(o=!0):(n=!0,setTimeout(function(){n=!1,o&&(s.apply(i,a),o=!1)},e),void t.apply(i,a))}},falseFn:function(){return!1},formatNum:function(t,e){var i=Math.pow(10,e||5);return Math.round(t*i)/i},trim:function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")},splitWords:function(t){return o.Util.trim(t).split(/\s+/)},setOptions:function(t,e){return t.options=o.extend({},t.options,e),t.options},getParamString:function(t,e,i){var n=[];for(var o in t)n.push(encodeURIComponent(i?o.toUpperCase():o)+"="+encodeURIComponent(t[o]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")},template:function(t,e){return t.replace(/\{ *([\w_]+) *\}/g,function(t,n){var o=e[n];if(o===i)throw new Error("No value provided for variable "+t);return"function"==typeof o&&(o=o(e)),o})},isArray:Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},emptyImageUrl:"data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs="},function(){function e(e){var i,n,o=["webkit","moz","o","ms"];for(i=0;i<o.length&&!n;i++)n=t[o[i]+e];return n}function i(e){var i=+new Date,o=Math.max(0,16-(i-n));return n=i+o,t.setTimeout(e,o)}var n=0,s=t.requestAnimationFrame||e("RequestAnimationFrame")||i,a=t.cancelAnimationFrame||e("CancelAnimationFrame")||e("CancelRequestAnimationFrame")||function(e){t.clearTimeout(e)};o.Util.requestAnimFrame=function(e,n,a,r){return e=o.bind(e,n),a&&s===i?void e():s.call(t,e,r)},o.Util.cancelAnimFrame=function(e){e&&a.call(t,e)}}(),o.extend=o.Util.extend,o.bind=o.Util.bind,o.stamp=o.Util.stamp,o.setOptions=o.Util.setOptions,o.Class=function(){},o.Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this._initHooks&&this.callInitHooks()},i=function(){};i.prototype=this.prototype;var n=new i;n.constructor=e,e.prototype=n;for(var s in this)this.hasOwnProperty(s)&&"prototype"!==s&&(e[s]=this[s]);t.statics&&(o.extend(e,t.statics),delete t.statics),t.includes&&(o.Util.extend.apply(null,[n].concat(t.includes)),delete t.includes),t.options&&n.options&&(t.options=o.extend({},n.options,t.options)),o.extend(n,t),n._initHooks=[];var a=this;return e.__super__=a.prototype,n.callInitHooks=function(){if(!this._initHooksCalled){a.prototype.callInitHooks&&a.prototype.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=n._initHooks.length;e>t;t++)n._initHooks[t].call(this)}},e},o.Class.include=function(t){o.extend(this.prototype,t)},o.Class.mergeOptions=function(t){o.extend(this.prototype.options,t)},o.Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i)};var s="_leaflet_events";o.Mixin={},o.Mixin.Events={addEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addEventListener,this,e,i))return this;var n,a,r,h,l,u,c,d=this[s]=this[s]||{},p=i&&i!==this&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,a=t.length;a>n;n++)r={action:e,context:i||this},h=t[n],p?(l=h+"_idx",u=l+"_len",c=d[l]=d[l]||{},c[p]||(c[p]=[],d[u]=(d[u]||0)+1),c[p].push(r)):(d[h]=d[h]||[],d[h].push(r));return this},hasEventListeners:function(t){var e=this[s];return!!e&&(t in e&&e[t].length>0||t+"_idx"in e&&e[t+"_idx_len"]>0)},removeEventListener:function(t,e,i){if(!this[s])return this;if(!t)return this.clearAllEventListeners();if(o.Util.invokeEach(t,this.removeEventListener,this,e,i))return this;var n,a,r,h,l,u,c,d,p,_=this[s],m=i&&i!==this&&o.stamp(i);for(t=o.Util.splitWords(t),n=0,a=t.length;a>n;n++)if(r=t[n],u=r+"_idx",c=u+"_len",d=_[u],e){if(h=m&&d?d[m]:_[r]){for(l=h.length-1;l>=0;l--)h[l].action!==e||i&&h[l].context!==i||(p=h.splice(l,1),p[0].action=o.Util.falseFn);i&&d&&0===h.length&&(delete d[m],_[c]--)}}else delete _[r],delete _[u],delete _[c];return this},clearAllEventListeners:function(){return delete this[s],this},fireEvent:function(t,e){if(!this.hasEventListeners(t))return this;var i,n,a,r,h,l=o.Util.extend({},e,{type:t,target:this}),u=this[s];if(u[t])for(i=u[t].slice(),n=0,a=i.length;a>n;n++)i[n].action.call(i[n].context,l);r=u[t+"_idx"];for(h in r)if(i=r[h].slice())for(n=0,a=i.length;a>n;n++)i[n].action.call(i[n].context,l);return this},addOneTimeEventListener:function(t,e,i){if(o.Util.invokeEach(t,this.addOneTimeEventListener,this,e,i))return this;var n=o.bind(function(){this.removeEventListener(t,e,i).removeEventListener(t,n,i)},this);return this.addEventListener(t,e,i).addEventListener(t,n,i)}},o.Mixin.Events.on=o.Mixin.Events.addEventListener,o.Mixin.Events.off=o.Mixin.Events.removeEventListener,o.Mixin.Events.once=o.Mixin.Events.addOneTimeEventListener,o.Mixin.Events.fire=o.Mixin.Events.fireEvent,function(){var n="ActiveXObject"in t,s=n&&!e.addEventListener,a=navigator.userAgent.toLowerCase(),r=-1!==a.indexOf("webkit"),h=-1!==a.indexOf("chrome"),l=-1!==a.indexOf("phantom"),u=-1!==a.indexOf("android"),c=-1!==a.search("android [23]"),d=-1!==a.indexOf("gecko"),p=typeof orientation!=i+"",_=t.navigator&&t.navigator.msPointerEnabled&&t.navigator.msMaxTouchPoints&&!t.PointerEvent,m=t.PointerEvent&&t.navigator.pointerEnabled&&t.navigator.maxTouchPoints||_,f="devicePixelRatio"in t&&t.devicePixelRatio>1||"matchMedia"in t&&t.matchMedia("(min-resolution:144dpi)")&&t.matchMedia("(min-resolution:144dpi)").matches,g=e.documentElement,v=n&&"transition"in g.style,y="WebKitCSSMatrix"in t&&"m11"in new t.WebKitCSSMatrix&&!c,P="MozPerspective"in g.style,L="OTransition"in g.style,x=!t.L_DISABLE_3D&&(v||y||P||L)&&!l,w=!t.L_NO_TOUCH&&!l&&function(){var t="ontouchstart";if(m||t in g)return!0;var i=e.createElement("div"),n=!1;return i.setAttribute?(i.setAttribute(t,"return;"),"function"==typeof i[t]&&(n=!0),i.removeAttribute(t),i=null,n):!1}();o.Browser={ie:n,ielt9:s,webkit:r,gecko:d&&!r&&!t.opera&&!n,android:u,android23:c,chrome:h,ie3d:v,webkit3d:y,gecko3d:P,opera3d:L,any3d:x,mobile:p,mobileWebkit:p&&r,mobileWebkit3d:p&&y,mobileOpera:p&&t.opera,touch:w,msPointer:_,pointer:m,retina:f}}(),o.Point=function(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e},o.Point.prototype={clone:function(){return new o.Point(this.x,this.y)},add:function(t){return this.clone()._add(o.point(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(o.point(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},distanceTo:function(t){t=o.point(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=o.point(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=o.point(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+o.Util.formatNum(this.x)+", "+o.Util.formatNum(this.y)+")"}},o.point=function(t,e,n){return t instanceof o.Point?t:o.Util.isArray(t)?new o.Point(t[0],t[1]):t===i||null===t?t:new o.Point(t,e,n)},o.Bounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},o.Bounds.prototype={extend:function(t){return t=o.point(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new o.Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new o.Point(this.min.x,this.max.y)},getTopRight:function(){return new o.Point(this.max.x,this.min.y)},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof o.Point?o.point(t):o.bounds(t),t instanceof o.Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=o.bounds(t);var e=this.min,i=this.max,n=t.min,s=t.max,a=s.x>=e.x&&n.x<=i.x,r=s.y>=e.y&&n.y<=i.y;return a&&r},isValid:function(){return!(!this.min||!this.max)}},o.bounds=function(t,e){return!t||t instanceof o.Bounds?t:new o.Bounds(t,e)},o.Transformation=function(t,e,i,n){this._a=t,this._b=e,this._c=i,this._d=n},o.Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new o.Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}},o.DomUtil={get:function(t){return"string"==typeof t?e.getElementById(t):t},getStyle:function(t,i){var n=t.style[i];if(!n&&t.currentStyle&&(n=t.currentStyle[i]),(!n||"auto"===n)&&e.defaultView){var o=e.defaultView.getComputedStyle(t,null);n=o?o[i]:null}return"auto"===n?null:n},getViewportOffset:function(t){var i,n=0,s=0,a=t,r=e.body,h=e.documentElement;do{if(n+=a.offsetTop||0,s+=a.offsetLeft||0,n+=parseInt(o.DomUtil.getStyle(a,"borderTopWidth"),10)||0,s+=parseInt(o.DomUtil.getStyle(a,"borderLeftWidth"),10)||0,i=o.DomUtil.getStyle(a,"position"),a.offsetParent===r&&"absolute"===i)break;if("fixed"===i){n+=r.scrollTop||h.scrollTop||0,s+=r.scrollLeft||h.scrollLeft||0;break}if("relative"===i&&!a.offsetLeft){var l=o.DomUtil.getStyle(a,"width"),u=o.DomUtil.getStyle(a,"max-width"),c=a.getBoundingClientRect();("none"!==l||"none"!==u)&&(s+=c.left+a.clientLeft),n+=c.top+(r.scrollTop||h.scrollTop||0);break}a=a.offsetParent}while(a);a=t;do{if(a===r)break;n-=a.scrollTop||0,s-=a.scrollLeft||0,a=a.parentNode}while(a);return new o.Point(s,n)},documentIsLtr:function(){return o.DomUtil._docIsLtrCached||(o.DomUtil._docIsLtrCached=!0,o.DomUtil._docIsLtr="ltr"===o.DomUtil.getStyle(e.body,"direction")),o.DomUtil._docIsLtr},create:function(t,i,n){var o=e.createElement(t);return o.className=i,n&&n.appendChild(o),o},hasClass:function(t,e){if(t.classList!==i)return t.classList.contains(e);var n=o.DomUtil._getClass(t);return n.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(n)},addClass:function(t,e){if(t.classList!==i)for(var n=o.Util.splitWords(e),s=0,a=n.length;a>s;s++)t.classList.add(n[s]);else if(!o.DomUtil.hasClass(t,e)){var r=o.DomUtil._getClass(t);o.DomUtil._setClass(t,(r?r+" ":"")+e)}},removeClass:function(t,e){t.classList!==i?t.classList.remove(e):o.DomUtil._setClass(t,o.Util.trim((" "+o.DomUtil._getClass(t)+" ").replace(" "+e+" "," ")))},_setClass:function(t,e){t.className.baseVal===i?t.className=e:t.className.baseVal=e},_getClass:function(t){return t.className.baseVal===i?t.className:t.className.baseVal},setOpacity:function(t,e){if("opacity"in t.style)t.style.opacity=e;else if("filter"in t.style){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(o){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}},testProp:function(t){for(var i=e.documentElement.style,n=0;n<t.length;n++)if(t[n]in i)return t[n];return!1},getTranslateString:function(t){var e=o.Browser.webkit3d,i="translate"+(e?"3d":"")+"(",n=(e?",0":"")+")";return i+t.x+"px,"+t.y+"px"+n},getScaleString:function(t,e){var i=o.DomUtil.getTranslateString(e.add(e.multiplyBy(-1*t))),n=" scale("+t+") ";return i+n},setPosition:function(t,e,i){t._leaflet_pos=e,!i&&o.Browser.any3d?t.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(e):(t.style.left=e.x+"px",t.style.top=e.y+"px")},getPosition:function(t){return t._leaflet_pos}},o.DomUtil.TRANSFORM=o.DomUtil.testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),o.DomUtil.TRANSITION=o.DomUtil.testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),o.DomUtil.TRANSITION_END="webkitTransition"===o.DomUtil.TRANSITION||"OTransition"===o.DomUtil.TRANSITION?o.DomUtil.TRANSITION+"End":"transitionend",function(){if("onselectstart"in e)o.extend(o.DomUtil,{disableTextSelection:function(){o.DomEvent.on(t,"selectstart",o.DomEvent.preventDefault)},enableTextSelection:function(){o.DomEvent.off(t,"selectstart",o.DomEvent.preventDefault)}});else{var i=o.DomUtil.testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);o.extend(o.DomUtil,{disableTextSelection:function(){if(i){var t=e.documentElement.style;this._userSelect=t[i],t[i]="none"}},enableTextSelection:function(){i&&(e.documentElement.style[i]=this._userSelect,delete this._userSelect)}})}o.extend(o.DomUtil,{disableImageDrag:function(){o.DomEvent.on(t,"dragstart",o.DomEvent.preventDefault)},enableImageDrag:function(){o.DomEvent.off(t,"dragstart",o.DomEvent.preventDefault)}})}(),o.LatLng=function(t,e,n){if(t=parseFloat(t),e=parseFloat(e),isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=t,this.lng=e,n!==i&&(this.alt=parseFloat(n))},o.extend(o.LatLng,{DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,MAX_MARGIN:1e-9}),o.LatLng.prototype={equals:function(t){if(!t)return!1;t=o.latLng(t);var e=Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng));return e<=o.LatLng.MAX_MARGIN},toString:function(t){return"LatLng("+o.Util.formatNum(this.lat,t)+", "+o.Util.formatNum(this.lng,t)+")"},distanceTo:function(t){t=o.latLng(t);var e=6378137,i=o.LatLng.DEG_TO_RAD,n=(t.lat-this.lat)*i,s=(t.lng-this.lng)*i,a=this.lat*i,r=t.lat*i,h=Math.sin(n/2),l=Math.sin(s/2),u=h*h+l*l*Math.cos(a)*Math.cos(r);return 2*e*Math.atan2(Math.sqrt(u),Math.sqrt(1-u))},wrap:function(t,e){var i=this.lng;return t=t||-180,e=e||180,i=(i+e)%(e-t)+(t>i||i===e?e:t),new o.LatLng(this.lat,i)}},o.latLng=function(t,e){return t instanceof o.LatLng?t:o.Util.isArray(t)?"number"==typeof t[0]||"string"==typeof t[0]?new o.LatLng(t[0],t[1],t[2]):null:t===i||null===t?t:"object"==typeof t&&"lat"in t?new o.LatLng(t.lat,"lng"in t?t.lng:t.lon):e===i?null:new o.LatLng(t,e)},o.LatLngBounds=function(t,e){if(t)for(var i=e?[t,e]:t,n=0,o=i.length;o>n;n++)this.extend(i[n])},o.LatLngBounds.prototype={extend:function(t){if(!t)return this;var e=o.latLng(t);return t=null!==e?e:o.latLngBounds(t),t instanceof o.LatLng?this._southWest||this._northEast?(this._southWest.lat=Math.min(t.lat,this._southWest.lat),this._southWest.lng=Math.min(t.lng,this._southWest.lng),this._northEast.lat=Math.max(t.lat,this._northEast.lat),this._northEast.lng=Math.max(t.lng,this._northEast.lng)):(this._southWest=new o.LatLng(t.lat,t.lng),this._northEast=new o.LatLng(t.lat,t.lng)):t instanceof o.LatLngBounds&&(this.extend(t._southWest),this.extend(t._northEast)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,s=Math.abs(e.lng-i.lng)*t;return new o.LatLngBounds(new o.LatLng(e.lat-n,e.lng-s),new o.LatLng(i.lat+n,i.lng+s))},getCenter:function(){return new o.LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new o.LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new o.LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof o.LatLng?o.latLng(t):o.latLngBounds(t);var e,i,n=this._southWest,s=this._northEast;return t instanceof o.LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=s.lat&&e.lng>=n.lng&&i.lng<=s.lng},intersects:function(t){t=o.latLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),s=t.getNorthEast(),a=s.lat>=e.lat&&n.lat<=i.lat,r=s.lng>=e.lng&&n.lng<=i.lng;return a&&r},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t){return t?(t=o.latLngBounds(t),this._southWest.equals(t.getSouthWest())&&this._northEast.equals(t.getNorthEast())):!1},isValid:function(){return!(!this._southWest||!this._northEast)}},o.latLngBounds=function(t,e){return!t||t instanceof o.LatLngBounds?t:new o.LatLngBounds(t,e)},o.Projection={},o.Projection.SphericalMercator={MAX_LATITUDE:85.0511287798,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=t.lng*e,a=n*e;return a=Math.log(Math.tan(Math.PI/4+a/2)),new o.Point(s,a)},unproject:function(t){var e=o.LatLng.RAD_TO_DEG,i=t.x*e,n=(2*Math.atan(Math.exp(t.y))-Math.PI/2)*e;return new o.LatLng(n,i)}},o.Projection.LonLat={project:function(t){return new o.Point(t.lng,t.lat)},unproject:function(t){return new o.LatLng(t.y,t.x)}},o.CRS={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},scale:function(t){return 256*Math.pow(2,t)},getSize:function(t){var e=this.scale(t);return o.point(e,e)}},o.CRS.Simple=o.extend({},o.CRS,{projection:o.Projection.LonLat,transformation:new o.Transformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)}}),o.CRS.EPSG3857=o.extend({},o.CRS,{code:"EPSG:3857",projection:o.Projection.SphericalMercator,transformation:new o.Transformation(.5/Math.PI,.5,-.5/Math.PI,.5),project:function(t){var e=this.projection.project(t),i=6378137;return e.multiplyBy(i)}}),o.CRS.EPSG900913=o.extend({},o.CRS.EPSG3857,{code:"EPSG:900913"}),o.CRS.EPSG4326=o.extend({},o.CRS,{code:"EPSG:4326",projection:o.Projection.LonLat,transformation:new o.Transformation(1/360,.5,-1/360,.5)}),o.Map=o.Class.extend({includes:o.Mixin.Events,options:{crs:o.CRS.EPSG3857,fadeAnimation:o.DomUtil.TRANSITION&&!o.Browser.android23,trackResize:!0,markerZoomAnimation:o.DomUtil.TRANSITION&&o.Browser.any3d},initialize:function(t,e){e=o.setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=o.bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),e.center&&e.zoom!==i&&this.setView(o.latLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._tileLayersNum=0,this.callInitHooks(),this._addLayers(e.layers)},setView:function(t,e){return e=e===i?this.getZoom():e,this._resetView(o.latLng(t),this._limitZoom(e)),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=this._limitZoom(t),this)},zoomIn:function(t,e){return this.setZoom(this._zoom+(t||1),e)},zoomOut:function(t,e){return this.setZoom(this._zoom-(t||1),e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),s=this.getSize().divideBy(2),a=t instanceof o.Point?t:this.latLngToContainerPoint(t),r=a.subtract(s).multiplyBy(1-1/n),h=this.containerPointToLatLng(s.add(r));return this.setView(h,e,{zoom:i})},fitBounds:function(t,e){e=e||{},t=t.getBounds?t.getBounds():o.latLngBounds(t);var i=o.point(e.paddingTopLeft||e.padding||[0,0]),n=o.point(e.paddingBottomRight||e.padding||[0,0]),s=this.getBoundsZoom(t,!1,i.add(n)),a=n.subtract(i).divideBy(2),r=this.project(t.getSouthWest(),s),h=this.project(t.getNorthEast(),s),l=this.unproject(r.add(h).divideBy(2).add(a),s);return s=e&&e.maxZoom?Math.min(e.maxZoom,s):s,this.setView(l,s,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t){return this.fire("movestart"),this._rawPanBy(o.point(t)),this.fire("move"),this.fire("moveend")},setMaxBounds:function(t){return t=o.latLngBounds(t),this.options.maxBounds=t,t?(this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds,this)):this.off("moveend",this._panInsideMaxBounds,this)},panInsideBounds:function(t,e){var i=this.getCenter(),n=this._limitCenter(i,this._zoom,t);return i.equals(n)?this:this.panTo(n,e)},addLayer:function(t){var e=o.stamp(t);return this._layers[e]?this:(this._layers[e]=t,!t.options||isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[e]=t,this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum++,this._tileLayersToLoad++,t.on("load",this._onTileLayerLoad,this)),this._loaded&&this._layerAdd(t),this)},removeLayer:function(t){var e=o.stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),delete this._layers[e],this._loaded&&this.fire("layerremove",{layer:t}),this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels()),this.options.zoomAnimation&&o.TileLayer&&t instanceof o.TileLayer&&(this._tileLayersNum--,this._tileLayersToLoad--,t.off("load",this._onTileLayerLoad,this)),this):this},hasLayer:function(t){return t?o.stamp(t)in this._layers:!1},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},invalidateSize:function(t){if(!this._loaded)return this;t=o.extend({animate:!1,pan:!0},t===!0?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._initialCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),s=i.divideBy(2).round(),a=n.subtract(s);return a.x||a.y?(t.animate&&t.pan?this.panBy(a):(t.pan&&this._rawPanBy(a),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(o.bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){this._loaded&&this.fire("unload"),this._initEvents("off");try{delete this._container._leaflet}catch(t){this._container._leaflet=i}return this._clearPanes(),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this},getCenter:function(){return this._checkIfLoaded(),this._initialCenter&&!this._moved()?this._initialCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds(),e=this.unproject(t.getBottomLeft()),i=this.unproject(t.getTopRight());return new o.LatLngBounds(e,i)
},getMinZoom:function(){return this.options.minZoom===i?this._layersMinZoom===i?0:this._layersMinZoom:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===i?this._layersMaxZoom===i?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=o.latLngBounds(t);var n,s=this.getMinZoom()-(e?1:0),a=this.getMaxZoom(),r=this.getSize(),h=t.getNorthWest(),l=t.getSouthEast(),u=!0;i=o.point(i||[0,0]);do s++,n=this.project(l,s).subtract(this.project(h,s)).add(i),u=e?n.x<r.x||n.y<r.y:r.contains(n);while(u&&a>=s);return u&&e?null:e?s:s-1},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new o.Point(this._container.clientWidth,this._container.clientHeight),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(){var t=this._getTopLeftPoint();return new o.Bounds(t,t.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._initialTopLeftPoint},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t){var e=this.options.crs;return e.scale(t)/e.scale(this._zoom)},getScaleZoom:function(t){return this._zoom+Math.log(t)/Math.LN2},project:function(t,e){return e=e===i?this._zoom:e,this.options.crs.latLngToPoint(o.latLng(t),e)},unproject:function(t,e){return e=e===i?this._zoom:e,this.options.crs.pointToLatLng(o.point(t),e)},layerPointToLatLng:function(t){var e=o.point(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){var e=this.project(o.latLng(t))._round();return e._subtract(this.getPixelOrigin())},containerPointToLayerPoint:function(t){return o.point(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return o.point(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(o.point(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(o.latLng(t)))},mouseEventToContainerPoint:function(t){return o.DomEvent.getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=o.DomUtil.get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet)throw new Error("Map container is already initialized.");e._leaflet=!0},_initLayout:function(){var t=this._container;o.DomUtil.addClass(t,"leaflet-container"+(o.Browser.touch?" leaflet-touch":"")+(o.Browser.retina?" leaflet-retina":"")+(o.Browser.ielt9?" leaflet-oldie":"")+(this.options.fadeAnimation?" leaflet-fade-anim":""));var e=o.DomUtil.getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._mapPane=t.mapPane=this._createPane("leaflet-map-pane",this._container),this._tilePane=t.tilePane=this._createPane("leaflet-tile-pane",this._mapPane),t.objectsPane=this._createPane("leaflet-objects-pane",this._mapPane),t.shadowPane=this._createPane("leaflet-shadow-pane"),t.overlayPane=this._createPane("leaflet-overlay-pane"),t.markerPane=this._createPane("leaflet-marker-pane"),t.popupPane=this._createPane("leaflet-popup-pane");var e=" leaflet-zoom-hide";this.options.markerZoomAnimation||(o.DomUtil.addClass(t.markerPane,e),o.DomUtil.addClass(t.shadowPane,e),o.DomUtil.addClass(t.popupPane,e))},_createPane:function(t,e){return o.DomUtil.create("div",t,e||this._panes.objectsPane)},_clearPanes:function(){this._container.removeChild(this._mapPane)},_addLayers:function(t){t=t?o.Util.isArray(t)?t:[t]:[];for(var e=0,i=t.length;i>e;e++)this.addLayer(t[e])},_resetView:function(t,e,i,n){var s=this._zoom!==e;n||(this.fire("movestart"),s&&this.fire("zoomstart")),this._zoom=e,this._initialCenter=t,this._initialTopLeftPoint=this._getNewTopLeftPoint(t),i?this._initialTopLeftPoint._add(this._getMapPanePos()):o.DomUtil.setPosition(this._mapPane,new o.Point(0,0)),this._tileLayersToLoad=this._tileLayersNum;var a=!this._loaded;this._loaded=!0,this.fire("viewreset",{hard:!i}),a&&(this.fire("load"),this.eachLayer(this._layerAdd,this)),this.fire("move"),(s||n)&&this.fire("zoomend"),this.fire("moveend",{hard:!i})},_rawPanBy:function(t){o.DomUtil.setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_updateZoomLevels:function(){var t,e=1/0,n=-1/0,o=this._getZoomSpan();for(t in this._zoomBoundLayers){var s=this._zoomBoundLayers[t];isNaN(s.options.minZoom)||(e=Math.min(e,s.options.minZoom)),isNaN(s.options.maxZoom)||(n=Math.max(n,s.options.maxZoom))}t===i?this._layersMaxZoom=this._layersMinZoom=i:(this._layersMaxZoom=n,this._layersMinZoom=e),o!==this._getZoomSpan()&&this.fire("zoomlevelschange")},_panInsideMaxBounds:function(){this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(e){if(o.DomEvent){e=e||"on",o.DomEvent[e](this._container,"click",this._onMouseClick,this);var i,n,s=["dblclick","mousedown","mouseup","mouseenter","mouseleave","mousemove","contextmenu"];for(i=0,n=s.length;n>i;i++)o.DomEvent[e](this._container,s[i],this._fireMouseEvent,this);this.options.trackResize&&o.DomEvent[e](t,"resize",this._onResize,this)}},_onResize:function(){o.Util.cancelAnimFrame(this._resizeRequest),this._resizeRequest=o.Util.requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this,!1,this._container)},_onMouseClick:function(t){!this._loaded||!t._simulated&&(this.dragging&&this.dragging.moved()||this.boxZoom&&this.boxZoom.moved())||o.DomEvent._skipped(t)||(this.fire("preclick"),this._fireMouseEvent(t))},_fireMouseEvent:function(t){if(this._loaded&&!o.DomEvent._skipped(t)){var e=t.type;if(e="mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,this.hasEventListeners(e)){"contextmenu"===e&&o.DomEvent.preventDefault(t);var i=this.mouseEventToContainerPoint(t),n=this.containerPointToLayerPoint(i),s=this.layerPointToLatLng(n);this.fire(e,{latlng:s,layerPoint:n,containerPoint:i,originalEvent:t})}}},_onTileLayerLoad:function(){this._tileLayersToLoad--,this._tileLayersNum&&!this._tileLayersToLoad&&this.fire("tilelayersload")},_clearHandlers:function(){for(var t=0,e=this._handlers.length;e>t;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,this):this.on("load",t,e),this},_layerAdd:function(t){t.onAdd(this),this.fire("layeradd",{layer:t})},_getMapPanePos:function(){return o.DomUtil.getPosition(this._mapPane)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(){return this.getPixelOrigin().subtract(this._getMapPanePos())},_getNewTopLeftPoint:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewTopLeftPoint(i,e).add(this._getMapPanePos());return this.project(t,e)._subtract(n)},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),s=this.getSize().divideBy(2),a=new o.Bounds(n.subtract(s),n.add(s)),r=this._getBoundsOffset(a,i,e);return this.unproject(n.add(r),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new o.Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=this.project(e.getNorthWest(),i).subtract(t.min),s=this.project(e.getSouthEast(),i).subtract(t.max),a=this._rebound(n.x,-s.x),r=this._rebound(n.y,-s.y);return new o.Point(a,r)},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom();return Math.max(e,Math.min(i,t))}}),o.map=function(t,e){return new o.Map(t,e)},o.Projection.Mercator={MAX_LATITUDE:85.0840591556,R_MINOR:6356752.314245179,R_MAJOR:6378137,project:function(t){var e=o.LatLng.DEG_TO_RAD,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),s=this.R_MAJOR,a=this.R_MINOR,r=t.lng*e*s,h=n*e,l=a/s,u=Math.sqrt(1-l*l),c=u*Math.sin(h);c=Math.pow((1-c)/(1+c),.5*u);var d=Math.tan(.5*(.5*Math.PI-h))/c;return h=-s*Math.log(d),new o.Point(r,h)},unproject:function(t){for(var e,i=o.LatLng.RAD_TO_DEG,n=this.R_MAJOR,s=this.R_MINOR,a=t.x*i/n,r=s/n,h=Math.sqrt(1-r*r),l=Math.exp(-t.y/n),u=Math.PI/2-2*Math.atan(l),c=15,d=1e-7,p=c,_=.1;Math.abs(_)>d&&--p>0;)e=h*Math.sin(u),_=Math.PI/2-2*Math.atan(l*Math.pow((1-e)/(1+e),.5*h))-u,u+=_;return new o.LatLng(u*i,a)}},o.CRS.EPSG3395=o.extend({},o.CRS,{code:"EPSG:3395",projection:o.Projection.Mercator,transformation:function(){var t=o.Projection.Mercator,e=t.R_MAJOR,i=.5/(Math.PI*e);return new o.Transformation(i,.5,-i,.5)}()}),o.TileLayer=o.Class.extend({includes:o.Mixin.Events,options:{minZoom:0,maxZoom:18,tileSize:256,subdomains:"abc",errorTileUrl:"",attribution:"",zoomOffset:0,opacity:1,unloadInvisibleTiles:o.Browser.mobile,updateWhenIdle:o.Browser.mobile},initialize:function(t,e){e=o.setOptions(this,e),e.detectRetina&&o.Browser.retina&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomOffset++,e.minZoom>0&&e.minZoom--,this.options.maxZoom--),e.bounds&&(e.bounds=o.latLngBounds(e.bounds)),this._url=t;var i=this.options.subdomains;"string"==typeof i&&(this.options.subdomains=i.split(""))},onAdd:function(t){this._map=t,this._animated=t._zoomAnimated,this._initContainer(),t.on({viewreset:this._reset,moveend:this._update},this),this._animated&&t.on({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||(this._limitedUpdate=o.Util.limitExecByInterval(this._update,150,this),t.on("move",this._limitedUpdate,this)),this._reset(),this._update()},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this._container.parentNode.removeChild(this._container),t.off({viewreset:this._reset,moveend:this._update},this),this._animated&&t.off({zoomanim:this._animateZoom,zoomend:this._endZoomAnim},this),this.options.updateWhenIdle||t.off("move",this._limitedUpdate,this),this._container=null,this._map=null},bringToFront:function(){var t=this._map._panes.tilePane;return this._container&&(t.appendChild(this._container),this._setAutoZIndex(t,Math.max)),this},bringToBack:function(){var t=this._map._panes.tilePane;return this._container&&(t.insertBefore(this._container,t.firstChild),this._setAutoZIndex(t,Math.min)),this},getAttribution:function(){return this.options.attribution},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},redraw:function(){return this._map&&(this._reset({hard:!0}),this._update()),this},_updateZIndex:function(){this._container&&this.options.zIndex!==i&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t,e){var i,n,o,s=t.children,a=-e(1/0,-1/0);for(n=0,o=s.length;o>n;n++)s[n]!==this._container&&(i=parseInt(s[n].style.zIndex,10),isNaN(i)||(a=e(a,i)));this.options.zIndex=this._container.style.zIndex=(isFinite(a)?a:0)+e(1,-1)},_updateOpacity:function(){var t,e=this._tiles;if(o.Browser.ielt9)for(t in e)o.DomUtil.setOpacity(e[t],this.options.opacity);else o.DomUtil.setOpacity(this._container,this.options.opacity)},_initContainer:function(){var t=this._map._panes.tilePane;if(!this._container){if(this._container=o.DomUtil.create("div","leaflet-layer"),this._updateZIndex(),this._animated){var e="leaflet-tile-container";this._bgBuffer=o.DomUtil.create("div",e,this._container),this._tileContainer=o.DomUtil.create("div",e,this._container)}else this._tileContainer=this._container;t.appendChild(this._container),this.options.opacity<1&&this._updateOpacity()}},_reset:function(t){for(var e in this._tiles)this.fire("tileunload",{tile:this._tiles[e]});this._tiles={},this._tilesToLoad=0,this.options.reuseTiles&&(this._unusedTiles=[]),this._tileContainer.innerHTML="",this._animated&&t&&t.hard&&this._clearBgBuffer(),this._initContainer()},_getTileSize:function(){var t=this._map,e=t.getZoom()+this.options.zoomOffset,i=this.options.maxNativeZoom,n=this.options.tileSize;return i&&e>i&&(n=Math.round(t.getZoomScale(e)/t.getZoomScale(i)*n)),n},_update:function(){if(this._map){var t=this._map,e=t.getPixelBounds(),i=t.getZoom(),n=this._getTileSize();if(!(i>this.options.maxZoom||i<this.options.minZoom)){var s=o.bounds(e.min.divideBy(n)._floor(),e.max.divideBy(n)._floor());this._addTilesFromCenterOut(s),(this.options.unloadInvisibleTiles||this.options.reuseTiles)&&this._removeOtherTiles(s)}}},_addTilesFromCenterOut:function(t){var i,n,s,a=[],r=t.getCenter();for(i=t.min.y;i<=t.max.y;i++)for(n=t.min.x;n<=t.max.x;n++)s=new o.Point(n,i),this._tileShouldBeLoaded(s)&&a.push(s);var h=a.length;if(0!==h){a.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)});var l=e.createDocumentFragment();for(this._tilesToLoad||this.fire("loading"),this._tilesToLoad+=h,n=0;h>n;n++)this._addTile(a[n],l);this._tileContainer.appendChild(l)}},_tileShouldBeLoaded:function(t){if(t.x+":"+t.y in this._tiles)return!1;var e=this.options;if(!e.continuousWorld){var i=this._getWrapTileNum();if(e.noWrap&&(t.x<0||t.x>=i.x)||t.y<0||t.y>=i.y)return!1}if(e.bounds){var n=e.tileSize,o=t.multiplyBy(n),s=o.add([n,n]),a=this._map.unproject(o),r=this._map.unproject(s);if(e.continuousWorld||e.noWrap||(a=a.wrap(),r=r.wrap()),!e.bounds.intersects([a,r]))return!1}return!0},_removeOtherTiles:function(t){var e,i,n,o;for(o in this._tiles)e=o.split(":"),i=parseInt(e[0],10),n=parseInt(e[1],10),(i<t.min.x||i>t.max.x||n<t.min.y||n>t.max.y)&&this._removeTile(o)},_removeTile:function(t){var e=this._tiles[t];this.fire("tileunload",{tile:e,url:e.src}),this.options.reuseTiles?(o.DomUtil.removeClass(e,"leaflet-tile-loaded"),this._unusedTiles.push(e)):e.parentNode===this._tileContainer&&this._tileContainer.removeChild(e),o.Browser.android||(e.onload=null,e.src=o.Util.emptyImageUrl),delete this._tiles[t]},_addTile:function(t,e){var i=this._getTilePos(t),n=this._getTile();o.DomUtil.setPosition(n,i,o.Browser.chrome),this._tiles[t.x+":"+t.y]=n,this._loadTile(n,t),n.parentNode!==this._tileContainer&&e.appendChild(n)},_getZoomForUrl:function(){var t=this.options,e=this._map.getZoom();return t.zoomReverse&&(e=t.maxZoom-e),e+=t.zoomOffset,t.maxNativeZoom?Math.min(e,t.maxNativeZoom):e},_getTilePos:function(t){var e=this._map.getPixelOrigin(),i=this._getTileSize();return t.multiplyBy(i).subtract(e)},getTileUrl:function(t){return o.Util.template(this._url,o.extend({s:this._getSubdomain(t),z:t.z,x:t.x,y:t.y},this.options))},_getWrapTileNum:function(){var t=this._map.options.crs,e=t.getSize(this._map.getZoom());return e.divideBy(this._getTileSize())._floor()},_adjustTilePoint:function(t){var e=this._getWrapTileNum();this.options.continuousWorld||this.options.noWrap||(t.x=(t.x%e.x+e.x)%e.x),this.options.tms&&(t.y=e.y-t.y-1),t.z=this._getZoomForUrl()},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_getTile:function(){if(this.options.reuseTiles&&this._unusedTiles.length>0){var t=this._unusedTiles.pop();return this._resetTile(t),t}return this._createTile()},_resetTile:function(){},_createTile:function(){var t=o.DomUtil.create("img","leaflet-tile");return t.style.width=t.style.height=this._getTileSize()+"px",t.galleryimg="no",t.onselectstart=t.onmousemove=o.Util.falseFn,o.Browser.ielt9&&this.options.opacity!==i&&o.DomUtil.setOpacity(t,this.options.opacity),o.Browser.mobileWebkit3d&&(t.style.WebkitBackfaceVisibility="hidden"),t},_loadTile:function(t,e){t._layer=this,t.onload=this._tileOnLoad,t.onerror=this._tileOnError,this._adjustTilePoint(e),t.src=this.getTileUrl(e),this.fire("tileloadstart",{tile:t,url:t.src})},_tileLoaded:function(){this._tilesToLoad--,this._animated&&o.DomUtil.addClass(this._tileContainer,"leaflet-zoom-animated"),this._tilesToLoad||(this.fire("load"),this._animated&&(clearTimeout(this._clearBgBufferTimer),this._clearBgBufferTimer=setTimeout(o.bind(this._clearBgBuffer,this),500)))},_tileOnLoad:function(){var t=this._layer;this.src!==o.Util.emptyImageUrl&&(o.DomUtil.addClass(this,"leaflet-tile-loaded"),t.fire("tileload",{tile:this,url:this.src})),t._tileLoaded()},_tileOnError:function(){var t=this._layer;t.fire("tileerror",{tile:this,url:this.src});var e=t.options.errorTileUrl;e&&(this.src=e),t._tileLoaded()}}),o.tileLayer=function(t,e){return new o.TileLayer(t,e)},o.TileLayer.WMS=o.TileLayer.extend({defaultWmsParams:{service:"WMS",request:"GetMap",version:"1.1.1",layers:"",styles:"",format:"image/jpeg",transparent:!1},initialize:function(t,e){this._url=t;var i=o.extend({},this.defaultWmsParams),n=e.tileSize||this.options.tileSize;i.width=i.height=e.detectRetina&&o.Browser.retina?2*n:n;for(var s in e)this.options.hasOwnProperty(s)||"crs"===s||(i[s]=e[s]);this.wmsParams=i,o.setOptions(this,e)},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,o.TileLayer.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._map,i=this.options.tileSize,n=t.multiplyBy(i),s=n.add([i,i]),a=this._crs.project(e.unproject(n,t.z)),r=this._crs.project(e.unproject(s,t.z)),h=this._wmsVersion>=1.3&&this._crs===o.CRS.EPSG4326?[r.y,a.x,a.y,r.x].join(","):[a.x,r.y,r.x,a.y].join(","),l=o.Util.template(this._url,{s:this._getSubdomain(t)});return l+o.Util.getParamString(this.wmsParams,l,!0)+"&BBOX="+h},setParams:function(t,e){return o.extend(this.wmsParams,t),e||this.redraw(),this}}),o.tileLayer.wms=function(t,e){return new o.TileLayer.WMS(t,e)},o.TileLayer.Canvas=o.TileLayer.extend({options:{async:!1},initialize:function(t){o.setOptions(this,t)},redraw:function(){this._map&&(this._reset({hard:!0}),this._update());for(var t in this._tiles)this._redrawTile(this._tiles[t]);return this},_redrawTile:function(t){this.drawTile(t,t._tilePoint,this._map._zoom)},_createTile:function(){var t=o.DomUtil.create("canvas","leaflet-tile");return t.width=t.height=this.options.tileSize,t.onselectstart=t.onmousemove=o.Util.falseFn,t},_loadTile:function(t,e){t._layer=this,t._tilePoint=e,this._redrawTile(t),this.options.async||this.tileDrawn(t)},drawTile:function(){},tileDrawn:function(t){this._tileOnLoad.call(t)}}),o.tileLayer.canvas=function(t){return new o.TileLayer.Canvas(t)},o.ImageOverlay=o.Class.extend({includes:o.Mixin.Events,options:{opacity:1},initialize:function(t,e,i){this._url=t,this._bounds=o.latLngBounds(e),o.setOptions(this,i)},onAdd:function(t){this._map=t,this._image||this._initImage(),t._panes.overlayPane.appendChild(this._image),t.on("viewreset",this._reset,this),t.options.zoomAnimation&&o.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._image),t.off("viewreset",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},bringToFront:function(){return this._image&&this._map._panes.overlayPane.appendChild(this._image),this},bringToBack:function(){var t=this._map._panes.overlayPane;return this._image&&t.insertBefore(this._image,t.firstChild),this},setUrl:function(t){this._url=t,this._image.src=this._url},getAttribution:function(){return this.options.attribution},_initImage:function(){this._image=o.DomUtil.create("img","leaflet-image-layer"),this._map.options.zoomAnimation&&o.Browser.any3d?o.DomUtil.addClass(this._image,"leaflet-zoom-animated"):o.DomUtil.addClass(this._image,"leaflet-zoom-hide"),this._updateOpacity(),o.extend(this._image,{galleryimg:"no",onselectstart:o.Util.falseFn,onmousemove:o.Util.falseFn,onload:o.bind(this._onImageLoad,this),src:this._url})},_animateZoom:function(t){var e=this._map,i=this._image,n=e.getZoomScale(t.zoom),s=this._bounds.getNorthWest(),a=this._bounds.getSouthEast(),r=e._latLngToNewLayerPoint(s,t.zoom,t.center),h=e._latLngToNewLayerPoint(a,t.zoom,t.center)._subtract(r),l=r._add(h._multiplyBy(.5*(1-1/n)));i.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(l)+" scale("+n+") "},_reset:function(){var t=this._image,e=this._map.latLngToLayerPoint(this._bounds.getNorthWest()),i=this._map.latLngToLayerPoint(this._bounds.getSouthEast())._subtract(e);o.DomUtil.setPosition(t,e),t.style.width=i.x+"px",t.style.height=i.y+"px"},_onImageLoad:function(){this.fire("load")},_updateOpacity:function(){o.DomUtil.setOpacity(this._image,this.options.opacity)}}),o.imageOverlay=function(t,e,i){return new o.ImageOverlay(t,e,i)},o.Icon=o.Class.extend({options:{className:""},initialize:function(t){o.setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n;return n=e&&"IMG"===e.tagName?this._createImg(i,e):this._createImg(i),this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i,n=this.options,s=o.point(n[e+"Size"]);i=o.point("shadow"===e?n.shadowAnchor||n.iconAnchor:n.iconAnchor),!i&&s&&(i=s.divideBy(2,!0)),t.className="leaflet-marker-"+e+" "+n.className,i&&(t.style.marginLeft=-i.x+"px",t.style.marginTop=-i.y+"px"),s&&(t.style.width=s.x+"px",t.style.height=s.y+"px")},_createImg:function(t,i){return i=i||e.createElement("img"),i.src=t,i},_getIconUrl:function(t){return o.Browser.retina&&this.options[t+"RetinaUrl"]?this.options[t+"RetinaUrl"]:this.options[t+"Url"]}}),o.icon=function(t){return new o.Icon(t)},o.Icon.Default=o.Icon.extend({options:{iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],shadowSize:[41,41]},_getIconUrl:function(t){var e=t+"Url";if(this.options[e])return this.options[e];o.Browser.retina&&"icon"===t&&(t+="-2x");var i=o.Icon.Default.imagePath;if(!i)throw new Error("Couldn't autodetect L.Icon.Default.imagePath, set it manually.");return i+"/marker-"+t+".png"}}),o.Icon.Default.imagePath=function(){var t,i,n,o,s,a=e.getElementsByTagName("script"),r=/[\/^]leaflet[\-\._]?([\w\-\._]*)\.js\??/;for(t=0,i=a.length;i>t;t++)if(n=a[t].src,o=n.match(r))return s=n.split(r)[0],(s?s+"/":"")+"images"}(),o.Marker=o.Class.extend({includes:o.Mixin.Events,options:{icon:new o.Icon.Default,title:"",alt:"",clickable:!0,draggable:!1,keyboard:!0,zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250},initialize:function(t,e){o.setOptions(this,e),this._latlng=o.latLng(t)},onAdd:function(t){this._map=t,t.on("viewreset",this.update,this),this._initIcon(),this.update(),this.fire("add"),t.options.zoomAnimation&&t.options.markerZoomAnimation&&t.on("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){this.dragging&&this.dragging.disable(),this._removeIcon(),this._removeShadow(),this.fire("remove"),t.off({viewreset:this.update,zoomanim:this._animateZoom},this),this._map=null},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this.update(),this.fire("move",{latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update(),this},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup),this},update:function(){if(this._icon){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e=this._map,i=e.options.zoomAnimation&&e.options.markerZoomAnimation,n=i?"leaflet-zoom-animated":"leaflet-zoom-hide",s=t.icon.createIcon(this._icon),a=!1;s!==this._icon&&(this._icon&&this._removeIcon(),a=!0,t.title&&(s.title=t.title),t.alt&&(s.alt=t.alt)),o.DomUtil.addClass(s,n),t.keyboard&&(s.tabIndex="0"),this._icon=s,this._initInteraction(),t.riseOnHover&&o.DomEvent.on(s,"mouseover",this._bringToFront,this).on(s,"mouseout",this._resetZIndex,this);var r=t.icon.createShadow(this._shadow),h=!1;r!==this._shadow&&(this._removeShadow(),h=!0),r&&o.DomUtil.addClass(r,n),this._shadow=r,t.opacity<1&&this._updateOpacity();var l=this._map._panes;a&&l.markerPane.appendChild(this._icon),r&&h&&l.shadowPane.appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&o.DomEvent.off(this._icon,"mouseover",this._bringToFront).off(this._icon,"mouseout",this._resetZIndex),this._map._panes.markerPane.removeChild(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&this._map._panes.shadowPane.removeChild(this._shadow),this._shadow=null},_setPos:function(t){o.DomUtil.setPosition(this._icon,t),this._shadow&&o.DomUtil.setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.clickable){var t=this._icon,e=["dblclick","mousedown","mouseover","mouseout","contextmenu"];o.DomUtil.addClass(t,"leaflet-clickable"),o.DomEvent.on(t,"click",this._onMouseClick,this),o.DomEvent.on(t,"keypress",this._onKeyPress,this);for(var i=0;i<e.length;i++)o.DomEvent.on(t,e[i],this._fireMouseEvent,this);o.Handler.MarkerDrag&&(this.dragging=new o.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_onMouseClick:function(t){var e=this.dragging&&this.dragging.moved();(this.hasEventListeners(t.type)||e)&&o.DomEvent.stopPropagation(t),e||(this.dragging&&this.dragging._enabled||!this._map.dragging||!this._map.dragging.moved())&&this.fire(t.type,{originalEvent:t,latlng:this._latlng})},_onKeyPress:function(t){13===t.keyCode&&this.fire("click",{originalEvent:t,latlng:this._latlng})},_fireMouseEvent:function(t){this.fire(t.type,{originalEvent:t,latlng:this._latlng}),"contextmenu"===t.type&&this.hasEventListeners(t.type)&&o.DomEvent.preventDefault(t),"mousedown"!==t.type?o.DomEvent.stopPropagation(t):o.DomEvent.preventDefault(t)},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){o.DomUtil.setOpacity(this._icon,this.options.opacity),this._shadow&&o.DomUtil.setOpacity(this._shadow,this.options.opacity)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)}}),o.marker=function(t,e){return new o.Marker(t,e)},o.DivIcon=o.Icon.extend({options:{iconSize:[12,12],className:"leaflet-div-icon",html:!1},createIcon:function(t){var i=t&&"DIV"===t.tagName?t:e.createElement("div"),n=this.options;return i.innerHTML=n.html!==!1?n.html:"",n.bgPos&&(i.style.backgroundPosition=-n.bgPos.x+"px "+-n.bgPos.y+"px"),this._setIconStyles(i,"icon"),i},createShadow:function(){return null}}),o.divIcon=function(t){return new o.DivIcon(t)},o.Map.mergeOptions({closePopupOnClick:!0}),o.Popup=o.Class.extend({includes:o.Mixin.Events,options:{minWidth:50,maxWidth:300,autoPan:!0,closeButton:!0,offset:[0,7],autoPanPadding:[5,5],keepInView:!1,className:"",zoomAnimation:!0},initialize:function(t,e){o.setOptions(this,t),this._source=e,this._animated=o.Browser.any3d&&this.options.zoomAnimation,this._isOpen=!1},onAdd:function(t){this._map=t,this._container||this._initLayout();var e=t.options.fadeAnimation;e&&o.DomUtil.setOpacity(this._container,0),t._panes.popupPane.appendChild(this._container),t.on(this._getEvents(),this),this.update(),e&&o.DomUtil.setOpacity(this._container,1),this.fire("open"),t.fire("popupopen",{popup:this}),this._source&&this._source.fire("popupopen",{popup:this})},addTo:function(t){return t.addLayer(this),this},openOn:function(t){return t.openPopup(this),this},onRemove:function(t){t._panes.popupPane.removeChild(this._container),o.Util.falseFn(this._container.offsetWidth),t.off(this._getEvents(),this),t.options.fadeAnimation&&o.DomUtil.setOpacity(this._container,0),this._map=null,this.fire("close"),t.fire("popupclose",{popup:this}),this._source&&this._source.fire("popupclose",{popup:this})},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=o.latLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},_getEvents:function(){var t={viewreset:this._updatePosition};return this._animated&&(t.zoomanim=this._zoomAnimation),("closeOnClick"in this.options?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t,e="leaflet-popup",i=e+" "+this.options.className+" leaflet-zoom-"+(this._animated?"animated":"hide"),n=this._container=o.DomUtil.create("div",i);this.options.closeButton&&(t=this._closeButton=o.DomUtil.create("a",e+"-close-button",n),t.href="#close",t.innerHTML="&#215;",o.DomEvent.disableClickPropagation(t),o.DomEvent.on(t,"click",this._onCloseButtonClick,this));var s=this._wrapper=o.DomUtil.create("div",e+"-content-wrapper",n);o.DomEvent.disableClickPropagation(s),this._contentNode=o.DomUtil.create("div",e+"-content",s),o.DomEvent.disableScrollPropagation(this._contentNode),o.DomEvent.on(s,"contextmenu",o.DomEvent.stopPropagation),this._tipContainer=o.DomUtil.create("div",e+"-tip-container",n),this._tip=o.DomUtil.create("div",e+"-tip",this._tipContainer)},_updateContent:function(){if(this._content){if("string"==typeof this._content)this._contentNode.innerHTML=this._content;else{for(;this._contentNode.hasChildNodes();)this._contentNode.removeChild(this._contentNode.firstChild);this._contentNode.appendChild(this._content)}this.fire("contentupdate")}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,s=this.options.maxHeight,a="leaflet-popup-scrolled";s&&n>s?(e.height=s+"px",o.DomUtil.addClass(t,a)):o.DomUtil.removeClass(t,a),this._containerWidth=this._container.offsetWidth},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=this._animated,i=o.point(this.options.offset);e&&o.DomUtil.setPosition(this._container,t),this._containerBottom=-i.y-(e?0:t.y),this._containerLeft=-Math.round(this._containerWidth/2)+i.x+(e?0:t.x),this._container.style.bottom=this._containerBottom+"px",this._container.style.left=this._containerLeft+"px"}},_zoomAnimation:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);o.DomUtil.setPosition(this._container,e)},_adjustPan:function(){if(this.options.autoPan){var t=this._map,e=this._container.offsetHeight,i=this._containerWidth,n=new o.Point(this._containerLeft,-e-this._containerBottom);this._animated&&n._add(o.DomUtil.getPosition(this._container));var s=t.layerPointToContainerPoint(n),a=o.point(this.options.autoPanPadding),r=o.point(this.options.autoPanPaddingTopLeft||a),h=o.point(this.options.autoPanPaddingBottomRight||a),l=t.getSize(),u=0,c=0;s.x+i+h.x>l.x&&(u=s.x+i-l.x+h.x),s.x-u-r.x<0&&(u=s.x-r.x),s.y+e+h.y>l.y&&(c=s.y+e-l.y+h.y),s.y-c-r.y<0&&(c=s.y-r.y),(u||c)&&t.fire("autopanstart").panBy([u,c])}},_onCloseButtonClick:function(t){this._close(),o.DomEvent.stop(t)
}}),o.popup=function(t,e){return new o.Popup(t,e)},o.Map.include({openPopup:function(t,e,i){if(this.closePopup(),!(t instanceof o.Popup)){var n=t;t=new o.Popup(i).setLatLng(e).setContent(n)}return t._isOpen=!0,this._popup=t,this.addLayer(t)},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&(this.removeLayer(t),t._isOpen=!1),this}}),o.Marker.include({openPopup:function(){return this._popup&&this._map&&!this._map.hasLayer(this._popup)&&(this._popup.setLatLng(this._latlng),this._map.openPopup(this._popup)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(){return this._popup&&(this._popup._isOpen?this.closePopup():this.openPopup()),this},bindPopup:function(t,e){var i=o.point(this.options.icon.options.popupAnchor||[0,0]);return i=i.add(o.Popup.prototype.options.offset),e&&e.offset&&(i=i.add(e.offset)),e=o.extend({offset:i},e),this._popupHandlersAdded||(this.on("click",this.togglePopup,this).on("remove",this.closePopup,this).on("move",this._movePopup,this),this._popupHandlersAdded=!0),t instanceof o.Popup?(o.setOptions(t,e),this._popup=t):this._popup=new o.Popup(e,this).setContent(t),this},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this.togglePopup,this).off("remove",this.closePopup,this).off("move",this._movePopup,this),this._popupHandlersAdded=!1),this},getPopup:function(){return this._popup},_movePopup:function(t){this._popup.setLatLng(t.latlng)}}),o.LayerGroup=o.Class.extend({initialize:function(t){this._layers={};var e,i;if(t)for(e=0,i=t.length;i>e;e++)this.addLayer(t[e])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return t?t in this._layers||this.getLayerId(t)in this._layers:!1},clearLayers:function(){return this.eachLayer(this.removeLayer,this),this},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){this._map=t,this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t),this._map=null},addTo:function(t){return t.addLayer(this),this},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];for(var e in this._layers)t.push(this._layers[e]);return t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return o.stamp(t)}}),o.layerGroup=function(t){return new o.LayerGroup(t)},o.FeatureGroup=o.LayerGroup.extend({includes:o.Mixin.Events,statics:{EVENTS:"click dblclick mouseover mouseout mousemove contextmenu popupopen popupclose"},addLayer:function(t){return this.hasLayer(t)?this:("on"in t&&t.on(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.addLayer.call(this,t),this._popupContent&&t.bindPopup&&t.bindPopup(this._popupContent,this._popupOptions),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.off(o.FeatureGroup.EVENTS,this._propagateEvent,this),o.LayerGroup.prototype.removeLayer.call(this,t),this._popupContent&&this.invoke("unbindPopup"),this.fire("layerremove",{layer:t})):this},bindPopup:function(t,e){return this._popupContent=t,this._popupOptions=e,this.invoke("bindPopup",t,e)},openPopup:function(t){for(var e in this._layers){this._layers[e].openPopup(t);break}return this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new o.LatLngBounds;return this.eachLayer(function(e){t.extend(e instanceof o.Marker?e.getLatLng():e.getBounds())}),t},_propagateEvent:function(t){t=o.extend({layer:t.target,target:this},t),this.fire(t.type,t)}}),o.featureGroup=function(t){return new o.FeatureGroup(t)},o.Path=o.Class.extend({includes:[o.Mixin.Events],statics:{CLIP_PADDING:function(){var e=o.Browser.mobile?1280:2e3,i=(e/Math.max(t.outerWidth,t.outerHeight)-1)/2;return Math.max(0,Math.min(.5,i))}()},options:{stroke:!0,color:"#0033ff",dashArray:null,lineCap:null,lineJoin:null,weight:5,opacity:.5,fill:!1,fillColor:null,fillOpacity:.2,clickable:!0},initialize:function(t){o.setOptions(this,t)},onAdd:function(t){this._map=t,this._container||(this._initElements(),this._initEvents()),this.projectLatlngs(),this._updatePath(),this._container&&this._map._pathRoot.appendChild(this._container),this.fire("add"),t.on({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},addTo:function(t){return t.addLayer(this),this},onRemove:function(t){t._pathRoot.removeChild(this._container),this.fire("remove"),this._map=null,o.Browser.vml&&(this._container=null,this._stroke=null,this._fill=null),t.off({viewreset:this.projectLatlngs,moveend:this._updatePath},this)},projectLatlngs:function(){},setStyle:function(t){return o.setOptions(this,t),this._container&&this._updateStyle(),this},redraw:function(){return this._map&&(this.projectLatlngs(),this._updatePath()),this}}),o.Map.include({_updatePathViewport:function(){var t=o.Path.CLIP_PADDING,e=this.getSize(),i=o.DomUtil.getPosition(this._mapPane),n=i.multiplyBy(-1)._subtract(e.multiplyBy(t)._round()),s=n.add(e.multiplyBy(1+2*t)._round());this._pathViewport=new o.Bounds(n,s)}}),o.Path.SVG_NS="http://www.w3.org/2000/svg",o.Browser.svg=!(!e.createElementNS||!e.createElementNS(o.Path.SVG_NS,"svg").createSVGRect),o.Path=o.Path.extend({statics:{SVG:o.Browser.svg},bringToFront:function(){var t=this._map._pathRoot,e=this._container;return e&&t.lastChild!==e&&t.appendChild(e),this},bringToBack:function(){var t=this._map._pathRoot,e=this._container,i=t.firstChild;return e&&i!==e&&t.insertBefore(e,i),this},getPathString:function(){},_createElement:function(t){return e.createElementNS(o.Path.SVG_NS,t)},_initElements:function(){this._map._initPathRoot(),this._initPath(),this._initStyle()},_initPath:function(){this._container=this._createElement("g"),this._path=this._createElement("path"),this.options.className&&o.DomUtil.addClass(this._path,this.options.className),this._container.appendChild(this._path)},_initStyle:function(){this.options.stroke&&(this._path.setAttribute("stroke-linejoin","round"),this._path.setAttribute("stroke-linecap","round")),this.options.fill&&this._path.setAttribute("fill-rule","evenodd"),this.options.pointerEvents&&this._path.setAttribute("pointer-events",this.options.pointerEvents),this.options.clickable||this.options.pointerEvents||this._path.setAttribute("pointer-events","none"),this._updateStyle()},_updateStyle:function(){this.options.stroke?(this._path.setAttribute("stroke",this.options.color),this._path.setAttribute("stroke-opacity",this.options.opacity),this._path.setAttribute("stroke-width",this.options.weight),this.options.dashArray?this._path.setAttribute("stroke-dasharray",this.options.dashArray):this._path.removeAttribute("stroke-dasharray"),this.options.lineCap&&this._path.setAttribute("stroke-linecap",this.options.lineCap),this.options.lineJoin&&this._path.setAttribute("stroke-linejoin",this.options.lineJoin)):this._path.setAttribute("stroke","none"),this.options.fill?(this._path.setAttribute("fill",this.options.fillColor||this.options.color),this._path.setAttribute("fill-opacity",this.options.fillOpacity)):this._path.setAttribute("fill","none")},_updatePath:function(){var t=this.getPathString();t||(t="M0 0"),this._path.setAttribute("d",t)},_initEvents:function(){if(this.options.clickable){(o.Browser.svg||!o.Browser.vml)&&o.DomUtil.addClass(this._path,"leaflet-clickable"),o.DomEvent.on(this._container,"click",this._onMouseClick,this);for(var t=["dblclick","mousedown","mouseover","mouseout","mousemove","contextmenu"],e=0;e<t.length;e++)o.DomEvent.on(this._container,t[e],this._fireMouseEvent,this)}},_onMouseClick:function(t){this._map.dragging&&this._map.dragging.moved()||this._fireMouseEvent(t)},_fireMouseEvent:function(t){if(this.hasEventListeners(t.type)){var e=this._map,i=e.mouseEventToContainerPoint(t),n=e.containerPointToLayerPoint(i),s=e.layerPointToLatLng(n);this.fire(t.type,{latlng:s,layerPoint:n,containerPoint:i,originalEvent:t}),"contextmenu"===t.type&&o.DomEvent.preventDefault(t),"mousemove"!==t.type&&o.DomEvent.stopPropagation(t)}}}),o.Map.include({_initPathRoot:function(){this._pathRoot||(this._pathRoot=o.Path.prototype._createElement("svg"),this._panes.overlayPane.appendChild(this._pathRoot),this.options.zoomAnimation&&o.Browser.any3d?(o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-animated"),this.on({zoomanim:this._animatePathZoom,zoomend:this._endPathZoom})):o.DomUtil.addClass(this._pathRoot,"leaflet-zoom-hide"),this.on("moveend",this._updateSvgViewport),this._updateSvgViewport())},_animatePathZoom:function(t){var e=this.getZoomScale(t.zoom),i=this._getCenterOffset(t.center)._multiplyBy(-e)._add(this._pathViewport.min);this._pathRoot.style[o.DomUtil.TRANSFORM]=o.DomUtil.getTranslateString(i)+" scale("+e+") ",this._pathZooming=!0},_endPathZoom:function(){this._pathZooming=!1},_updateSvgViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max,n=i.x-e.x,s=i.y-e.y,a=this._pathRoot,r=this._panes.overlayPane;o.Browser.mobileWebkit&&r.removeChild(a),o.DomUtil.setPosition(a,e),a.setAttribute("width",n),a.setAttribute("height",s),a.setAttribute("viewBox",[e.x,e.y,n,s].join(" ")),o.Browser.mobileWebkit&&r.appendChild(a)}}}),o.Path.include({bindPopup:function(t,e){return t instanceof o.Popup?this._popup=t:((!this._popup||e)&&(this._popup=new o.Popup(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on("click",this._openPopup,this).on("remove",this.closePopup,this),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this._popup=null,this.off("click",this._openPopup).off("remove",this.closePopup),this._popupHandlersAdded=!1),this},openPopup:function(t){return this._popup&&(t=t||this._latlng||this._latlngs[Math.floor(this._latlngs.length/2)],this._openPopup({latlng:t})),this},closePopup:function(){return this._popup&&this._popup._close(),this},_openPopup:function(t){this._popup.setLatLng(t.latlng),this._map.openPopup(this._popup)}}),o.Browser.vml=!o.Browser.svg&&function(){try{var t=e.createElement("div");t.innerHTML='<v:shape adj="1"/>';var i=t.firstChild;return i.style.behavior="url(#default#VML)",i&&"object"==typeof i.adj}catch(n){return!1}}(),o.Path=o.Browser.svg||!o.Browser.vml?o.Path:o.Path.extend({statics:{VML:!0,CLIP_PADDING:.02},_createElement:function(){try{return e.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return e.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return e.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),_initPath:function(){var t=this._container=this._createElement("shape");o.DomUtil.addClass(t,"leaflet-vml-shape"+(this.options.className?" "+this.options.className:"")),this.options.clickable&&o.DomUtil.addClass(t,"leaflet-clickable"),t.coordsize="1 1",this._path=this._createElement("path"),t.appendChild(this._path),this._map._pathRoot.appendChild(t)},_initStyle:function(){this._updateStyle()},_updateStyle:function(){var t=this._stroke,e=this._fill,i=this.options,n=this._container;n.stroked=i.stroke,n.filled=i.fill,i.stroke?(t||(t=this._stroke=this._createElement("stroke"),t.endcap="round",n.appendChild(t)),t.weight=i.weight+"px",t.color=i.color,t.opacity=i.opacity,t.dashStyle=i.dashArray?o.Util.isArray(i.dashArray)?i.dashArray.join(" "):i.dashArray.replace(/( *, *)/g," "):"",i.lineCap&&(t.endcap=i.lineCap.replace("butt","flat")),i.lineJoin&&(t.joinstyle=i.lineJoin)):t&&(n.removeChild(t),this._stroke=null),i.fill?(e||(e=this._fill=this._createElement("fill"),n.appendChild(e)),e.color=i.fillColor||i.color,e.opacity=i.fillOpacity):e&&(n.removeChild(e),this._fill=null)},_updatePath:function(){var t=this._container.style;t.display="none",this._path.v=this.getPathString()+" ",t.display=""}}),o.Map.include(o.Browser.svg||!o.Browser.vml?{}:{_initPathRoot:function(){if(!this._pathRoot){var t=this._pathRoot=e.createElement("div");t.className="leaflet-vml-container",this._panes.overlayPane.appendChild(t),this.on("moveend",this._updatePathViewport),this._updatePathViewport()}}}),o.Browser.canvas=function(){return!!e.createElement("canvas").getContext}(),o.Path=o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?o.Path:o.Path.extend({statics:{CANVAS:!0,SVG:!1},redraw:function(){return this._map&&(this.projectLatlngs(),this._requestUpdate()),this},setStyle:function(t){return o.setOptions(this,t),this._map&&(this._updateStyle(),this._requestUpdate()),this},onRemove:function(t){t.off("viewreset",this.projectLatlngs,this).off("moveend",this._updatePath,this),this.options.clickable&&(this._map.off("click",this._onClick,this),this._map.off("mousemove",this._onMouseMove,this)),this._requestUpdate(),this.fire("remove"),this._map=null},_requestUpdate:function(){this._map&&!o.Path._updateRequest&&(o.Path._updateRequest=o.Util.requestAnimFrame(this._fireMapMoveEnd,this._map))},_fireMapMoveEnd:function(){o.Path._updateRequest=null,this.fire("moveend")},_initElements:function(){this._map._initPathRoot(),this._ctx=this._map._canvasCtx},_updateStyle:function(){var t=this.options;t.stroke&&(this._ctx.lineWidth=t.weight,this._ctx.strokeStyle=t.color),t.fill&&(this._ctx.fillStyle=t.fillColor||t.color)},_drawPath:function(){var t,e,i,n,s,a;for(this._ctx.beginPath(),t=0,i=this._parts.length;i>t;t++){for(e=0,n=this._parts[t].length;n>e;e++)s=this._parts[t][e],a=(0===e?"move":"line")+"To",this._ctx[a](s.x,s.y);this instanceof o.Polygon&&this._ctx.closePath()}},_checkIfEmpty:function(){return!this._parts.length},_updatePath:function(){if(!this._checkIfEmpty()){var t=this._ctx,e=this.options;this._drawPath(),t.save(),this._updateStyle(),e.fill&&(t.globalAlpha=e.fillOpacity,t.fill()),e.stroke&&(t.globalAlpha=e.opacity,t.stroke()),t.restore()}},_initEvents:function(){this.options.clickable&&(this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onClick,this))},_onClick:function(t){this._containsPoint(t.layerPoint)&&this.fire("click",t)},_onMouseMove:function(t){this._map&&!this._map._animatingZoom&&(this._containsPoint(t.layerPoint)?(this._ctx.canvas.style.cursor="pointer",this._mouseInside=!0,this.fire("mouseover",t)):this._mouseInside&&(this._ctx.canvas.style.cursor="",this._mouseInside=!1,this.fire("mouseout",t)))}}),o.Map.include(o.Path.SVG&&!t.L_PREFER_CANVAS||!o.Browser.canvas?{}:{_initPathRoot:function(){var t,i=this._pathRoot;i||(i=this._pathRoot=e.createElement("canvas"),i.style.position="absolute",t=this._canvasCtx=i.getContext("2d"),t.lineCap="round",t.lineJoin="round",this._panes.overlayPane.appendChild(i),this.options.zoomAnimation&&(this._pathRoot.className="leaflet-zoom-animated",this.on("zoomanim",this._animatePathZoom),this.on("zoomend",this._endPathZoom)),this.on("moveend",this._updateCanvasViewport),this._updateCanvasViewport())},_updateCanvasViewport:function(){if(!this._pathZooming){this._updatePathViewport();var t=this._pathViewport,e=t.min,i=t.max.subtract(e),n=this._pathRoot;o.DomUtil.setPosition(n,e),n.width=i.x,n.height=i.y,n.getContext("2d").translate(-e.x,-e.y)}}}),o.LineUtil={simplify:function(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=this._reducePoints(t,i),t=this._simplifyDP(t,i)},pointToSegmentDistance:function(t,e,i){return Math.sqrt(this._sqClosestPointOnSegment(t,e,i,!0))},closestPointOnSegment:function(t,e,i){return this._sqClosestPointOnSegment(t,e,i)},_simplifyDP:function(t,e){var n=t.length,o=typeof Uint8Array!=i+""?Uint8Array:Array,s=new o(n);s[0]=s[n-1]=1,this._simplifyDPStep(t,s,e,0,n-1);var a,r=[];for(a=0;n>a;a++)s[a]&&r.push(t[a]);return r},_simplifyDPStep:function(t,e,i,n,o){var s,a,r,h=0;for(a=n+1;o-1>=a;a++)r=this._sqClosestPointOnSegment(t[a],t[n],t[o],!0),r>h&&(s=a,h=r);h>i&&(e[s]=1,this._simplifyDPStep(t,e,i,n,s),this._simplifyDPStep(t,e,i,s,o))},_reducePoints:function(t,e){for(var i=[t[0]],n=1,o=0,s=t.length;s>n;n++)this._sqDist(t[n],t[o])>e&&(i.push(t[n]),o=n);return s-1>o&&i.push(t[s-1]),i},clipSegment:function(t,e,i,n){var o,s,a,r=n?this._lastCode:this._getBitCode(t,i),h=this._getBitCode(e,i);for(this._lastCode=h;;){if(!(r|h))return[t,e];if(r&h)return!1;o=r||h,s=this._getEdgeIntersection(t,e,o,i),a=this._getBitCode(s,i),o===r?(t=s,r=a):(e=s,h=a)}},_getEdgeIntersection:function(t,e,i,n){var s=e.x-t.x,a=e.y-t.y,r=n.min,h=n.max;return 8&i?new o.Point(t.x+s*(h.y-t.y)/a,h.y):4&i?new o.Point(t.x+s*(r.y-t.y)/a,r.y):2&i?new o.Point(h.x,t.y+a*(h.x-t.x)/s):1&i?new o.Point(r.x,t.y+a*(r.x-t.x)/s):void 0},_getBitCode:function(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},_sqClosestPointOnSegment:function(t,e,i,n){var s,a=e.x,r=e.y,h=i.x-a,l=i.y-r,u=h*h+l*l;return u>0&&(s=((t.x-a)*h+(t.y-r)*l)/u,s>1?(a=i.x,r=i.y):s>0&&(a+=h*s,r+=l*s)),h=t.x-a,l=t.y-r,n?h*h+l*l:new o.Point(a,r)}},o.Polyline=o.Path.extend({initialize:function(t,e){o.Path.prototype.initialize.call(this,e),this._latlngs=this._convertLatLngs(t)},options:{smoothFactor:1,noClip:!1},projectLatlngs:function(){this._originalPoints=[];for(var t=0,e=this._latlngs.length;e>t;t++)this._originalPoints[t]=this._map.latLngToLayerPoint(this._latlngs[t])},getPathString:function(){for(var t=0,e=this._parts.length,i="";e>t;t++)i+=this._getPathPartStr(this._parts[t]);return i},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._latlngs=this._convertLatLngs(t),this.redraw()},addLatLng:function(t){return this._latlngs.push(o.latLng(t)),this.redraw()},spliceLatLngs:function(){var t=[].splice.apply(this._latlngs,arguments);return this._convertLatLngs(this._latlngs,!0),this.redraw(),t},closestLayerPoint:function(t){for(var e,i,n=1/0,s=this._parts,a=null,r=0,h=s.length;h>r;r++)for(var l=s[r],u=1,c=l.length;c>u;u++){e=l[u-1],i=l[u];var d=o.LineUtil._sqClosestPointOnSegment(t,e,i,!0);n>d&&(n=d,a=o.LineUtil._sqClosestPointOnSegment(t,e,i))}return a&&(a.distance=Math.sqrt(n)),a},getBounds:function(){return new o.LatLngBounds(this.getLatLngs())},_convertLatLngs:function(t,e){var i,n,s=e?t:[];for(i=0,n=t.length;n>i;i++){if(o.Util.isArray(t[i])&&"number"!=typeof t[i][0])return;s[i]=o.latLng(t[i])}return s},_initEvents:function(){o.Path.prototype._initEvents.call(this)},_getPathPartStr:function(t){for(var e,i=o.Path.VML,n=0,s=t.length,a="";s>n;n++)e=t[n],i&&e._round(),a+=(n?"L":"M")+e.x+" "+e.y;return a},_clipPoints:function(){var t,e,i,n=this._originalPoints,s=n.length;if(this.options.noClip)return void(this._parts=[n]);this._parts=[];var a=this._parts,r=this._map._pathViewport,h=o.LineUtil;for(t=0,e=0;s-1>t;t++)i=h.clipSegment(n[t],n[t+1],r,t),i&&(a[e]=a[e]||[],a[e].push(i[0]),(i[1]!==n[t+1]||t===s-2)&&(a[e].push(i[1]),e++))},_simplifyPoints:function(){for(var t=this._parts,e=o.LineUtil,i=0,n=t.length;n>i;i++)t[i]=e.simplify(t[i],this.options.smoothFactor)},_updatePath:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),o.Path.prototype._updatePath.call(this))}}),o.polyline=function(t,e){return new o.Polyline(t,e)},o.PolyUtil={},o.PolyUtil.clipPolygon=function(t,e){var i,n,s,a,r,h,l,u,c,d=[1,4,2,8],p=o.LineUtil;for(n=0,l=t.length;l>n;n++)t[n]._code=p._getBitCode(t[n],e);for(a=0;4>a;a++){for(u=d[a],i=[],n=0,l=t.length,s=l-1;l>n;s=n++)r=t[n],h=t[s],r._code&u?h._code&u||(c=p._getEdgeIntersection(h,r,u,e),c._code=p._getBitCode(c,e),i.push(c)):(h._code&u&&(c=p._getEdgeIntersection(h,r,u,e),c._code=p._getBitCode(c,e),i.push(c)),i.push(r));t=i}return t},o.Polygon=o.Polyline.extend({options:{fill:!0},initialize:function(t,e){o.Polyline.prototype.initialize.call(this,t,e),this._initWithHoles(t)},_initWithHoles:function(t){var e,i,n;if(t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0])for(this._latlngs=this._convertLatLngs(t[0]),this._holes=t.slice(1),e=0,i=this._holes.length;i>e;e++)n=this._holes[e]=this._convertLatLngs(this._holes[e]),n[0].equals(n[n.length-1])&&n.pop();t=this._latlngs,t.length>=2&&t[0].equals(t[t.length-1])&&t.pop()},projectLatlngs:function(){if(o.Polyline.prototype.projectLatlngs.call(this),this._holePoints=[],this._holes){var t,e,i,n;for(t=0,i=this._holes.length;i>t;t++)for(this._holePoints[t]=[],e=0,n=this._holes[t].length;n>e;e++)this._holePoints[t][e]=this._map.latLngToLayerPoint(this._holes[t][e])}},setLatLngs:function(t){return t&&o.Util.isArray(t[0])&&"number"!=typeof t[0][0]?(this._initWithHoles(t),this.redraw()):o.Polyline.prototype.setLatLngs.call(this,t)},_clipPoints:function(){var t=this._originalPoints,e=[];if(this._parts=[t].concat(this._holePoints),!this.options.noClip){for(var i=0,n=this._parts.length;n>i;i++){var s=o.PolyUtil.clipPolygon(this._parts[i],this._map._pathViewport);s.length&&e.push(s)}this._parts=e}},_getPathPartStr:function(t){var e=o.Polyline.prototype._getPathPartStr.call(this,t);return e+(o.Browser.svg?"z":"x")}}),o.polygon=function(t,e){return new o.Polygon(t,e)},function(){function t(t){return o.FeatureGroup.extend({initialize:function(t,e){this._layers={},this._options=e,this.setLatLngs(t)},setLatLngs:function(e){var i=0,n=e.length;for(this.eachLayer(function(t){n>i?t.setLatLngs(e[i++]):this.removeLayer(t)},this);n>i;)this.addLayer(new t(e[i++],this._options));return this},getLatLngs:function(){var t=[];return this.eachLayer(function(e){t.push(e.getLatLngs())}),t}})}o.MultiPolyline=t(o.Polyline),o.MultiPolygon=t(o.Polygon),o.multiPolyline=function(t,e){return new o.MultiPolyline(t,e)},o.multiPolygon=function(t,e){return new o.MultiPolygon(t,e)}}(),o.Rectangle=o.Polygon.extend({initialize:function(t,e){o.Polygon.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=o.latLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}}),o.rectangle=function(t,e){return new o.Rectangle(t,e)},o.Circle=o.Path.extend({initialize:function(t,e,i){o.Path.prototype.initialize.call(this,i),this._latlng=o.latLng(t),this._mRadius=e},options:{fill:!0},setLatLng:function(t){return this._latlng=o.latLng(t),this.redraw()},setRadius:function(t){return this._mRadius=t,this.redraw()},projectLatlngs:function(){var t=this._getLngRadius(),e=this._latlng,i=this._map.latLngToLayerPoint([e.lat,e.lng-t]);this._point=this._map.latLngToLayerPoint(e),this._radius=Math.max(this._point.x-i.x,1)},getBounds:function(){var t=this._getLngRadius(),e=this._mRadius/40075017*360,i=this._latlng;return new o.LatLngBounds([i.lat-e,i.lng-t],[i.lat+e,i.lng+t])},getLatLng:function(){return this._latlng},getPathString:function(){var t=this._point,e=this._radius;return this._checkIfEmpty()?"":o.Browser.svg?"M"+t.x+","+(t.y-e)+"A"+e+","+e+",0,1,1,"+(t.x-.1)+","+(t.y-e)+" z":(t._round(),e=Math.round(e),"AL "+t.x+","+t.y+" "+e+","+e+" 0,23592600")},getRadius:function(){return this._mRadius},_getLatRadius:function(){return this._mRadius/40075017*360},_getLngRadius:function(){return this._getLatRadius()/Math.cos(o.LatLng.DEG_TO_RAD*this._latlng.lat)},_checkIfEmpty:function(){if(!this._map)return!1;var t=this._map._pathViewport,e=this._radius,i=this._point;return i.x-e>t.max.x||i.y-e>t.max.y||i.x+e<t.min.x||i.y+e<t.min.y}}),o.circle=function(t,e,i){return new o.Circle(t,e,i)},o.CircleMarker=o.Circle.extend({options:{radius:10,weight:2},initialize:function(t,e){o.Circle.prototype.initialize.call(this,t,null,e),this._radius=this.options.radius},projectLatlngs:function(){this._point=this._map.latLngToLayerPoint(this._latlng)},_updateStyle:function(){o.Circle.prototype._updateStyle.call(this),this.setRadius(this.options.radius)},setLatLng:function(t){return o.Circle.prototype.setLatLng.call(this,t),this._popup&&this._popup._isOpen&&this._popup.setLatLng(t),this},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius}}),o.circleMarker=function(t,e){return new o.CircleMarker(t,e)},o.Polyline.include(o.Path.CANVAS?{_containsPoint:function(t,e){var i,n,s,a,r,h,l,u=this.options.weight/2;for(o.Browser.touch&&(u+=10),i=0,a=this._parts.length;a>i;i++)for(l=this._parts[i],n=0,r=l.length,s=r-1;r>n;s=n++)if((e||0!==n)&&(h=o.LineUtil.pointToSegmentDistance(t,l[s],l[n]),u>=h))return!0;return!1}}:{}),o.Polygon.include(o.Path.CANVAS?{_containsPoint:function(t){var e,i,n,s,a,r,h,l,u=!1;if(o.Polyline.prototype._containsPoint.call(this,t,!0))return!0;for(s=0,h=this._parts.length;h>s;s++)for(e=this._parts[s],a=0,l=e.length,r=l-1;l>a;r=a++)i=e[a],n=e[r],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u}}:{}),o.Circle.include(o.Path.CANVAS?{_drawPath:function(){var t=this._point;this._ctx.beginPath(),this._ctx.arc(t.x,t.y,this._radius,0,2*Math.PI,!1)},_containsPoint:function(t){var e=this._point,i=this.options.stroke?this.options.weight/2:0;return t.distanceTo(e)<=this._radius+i}}:{}),o.CircleMarker.include(o.Path.CANVAS?{_updateStyle:function(){o.Path.prototype._updateStyle.call(this)}}:{}),o.GeoJSON=o.FeatureGroup.extend({initialize:function(t,e){o.setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,s=o.Util.isArray(t)?t:t.features;if(s){for(e=0,i=s.length;i>e;e++)n=s[e],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(s[e]);return this}var a=this.options;if(!a.filter||a.filter(t)){var r=o.GeoJSON.geometryToLayer(t,a.pointToLayer,a.coordsToLatLng,a);return r.feature=o.GeoJSON.asFeature(t),r.defaultOptions=r.options,this.resetStyle(r),a.onEachFeature&&a.onEachFeature(t,r),this.addLayer(r)}},resetStyle:function(t){var e=this.options.style;e&&(o.Util.extend(t.options,t.defaultOptions),this._setLayerStyle(t,e))},setStyle:function(t){this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),o.extend(o.GeoJSON,{geometryToLayer:function(t,e,i,n){var s,a,r,h,l="Feature"===t.type?t.geometry:t,u=l.coordinates,c=[];switch(i=i||this.coordsToLatLng,l.type){case"Point":return s=i(u),e?e(t,s):new o.Marker(s);case"MultiPoint":for(r=0,h=u.length;h>r;r++)s=i(u[r]),c.push(e?e(t,s):new o.Marker(s));return new o.FeatureGroup(c);case"LineString":return a=this.coordsToLatLngs(u,0,i),new o.Polyline(a,n);case"Polygon":if(2===u.length&&!u[1].length)throw new Error("Invalid GeoJSON object.");return a=this.coordsToLatLngs(u,1,i),new o.Polygon(a,n);case"MultiLineString":return a=this.coordsToLatLngs(u,1,i),new o.MultiPolyline(a,n);case"MultiPolygon":return a=this.coordsToLatLngs(u,2,i),new o.MultiPolygon(a,n);case"GeometryCollection":for(r=0,h=l.geometries.length;h>r;r++)c.push(this.geometryToLayer({geometry:l.geometries[r],type:"Feature",properties:t.properties},e,i,n));return new o.FeatureGroup(c);default:throw new Error("Invalid GeoJSON object.")}},coordsToLatLng:function(t){return new o.LatLng(t[1],t[0],t[2])},coordsToLatLngs:function(t,e,i){var n,o,s,a=[];for(o=0,s=t.length;s>o;o++)n=e?this.coordsToLatLngs(t[o],e-1,i):(i||this.coordsToLatLng)(t[o]),a.push(n);return a},latLngToCoords:function(t){var e=[t.lng,t.lat];return t.alt!==i&&e.push(t.alt),e},latLngsToCoords:function(t){for(var e=[],i=0,n=t.length;n>i;i++)e.push(o.GeoJSON.latLngToCoords(t[i]));return e},getFeature:function(t,e){return t.feature?o.extend({},t.feature,{geometry:e}):o.GeoJSON.asFeature(e)},asFeature:function(t){return"Feature"===t.type?t:{type:"Feature",properties:{},geometry:t}}});var a={toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"Point",coordinates:o.GeoJSON.latLngToCoords(this.getLatLng())})}};o.Marker.include(a),o.Circle.include(a),o.CircleMarker.include(a),o.Polyline.include({toGeoJSON:function(){return o.GeoJSON.getFeature(this,{type:"LineString",coordinates:o.GeoJSON.latLngsToCoords(this.getLatLngs())})}}),o.Polygon.include({toGeoJSON:function(){var t,e,i,n=[o.GeoJSON.latLngsToCoords(this.getLatLngs())];if(n[0].push(n[0][0]),this._holes)for(t=0,e=this._holes.length;e>t;t++)i=o.GeoJSON.latLngsToCoords(this._holes[t]),i.push(i[0]),n.push(i);return o.GeoJSON.getFeature(this,{type:"Polygon",coordinates:n})}}),function(){function t(t){return function(){var e=[];return this.eachLayer(function(t){e.push(t.toGeoJSON().geometry.coordinates)}),o.GeoJSON.getFeature(this,{type:t,coordinates:e})}}o.MultiPolyline.include({toGeoJSON:t("MultiLineString")}),o.MultiPolygon.include({toGeoJSON:t("MultiPolygon")}),o.LayerGroup.include({toGeoJSON:function(){var e,i=this.feature&&this.feature.geometry,n=[];if(i&&"MultiPoint"===i.type)return t("MultiPoint").call(this);var s=i&&"GeometryCollection"===i.type;return this.eachLayer(function(t){t.toGeoJSON&&(e=t.toGeoJSON(),n.push(s?e.geometry:o.GeoJSON.asFeature(e)))}),s?o.GeoJSON.getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}})}(),o.geoJson=function(t,e){return new o.GeoJSON(t,e)},o.DomEvent={addListener:function(t,e,i,n){var s,a,r,h=o.stamp(i),l="_leaflet_"+e+h;return t[l]?this:(s=function(e){return i.call(n||t,e||o.DomEvent._getEvent())},o.Browser.pointer&&0===e.indexOf("touch")?this.addPointerListener(t,e,s,h):(o.Browser.touch&&"dblclick"===e&&this.addDoubleTapListener&&this.addDoubleTapListener(t,s,h),"addEventListener"in t?"mousewheel"===e?(t.addEventListener("DOMMouseScroll",s,!1),t.addEventListener(e,s,!1)):"mouseenter"===e||"mouseleave"===e?(a=s,r="mouseenter"===e?"mouseover":"mouseout",s=function(e){return o.DomEvent._checkMouse(t,e)?a(e):void 0},t.addEventListener(r,s,!1)):"click"===e&&o.Browser.android?(a=s,s=function(t){return o.DomEvent._filterClick(t,a)},t.addEventListener(e,s,!1)):t.addEventListener(e,s,!1):"attachEvent"in t&&t.attachEvent("on"+e,s),t[l]=s,this))},removeListener:function(t,e,i){var n=o.stamp(i),s="_leaflet_"+e+n,a=t[s];return a?(o.Browser.pointer&&0===e.indexOf("touch")?this.removePointerListener(t,e,n):o.Browser.touch&&"dblclick"===e&&this.removeDoubleTapListener?this.removeDoubleTapListener(t,n):"removeEventListener"in t?"mousewheel"===e?(t.removeEventListener("DOMMouseScroll",a,!1),t.removeEventListener(e,a,!1)):"mouseenter"===e||"mouseleave"===e?t.removeEventListener("mouseenter"===e?"mouseover":"mouseout",a,!1):t.removeEventListener(e,a,!1):"detachEvent"in t&&t.detachEvent("on"+e,a),t[s]=null,this):this},stopPropagation:function(t){return t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,o.DomEvent._skipped(t),this},disableScrollPropagation:function(t){var e=o.DomEvent.stopPropagation;return o.DomEvent.on(t,"mousewheel",e).on(t,"MozMousePixelScroll",e)},disableClickPropagation:function(t){for(var e=o.DomEvent.stopPropagation,i=o.Draggable.START.length-1;i>=0;i--)o.DomEvent.on(t,o.Draggable.START[i],e);return o.DomEvent.on(t,"click",o.DomEvent._fakeStop).on(t,"dblclick",e)},preventDefault:function(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this},stop:function(t){return o.DomEvent.preventDefault(t).stopPropagation(t)},getMousePosition:function(t,e){if(!e)return new o.Point(t.clientX,t.clientY);var i=e.getBoundingClientRect();return new o.Point(t.clientX-i.left-e.clientLeft,t.clientY-i.top-e.clientTop)},getWheelDelta:function(t){var e=0;return t.wheelDelta&&(e=t.wheelDelta/120),t.detail&&(e=-t.detail/3),e},_skipEvents:{},_fakeStop:function(t){o.DomEvent._skipEvents[t.type]=!0},_skipped:function(t){var e=this._skipEvents[t.type];return this._skipEvents[t.type]=!1,e},_checkMouse:function(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(n){return!1}return i!==t},_getEvent:function(){var e=t.event;if(!e)for(var i=arguments.callee.caller;i&&(e=i.arguments[0],!e||t.Event!==e.constructor);)i=i.caller;return e
},_filterClick:function(t,e){var i=t.timeStamp||t.originalEvent.timeStamp,n=o.DomEvent._lastClick&&i-o.DomEvent._lastClick;return n&&n>100&&500>n||t.target._simulatedClick&&!t._simulated?void o.DomEvent.stop(t):(o.DomEvent._lastClick=i,e(t))}},o.DomEvent.on=o.DomEvent.addListener,o.DomEvent.off=o.DomEvent.removeListener,o.Draggable=o.Class.extend({includes:o.Mixin.Events,statics:{START:o.Browser.touch?["touchstart","mousedown"]:["mousedown"],END:{mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},MOVE:{mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"}},initialize:function(t,e){this._element=t,this._dragStartTarget=e||t},enable:function(){if(!this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.on(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!0}},disable:function(){if(this._enabled){for(var t=o.Draggable.START.length-1;t>=0;t--)o.DomEvent.off(this._dragStartTarget,o.Draggable.START[t],this._onDown,this);this._enabled=!1,this._moved=!1}},_onDown:function(t){if(this._moved=!1,!(t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(o.DomEvent.stopPropagation(t),o.Draggable._disabled||(o.DomUtil.disableImageDrag(),o.DomUtil.disableTextSelection(),this._moving)))){var i=t.touches?t.touches[0]:t;this._startPoint=new o.Point(i.clientX,i.clientY),this._startPos=this._newPos=o.DomUtil.getPosition(this._element),o.DomEvent.on(e,o.Draggable.MOVE[t.type],this._onMove,this).on(e,o.Draggable.END[t.type],this._onUp,this)}},_onMove:function(t){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var i=t.touches&&1===t.touches.length?t.touches[0]:t,n=new o.Point(i.clientX,i.clientY),s=n.subtract(this._startPoint);(s.x||s.y)&&(o.Browser.touch&&Math.abs(s.x)+Math.abs(s.y)<3||(o.DomEvent.preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=o.DomUtil.getPosition(this._element).subtract(s),o.DomUtil.addClass(e.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,o.DomUtil.addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(s),this._moving=!0,o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updatePosition,this,!0,this._dragStartTarget)))},_updatePosition:function(){this.fire("predrag"),o.DomUtil.setPosition(this._element,this._newPos),this.fire("drag")},_onUp:function(){o.DomUtil.removeClass(e.body,"leaflet-dragging"),this._lastTarget&&(o.DomUtil.removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in o.Draggable.MOVE)o.DomEvent.off(e,o.Draggable.MOVE[t],this._onMove).off(e,o.Draggable.END[t],this._onUp);o.DomUtil.enableImageDrag(),o.DomUtil.enableTextSelection(),this._moved&&this._moving&&(o.Util.cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1}}),o.Handler=o.Class.extend({initialize:function(t){this._map=t},enable:function(){this._enabled||(this._enabled=!0,this.addHooks())},disable:function(){this._enabled&&(this._enabled=!1,this.removeHooks())},enabled:function(){return!!this._enabled}}),o.Map.mergeOptions({dragging:!0,inertia:!o.Browser.android23,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,inertiaThreshold:o.Browser.touch?32:18,easeLinearity:.25,worldCopyJump:!1}),o.Map.Drag=o.Handler.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new o.Draggable(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDrag,this),t.on("viewreset",this._onViewReset,this),t.whenReady(this._onViewReset,this))}this._draggable.enable()},removeHooks:function(){this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){var t=this._map;t._panAnim&&t._panAnim.stop(),t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(){if(this._map.options.inertia){var t=this._lastTime=+new Date,e=this._lastPos=this._draggable._newPos;this._positions.push(e),this._times.push(t),t-this._times[0]>200&&(this._positions.shift(),this._times.shift())}this._map.fire("move").fire("drag")},_onViewReset:function(){var t=this._map.getSize()._divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.project([0,180]).x},_onPreDrag:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,o=(n-e+i)%t+e-i,s=(n+e+i)%t-e-i,a=Math.abs(o+i)<Math.abs(s+i)?o:s;this._draggable._newPos.x=a},_onDragEnd:function(t){var e=this._map,i=e.options,n=+new Date-this._lastTime,s=!i.inertia||n>i.inertiaThreshold||!this._positions[0];if(e.fire("dragend",t),s)e.fire("moveend");else{var a=this._lastPos.subtract(this._positions[0]),r=(this._lastTime+n-this._times[0])/1e3,h=i.easeLinearity,l=a.multiplyBy(h/r),u=l.distanceTo([0,0]),c=Math.min(i.inertiaMaxSpeed,u),d=l.multiplyBy(c/u),p=c/(i.inertiaDeceleration*h),_=d.multiplyBy(-p/2).round();_.x&&_.y?(_=e._limitOffset(_,e.options.maxBounds),o.Util.requestAnimFrame(function(){e.panBy(_,{duration:p,easeLinearity:h,noMoveStart:!0})})):e.fire("moveend")}}}),o.Map.addInitHook("addHandler","dragging",o.Map.Drag),o.Map.mergeOptions({doubleClickZoom:!0}),o.Map.DoubleClickZoom=o.Handler.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom()+(t.originalEvent.shiftKey?-1:1);"center"===e.options.doubleClickZoom?e.setZoom(i):e.setZoomAround(t.containerPoint,i)}}),o.Map.addInitHook("addHandler","doubleClickZoom",o.Map.DoubleClickZoom),o.Map.mergeOptions({scrollWheelZoom:!0}),o.Map.ScrollWheelZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"mousewheel",this._onWheelScroll,this),o.DomEvent.on(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault),this._delta=0},removeHooks:function(){o.DomEvent.off(this._map._container,"mousewheel",this._onWheelScroll),o.DomEvent.off(this._map._container,"MozMousePixelScroll",o.DomEvent.preventDefault)},_onWheelScroll:function(t){var e=o.DomEvent.getWheelDelta(t);this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var i=Math.max(40-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(o.bind(this._performZoom,this),i),o.DomEvent.preventDefault(t),o.DomEvent.stopPropagation(t)},_performZoom:function(){var t=this._map,e=this._delta,i=t.getZoom();e=e>0?Math.ceil(e):Math.floor(e),e=Math.max(Math.min(e,4),-4),e=t._limitZoom(i+e)-i,this._delta=0,this._startTime=null,e&&("center"===t.options.scrollWheelZoom?t.setZoom(i+e):t.setZoomAround(this._lastMousePos,i+e))}}),o.Map.addInitHook("addHandler","scrollWheelZoom",o.Map.ScrollWheelZoom),o.extend(o.DomEvent,{_touchstart:o.Browser.msPointer?"MSPointerDown":o.Browser.pointer?"pointerdown":"touchstart",_touchend:o.Browser.msPointer?"MSPointerUp":o.Browser.pointer?"pointerup":"touchend",addDoubleTapListener:function(t,i,n){function s(t){var e;if(o.Browser.pointer?(_.push(t.pointerId),e=_.length):e=t.touches.length,!(e>1)){var i=Date.now(),n=i-(r||i);h=t.touches?t.touches[0]:t,l=n>0&&u>=n,r=i}}function a(t){if(o.Browser.pointer){var e=_.indexOf(t.pointerId);if(-1===e)return;_.splice(e,1)}if(l){if(o.Browser.pointer){var n,s={};for(var a in h)n=h[a],s[a]="function"==typeof n?n.bind(h):n;h=s}h.type="dblclick",i(h),r=null}}var r,h,l=!1,u=250,c="_leaflet_",d=this._touchstart,p=this._touchend,_=[];t[c+d+n]=s,t[c+p+n]=a;var m=o.Browser.pointer?e.documentElement:t;return t.addEventListener(d,s,!1),m.addEventListener(p,a,!1),o.Browser.pointer&&m.addEventListener(o.DomEvent.POINTER_CANCEL,a,!1),this},removeDoubleTapListener:function(t,i){var n="_leaflet_";return t.removeEventListener(this._touchstart,t[n+this._touchstart+i],!1),(o.Browser.pointer?e.documentElement:t).removeEventListener(this._touchend,t[n+this._touchend+i],!1),o.Browser.pointer&&e.documentElement.removeEventListener(o.DomEvent.POINTER_CANCEL,t[n+this._touchend+i],!1),this}}),o.extend(o.DomEvent,{POINTER_DOWN:o.Browser.msPointer?"MSPointerDown":"pointerdown",POINTER_MOVE:o.Browser.msPointer?"MSPointerMove":"pointermove",POINTER_UP:o.Browser.msPointer?"MSPointerUp":"pointerup",POINTER_CANCEL:o.Browser.msPointer?"MSPointerCancel":"pointercancel",_pointers:[],_pointerDocumentListener:!1,addPointerListener:function(t,e,i,n){switch(e){case"touchstart":return this.addPointerListenerStart(t,e,i,n);case"touchend":return this.addPointerListenerEnd(t,e,i,n);case"touchmove":return this.addPointerListenerMove(t,e,i,n);default:throw"Unknown touch event type"}},addPointerListenerStart:function(t,i,n,s){var a="_leaflet_",r=this._pointers,h=function(t){o.DomEvent.preventDefault(t);for(var e=!1,i=0;i<r.length;i++)if(r[i].pointerId===t.pointerId){e=!0;break}e||r.push(t),t.touches=r.slice(),t.changedTouches=[t],n(t)};if(t[a+"touchstart"+s]=h,t.addEventListener(this.POINTER_DOWN,h,!1),!this._pointerDocumentListener){var l=function(t){for(var e=0;e<r.length;e++)if(r[e].pointerId===t.pointerId){r.splice(e,1);break}};e.documentElement.addEventListener(this.POINTER_UP,l,!1),e.documentElement.addEventListener(this.POINTER_CANCEL,l,!1),this._pointerDocumentListener=!0}return this},addPointerListenerMove:function(t,e,i,n){function o(t){if(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons){for(var e=0;e<a.length;e++)if(a[e].pointerId===t.pointerId){a[e]=t;break}t.touches=a.slice(),t.changedTouches=[t],i(t)}}var s="_leaflet_",a=this._pointers;return t[s+"touchmove"+n]=o,t.addEventListener(this.POINTER_MOVE,o,!1),this},addPointerListenerEnd:function(t,e,i,n){var o="_leaflet_",s=this._pointers,a=function(t){for(var e=0;e<s.length;e++)if(s[e].pointerId===t.pointerId){s.splice(e,1);break}t.touches=s.slice(),t.changedTouches=[t],i(t)};return t[o+"touchend"+n]=a,t.addEventListener(this.POINTER_UP,a,!1),t.addEventListener(this.POINTER_CANCEL,a,!1),this},removePointerListener:function(t,e,i){var n="_leaflet_",o=t[n+e+i];switch(e){case"touchstart":t.removeEventListener(this.POINTER_DOWN,o,!1);break;case"touchmove":t.removeEventListener(this.POINTER_MOVE,o,!1);break;case"touchend":t.removeEventListener(this.POINTER_UP,o,!1),t.removeEventListener(this.POINTER_CANCEL,o,!1)}return this}}),o.Map.mergeOptions({touchZoom:o.Browser.touch&&!o.Browser.android23,bounceAtZoomLimits:!0}),o.Map.TouchZoom=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var i=this._map;if(t.touches&&2===t.touches.length&&!i._animatingZoom&&!this._zooming){var n=i.mouseEventToLayerPoint(t.touches[0]),s=i.mouseEventToLayerPoint(t.touches[1]),a=i._getCenterLayerPoint();this._startCenter=n.add(s)._divideBy(2),this._startDist=n.distanceTo(s),this._moved=!1,this._zooming=!0,this._centerOffset=a.subtract(this._startCenter),i._panAnim&&i._panAnim.stop(),o.DomEvent.on(e,"touchmove",this._onTouchMove,this).on(e,"touchend",this._onTouchEnd,this),o.DomEvent.preventDefault(t)}},_onTouchMove:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&this._zooming){var i=e.mouseEventToLayerPoint(t.touches[0]),n=e.mouseEventToLayerPoint(t.touches[1]);this._scale=i.distanceTo(n)/this._startDist,this._delta=i._add(n)._divideBy(2)._subtract(this._startCenter),1!==this._scale&&(e.options.bounceAtZoomLimits||!(e.getZoom()===e.getMinZoom()&&this._scale<1||e.getZoom()===e.getMaxZoom()&&this._scale>1))&&(this._moved||(o.DomUtil.addClass(e._mapPane,"leaflet-touching"),e.fire("movestart").fire("zoomstart"),this._moved=!0),o.Util.cancelAnimFrame(this._animRequest),this._animRequest=o.Util.requestAnimFrame(this._updateOnMove,this,!0,this._map._container),o.DomEvent.preventDefault(t))}},_updateOnMove:function(){var t=this._map,e=this._getScaleOrigin(),i=t.layerPointToLatLng(e),n=t.getScaleZoom(this._scale);t._animateZoom(i,n,this._startCenter,this._scale,this._delta,!1,!0)},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);var t=this._map;this._zooming=!1,o.DomUtil.removeClass(t._mapPane,"leaflet-touching"),o.Util.cancelAnimFrame(this._animRequest),o.DomEvent.off(e,"touchmove",this._onTouchMove).off(e,"touchend",this._onTouchEnd);var i=this._getScaleOrigin(),n=t.layerPointToLatLng(i),s=t.getZoom(),a=t.getScaleZoom(this._scale)-s,r=a>0?Math.ceil(a):Math.floor(a),h=t._limitZoom(s+r),l=t.getZoomScale(h)/this._scale;t._animateZoom(n,h,i,l)},_getScaleOrigin:function(){var t=this._centerOffset.subtract(this._delta).divideBy(this._scale);return this._startCenter.add(t)}}),o.Map.addInitHook("addHandler","touchZoom",o.Map.TouchZoom),o.Map.mergeOptions({tap:!0,tapTolerance:15}),o.Map.Tap=o.Handler.extend({addHooks:function(){o.DomEvent.on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){o.DomEvent.off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(o.DomEvent.preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var i=t.touches[0],n=i.target;this._startPos=this._newPos=new o.Point(i.clientX,i.clientY),n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.addClass(n,"leaflet-active"),this._holdTimeout=setTimeout(o.bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",i))},this),1e3),o.DomEvent.on(e,"touchmove",this._onMove,this).on(e,"touchend",this._onUp,this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),o.DomEvent.off(e,"touchmove",this._onMove,this).off(e,"touchend",this._onUp,this),this._fireClick&&t&&t.changedTouches){var i=t.changedTouches[0],n=i.target;n&&n.tagName&&"a"===n.tagName.toLowerCase()&&o.DomUtil.removeClass(n,"leaflet-active"),this._isTapValid()&&this._simulateEvent("click",i)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new o.Point(e.clientX,e.clientY)},_simulateEvent:function(i,n){var o=e.createEvent("MouseEvents");o._simulated=!0,n.target._simulatedClick=!0,o.initMouseEvent(i,!0,!0,t,1,n.screenX,n.screenY,n.clientX,n.clientY,!1,!1,!1,!1,0,null),n.target.dispatchEvent(o)}}),o.Browser.touch&&!o.Browser.pointer&&o.Map.addInitHook("addHandler","tap",o.Map.Tap),o.Map.mergeOptions({boxZoom:!0}),o.Map.BoxZoom=o.Handler.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._moved=!1},addHooks:function(){o.DomEvent.on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){o.DomEvent.off(this._container,"mousedown",this._onMouseDown),this._moved=!1},moved:function(){return this._moved},_onMouseDown:function(t){return this._moved=!1,!t.shiftKey||1!==t.which&&1!==t.button?!1:(o.DomUtil.disableTextSelection(),o.DomUtil.disableImageDrag(),this._startLayerPoint=this._map.mouseEventToLayerPoint(t),void o.DomEvent.on(e,"mousemove",this._onMouseMove,this).on(e,"mouseup",this._onMouseUp,this).on(e,"keydown",this._onKeyDown,this))},_onMouseMove:function(t){this._moved||(this._box=o.DomUtil.create("div","leaflet-zoom-box",this._pane),o.DomUtil.setPosition(this._box,this._startLayerPoint),this._container.style.cursor="crosshair",this._map.fire("boxzoomstart"));var e=this._startLayerPoint,i=this._box,n=this._map.mouseEventToLayerPoint(t),s=n.subtract(e),a=new o.Point(Math.min(n.x,e.x),Math.min(n.y,e.y));o.DomUtil.setPosition(i,a),this._moved=!0,i.style.width=Math.max(0,Math.abs(s.x)-4)+"px",i.style.height=Math.max(0,Math.abs(s.y)-4)+"px"},_finish:function(){this._moved&&(this._pane.removeChild(this._box),this._container.style.cursor=""),o.DomUtil.enableTextSelection(),o.DomUtil.enableImageDrag(),o.DomEvent.off(e,"mousemove",this._onMouseMove).off(e,"mouseup",this._onMouseUp).off(e,"keydown",this._onKeyDown)},_onMouseUp:function(t){this._finish();var e=this._map,i=e.mouseEventToLayerPoint(t);if(!this._startLayerPoint.equals(i)){var n=new o.LatLngBounds(e.layerPointToLatLng(this._startLayerPoint),e.layerPointToLatLng(i));e.fitBounds(n),e.fire("boxzoomend",{boxZoomBounds:n})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}}),o.Map.addInitHook("addHandler","boxZoom",o.Map.BoxZoom),o.Map.mergeOptions({keyboard:!0,keyboardPanOffset:80,keyboardZoomOffset:1}),o.Map.Keyboard=o.Handler.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,173]},initialize:function(t){this._map=t,this._setPanOffset(t.options.keyboardPanOffset),this._setZoomOffset(t.options.keyboardZoomOffset)},addHooks:function(){var t=this._map._container;-1===t.tabIndex&&(t.tabIndex="0"),o.DomEvent.on(t,"focus",this._onFocus,this).on(t,"blur",this._onBlur,this).on(t,"mousedown",this._onMouseDown,this),this._map.on("focus",this._addHooks,this).on("blur",this._removeHooks,this)},removeHooks:function(){this._removeHooks();var t=this._map._container;o.DomEvent.off(t,"focus",this._onFocus,this).off(t,"blur",this._onBlur,this).off(t,"mousedown",this._onMouseDown,this),this._map.off("focus",this._addHooks,this).off("blur",this._removeHooks,this)},_onMouseDown:function(){if(!this._focused){var i=e.body,n=e.documentElement,o=i.scrollTop||n.scrollTop,s=i.scrollLeft||n.scrollLeft;this._map._container.focus(),t.scrollTo(s,o)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanOffset:function(t){var e,i,n=this._panKeys={},o=this.keyCodes;for(e=0,i=o.left.length;i>e;e++)n[o.left[e]]=[-1*t,0];for(e=0,i=o.right.length;i>e;e++)n[o.right[e]]=[t,0];for(e=0,i=o.down.length;i>e;e++)n[o.down[e]]=[0,t];for(e=0,i=o.up.length;i>e;e++)n[o.up[e]]=[0,-1*t]},_setZoomOffset:function(t){var e,i,n=this._zoomKeys={},o=this.keyCodes;for(e=0,i=o.zoomIn.length;i>e;e++)n[o.zoomIn[e]]=t;for(e=0,i=o.zoomOut.length;i>e;e++)n[o.zoomOut[e]]=-t},_addHooks:function(){o.DomEvent.on(e,"keydown",this._onKeyDown,this)},_removeHooks:function(){o.DomEvent.off(e,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){var e=t.keyCode,i=this._map;if(e in this._panKeys){if(i._panAnim&&i._panAnim._inProgress)return;i.panBy(this._panKeys[e]),i.options.maxBounds&&i.panInsideBounds(i.options.maxBounds)}else{if(!(e in this._zoomKeys))return;i.setZoom(i.getZoom()+this._zoomKeys[e])}o.DomEvent.stop(t)}}),o.Map.addInitHook("addHandler","keyboard",o.Map.Keyboard),o.Handler.MarkerDrag=o.Handler.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new o.Draggable(t,t)),this._draggable.on("dragstart",this._onDragStart,this).on("drag",this._onDrag,this).on("dragend",this._onDragEnd,this),this._draggable.enable(),o.DomUtil.addClass(this._marker._icon,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off("dragstart",this._onDragStart,this).off("drag",this._onDrag,this).off("dragend",this._onDragEnd,this),this._draggable.disable(),o.DomUtil.removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_onDragStart:function(){this._marker.closePopup().fire("movestart").fire("dragstart")},_onDrag:function(){var t=this._marker,e=t._shadow,i=o.DomUtil.getPosition(t._icon),n=t._map.layerPointToLatLng(i);e&&o.DomUtil.setPosition(e,i),t._latlng=n,t.fire("move",{latlng:n}).fire("drag")},_onDragEnd:function(t){this._marker.fire("moveend").fire("dragend",t)}}),o.Control=o.Class.extend({options:{position:"topright"},initialize:function(t){o.setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return o.DomUtil.addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},removeFrom:function(t){var e=this.getPosition(),i=t._controlCorners[e];return i.removeChild(this._container),this._map=null,this.onRemove&&this.onRemove(t),this},_refocusOnMap:function(){this._map&&this._map.getContainer().focus()}}),o.control=function(t){return new o.Control(t)},o.Map.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.removeFrom(this),this},_initControlPos:function(){function t(t,s){var a=i+t+" "+i+s;e[t+s]=o.DomUtil.create("div",a,n)}var e=this._controlCorners={},i="leaflet-",n=this._controlContainer=o.DomUtil.create("div",i+"control-container",this._container);t("top","left"),t("top","right"),t("bottom","left"),t("bottom","right")},_clearControlPos:function(){this._container.removeChild(this._controlContainer)}}),o.Control.Zoom=o.Control.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"-",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=o.DomUtil.create("div",e+" leaflet-bar");return this._map=t,this._zoomInButton=this._createButton(this.options.zoomInText,this.options.zoomInTitle,e+"-in",i,this._zoomIn,this),this._zoomOutButton=this._createButton(this.options.zoomOutText,this.options.zoomOutTitle,e+"-out",i,this._zoomOut,this),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},_zoomIn:function(t){this._map.zoomIn(t.shiftKey?3:1)},_zoomOut:function(t){this._map.zoomOut(t.shiftKey?3:1)},_createButton:function(t,e,i,n,s,a){var r=o.DomUtil.create("a",i,n);r.innerHTML=t,r.href="#",r.title=e;var h=o.DomEvent.stopPropagation;return o.DomEvent.on(r,"click",h).on(r,"mousedown",h).on(r,"dblclick",h).on(r,"click",o.DomEvent.preventDefault).on(r,"click",s,a).on(r,"click",this._refocusOnMap,a),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";o.DomUtil.removeClass(this._zoomInButton,e),o.DomUtil.removeClass(this._zoomOutButton,e),t._zoom===t.getMinZoom()&&o.DomUtil.addClass(this._zoomOutButton,e),t._zoom===t.getMaxZoom()&&o.DomUtil.addClass(this._zoomInButton,e)}}),o.Map.mergeOptions({zoomControl:!0}),o.Map.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new o.Control.Zoom,this.addControl(this.zoomControl))}),o.control.zoom=function(t){return new o.Control.Zoom(t)},o.Control.Attribution=o.Control.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){o.setOptions(this,t),this._attributions={}},onAdd:function(t){this._container=o.DomUtil.create("div","leaflet-control-attribution"),o.DomEvent.disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return t.on("layeradd",this._onLayerAdd,this).on("layerremove",this._onLayerRemove,this),this._update(),this._container},onRemove:function(t){t.off("layeradd",this._onLayerAdd).off("layerremove",this._onLayerRemove)},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):void 0},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):void 0},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}},_onLayerAdd:function(t){t.layer.getAttribution&&this.addAttribution(t.layer.getAttribution())},_onLayerRemove:function(t){t.layer.getAttribution&&this.removeAttribution(t.layer.getAttribution())}}),o.Map.mergeOptions({attributionControl:!0}),o.Map.addInitHook(function(){this.options.attributionControl&&(this.attributionControl=(new o.Control.Attribution).addTo(this))}),o.control.attribution=function(t){return new o.Control.Attribution(t)},o.Control.Scale=o.Control.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0,updateWhenIdle:!1},onAdd:function(t){this._map=t;var e="leaflet-control-scale",i=o.DomUtil.create("div",e),n=this.options;return this._addScales(n,e,i),t.on(n.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),i},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=o.DomUtil.create("div",e+"-line",i)),t.imperial&&(this._iScale=o.DomUtil.create("div",e+"-line",i))},_update:function(){var t=this._map.getBounds(),e=t.getCenter().lat,i=6378137*Math.PI*Math.cos(e*Math.PI/180),n=i*(t.getNorthEast().lng-t.getSouthWest().lng)/180,o=this._map.getSize(),s=this.options,a=0;o.x>0&&(a=n*(s.maxWidth/o.x)),this._updateScales(s,a)},_updateScales:function(t,e){t.metric&&e&&this._updateMetric(e),t.imperial&&e&&this._updateImperial(e)},_updateMetric:function(t){var e=this._getRoundNum(t);this._mScale.style.width=this._getScaleWidth(e/t)+"px",this._mScale.innerHTML=1e3>e?e+" m":e/1e3+" km"},_updateImperial:function(t){var e,i,n,o=3.2808399*t,s=this._iScale;o>5280?(e=o/5280,i=this._getRoundNum(e),s.style.width=this._getScaleWidth(i/e)+"px",s.innerHTML=i+" mi"):(n=this._getRoundNum(o),s.style.width=this._getScaleWidth(n/o)+"px",s.innerHTML=n+" ft")},_getScaleWidth:function(t){return Math.round(this.options.maxWidth*t)-10},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),o.control.scale=function(t){return new o.Control.Scale(t)},o.Control.Layers=o.Control.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0},initialize:function(t,e,i){o.setOptions(this,i),this._layers={},this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){return this._initLayout(),this._update(),t.on("layeradd",this._onLayerChange,this).on("layerremove",this._onLayerChange,this),this._container},onRemove:function(t){t.off("layeradd",this._onLayerChange,this).off("layerremove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._update(),this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._update(),this},removeLayer:function(t){var e=o.stamp(t);return delete this._layers[e],this._update(),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=o.DomUtil.create("div",t);e.setAttribute("aria-haspopup",!0),o.Browser.touch?o.DomEvent.on(e,"click",o.DomEvent.stopPropagation):o.DomEvent.disableClickPropagation(e).disableScrollPropagation(e);var i=this._form=o.DomUtil.create("form",t+"-list");if(this.options.collapsed){o.Browser.android||o.DomEvent.on(e,"mouseover",this._expand,this).on(e,"mouseout",this._collapse,this);var n=this._layersLink=o.DomUtil.create("a",t+"-toggle",e);n.href="#",n.title="Layers",o.Browser.touch?o.DomEvent.on(n,"click",o.DomEvent.stop).on(n,"click",this._expand,this):o.DomEvent.on(n,"focus",this._expand,this),o.DomEvent.on(i,"click",function(){setTimeout(o.bind(this._onInputClick,this),0)},this),this._map.on("click",this._collapse,this)}else this._expand();this._baseLayersList=o.DomUtil.create("div",t+"-base",i),this._separator=o.DomUtil.create("div",t+"-separator",i),this._overlaysList=o.DomUtil.create("div",t+"-overlays",i),e.appendChild(i)},_addLayer:function(t,e,i){var n=o.stamp(t);this._layers[n]={layer:t,name:e,overlay:i},this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex))},_update:function(){if(this._container){this._baseLayersList.innerHTML="",this._overlaysList.innerHTML="";var t,e,i=!1,n=!1;for(t in this._layers)e=this._layers[t],this._addItem(e),n=n||e.overlay,i=i||!e.overlay;this._separator.style.display=n&&i?"":"none"}},_onLayerChange:function(t){var e=this._layers[o.stamp(t.layer)];if(e){this._handlingClick||this._update();var i=e.overlay?"layeradd"===t.type?"overlayadd":"overlayremove":"layeradd"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)}},_createRadioElement:function(t,i){var n='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"';i&&(n+=' checked="checked"'),n+="/>";var o=e.createElement("div");return o.innerHTML=n,o.firstChild},_addItem:function(t){var i,n=e.createElement("label"),s=this._map.hasLayer(t.layer);t.overlay?(i=e.createElement("input"),i.type="checkbox",i.className="leaflet-control-layers-selector",i.defaultChecked=s):i=this._createRadioElement("leaflet-base-layers",s),i.layerId=o.stamp(t.layer),o.DomEvent.on(i,"click",this._onInputClick,this);var a=e.createElement("span");a.innerHTML=" "+t.name,n.appendChild(i),n.appendChild(a);var r=t.overlay?this._overlaysList:this._baseLayersList;return r.appendChild(n),n},_onInputClick:function(){var t,e,i,n=this._form.getElementsByTagName("input"),o=n.length;for(this._handlingClick=!0,t=0;o>t;t++)e=n[t],i=this._layers[e.layerId],e.checked&&!this._map.hasLayer(i.layer)?this._map.addLayer(i.layer):!e.checked&&this._map.hasLayer(i.layer)&&this._map.removeLayer(i.layer);this._handlingClick=!1,this._refocusOnMap()},_expand:function(){o.DomUtil.addClass(this._container,"leaflet-control-layers-expanded")},_collapse:function(){this._container.className=this._container.className.replace(" leaflet-control-layers-expanded","")}}),o.control.layers=function(t,e,i){return new o.Control.Layers(t,e,i)},o.PosAnimation=o.Class.extend({includes:o.Mixin.Events,run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._newPos=e,this.fire("start"),t.style[o.DomUtil.TRANSITION]="all "+(i||.25)+"s cubic-bezier(0,0,"+(n||.5)+",1)",o.DomEvent.on(t,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),o.DomUtil.setPosition(t,e),o.Util.falseFn(t.offsetWidth),this._stepTimer=setInterval(o.bind(this._onStep,this),50)},stop:function(){this._inProgress&&(o.DomUtil.setPosition(this._el,this._getPos()),this._onTransitionEnd(),o.Util.falseFn(this._el.offsetWidth))},_onStep:function(){var t=this._getPos();return t?(this._el._leaflet_pos=t,void this.fire("step")):void this._onTransitionEnd()},_transformRe:/([-+]?(?:\d*\.)?\d+)\D*, ([-+]?(?:\d*\.)?\d+)\D*\)/,_getPos:function(){var e,i,n,s=this._el,a=t.getComputedStyle(s);if(o.Browser.any3d){if(n=a[o.DomUtil.TRANSFORM].match(this._transformRe),!n)return;e=parseFloat(n[1]),i=parseFloat(n[2])}else e=parseFloat(a.left),i=parseFloat(a.top);return new o.Point(e,i,!0)},_onTransitionEnd:function(){o.DomEvent.off(this._el,o.DomUtil.TRANSITION_END,this._onTransitionEnd,this),this._inProgress&&(this._inProgress=!1,this._el.style[o.DomUtil.TRANSITION]="",this._el._leaflet_pos=this._newPos,clearInterval(this._stepTimer),this.fire("step").fire("end"))}}),o.Map.include({setView:function(t,e,n){if(e=e===i?this._zoom:this._limitZoom(e),t=this._limitCenter(o.latLng(t),e,this.options.maxBounds),n=n||{},this._panAnim&&this._panAnim.stop(),this._loaded&&!n.reset&&n!==!0){n.animate!==i&&(n.zoom=o.extend({animate:n.animate},n.zoom),n.pan=o.extend({animate:n.animate},n.pan));var s=this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,n.zoom):this._tryAnimatedPan(t,n.pan);if(s)return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},panBy:function(t,e){if(t=o.point(t).round(),e=e||{},!t.x&&!t.y)return this;if(this._panAnim||(this._panAnim=new o.PosAnimation,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),e.animate!==!1){o.DomUtil.addClass(this._mapPane,"leaflet-pan-anim");
var i=this._getMapPanePos().subtract(t);this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){o.DomUtil.removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._floor();return(e&&e.animate)===!0||this.getSize().contains(i)?(this.panBy(i,e),!0):!1}}),o.PosAnimation=o.DomUtil.TRANSITION?o.PosAnimation:o.PosAnimation.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=o.DomUtil.getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(),this._complete())},_animate:function(){this._animId=o.Util.requestAnimFrame(this._animate,this),this._step()},_step:function(){var t=+new Date-this._startTime,e=1e3*this._duration;e>t?this._runFrame(this._easeOut(t/e)):(this._runFrame(1),this._complete())},_runFrame:function(t){var e=this._startPos.add(this._offset.multiplyBy(t));o.DomUtil.setPosition(this._el,e),this.fire("step")},_complete:function(){o.Util.cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),o.Map.mergeOptions({zoomAnimation:!0,zoomAnimationThreshold:4}),o.DomUtil.TRANSITION&&o.Map.addInitHook(function(){this._zoomAnimated=this.options.zoomAnimation&&o.DomUtil.TRANSITION&&o.Browser.any3d&&!o.Browser.android23&&!o.Browser.mobileOpera,this._zoomAnimated&&o.DomEvent.on(this._mapPane,o.DomUtil.TRANSITION_END,this._catchTransitionEnd,this)}),o.Map.include(o.DomUtil.TRANSITION?{_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||i.animate===!1||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),o=this._getCenterOffset(t)._divideBy(1-1/n),s=this._getCenterLayerPoint()._add(o);return i.animate===!0||this.getSize().contains(o)?(this.fire("movestart").fire("zoomstart"),this._animateZoom(t,e,s,n,null,!0),!0):!1},_animateZoom:function(t,e,i,n,s,a,r){r||(this._animatingZoom=!0),o.DomUtil.addClass(this._mapPane,"leaflet-zoom-anim"),this._animateToCenter=t,this._animateToZoom=e,o.Draggable&&(o.Draggable._disabled=!0),o.Util.requestAnimFrame(function(){this.fire("zoomanim",{center:t,zoom:e,origin:i,scale:n,delta:s,backwards:a})},this)},_onZoomTransitionEnd:function(){this._animatingZoom=!1,o.DomUtil.removeClass(this._mapPane,"leaflet-zoom-anim"),this._resetView(this._animateToCenter,this._animateToZoom,!0,!0),o.Draggable&&(o.Draggable._disabled=!1)}}:{}),o.TileLayer.include({_animateZoom:function(t){this._animating||(this._animating=!0,this._prepareBgBuffer());var e=this._bgBuffer,i=o.DomUtil.TRANSFORM,n=t.delta?o.DomUtil.getTranslateString(t.delta):e.style[i],s=o.DomUtil.getScaleString(t.scale,t.origin);e.style[i]=t.backwards?s+" "+n:n+" "+s},_endZoomAnim:function(){var t=this._tileContainer,e=this._bgBuffer;t.style.visibility="",t.parentNode.appendChild(t),o.Util.falseFn(e.offsetWidth),this._animating=!1},_clearBgBuffer:function(){var t=this._map;!t||t._animatingZoom||t.touchZoom._zooming||(this._bgBuffer.innerHTML="",this._bgBuffer.style[o.DomUtil.TRANSFORM]="")},_prepareBgBuffer:function(){var t=this._tileContainer,e=this._bgBuffer,i=this._getLoadedTilesPercentage(e),n=this._getLoadedTilesPercentage(t);return e&&i>.5&&.5>n?(t.style.visibility="hidden",void this._stopLoadingImages(t)):(e.style.visibility="hidden",e.style[o.DomUtil.TRANSFORM]="",this._tileContainer=e,e=this._bgBuffer=t,this._stopLoadingImages(e),void clearTimeout(this._clearBgBufferTimer))},_getLoadedTilesPercentage:function(t){var e,i,n=t.getElementsByTagName("img"),o=0;for(e=0,i=n.length;i>e;e++)n[e].complete&&o++;return o/i},_stopLoadingImages:function(t){var e,i,n,s=Array.prototype.slice.call(t.getElementsByTagName("img"));for(e=0,i=s.length;i>e;e++)n=s[e],n.complete||(n.onload=o.Util.falseFn,n.onerror=o.Util.falseFn,n.src=o.Util.emptyImageUrl,n.parentNode.removeChild(n))}}),o.Map.include({_defaultLocateOptions:{watch:!1,setView:!1,maxZoom:1/0,timeout:1e4,maximumAge:0,enableHighAccuracy:!1},locate:function(t){if(t=this._locateOptions=o.extend(this._defaultLocateOptions,t),!navigator.geolocation)return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=o.bind(this._handleGeolocationResponse,this),i=o.bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new o.LatLng(e,i),s=180*t.coords.accuracy/40075017,a=s/Math.cos(o.LatLng.DEG_TO_RAD*e),r=o.latLngBounds([e-s,i-a],[e+s,i+a]),h=this._locateOptions;if(h.setView){var l=Math.min(this.getBoundsZoom(r),h.maxZoom);this.setView(n,l)}var u={latlng:n,bounds:r,timestamp:t.timestamp};for(var c in t.coords)"number"==typeof t.coords[c]&&(u[c]=t.coords[c]);this.fire("locationfound",u)}})}(window,document),function(){"use strict";L.TileLayer.Provider=L.TileLayer.extend({initialize:function(arg,options){var providers=L.TileLayer.Provider.providers,parts=arg.split("."),providerName=parts[0],variantName=parts[1];if(!providers[providerName])throw"No such provider ("+providerName+")";var provider={url:providers[providerName].url,options:providers[providerName].options};if(variantName&&"variants"in providers[providerName]){if(!(variantName in providers[providerName].variants))throw"No such variant of "+providerName+" ("+variantName+")";var variantOptions,variant=providers[providerName].variants[variantName];variantOptions="string"==typeof variant?{variant:variant}:variant.options,provider={url:variant.url||provider.url,options:L.Util.extend({},provider.options,variantOptions)}}else"function"==typeof provider.url&&(provider.url=provider.url(parts.splice(1,parts.length-1).join(".")));var attributionReplacer=function(attr){return-1===attr.indexOf("{attribution.")?attr:attr.replace(/\{attribution.(\w*)\}/,function(match,attributionName){return attributionReplacer(providers[attributionName].options.attribution)})};provider.options.attribution=attributionReplacer(provider.options.attribution);var layerOpts=L.Util.extend({},provider.options,options);L.TileLayer.prototype.initialize.call(this,provider.url,layerOpts)}}),L.TileLayer.Provider.providers={OpenStreetMap:{url:"http://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>'},variants:{Mapnik:{},BlackAndWhite:{url:"http://{s}.www.toolserver.org/tiles/bw-mapnik/{z}/{x}/{y}.png"},DE:{url:"http://{s}.tile.openstreetmap.de/tiles/osmde/{z}/{x}/{y}.png"},HOT:{url:"http://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png",options:{attribution:'{attribution.OpenStreetMap}, Tiles courtesy of <a href="http://hot.openstreetmap.org/" target="_blank">Humanitarian OpenStreetMap Team</a>'}}}},OpenSeaMap:{url:"http://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",options:{attribution:'Map data: &copy; <a href="http://www.openseamap.org">OpenSeaMap</a> contributors'}},Thunderforest:{url:"http://{s}.tile.thunderforest.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'&copy; <a href="http://www.opencyclemap.org">OpenCycleMap</a>, {attribution.OpenStreetMap}',variant:"cycle"},variants:{OpenCycleMap:"cycle",Transport:"transport",Landscape:"landscape",Outdoors:"outdoors"}},OpenMapSurfer:{url:"http://openmapsurfer.uni-hd.de/tiles/{variant}/x={x}&y={y}&z={z}",options:{minZoom:0,maxZoom:20,variant:"roads",attribution:'Imagery from <a href="http://giscience.uni-hd.de/">GIScience Research Group @ University of Heidelberg</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Roads:"roads",AdminBounds:{options:{variant:"adminb",maxZoom:19}},Grayscale:{options:{variant:"roadsg",maxZoom:19}}}},Hydda:{url:"http://{s}.tile.openstreetmap.se/hydda/{variant}/{z}/{x}/{y}.png",options:{minZoom:0,maxZoom:18,variant:"full",attribution:'Tiles courtesy of <a href="http://hot.openstreetmap.se/" target="_blank">OpenStreetMap Sweden</a> &mdash; Map data {attribution.OpenStreetMap}'},variants:{Full:"full",Base:"base",RoadsAndLabels:"roads_and_labels"}},MapQuestOpen:{url:"http://otile{s}.mqcdn.com/tiles/1.0.0/map/{z}/{x}/{y}.jpeg",options:{attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"1234"},variants:{OSM:{},Aerial:{url:"http://oatile{s}.mqcdn.com/tiles/1.0.0/sat/{z}/{x}/{y}.jpg",options:{attribution:'Tiles Courtesy of <a href="http://www.mapquest.com/">MapQuest</a> &mdash; Portions Courtesy NASA/JPL-Caltech and U.S. Depart. of Agriculture, Farm Service Agency'}}}},MapBox:{url:function(id){return"http://{s}.tiles.mapbox.com/v3/"+id+"/{z}/{x}/{y}.png"},options:{attribution:'Imagery from <a href="http://mapbox.com/about/maps/">MapBox</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd"}},Stamen:{url:"http://{s}.tile.stamen.com/{variant}/{z}/{x}/{y}.png",options:{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data {attribution.OpenStreetMap}',subdomains:"abcd",minZoom:0,maxZoom:20,variant:"toner"},variants:{Toner:"toner",TonerBackground:"toner-background",TonerHybrid:"toner-hybrid",TonerLines:"toner-lines",TonerLabels:"toner-labels",TonerLite:"toner-lite",Terrain:{options:{variant:"terrain",minZoom:4,maxZoom:18}},TerrainBackground:{options:{variant:"terrain-background",minZoom:4,maxZoom:18}},Watercolor:{options:{variant:"watercolor",minZoom:3,maxZoom:16}}}},Esri:{url:"http://server.arcgisonline.com/ArcGIS/rest/services/{variant}/MapServer/tile/{z}/{y}/{x}",options:{variant:"World_Street_Map",attribution:"Tiles &copy; Esri"},variants:{WorldStreetMap:{options:{attribution:"{attribution.Esri} &mdash; Source: Esri, DeLorme, NAVTEQ, USGS, Intermap, iPC, NRCAN, Esri Japan, METI, Esri China (Hong Kong), Esri (Thailand), TomTom, 2012"}},DeLorme:{options:{variant:"Specialty/DeLorme_World_Base_Map",minZoom:1,maxZoom:11,attribution:"{attribution.Esri} &mdash; Copyright: &copy;2012 DeLorme"}},WorldTopoMap:{options:{variant:"World_Topo_Map",attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ, TomTom, Intermap, iPC, USGS, FAO, NPS, NRCAN, GeoBase, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), and the GIS User Community"}},WorldImagery:{options:{variant:"World_Imagery",attribution:"{attribution.Esri} &mdash; Source: Esri, i-cubed, USDA, USGS, AEX, GeoEye, Getmapping, Aerogrid, IGN, IGP, UPR-EGP, and the GIS User Community"}},WorldTerrain:{options:{variant:"World_Terrain_Base",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: USGS, Esri, TANA, DeLorme, and NPS"}},WorldShadedRelief:{options:{variant:"World_Shaded_Relief",maxZoom:13,attribution:"{attribution.Esri} &mdash; Source: Esri"}},WorldPhysical:{options:{variant:"World_Physical_Map",maxZoom:8,attribution:"{attribution.Esri} &mdash; Source: US National Park Service"}},OceanBasemap:{options:{variant:"Ocean_Basemap",maxZoom:13,attribution:"{attribution.Esri} &mdash; Sources: GEBCO, NOAA, CHS, OSU, UNH, CSUMB, National Geographic, DeLorme, NAVTEQ, and Esri"}},NatGeoWorldMap:{options:{variant:"NatGeo_World_Map",maxZoom:16,attribution:"{attribution.Esri} &mdash; National Geographic, Esri, DeLorme, NAVTEQ, UNEP-WCMC, USGS, NASA, ESA, METI, NRCAN, GEBCO, NOAA, iPC"}},WorldGrayCanvas:{options:{variant:"Canvas/World_Light_Gray_Base",maxZoom:16,attribution:"{attribution.Esri} &mdash; Esri, DeLorme, NAVTEQ"}}}},OpenWeatherMap:{url:"http://{s}.tile.openweathermap.org/map/{variant}/{z}/{x}/{y}.png",options:{attribution:'Map data &copy; <a href="http://openweathermap.org">OpenWeatherMap</a>',opacity:.5},variants:{Clouds:"clouds",CloudsClassic:"clouds_cls",Precipitation:"precipitation",PrecipitationClassic:"precipitation_cls",Rain:"rain",RainClassic:"rain_cls",Pressure:"pressure",PressureContour:"pressure_cntr",Wind:"wind",Temperature:"temp",Snow:"snow"}},HERE:{url:"http://{s}.{base}.maps.cit.api.here.com/maptile/2.1/maptile/{mapID}/{variant}/{z}/{x}/{y}/256/png8?app_id={app_id}&app_code={app_code}",options:{attribution:'Map &copy; 1987-2014 <a href="http://developer.here.com">HERE</a>',subdomains:"1234",mapID:"newest",app_id:"<insert your app_id here>",app_code:"<insert your app_code here>",base:"base",variant:"normal.day",minZoom:0,maxZoom:20},variants:{normalDay:"normal.day",normalDayCustom:"normal.day.custom",normalDayGrey:"normal.day.grey",normalDayMobile:"normal.day.mobile",normalDayGreyMobile:"normal.day.grey.mobile",normalDayTransit:"normal.day.transit",normalDayTransitMobile:"normal.day.transit.mobile",normalNight:"normal.night",normalNightMobile:"normal.night.mobile",normalNightGrey:"normal.night.grey",normalNightGreyMobile:"normal.night.grey.mobile",carnavDayGrey:"carnav.day.grey",hybridDay:{options:{base:"aerial",variant:"hybrid.day"}},hybridDayMobile:{options:{base:"aerial",variant:"hybrid.day.mobile"}},pedestrianDay:"pedestrian.day",pedestrianNight:"pedestrian.night",satelliteDay:{options:{base:"aerial",variant:"satellite.day"}},terrainDay:{options:{base:"aerial",variant:"terrain.day"}},terrainDayMobile:{options:{base:"aerial",variant:"terrain.day.mobile"}}}},Acetate:{url:"http://a{s}.acetate.geoiq.com/tiles/{variant}/{z}/{x}/{y}.png",options:{attribution:"&copy;2012 Esri & Stamen, Data from OSM and Natural Earth",subdomains:"0123",minZoom:2,maxZoom:18,variant:"acetate-base"},variants:{basemap:"acetate-base",terrain:"terrain",all:"acetate-hillshading",foreground:"acetate-fg",roads:"acetate-roads",labels:"acetate-labels",hillshading:"hillshading"}}},L.tileLayer.provider=function(provider,options){return new L.TileLayer.Provider(provider,options)},L.Control.Layers.Provided=L.Control.Layers.extend({initialize:function(base,overlay,options){var first,labelFormatter=function(label){return label.replace(/\./g,": ").replace(/([a-z])([A-Z])/g,"$1 $2")};base.length&&(!function(){for(var out={},len=base.length,i=0;len>i;)"string"==typeof base[i]&&(0===i?(first=L.tileLayer.provider(base[0]),out[labelFormatter(base[i])]=first):out[labelFormatter(base[i])]=L.tileLayer.provider(base[i])),i++;base=out}(),this._first=first),overlay&&overlay.length&&!function(){for(var out={},len=overlay.length,i=0;len>i;)"string"==typeof overlay[i]&&(out[labelFormatter(overlay[i])]=L.tileLayer.provider(overlay[i])),i++;overlay=out}(),L.Control.Layers.prototype.initialize.call(this,base,overlay,options)},onAdd:function(map){return this._first.addTo(map),L.Control.Layers.prototype.onAdd.call(this,map)}}),L.control.layers.provided=function(baseLayers,overlays,options){return new L.Control.Layers.Provided(baseLayers,overlays,options)}}(),function(window,document){L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(options){L.Util.setOptions(this,options),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.on(L.FeatureGroup.EVENTS,this._propagateEvent,this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[]},addLayer:function(layer){if(layer instanceof L.LayerGroup){var array=[];for(var i in layer._layers)array.push(layer._layers[i]);return this.addLayers(array)}if(!layer.getLatLng)return this._nonPointGroup.addLayer(layer),this;if(!this._map)return this._needsClustering.push(layer),this;if(this.hasLayer(layer))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(layer,this._maxZoom);var visibleLayer=layer,currentZoom=this._map.getZoom();if(layer.__parent)for(;visibleLayer.__parent._zoom>=currentZoom;)visibleLayer=visibleLayer.__parent;return this._currentShownBounds.contains(visibleLayer.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(layer,visibleLayer):this._animationAddLayerNonAnimated(layer,visibleLayer)),this},removeLayer:function(layer){if(layer instanceof L.LayerGroup){var array=[];for(var i in layer._layers)array.push(layer._layers[i]);return this.removeLayers(array)}return layer.getLatLng?this._map?layer.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(layer)),this._removeLayer(layer,!0),this._featureGroup.hasLayer(layer)&&(this._featureGroup.removeLayer(layer),layer.setOpacity&&layer.setOpacity(1)),this):this:(!this._arraySplice(this._needsClustering,layer)&&this.hasLayer(layer)&&this._needsRemoving.push(layer),this):(this._nonPointGroup.removeLayer(layer),this)},addLayers:function(layersArray){var newMarkers,i,l,m,fg=this._featureGroup,npg=this._nonPointGroup,chunked=this.options.chunkedLoading,chunkInterval=this.options.chunkInterval,chunkProgress=this.options.chunkProgress;if(this._map){var offset=0,started=(new Date).getTime(),process=L.bind(function(){for(var start=(new Date).getTime();offset<layersArray.length;offset++){if(chunked&&offset%200===0){var elapsed=(new Date).getTime()-start;if(elapsed>chunkInterval)break}if(m=layersArray[offset],m.getLatLng){if(!this.hasLayer(m)&&(this._addLayer(m,this._maxZoom),m.__parent&&2===m.__parent.getChildCount())){var markers=m.__parent.getAllChildMarkers(),otherMarker=markers[0]===m?markers[1]:markers[0];fg.removeLayer(otherMarker)}}else npg.addLayer(m)}chunkProgress&&chunkProgress(offset,layersArray.length,(new Date).getTime()-started),offset===layersArray.length?(this._featureGroup.eachLayer(function(c){c instanceof L.MarkerCluster&&c._iconNeedsUpdate&&c._updateIcon()}),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(process,this.options.chunkDelay)},this);process()}else{for(newMarkers=[],i=0,l=layersArray.length;l>i;i++)m=layersArray[i],m.getLatLng?this.hasLayer(m)||newMarkers.push(m):npg.addLayer(m);this._needsClustering=this._needsClustering.concat(newMarkers)}return this},removeLayers:function(layersArray){var i,l,m,fg=this._featureGroup,npg=this._nonPointGroup;if(!this._map){for(i=0,l=layersArray.length;l>i;i++)m=layersArray[i],this._arraySplice(this._needsClustering,m),npg.removeLayer(m);return this}for(i=0,l=layersArray.length;l>i;i++)m=layersArray[i],m.__parent?(this._removeLayer(m,!0,!0),fg.hasLayer(m)&&(fg.removeLayer(m),m.setOpacity&&m.setOpacity(1))):npg.removeLayer(m);return this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),fg.eachLayer(function(c){c instanceof L.MarkerCluster&&c._updateIcon()}),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(marker){delete marker.__parent}),this._map&&this._generateInitialClusters(),this},getBounds:function(){var bounds=new L.LatLngBounds;this._topClusterLevel&&bounds.extend(this._topClusterLevel._bounds);for(var i=this._needsClustering.length-1;i>=0;i--)bounds.extend(this._needsClustering[i].getLatLng());return bounds.extend(this._nonPointGroup.getBounds()),bounds},eachLayer:function(method,context){var i,markers=this._needsClustering.slice();for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(markers),i=markers.length-1;i>=0;i--)method.call(context,markers[i]);this._nonPointGroup.eachLayer(method,context)},getLayers:function(){var layers=[];return this.eachLayer(function(l){layers.push(l)}),layers},getLayer:function(id){var result=null;return this.eachLayer(function(l){L.stamp(l)===id&&(result=l)}),result},hasLayer:function(layer){if(!layer)return!1;var i,anArray=this._needsClustering;for(i=anArray.length-1;i>=0;i--)if(anArray[i]===layer)return!0;for(anArray=this._needsRemoving,i=anArray.length-1;i>=0;i--)if(anArray[i]===layer)return!1;return!(!layer.__parent||layer.__parent._group!==this)||this._nonPointGroup.hasLayer(layer)},zoomToShowLayer:function(layer,callback){var showMarker=function(){if((layer._icon||layer.__parent._icon)&&!this._inZoomAnimation)if(this._map.off("moveend",showMarker,this),this.off("animationend",showMarker,this),layer._icon)callback();else if(layer.__parent._icon){var afterSpiderfy=function(){this.off("spiderfied",afterSpiderfy,this),callback()};this.on("spiderfied",afterSpiderfy,this),layer.__parent.spiderfy()}};if(layer._icon&&this._map.getBounds().contains(layer.getLatLng()))callback();else if(layer.__parent._zoom<this._map.getZoom())this._map.on("moveend",showMarker,this),this._map.panTo(layer.getLatLng());else{var moveStart=function(){this._map.off("movestart",moveStart,this),moveStart=null};this._map.on("movestart",moveStart,this),this._map.on("moveend",showMarker,this),this.on("animationend",showMarker,this),layer.__parent.zoomToBounds(),moveStart&&showMarker.call(this)}},onAdd:function(map){this._map=map;var i,l,layer;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.onAdd(map),this._nonPointGroup.onAdd(map),this._gridClusters||this._generateInitialClusters(),i=0,l=this._needsRemoving.length;l>i;i++)layer=this._needsRemoving[i],this._removeLayer(layer,!0);this._needsRemoving=[],this._zoom=this._map.getZoom(),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),l=this._needsClustering,this._needsClustering=[],this.addLayers(l)},onRemove:function(map){map.off("zoomend",this._zoomEnd,this),map.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),this._hideCoverage(),this._featureGroup.onRemove(map),this._nonPointGroup.onRemove(map),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(marker){for(var vMarker=marker;vMarker&&!vMarker._icon;)vMarker=vMarker.__parent;return vMarker||null},_arraySplice:function(anArray,obj){for(var i=anArray.length-1;i>=0;i--)if(anArray[i]===obj)return anArray.splice(i,1),!0},_removeLayer:function(marker,removeFromDistanceGrid,dontUpdateMap){var gridClusters=this._gridClusters,gridUnclustered=this._gridUnclustered,fg=this._featureGroup,map=this._map;if(removeFromDistanceGrid)for(var z=this._maxZoom;z>=0&&gridUnclustered[z].removeObject(marker,map.project(marker.getLatLng(),z));z--);var otherMarker,cluster=marker.__parent,markers=cluster._markers;for(this._arraySplice(markers,marker);cluster&&(cluster._childCount--,!(cluster._zoom<0));)removeFromDistanceGrid&&cluster._childCount<=1?(otherMarker=cluster._markers[0]===marker?cluster._markers[1]:cluster._markers[0],gridClusters[cluster._zoom].removeObject(cluster,map.project(cluster._cLatLng,cluster._zoom)),gridUnclustered[cluster._zoom].addObject(otherMarker,map.project(otherMarker.getLatLng(),cluster._zoom)),this._arraySplice(cluster.__parent._childClusters,cluster),cluster.__parent._markers.push(otherMarker),otherMarker.__parent=cluster.__parent,cluster._icon&&(fg.removeLayer(cluster),dontUpdateMap||fg.addLayer(otherMarker))):(cluster._recalculateBounds(),dontUpdateMap&&cluster._icon||cluster._updateIcon()),cluster=cluster.__parent;delete marker.__parent},_isOrIsParent:function(el,oel){for(;oel;){if(el===oel)return!0;oel=oel.parentNode}return!1},_propagateEvent:function(e){if(e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;e.type="cluster"+e.type}this.fire(e.type,e)},_defaultIconCreateFunction:function(cluster){var childCount=cluster.getChildCount(),c=" marker-cluster-";return c+=10>childCount?"small":100>childCount?"medium":"large",new L.DivIcon({html:"<div><span>"+childCount+"</span></div>",className:"marker-cluster"+c,iconSize:new L.Point(40,40)})},_bindEvents:function(){var map=this._map,spiderfyOnMaxZoom=this.options.spiderfyOnMaxZoom,showCoverageOnHover=this.options.showCoverageOnHover,zoomToBoundsOnClick=this.options.zoomToBoundsOnClick;(spiderfyOnMaxZoom||zoomToBoundsOnClick)&&this.on("clusterclick",this._zoomOrSpiderfy,this),showCoverageOnHover&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),map.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(e){var map=this._map;this.options.spiderfyOnMaxZoom&&e.layer.spiderfy(),e.originalEvent&&13===e.originalEvent.keyCode&&map._container.focus()},_showCoverage:function(e){var map=this._map;this._inZoomAnimation||(this._shownPolygon&&map.removeLayer(this._shownPolygon),e.layer.getChildCount()>2&&e.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(e.layer.getConvexHull(),this.options.polygonOptions),map.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var spiderfyOnMaxZoom=this.options.spiderfyOnMaxZoom,showCoverageOnHover=this.options.showCoverageOnHover,zoomToBoundsOnClick=this.options.zoomToBoundsOnClick,map=this._map;(spiderfyOnMaxZoom||zoomToBoundsOnClick)&&this.off("clusterclick",this._zoomOrSpiderfy,this),showCoverageOnHover&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),map.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=this._map._zoom,this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var newBounds=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,newBounds),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._map._zoom,newBounds),this._currentShownBounds=newBounds}},_generateInitialClusters:function(){var maxZoom=this._map.getMaxZoom(),radius=this.options.maxClusterRadius,radiusFn=radius;"function"!=typeof radius&&(radiusFn=function(){return radius}),this.options.disableClusteringAtZoom&&(maxZoom=this.options.disableClusteringAtZoom-1),this._maxZoom=maxZoom,this._gridClusters={},this._gridUnclustered={};for(var zoom=maxZoom;zoom>=0;zoom--)this._gridClusters[zoom]=new L.DistanceGrid(radiusFn(zoom)),this._gridUnclustered[zoom]=new L.DistanceGrid(radiusFn(zoom));this._topClusterLevel=new L.MarkerCluster(this,-1)},_addLayer:function(layer,zoom){var markerPoint,z,gridClusters=this._gridClusters,gridUnclustered=this._gridUnclustered;for(this.options.singleMarkerMode&&(layer.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[layer]}}));zoom>=0;zoom--){markerPoint=this._map.project(layer.getLatLng(),zoom);var closest=gridClusters[zoom].getNearObject(markerPoint);if(closest)return closest._addChild(layer),void(layer.__parent=closest);if(closest=gridUnclustered[zoom].getNearObject(markerPoint)){var parent=closest.__parent;parent&&this._removeLayer(closest,!1);var newCluster=new L.MarkerCluster(this,zoom,closest,layer);gridClusters[zoom].addObject(newCluster,this._map.project(newCluster._cLatLng,zoom)),closest.__parent=newCluster,layer.__parent=newCluster;var lastParent=newCluster;for(z=zoom-1;z>parent._zoom;z--)lastParent=new L.MarkerCluster(this,z,lastParent),gridClusters[z].addObject(lastParent,this._map.project(closest.getLatLng(),z));for(parent._addChild(lastParent),z=zoom;z>=0&&gridUnclustered[z].removeObject(closest,this._map.project(closest.getLatLng(),z));z--);return}gridUnclustered[zoom].addObject(layer,markerPoint)}this._topClusterLevel._addChild(layer),layer.__parent=this._topClusterLevel},_enqueue:function(fn){this._queue.push(fn),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var i=0;i<this._queue.length;i++)this._queue[i].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){this._processQueue(),this._zoom<this._map._zoom&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,this._map._zoom)):this._zoom>this._map._zoom?(this._animationStart(),this._animationZoomOut(this._zoom,this._map._zoom)):this._moveEnd()},_getExpandedVisibleBounds:function(){if(!this.options.removeOutsideVisibleBounds)return this.getBounds();var map=this._map,bounds=map.getBounds(),sw=bounds._southWest,ne=bounds._northEast,latDiff=L.Browser.mobile?0:Math.abs(sw.lat-ne.lat),lngDiff=L.Browser.mobile?0:Math.abs(sw.lng-ne.lng);return new L.LatLngBounds(new L.LatLng(sw.lat-latDiff,sw.lng-lngDiff,!0),new L.LatLng(ne.lat+latDiff,ne.lng+lngDiff,!0))},_animationAddLayerNonAnimated:function(layer,newCluster){if(newCluster===layer)this._featureGroup.addLayer(layer);else if(2===newCluster._childCount){newCluster._addToMap();var markers=newCluster.getAllChildMarkers();this._featureGroup.removeLayer(markers[0]),this._featureGroup.removeLayer(markers[1])}else newCluster._updateIcon()}}),L.MarkerClusterGroup.include(L.DomUtil.TRANSITION?{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_animationZoomIn:function(previousZoomLevel,newZoomLevel){var i,bounds=this._getExpandedVisibleBounds(),fg=this._featureGroup;this._topClusterLevel._recursively(bounds,previousZoomLevel,0,function(c){var m,startPos=c._latlng,markers=c._markers;for(bounds.contains(startPos)||(startPos=null),c._isSingleParent()&&previousZoomLevel+1===newZoomLevel?(fg.removeLayer(c),c._recursivelyAddChildrenToMap(null,newZoomLevel,bounds)):(c.setOpacity(0),c._recursivelyAddChildrenToMap(startPos,newZoomLevel,bounds)),i=markers.length-1;i>=0;i--)m=markers[i],bounds.contains(m._latlng)||fg.removeLayer(m)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(bounds,newZoomLevel),fg.eachLayer(function(n){n instanceof L.MarkerCluster||!n._icon||n.setOpacity(1)}),this._topClusterLevel._recursively(bounds,previousZoomLevel,newZoomLevel,function(c){c._recursivelyRestoreChildPositions(newZoomLevel)}),this._enqueue(function(){this._topClusterLevel._recursively(bounds,previousZoomLevel,0,function(c){fg.removeLayer(c),c.setOpacity(1)}),this._animationEnd()
})},_animationZoomOut:function(previousZoomLevel,newZoomLevel){this._animationZoomOutSingle(this._topClusterLevel,previousZoomLevel-1,newZoomLevel),this._topClusterLevel._recursivelyAddChildrenToMap(null,newZoomLevel,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,previousZoomLevel,this._getExpandedVisibleBounds())},_animationZoomOutSingle:function(cluster,previousZoomLevel,newZoomLevel){var bounds=this._getExpandedVisibleBounds();cluster._recursivelyAnimateChildrenInAndAddSelfToMap(bounds,previousZoomLevel+1,newZoomLevel);var me=this;this._forceLayout(),cluster._recursivelyBecomeVisible(bounds,newZoomLevel),this._enqueue(function(){if(1===cluster._childCount){var m=cluster._markers[0];m.setLatLng(m.getLatLng()),m.setOpacity&&m.setOpacity(1)}else cluster._recursively(bounds,newZoomLevel,0,function(c){c._recursivelyRemoveChildrenFromMap(bounds,previousZoomLevel+1)});me._animationEnd()})},_animationAddLayer:function(layer,newCluster){var me=this,fg=this._featureGroup;fg.addLayer(layer),newCluster!==layer&&(newCluster._childCount>2?(newCluster._updateIcon(),this._forceLayout(),this._animationStart(),layer._setPos(this._map.latLngToLayerPoint(newCluster.getLatLng())),layer.setOpacity(0),this._enqueue(function(){fg.removeLayer(layer),layer.setOpacity(1),me._animationEnd()})):(this._forceLayout(),me._animationStart(),me._animationZoomOutSingle(newCluster,this._map.getMaxZoom(),this._map.getZoom())))},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}:{_animationStart:function(){},_animationZoomIn:function(previousZoomLevel,newZoomLevel){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,previousZoomLevel),this._topClusterLevel._recursivelyAddChildrenToMap(null,newZoomLevel,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(previousZoomLevel,newZoomLevel){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,previousZoomLevel),this._topClusterLevel._recursivelyAddChildrenToMap(null,newZoomLevel,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(layer,newCluster){this._animationAddLayerNonAnimated(layer,newCluster)}}),L.markerClusterGroup=function(options){return new L.MarkerClusterGroup(options)},L.MarkerCluster=L.Marker.extend({initialize:function(group,zoom,a,b){L.Marker.prototype.initialize.call(this,a?a._cLatLng||a.getLatLng():new L.LatLng(0,0),{icon:this}),this._group=group,this._zoom=zoom,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._bounds=new L.LatLngBounds,a&&this._addChild(a),b&&this._addChild(b)},getAllChildMarkers:function(storageArray){storageArray=storageArray||[];for(var i=this._childClusters.length-1;i>=0;i--)this._childClusters[i].getAllChildMarkers(storageArray);for(var j=this._markers.length-1;j>=0;j--)storageArray.push(this._markers[j]);return storageArray},getChildCount:function(){return this._childCount},zoomToBounds:function(){for(var i,childClusters=this._childClusters.slice(),map=this._group._map,boundsZoom=map.getBoundsZoom(this._bounds),zoom=this._zoom+1,mapZoom=map.getZoom();childClusters.length>0&&boundsZoom>zoom;){zoom++;var newClusters=[];for(i=0;i<childClusters.length;i++)newClusters=newClusters.concat(childClusters[i]._childClusters);childClusters=newClusters}boundsZoom>zoom?this._group._map.setView(this._latlng,zoom):mapZoom>=boundsZoom?this._group._map.setView(this._latlng,mapZoom+1):this._group._map.fitBounds(this._bounds)},getBounds:function(){var bounds=new L.LatLngBounds;return bounds.extend(this._bounds),bounds},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(new1,isNotificationFromChild){this._iconNeedsUpdate=!0,this._expandBounds(new1),new1 instanceof L.MarkerCluster?(isNotificationFromChild||(this._childClusters.push(new1),new1.__parent=this),this._childCount+=new1._childCount):(isNotificationFromChild||this._markers.push(new1),this._childCount++),this.__parent&&this.__parent._addChild(new1,!0)},_expandBounds:function(marker){var addedCount,addedLatLng=marker._wLatLng||marker._latlng;marker instanceof L.MarkerCluster?(this._bounds.extend(marker._bounds),addedCount=marker._childCount):(this._bounds.extend(addedLatLng),addedCount=1),this._cLatLng||(this._cLatLng=marker._cLatLng||addedLatLng);var totalCount=this._childCount+addedCount;this._wLatLng?(this._wLatLng.lat=(addedLatLng.lat*addedCount+this._wLatLng.lat*this._childCount)/totalCount,this._wLatLng.lng=(addedLatLng.lng*addedCount+this._wLatLng.lng*this._childCount)/totalCount):this._latlng=this._wLatLng=new L.LatLng(addedLatLng.lat,addedLatLng.lng)},_addToMap:function(startPos){startPos&&(this._backupLatlng=this._latlng,this.setLatLng(startPos)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(bounds,center,maxZoom){this._recursively(bounds,0,maxZoom-1,function(c){var i,m,markers=c._markers;for(i=markers.length-1;i>=0;i--)m=markers[i],m._icon&&(m._setPos(center),m.setOpacity(0))},function(c){var j,cm,childClusters=c._childClusters;for(j=childClusters.length-1;j>=0;j--)cm=childClusters[j],cm._icon&&(cm._setPos(center),cm.setOpacity(0))})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(bounds,previousZoomLevel,newZoomLevel){this._recursively(bounds,newZoomLevel,0,function(c){c._recursivelyAnimateChildrenIn(bounds,c._group._map.latLngToLayerPoint(c.getLatLng()).round(),previousZoomLevel),c._isSingleParent()&&previousZoomLevel-1===newZoomLevel?(c.setOpacity(1),c._recursivelyRemoveChildrenFromMap(bounds,previousZoomLevel)):c.setOpacity(0),c._addToMap()})},_recursivelyBecomeVisible:function(bounds,zoomLevel){this._recursively(bounds,0,zoomLevel,null,function(c){c.setOpacity(1)})},_recursivelyAddChildrenToMap:function(startPos,zoomLevel,bounds){this._recursively(bounds,-1,zoomLevel,function(c){if(zoomLevel!==c._zoom)for(var i=c._markers.length-1;i>=0;i--){var nm=c._markers[i];bounds.contains(nm._latlng)&&(startPos&&(nm._backupLatlng=nm.getLatLng(),nm.setLatLng(startPos),nm.setOpacity&&nm.setOpacity(0)),c._group._featureGroup.addLayer(nm))}},function(c){c._addToMap(startPos)})},_recursivelyRestoreChildPositions:function(zoomLevel){for(var i=this._markers.length-1;i>=0;i--){var nm=this._markers[i];nm._backupLatlng&&(nm.setLatLng(nm._backupLatlng),delete nm._backupLatlng)}if(zoomLevel-1===this._zoom)for(var j=this._childClusters.length-1;j>=0;j--)this._childClusters[j]._restorePosition();else for(var k=this._childClusters.length-1;k>=0;k--)this._childClusters[k]._recursivelyRestoreChildPositions(zoomLevel)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(previousBounds,zoomLevel,exceptBounds){var m,i;this._recursively(previousBounds,-1,zoomLevel-1,function(c){for(i=c._markers.length-1;i>=0;i--)m=c._markers[i],exceptBounds&&exceptBounds.contains(m._latlng)||(c._group._featureGroup.removeLayer(m),m.setOpacity&&m.setOpacity(1))},function(c){for(i=c._childClusters.length-1;i>=0;i--)m=c._childClusters[i],exceptBounds&&exceptBounds.contains(m._latlng)||(c._group._featureGroup.removeLayer(m),m.setOpacity&&m.setOpacity(1))})},_recursively:function(boundsToApplyTo,zoomLevelToStart,zoomLevelToStop,runAtEveryLevel,runAtBottomLevel){var i,c,childClusters=this._childClusters,zoom=this._zoom;if(zoomLevelToStart>zoom)for(i=childClusters.length-1;i>=0;i--)c=childClusters[i],boundsToApplyTo.intersects(c._bounds)&&c._recursively(boundsToApplyTo,zoomLevelToStart,zoomLevelToStop,runAtEveryLevel,runAtBottomLevel);else if(runAtEveryLevel&&runAtEveryLevel(this),runAtBottomLevel&&this._zoom===zoomLevelToStop&&runAtBottomLevel(this),zoomLevelToStop>zoom)for(i=childClusters.length-1;i>=0;i--)c=childClusters[i],boundsToApplyTo.intersects(c._bounds)&&c._recursively(boundsToApplyTo,zoomLevelToStart,zoomLevelToStop,runAtEveryLevel,runAtBottomLevel)},_recalculateBounds:function(){var i,markers=this._markers,childClusters=this._childClusters;for(this._bounds=new L.LatLngBounds,delete this._wLatLng,i=markers.length-1;i>=0;i--)this._expandBounds(markers[i]);for(i=childClusters.length-1;i>=0;i--)this._expandBounds(childClusters[i])},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}}),L.DistanceGrid=function(cellSize){this._cellSize=cellSize,this._sqCellSize=cellSize*cellSize,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(obj,point){var x=this._getCoord(point.x),y=this._getCoord(point.y),grid=this._grid,row=grid[y]=grid[y]||{},cell=row[x]=row[x]||[],stamp=L.Util.stamp(obj);this._objectPoint[stamp]=point,cell.push(obj)},updateObject:function(obj,point){this.removeObject(obj),this.addObject(obj,point)},removeObject:function(obj,point){var i,len,x=this._getCoord(point.x),y=this._getCoord(point.y),grid=this._grid,row=grid[y]=grid[y]||{},cell=row[x]=row[x]||[];for(delete this._objectPoint[L.Util.stamp(obj)],i=0,len=cell.length;len>i;i++)if(cell[i]===obj)return cell.splice(i,1),1===len&&delete row[x],!0},eachObject:function(fn,context){var i,j,k,len,row,cell,removed,grid=this._grid;for(i in grid){row=grid[i];for(j in row)for(cell=row[j],k=0,len=cell.length;len>k;k++)removed=fn.call(context,cell[k]),removed&&(k--,len--)}},getNearObject:function(point){var i,j,k,row,cell,len,obj,dist,x=this._getCoord(point.x),y=this._getCoord(point.y),objectPoint=this._objectPoint,closestDistSq=this._sqCellSize,closest=null;for(i=y-1;y+1>=i;i++)if(row=this._grid[i])for(j=x-1;x+1>=j;j++)if(cell=row[j])for(k=0,len=cell.length;len>k;k++)obj=cell[k],dist=this._sqDist(objectPoint[L.Util.stamp(obj)],point),closestDistSq>dist&&(closestDistSq=dist,closest=obj);return closest},_getCoord:function(x){return Math.floor(x/this._cellSize)},_sqDist:function(p,p2){var dx=p2.x-p.x,dy=p2.y-p.y;return dx*dx+dy*dy}},function(){L.QuickHull={getDistant:function(cpt,bl){var vY=bl[1].lat-bl[0].lat,vX=bl[0].lng-bl[1].lng;return vX*(cpt.lat-bl[0].lat)+vY*(cpt.lng-bl[0].lng)},findMostDistantPointFromBaseLine:function(baseLine,latLngs){var i,pt,d,maxD=0,maxPt=null,newPoints=[];for(i=latLngs.length-1;i>=0;i--)pt=latLngs[i],d=this.getDistant(pt,baseLine),d>0&&(newPoints.push(pt),d>maxD&&(maxD=d,maxPt=pt));return{maxPoint:maxPt,newPoints:newPoints}},buildConvexHull:function(baseLine,latLngs){var convexHullBaseLines=[],t=this.findMostDistantPointFromBaseLine(baseLine,latLngs);return t.maxPoint?(convexHullBaseLines=convexHullBaseLines.concat(this.buildConvexHull([baseLine[0],t.maxPoint],t.newPoints)),convexHullBaseLines=convexHullBaseLines.concat(this.buildConvexHull([t.maxPoint,baseLine[1]],t.newPoints))):[baseLine[0]]},getConvexHull:function(latLngs){var i,maxLat=!1,minLat=!1,maxPt=null,minPt=null;for(i=latLngs.length-1;i>=0;i--){var pt=latLngs[i];(maxLat===!1||pt.lat>maxLat)&&(maxPt=pt,maxLat=pt.lat),(minLat===!1||pt.lat<minLat)&&(minPt=pt,minLat=pt.lat)}var ch=[].concat(this.buildConvexHull([minPt,maxPt],latLngs),this.buildConvexHull([maxPt,minPt],latLngs));return ch}}}(),L.MarkerCluster.include({getConvexHull:function(){var p,i,childMarkers=this.getAllChildMarkers(),points=[];for(i=childMarkers.length-1;i>=0;i--)p=childMarkers[i].getLatLng(),points.push(p);return L.QuickHull.getConvexHull(points)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:Math.PI/6,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var positions,childMarkers=this.getAllChildMarkers(),group=this._group,map=group._map,center=map.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,childMarkers.length>=this._circleSpiralSwitchover?positions=this._generatePointsSpiral(childMarkers.length,center):(center.y+=10,positions=this._generatePointsCircle(childMarkers.length,center)),this._animationSpiderfy(childMarkers,positions)}},unspiderfy:function(zoomDetails){this._group._inZoomAnimation||(this._animationUnspiderfy(zoomDetails),this._group._spiderfied=null)},_generatePointsCircle:function(count,centerPt){var i,angle,circumference=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+count),legLength=circumference/this._2PI,angleStep=this._2PI/count,res=[];for(res.length=count,i=count-1;i>=0;i--)angle=this._circleStartAngle+i*angleStep,res[i]=new L.Point(centerPt.x+legLength*Math.cos(angle),centerPt.y+legLength*Math.sin(angle))._round();return res},_generatePointsSpiral:function(count,centerPt){var i,legLength=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthStart,separation=this._group.options.spiderfyDistanceMultiplier*this._spiralFootSeparation,lengthFactor=this._group.options.spiderfyDistanceMultiplier*this._spiralLengthFactor,angle=0,res=[];for(res.length=count,i=count-1;i>=0;i--)angle+=separation/legLength+5e-4*i,res[i]=new L.Point(centerPt.x+legLength*Math.cos(angle),centerPt.y+legLength*Math.sin(angle))._round(),legLength+=this._2PI*lengthFactor/angle;return res},_noanimationUnspiderfy:function(){var m,i,group=this._group,map=group._map,fg=group._featureGroup,childMarkers=this.getAllChildMarkers();for(this.setOpacity(1),i=childMarkers.length-1;i>=0;i--)m=childMarkers[i],fg.removeLayer(m),m._preSpiderfyLatlng&&(m.setLatLng(m._preSpiderfyLatlng),delete m._preSpiderfyLatlng),m.setZIndexOffset&&m.setZIndexOffset(0),m._spiderLeg&&(map.removeLayer(m._spiderLeg),delete m._spiderLeg);group._spiderfied=null}}),L.MarkerCluster.include(L.DomUtil.TRANSITION?{SVG_ANIMATION:function(){return document.createElementNS("http://www.w3.org/2000/svg","animate").toString().indexOf("SVGAnimate")>-1}(),_animationSpiderfy:function(childMarkers,positions){var i,m,leg,newPos,me=this,group=this._group,map=group._map,fg=group._featureGroup,thisLayerPos=map.latLngToLayerPoint(this._latlng);for(i=childMarkers.length-1;i>=0;i--)m=childMarkers[i],m.setOpacity?(m.setZIndexOffset(1e6),m.setOpacity(0),fg.addLayer(m),m._setPos(thisLayerPos)):fg.addLayer(m);group._forceLayout(),group._animationStart();var initialLegOpacity=L.Path.SVG?0:.3,xmlns=L.Path.SVG_NS;for(i=childMarkers.length-1;i>=0;i--)if(newPos=map.layerPointToLatLng(positions[i]),m=childMarkers[i],m._preSpiderfyLatlng=m._latlng,m.setLatLng(newPos),m.setOpacity&&m.setOpacity(1),leg=new L.Polyline([me._latlng,newPos],{weight:1.5,color:"#222",opacity:initialLegOpacity}),map.addLayer(leg),m._spiderLeg=leg,L.Path.SVG&&this.SVG_ANIMATION){var length=leg._path.getTotalLength();leg._path.setAttribute("stroke-dasharray",length+","+length);var anim=document.createElementNS(xmlns,"animate");anim.setAttribute("attributeName","stroke-dashoffset"),anim.setAttribute("begin","indefinite"),anim.setAttribute("from",length),anim.setAttribute("to",0),anim.setAttribute("dur",.25),leg._path.appendChild(anim),anim.beginElement(),anim=document.createElementNS(xmlns,"animate"),anim.setAttribute("attributeName","stroke-opacity"),anim.setAttribute("attributeName","stroke-opacity"),anim.setAttribute("begin","indefinite"),anim.setAttribute("from",0),anim.setAttribute("to",.5),anim.setAttribute("dur",.25),leg._path.appendChild(anim),anim.beginElement()}if(me.setOpacity(.3),L.Path.SVG)for(this._group._forceLayout(),i=childMarkers.length-1;i>=0;i--)m=childMarkers[i]._spiderLeg,m.options.opacity=.5,m._path.setAttribute("stroke-opacity",.5);setTimeout(function(){group._animationEnd(),group.fire("spiderfied")},200)},_animationUnspiderfy:function(zoomDetails){var m,i,a,group=this._group,map=group._map,fg=group._featureGroup,thisLayerPos=zoomDetails?map._latLngToNewLayerPoint(this._latlng,zoomDetails.zoom,zoomDetails.center):map.latLngToLayerPoint(this._latlng),childMarkers=this.getAllChildMarkers(),svg=L.Path.SVG&&this.SVG_ANIMATION;for(group._animationStart(),this.setOpacity(1),i=childMarkers.length-1;i>=0;i--)m=childMarkers[i],m._preSpiderfyLatlng&&(m.setLatLng(m._preSpiderfyLatlng),delete m._preSpiderfyLatlng,m.setOpacity?(m._setPos(thisLayerPos),m.setOpacity(0)):fg.removeLayer(m),svg&&(a=m._spiderLeg._path.childNodes[0],a.setAttribute("to",a.getAttribute("from")),a.setAttribute("from",0),a.beginElement(),a=m._spiderLeg._path.childNodes[1],a.setAttribute("from",.5),a.setAttribute("to",0),a.setAttribute("stroke-opacity",0),a.beginElement(),m._spiderLeg._path.setAttribute("stroke-opacity",0)));setTimeout(function(){var stillThereChildCount=0;for(i=childMarkers.length-1;i>=0;i--)m=childMarkers[i],m._spiderLeg&&stillThereChildCount++;for(i=childMarkers.length-1;i>=0;i--)m=childMarkers[i],m._spiderLeg&&(m.setOpacity&&(m.setOpacity(1),m.setZIndexOffset(0)),stillThereChildCount>1&&fg.removeLayer(m),map.removeLayer(m._spiderLeg),delete m._spiderLeg);group._animationEnd()},200)}}:{_animationSpiderfy:function(childMarkers,positions){var i,m,leg,newPos,group=this._group,map=group._map,fg=group._featureGroup;for(i=childMarkers.length-1;i>=0;i--)newPos=map.layerPointToLatLng(positions[i]),m=childMarkers[i],m._preSpiderfyLatlng=m._latlng,m.setLatLng(newPos),m.setZIndexOffset&&m.setZIndexOffset(1e6),fg.addLayer(m),leg=new L.Polyline([this._latlng,newPos],{weight:1.5,color:"#222"}),map.addLayer(leg),m._spiderLeg=leg;this.setOpacity(.3),group.fire("spiderfied")},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerClusterGroup.include({_spiderfied:null,_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Path.SVG&&!L.Browser.touch&&this._map._initPathRoot()},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(zoomDetails){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(zoomDetails))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(zoomDetails){this._spiderfied&&this._spiderfied.unspiderfy(zoomDetails)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(layer){layer._spiderLeg&&(this._featureGroup.removeLayer(layer),layer.setOpacity(1),layer.setZIndexOffset(0),this._map.removeLayer(layer._spiderLeg),delete layer._spiderLeg)}})}(window,document),L.Control.Coordinates=L.Control.extend({options:{position:"bottomright",decimals:4,decimalSeperator:".",labelTemplateLat:"Lat: {y}",labelTemplateLng:"Lng: {x}",labelFormatterLat:void 0,labelFormatterLng:void 0,enableUserInput:!0,useDMS:!1,useLatLngOrder:!1,centerUserCoordinates:!1},onAdd:function(a){this._map=a;var b="leaflet-control-coordinates",c=this._container=L.DomUtil.create("div",b),d=this.options;this._labelcontainer=L.DomUtil.create("div","uiElement label",c),this._label=L.DomUtil.create("span","labelFirst",this._labelcontainer),this._inputcontainer=L.DomUtil.create("div","uiElement input uiHidden",c);var e,f;return d.useLatLngOrder?(f=L.DomUtil.create("span","",this._inputcontainer),this._inputY=this._createInput("inputY",this._inputcontainer),e=L.DomUtil.create("span","",this._inputcontainer),this._inputX=this._createInput("inputX",this._inputcontainer)):(e=L.DomUtil.create("span","",this._inputcontainer),this._inputX=this._createInput("inputX",this._inputcontainer),f=L.DomUtil.create("span","",this._inputcontainer),this._inputY=this._createInput("inputY",this._inputcontainer)),e.innerHTML=d.labelTemplateLng.replace("{x}",""),f.innerHTML=d.labelTemplateLat.replace("{y}",""),L.DomEvent.on(this._inputX,"keyup",this._handleKeypress,this),L.DomEvent.on(this._inputY,"keyup",this._handleKeypress,this),a.on("mousemove",this._update,this),a.on("dragstart",this.collapse,this),a.whenReady(this._update,this),this._showsCoordinates=!0,d.enableUserInput&&L.DomEvent.addListener(this._container,"click",this._switchUI,this),c},_createInput:function(a,b){var c=L.DomUtil.create("input",a,b);return c.type="text",L.DomEvent.disableClickPropagation(c),c},_clearMarker:function(){this._map.removeLayer(this._marker)},_handleKeypress:function(a){switch(a.keyCode){case 27:this.collapse();break;case 13:this._handleSubmit(),this.collapse();break;default:this._handleSubmit()}},_handleSubmit:function(){var a=L.NumberFormatter.createValidNumber(this._inputX.value,this.options.decimalSeperator),b=L.NumberFormatter.createValidNumber(this._inputY.value,this.options.decimalSeperator);if(void 0!==a&&void 0!==b){var c=this._marker;c||(c=this._marker=L.marker(),c.on("click",this._clearMarker,this));var d=new L.LatLng(b,a);c.setLatLng(d),c.addTo(this._map),this.options.centerUserCoordinates&&this._map.setView(d,this._map.getZoom())}},expand:function(){this._showsCoordinates=!1,this._map.off("mousemove",this._update,this),L.DomEvent.addListener(this._container,"mousemove",L.DomEvent.stop),L.DomEvent.removeListener(this._container,"click",this._switchUI,this),L.DomUtil.addClass(this._labelcontainer,"uiHidden"),L.DomUtil.removeClass(this._inputcontainer,"uiHidden")},_createCoordinateLabel:function(a){var b,c,d=this.options;return b=d.labelFormatterLng?d.labelFormatterLng(a.lng):L.Util.template(d.labelTemplateLng,{x:this._getNumber(a.lng,d)}),c=d.labelFormatterLat?d.labelFormatterLat(a.lat):L.Util.template(d.labelTemplateLat,{y:this._getNumber(a.lat,d)}),d.useLatLngOrder?c+" "+b:b+" "+c},_getNumber:function(a,b){var c;return c=b.useDMS?L.NumberFormatter.toDMS(a):L.NumberFormatter.round(a,b.decimals,b.decimalSeperator)},collapse:function(){if(!this._showsCoordinates&&(this._map.on("mousemove",this._update,this),this._showsCoordinates=!0,this.options,L.DomEvent.addListener(this._container,"click",this._switchUI,this),L.DomEvent.removeListener(this._container,"mousemove",L.DomEvent.stop),L.DomUtil.addClass(this._inputcontainer,"uiHidden"),L.DomUtil.removeClass(this._labelcontainer,"uiHidden"),this._marker)){var a=L.marker(),b=this._marker.getLatLng();a.setLatLng(b);var c=L.DomUtil.create("div",""),d=L.DomUtil.create("div","",c);d.innerHTML=this._createCoordinateLabel(b);var e=L.DomUtil.create("a","",c);e.innerHTML="Remove",e.href="#";var f=L.DomEvent.stopPropagation;L.DomEvent.on(e,"click",f).on(e,"mousedown",f).on(e,"dblclick",f).on(e,"click",L.DomEvent.preventDefault).on(e,"click",function(){this._map.removeLayer(a)},this),a.bindPopup(c),a.addTo(this._map),this._map.removeLayer(this._marker),this._marker=null}},_switchUI:function(a){L.DomEvent.stop(a),L.DomEvent.stopPropagation(a),L.DomEvent.preventDefault(a),this._showsCoordinates?this.expand():this.collapse()},onRemove:function(a){a.off("mousemove",this._update,this)},_update:function(a){var b=a.latlng,c=this.options;b&&(b=b.wrap(),this._currentPos=b,this._inputY.value=L.NumberFormatter.round(b.lat,c.decimals,c.decimalSeperator),this._inputX.value=L.NumberFormatter.round(b.lng,c.decimals,c.decimalSeperator),this._label.innerHTML=this._createCoordinateLabel(b))}}),L.control.coordinates=function(a){return new L.Control.Coordinates(a)},L.Map.mergeOptions({coordinateControl:!1}),L.Map.addInitHook(function(){this.options.coordinateControl&&(this.coordinateControl=new L.Control.Coordinates,this.addControl(this.coordinateControl))}),L.NumberFormatter={round:function(a,b,c){var d=L.Util.formatNum(a,b)+"",e=d.split(".");if(e[1]){for(var f=b-e[1].length;f>0;f--)e[1]+="0";d=e.join(c||".")}return d},toDMS:function(a){var b=Math.floor(a),c=60*(a-b),d=Math.floor(c),e=60*(c-d),f=Math.round(e);return 60==f&&(d++,f="00"),60==d&&(b++,d="00"),10>f&&(f="0"+f),10>d&&(d="0"+d),""+b+"&deg; "+d+"' "+f+"''"},createValidNumber:function(a,b){if(a&&a.length>0){var c=a.split(b||".");try{var d=Number(c.join("."));return isNaN(d)?void 0:d}catch(e){return void 0}}return void 0}},L.Graticule=L.GeoJSON.extend({options:{style:{color:"#333",weight:1},interval:20},initialize:function(options){L.Util.setOptions(this,options),this._layers={},this.addData(this.options.sphere?this._getFrame():this._getGraticule())},_getFrame:function(){return{type:"Polygon",coordinates:[this._getMeridian(-180).concat(this._getMeridian(180).reverse())]}},_getGraticule:function(){for(var features=[],interval=this.options.interval,lng=0;180>=lng;lng+=interval)features.push(this._getFeature(this._getMeridian(lng),{name:lng?lng.toString()+"° E":"Prime meridian"})),0!==lng&&features.push(this._getFeature(this._getMeridian(-lng),{name:lng.toString()+"° W"}));for(var lat=0;90>=lat;lat+=interval)features.push(this._getFeature(this._getParallel(lat),{name:lat?lat.toString()+"° N":"Equator"})),0!==lat&&features.push(this._getFeature(this._getParallel(-lat),{name:lat.toString()+"° S"}));return{type:"FeatureCollection",features:features}},_getMeridian:function(lng){lng=this._lngFix(lng);for(var coords=[],lat=-90;90>=lat;lat++)coords.push([lng,lat]);return coords},_getParallel:function(lat){for(var coords=[],lng=-180;180>=lng;lng++)coords.push([this._lngFix(lng),lat]);return coords},_getFeature:function(coords,prop){return{type:"Feature",geometry:{type:"LineString",coordinates:coords},properties:prop}},_lngFix:function(lng){return lng>=180?179.999999:-180>=lng?-179.999999:lng}}),L.graticule=function(options){return new L.Graticule(options)},Date.CultureInfo={name:"en-US",englishName:"English (United States)",nativeName:"English (United States)",dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbreviatedDayNames:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],shortestDayNames:["Su","Mo","Tu","We","Th","Fr","Sa"],firstLetterDayNames:["S","M","T","W","T","F","S"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],abbreviatedMonthNames:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],amDesignator:"AM",pmDesignator:"PM",firstDayOfWeek:0,twoDigitYearMax:2029,dateElementOrder:"mdy",formatPatterns:{shortDate:"M/d/yyyy",longDate:"dddd, MMMM dd, yyyy",shortTime:"h:mm tt",longTime:"h:mm:ss tt",fullDateTime:"dddd, MMMM dd, yyyy h:mm:ss tt",sortableDateTime:"yyyy-MM-ddTHH:mm:ss",universalSortableDateTime:"yyyy-MM-dd HH:mm:ssZ",rfc1123:"ddd, dd MMM yyyy HH:mm:ss GMT",monthDay:"MMMM dd",yearMonth:"MMMM, yyyy"},regexPatterns:{jan:/^jan(uary)?/i,feb:/^feb(ruary)?/i,mar:/^mar(ch)?/i,apr:/^apr(il)?/i,may:/^may/i,jun:/^jun(e)?/i,jul:/^jul(y)?/i,aug:/^aug(ust)?/i,sep:/^sep(t(ember)?)?/i,oct:/^oct(ober)?/i,nov:/^nov(ember)?/i,dec:/^dec(ember)?/i,sun:/^su(n(day)?)?/i,mon:/^mo(n(day)?)?/i,tue:/^tu(e(s(day)?)?)?/i,wed:/^we(d(nesday)?)?/i,thu:/^th(u(r(s(day)?)?)?)?/i,fri:/^fr(i(day)?)?/i,sat:/^sa(t(urday)?)?/i,future:/^next/i,past:/^last|past|prev(ious)?/i,add:/^(\+|after|from)/i,subtract:/^(\-|before|ago)/i,yesterday:/^yesterday/i,today:/^t(oday)?/i,tomorrow:/^tomorrow/i,now:/^n(ow)?/i,millisecond:/^ms|milli(second)?s?/i,second:/^sec(ond)?s?/i,minute:/^min(ute)?s?/i,hour:/^h(ou)?rs?/i,week:/^w(ee)?k/i,month:/^m(o(nth)?s?)?/i,day:/^d(ays?)?/i,year:/^y((ea)?rs?)?/i,shortMeridian:/^(a|p)/i,longMeridian:/^(a\.?m?\.?|p\.?m?\.?)/i,timezone:/^((e(s|d)t|c(s|d)t|m(s|d)t|p(s|d)t)|((gmt)?\s*(\+|\-)\s*\d\d\d\d?)|gmt)/i,ordinalSuffix:/^\s*(st|nd|rd|th)/i,timeContext:/^\s*(\:|a|p)/i},abbreviatedTimeZoneStandard:{GMT:"-000",EST:"-0400",CST:"-0500",MST:"-0600",PST:"-0700"},abbreviatedTimeZoneDST:{GMT:"-000",EDT:"-0500",CDT:"-0600",MDT:"-0700",PDT:"-0800"}},Date.getMonthNumberFromName=function(name){for(var n=Date.CultureInfo.monthNames,m=Date.CultureInfo.abbreviatedMonthNames,s=name.toLowerCase(),i=0;i<n.length;i++)if(n[i].toLowerCase()==s||m[i].toLowerCase()==s)return i;return-1},Date.getDayNumberFromName=function(name){for(var n=Date.CultureInfo.dayNames,m=Date.CultureInfo.abbreviatedDayNames,s=(Date.CultureInfo.shortestDayNames,name.toLowerCase()),i=0;i<n.length;i++)if(n[i].toLowerCase()==s||m[i].toLowerCase()==s)return i;return-1},Date.isLeapYear=function(year){return year%4===0&&year%100!==0||year%400===0},Date.getDaysInMonth=function(year,month){return[31,Date.isLeapYear(year)?29:28,31,30,31,30,31,31,30,31,30,31][month]},Date.getTimezoneOffset=function(s,dst){return dst?Date.CultureInfo.abbreviatedTimeZoneDST[s.toUpperCase()]:Date.CultureInfo.abbreviatedTimeZoneStandard[s.toUpperCase()]},Date.getTimezoneAbbreviation=function(offset,dst){var p,n=dst?Date.CultureInfo.abbreviatedTimeZoneDST:Date.CultureInfo.abbreviatedTimeZoneStandard;for(p in n)if(n[p]===offset)return p;return null},Date.prototype.clone=function(){return new Date(this.getTime())},Date.prototype.compareTo=function(date){if(isNaN(this))throw new Error(this);if(date instanceof Date&&!isNaN(date))return this>date?1:date>this?-1:0;throw new TypeError(date)},Date.prototype.equals=function(date){return 0===this.compareTo(date)},Date.prototype.between=function(start,end){var t=this.getTime();return t>=start.getTime()&&t<=end.getTime()},Date.prototype.addMilliseconds=function(value){return this.setMilliseconds(this.getMilliseconds()+value),this},Date.prototype.addSeconds=function(value){return this.addMilliseconds(1e3*value)},Date.prototype.addMinutes=function(value){return this.addMilliseconds(6e4*value)},Date.prototype.addHours=function(value){return this.addMilliseconds(36e5*value)},Date.prototype.addDays=function(value){return this.addMilliseconds(864e5*value)},Date.prototype.addWeeks=function(value){return this.addMilliseconds(6048e5*value)},Date.prototype.addMonths=function(value){var n=this.getDate();return this.setDate(1),this.setMonth(this.getMonth()+value),this.setDate(Math.min(n,this.getDaysInMonth())),this},Date.prototype.addYears=function(value){return this.addMonths(12*value)},Date.prototype.add=function(config){if("number"==typeof config)return this._orient=config,this;var x=config;return(x.millisecond||x.milliseconds)&&this.addMilliseconds(x.millisecond||x.milliseconds),(x.second||x.seconds)&&this.addSeconds(x.second||x.seconds),(x.minute||x.minutes)&&this.addMinutes(x.minute||x.minutes),(x.hour||x.hours)&&this.addHours(x.hour||x.hours),(x.month||x.months)&&this.addMonths(x.month||x.months),(x.year||x.years)&&this.addYears(x.year||x.years),(x.day||x.days)&&this.addDays(x.day||x.days),this},Date._validate=function(value,min,max,name){if("number"!=typeof value)throw new TypeError(value+" is not a Number.");if(min>value||value>max)throw new RangeError(value+" is not a valid value for "+name+".");return!0},Date.validateMillisecond=function(n){return Date._validate(n,0,999,"milliseconds")},Date.validateSecond=function(n){return Date._validate(n,0,59,"seconds")},Date.validateMinute=function(n){return Date._validate(n,0,59,"minutes")},Date.validateHour=function(n){return Date._validate(n,0,23,"hours")},Date.validateDay=function(n,year,month){return Date._validate(n,1,Date.getDaysInMonth(year,month),"days")},Date.validateMonth=function(n){return Date._validate(n,0,11,"months")},Date.validateYear=function(n){return Date._validate(n,1,9999,"seconds")},Date.prototype.set=function(config){var x=config;return x.millisecond||0===x.millisecond||(x.millisecond=-1),x.second||0===x.second||(x.second=-1),x.minute||0===x.minute||(x.minute=-1),x.hour||0===x.hour||(x.hour=-1),x.day||0===x.day||(x.day=-1),x.month||0===x.month||(x.month=-1),x.year||0===x.year||(x.year=-1),-1!=x.millisecond&&Date.validateMillisecond(x.millisecond)&&this.addMilliseconds(x.millisecond-this.getMilliseconds()),-1!=x.second&&Date.validateSecond(x.second)&&this.addSeconds(x.second-this.getSeconds()),-1!=x.minute&&Date.validateMinute(x.minute)&&this.addMinutes(x.minute-this.getMinutes()),-1!=x.hour&&Date.validateHour(x.hour)&&this.addHours(x.hour-this.getHours()),-1!==x.month&&Date.validateMonth(x.month)&&this.addMonths(x.month-this.getMonth()),-1!=x.year&&Date.validateYear(x.year)&&this.addYears(x.year-this.getFullYear()),-1!=x.day&&Date.validateDay(x.day,this.getFullYear(),this.getMonth())&&this.addDays(x.day-this.getDate()),x.timezone&&this.setTimezone(x.timezone),x.timezoneOffset&&this.setTimezoneOffset(x.timezoneOffset),this
},Date.prototype.clearTime=function(){return this.setHours(0),this.setMinutes(0),this.setSeconds(0),this.setMilliseconds(0),this},Date.prototype.isLeapYear=function(){var y=this.getFullYear();return y%4===0&&y%100!==0||y%400===0},Date.prototype.isWeekday=function(){return!(this.is().sat()||this.is().sun())},Date.prototype.getDaysInMonth=function(){return Date.getDaysInMonth(this.getFullYear(),this.getMonth())},Date.prototype.moveToFirstDayOfMonth=function(){return this.set({day:1})},Date.prototype.moveToLastDayOfMonth=function(){return this.set({day:this.getDaysInMonth()})},Date.prototype.moveToDayOfWeek=function(day,orient){var diff=(day-this.getDay()+7*(orient||1))%7;return this.addDays(0===diff?diff+=7*(orient||1):diff)},Date.prototype.moveToMonth=function(month,orient){var diff=(month-this.getMonth()+12*(orient||1))%12;return this.addMonths(0===diff?diff+=12*(orient||1):diff)},Date.prototype.getDayOfYear=function(){return Math.floor((this-new Date(this.getFullYear(),0,1))/864e5)},Date.prototype.getWeekOfYear=function(firstDayOfWeek){var y=this.getFullYear(),m=this.getMonth(),d=this.getDate(),dow=firstDayOfWeek||Date.CultureInfo.firstDayOfWeek,offset=8-new Date(y,0,1).getDay();8==offset&&(offset=1);var daynum=(Date.UTC(y,m,d,0,0,0)-Date.UTC(y,0,1,0,0,0))/864e5+1,w=Math.floor((daynum-offset+7)/7);if(w===dow){y--;var prevOffset=8-new Date(y,0,1).getDay();w=2==prevOffset||8==prevOffset?53:52}return w},Date.prototype.isDST=function(){return console.log("isDST"),"D"==this.toString().match(/(E|C|M|P)(S|D)T/)[2]},Date.prototype.getTimezone=function(){return Date.getTimezoneAbbreviation(this.getUTCOffset,this.isDST())},Date.prototype.setTimezoneOffset=function(s){var here=this.getTimezoneOffset(),there=-6*Number(s)/10;return this.addMinutes(there-here),this},Date.prototype.setTimezone=function(s){return this.setTimezoneOffset(Date.getTimezoneOffset(s))},Date.prototype.getUTCOffset=function(){var r,n=-10*this.getTimezoneOffset()/6;return 0>n?(r=(n-1e4).toString(),r[0]+r.substr(2)):(r=(n+1e4).toString(),"+"+r.substr(1))},Date.prototype.getDayName=function(abbrev){return abbrev?Date.CultureInfo.abbreviatedDayNames[this.getDay()]:Date.CultureInfo.dayNames[this.getDay()]},Date.prototype.getMonthName=function(abbrev){return abbrev?Date.CultureInfo.abbreviatedMonthNames[this.getMonth()]:Date.CultureInfo.monthNames[this.getMonth()]},Date.prototype._toString=Date.prototype.toString,Date.prototype.toString=function(format){var self=this,p=function(s){return 1==s.toString().length?"0"+s:s};return format?format.replace(/dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?/g,function(format){switch(format){case"hh":return p(self.getHours()<13?self.getHours():self.getHours()-12);case"h":return self.getHours()<13?self.getHours():self.getHours()-12;case"HH":return p(self.getHours());case"H":return self.getHours();case"mm":return p(self.getMinutes());case"m":return self.getMinutes();case"ss":return p(self.getSeconds());case"s":return self.getSeconds();case"yyyy":return self.getFullYear();case"yy":return self.getFullYear().toString().substring(2,4);case"dddd":return self.getDayName();case"ddd":return self.getDayName(!0);case"dd":return p(self.getDate());case"d":return self.getDate().toString();case"MMMM":return self.getMonthName();case"MMM":return self.getMonthName(!0);case"MM":return p(self.getMonth()+1);case"M":return self.getMonth()+1;case"t":return self.getHours()<12?Date.CultureInfo.amDesignator.substring(0,1):Date.CultureInfo.pmDesignator.substring(0,1);case"tt":return self.getHours()<12?Date.CultureInfo.amDesignator:Date.CultureInfo.pmDesignator;case"zzz":case"zz":case"z":return""}}):this._toString()},Date.now=function(){return new Date},Date.today=function(){return Date.now().clearTime()},Date.prototype._orient=1,Date.prototype.next=function(){return this._orient=1,this},Date.prototype.last=Date.prototype.prev=Date.prototype.previous=function(){return this._orient=-1,this},Date.prototype._is=!1,Date.prototype.is=function(){return this._is=!0,this},Number.prototype._dateElement="day",Number.prototype.fromNow=function(){var c={};return c[this._dateElement]=this,Date.now().add(c)},Number.prototype.ago=function(){var c={};return c[this._dateElement]=-1*this,Date.now().add(c)},function(){for(var de,$D=Date.prototype,$N=Number.prototype,dx="sunday monday tuesday wednesday thursday friday saturday".split(/\s/),mx="january february march april may june july august september october november december".split(/\s/),px="Millisecond Second Minute Hour Day Week Month Year".split(/\s/),df=function(n){return function(){return this._is?(this._is=!1,this.getDay()==n):this.moveToDayOfWeek(n,this._orient)}},i=0;i<dx.length;i++)$D[dx[i]]=$D[dx[i].substring(0,3)]=df(i);for(var mf=function(n){return function(){return this._is?(this._is=!1,this.getMonth()===n):this.moveToMonth(n,this._orient)}},j=0;j<mx.length;j++)$D[mx[j]]=$D[mx[j].substring(0,3)]=mf(j);for(var ef=function(j){return function(){return"s"!=j.substring(j.length-1)&&(j+="s"),this["add"+j](this._orient)}},nf=function(n){return function(){return this._dateElement=n,this}},k=0;k<px.length;k++)de=px[k].toLowerCase(),$D[de]=$D[de+"s"]=ef(px[k]),$N[de]=$N[de+"s"]=nf(de)}(),Date.prototype.toJSONString=function(){return this.toString("yyyy-MM-ddThh:mm:ssZ")},Date.prototype.toShortDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortDatePattern)},Date.prototype.toLongDateString=function(){return this.toString(Date.CultureInfo.formatPatterns.longDatePattern)},Date.prototype.toShortTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.shortTimePattern)},Date.prototype.toLongTimeString=function(){return this.toString(Date.CultureInfo.formatPatterns.longTimePattern)},Date.prototype.getOrdinal=function(){switch(this.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},function(){Date.Parsing={Exception:function(s){this.message="Parse error at '"+s.substring(0,10)+" ...'"}};for(var $P=Date.Parsing,_=$P.Operators={rtoken:function(r){return function(s){var mx=s.match(r);if(mx)return[mx[0],s.substring(mx[0].length)];throw new $P.Exception(s)}},token:function(){return function(s){return _.rtoken(new RegExp("^s*"+s+"s*"))(s)}},stoken:function(s){return _.rtoken(new RegExp("^"+s))},until:function(p){return function(s){for(var qx=[],rx=null;s.length;){try{rx=p.call(this,s)}catch(e){qx.push(rx[0]),s=rx[1];continue}break}return[qx,s]}},many:function(p){return function(s){for(var rx=[],r=null;s.length;){try{r=p.call(this,s)}catch(e){return[rx,s]}rx.push(r[0]),s=r[1]}return[rx,s]}},optional:function(p){return function(s){var r=null;try{r=p.call(this,s)}catch(e){return[null,s]}return[r[0],r[1]]}},not:function(p){return function(s){try{p.call(this,s)}catch(e){return[null,s]}throw new $P.Exception(s)}},ignore:function(p){return p?function(s){var r=null;return r=p.call(this,s),[null,r[1]]}:null},product:function(){for(var px=arguments[0],qx=Array.prototype.slice.call(arguments,1),rx=[],i=0;i<px.length;i++)rx.push(_.each(px[i],qx));return rx},cache:function(rule){var cache={},r=null;return function(s){try{r=cache[s]=cache[s]||rule.call(this,s)}catch(e){r=cache[s]=e}if(r instanceof $P.Exception)throw r;return r}},any:function(){var px=arguments;return function(s){for(var r=null,i=0;i<px.length;i++)if(null!=px[i]){try{r=px[i].call(this,s)}catch(e){r=null}if(r)return r}throw new $P.Exception(s)}},each:function(){var px=arguments;return function(s){for(var rx=[],r=null,i=0;i<px.length;i++)if(null!=px[i]){try{r=px[i].call(this,s)}catch(e){throw new $P.Exception(s)}rx.push(r[0]),s=r[1]}return[rx,s]}},all:function(){var px=arguments,_=_;return _.each(_.optional(px))},sequence:function(px,d,c){return d=d||_.rtoken(/^\s*/),c=c||null,1==px.length?px[0]:function(s){for(var r=null,q=null,rx=[],i=0;i<px.length;i++){try{r=px[i].call(this,s)}catch(e){break}rx.push(r[0]);try{q=d.call(this,r[1])}catch(ex){q=null;break}s=q[1]}if(!r)throw new $P.Exception(s);if(q)throw new $P.Exception(q[1]);if(c)try{r=c.call(this,r[1])}catch(ey){throw new $P.Exception(r[1])}return[rx,r?r[1]:s]}},between:function(d1,p,d2){d2=d2||d1;var _fn=_.each(_.ignore(d1),p,_.ignore(d2));return function(s){var rx=_fn.call(this,s);return[[rx[0][0],r[0][2]],rx[1]]}},list:function(p,d,c){return d=d||_.rtoken(/^\s*/),c=c||null,p instanceof Array?_.each(_.product(p.slice(0,-1),_.ignore(d)),p.slice(-1),_.ignore(c)):_.each(_.many(_.each(p,_.ignore(d))),px,_.ignore(c))},set:function(px,d,c){return d=d||_.rtoken(/^\s*/),c=c||null,function(s){for(var r=null,p=null,q=null,rx=null,best=[[],s],last=!1,i=0;i<px.length;i++){q=null,p=null,r=null,last=1==px.length;try{r=px[i].call(this,s)}catch(e){continue}if(rx=[[r[0]],r[1]],r[1].length>0&&!last)try{q=d.call(this,r[1])}catch(ex){last=!0}else last=!0;if(last||0!==q[1].length||(last=!0),!last){for(var qx=[],j=0;j<px.length;j++)i!=j&&qx.push(px[j]);p=_.set(qx,d).call(this,q[1]),p[0].length>0&&(rx[0]=rx[0].concat(p[0]),rx[1]=p[1])}if(rx[1].length<best[1].length&&(best=rx),0===best[1].length)break}if(0===best[0].length)return best;if(c){try{q=c.call(this,best[1])}catch(ey){throw new $P.Exception(best[1])}best[1]=q[1]}return best}},forward:function(gr,fname){return function(s){return gr[fname].call(this,s)}},replace:function(rule,repl){return function(s){var r=rule.call(this,s);return[repl,r[1]]}},process:function(rule,fn){return function(s){var r=rule.call(this,s);return[fn.call(this,r[0]),r[1]]}},min:function(min,rule){return function(s){var rx=rule.call(this,s);if(rx[0].length<min)throw new $P.Exception(s);return rx}}},_generator=function(op){return function(){var args=null,rx=[];if(arguments.length>1?args=Array.prototype.slice.call(arguments):arguments[0]instanceof Array&&(args=arguments[0]),!args)return op.apply(null,arguments);for(var i=0,px=args.shift();i<px.length;i++)return args.unshift(px[i]),rx.push(op.apply(null,args)),args.shift(),rx}},gx="optional not ignore cache".split(/\s/),i=0;i<gx.length;i++)_[gx[i]]=_generator(_[gx[i]]);for(var _vector=function(op){return function(){return arguments[0]instanceof Array?op.apply(null,arguments[0]):op.apply(null,arguments)}},vx="each any all".split(/\s/),j=0;j<vx.length;j++)_[vx[j]]=_vector(_[vx[j]])}(),function(){var flattenAndCompact=function(ax){for(var rx=[],i=0;i<ax.length;i++)ax[i]instanceof Array?rx=rx.concat(flattenAndCompact(ax[i])):ax[i]&&rx.push(ax[i]);return rx};Date.Grammar={},Date.Translator={hour:function(s){return function(){this.hour=Number(s)}},minute:function(s){return function(){this.minute=Number(s)}},second:function(s){return function(){this.second=Number(s)}},meridian:function(s){return function(){this.meridian=s.slice(0,1).toLowerCase()}},timezone:function(s){return function(){var n=s.replace(/[^\d\+\-]/g,"");n.length?this.timezoneOffset=Number(n):this.timezone=s.toLowerCase()}},day:function(x){var s=x[0];return function(){this.day=Number(s.match(/\d+/)[0])}},month:function(s){return function(){this.month=3==s.length?Date.getMonthNumberFromName(s):Number(s)-1}},year:function(s){return function(){var n=Number(s);this.year=s.length>2?n:n+(n+2e3<Date.CultureInfo.twoDigitYearMax?2e3:1900)}},rday:function(s){return function(){switch(s){case"yesterday":this.days=-1;break;case"tomorrow":this.days=1;break;case"today":this.days=0;break;case"now":this.days=0,this.now=!0}}},finishExact:function(x){x=x instanceof Array?x:[x];var now=new Date;this.year=now.getFullYear(),this.month=now.getMonth(),this.day=1,this.hour=0,this.minute=0,this.second=0;for(var i=0;i<x.length;i++)x[i]&&x[i].call(this);if(this.hour="p"==this.meridian&&this.hour<13?this.hour+12:this.hour,this.day>Date.getDaysInMonth(this.year,this.month))throw new RangeError(this.day+" is not a valid value for days.");var r=new Date(this.year,this.month,this.day,this.hour,this.minute,this.second);return this.timezone?r.set({timezone:this.timezone}):this.timezoneOffset&&r.set({timezoneOffset:this.timezoneOffset}),r},finish:function(x){if(x=x instanceof Array?flattenAndCompact(x):[x],0===x.length)return null;for(var i=0;i<x.length;i++)"function"==typeof x[i]&&x[i].call(this);if(this.now)return new Date;var today=Date.today(),expression=!(null==this.days&&!this.orient&&!this.operator);if(expression){var gap,mod,orient;return orient="past"==this.orient||"subtract"==this.operator?-1:1,this.weekday&&(this.unit="day",gap=Date.getDayNumberFromName(this.weekday)-today.getDay(),mod=7,this.days=gap?(gap+orient*mod)%mod:orient*mod),this.month&&(this.unit="month",gap=this.month-today.getMonth(),mod=12,this.months=gap?(gap+orient*mod)%mod:orient*mod,this.month=null),this.unit||(this.unit="day"),(null==this[this.unit+"s"]||null!=this.operator)&&(this.value||(this.value=1),"week"==this.unit&&(this.unit="day",this.value=7*this.value),this[this.unit+"s"]=this.value*orient),today.add(this)}return this.meridian&&this.hour&&(this.hour=this.hour<13&&"p"==this.meridian?this.hour+12:this.hour),this.weekday&&!this.day&&(this.day=today.addDays(Date.getDayNumberFromName(this.weekday)-today.getDay()).getDate()),this.month&&!this.day&&(this.day=1),today.set(this)}};var _fn,_=Date.Parsing.Operators,g=Date.Grammar,t=Date.Translator;g.datePartDelimiter=_.rtoken(/^([\s\-\.\,\/\x27]+)/),g.timePartDelimiter=_.stoken(":"),g.whiteSpace=_.rtoken(/^\s*/),g.generalDelimiter=_.rtoken(/^(([\s\,]|at|on)+)/);var _C={};g.ctoken=function(keys){var fn=_C[keys];if(!fn){for(var c=Date.CultureInfo.regexPatterns,kx=keys.split(/\s+/),px=[],i=0;i<kx.length;i++)px.push(_.replace(_.rtoken(c[kx[i]]),kx[i]));fn=_C[keys]=_.any.apply(null,px)}return fn},g.ctoken2=function(key){return _.rtoken(Date.CultureInfo.regexPatterns[key])},g.h=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2]|[1-9])/),t.hour)),g.hh=_.cache(_.process(_.rtoken(/^(0[0-9]|1[0-2])/),t.hour)),g.H=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3]|[0-9])/),t.hour)),g.HH=_.cache(_.process(_.rtoken(/^([0-1][0-9]|2[0-3])/),t.hour)),g.m=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.minute)),g.mm=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.minute)),g.s=_.cache(_.process(_.rtoken(/^([0-5][0-9]|[0-9])/),t.second)),g.ss=_.cache(_.process(_.rtoken(/^[0-5][0-9]/),t.second)),g.hms=_.cache(_.sequence([g.H,g.mm,g.ss],g.timePartDelimiter)),g.t=_.cache(_.process(g.ctoken2("shortMeridian"),t.meridian)),g.tt=_.cache(_.process(g.ctoken2("longMeridian"),t.meridian)),g.z=_.cache(_.process(_.rtoken(/^(\+|\-)?\s*\d\d\d\d?/),t.timezone)),g.zz=_.cache(_.process(_.rtoken(/^(\+|\-)\s*\d\d\d\d/),t.timezone)),g.zzz=_.cache(_.process(g.ctoken2("timezone"),t.timezone)),g.timeSuffix=_.each(_.ignore(g.whiteSpace),_.set([g.tt,g.zzz])),g.time=_.each(_.optional(_.ignore(_.stoken("T"))),g.hms,g.timeSuffix),g.d=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1]|\d)/),_.optional(g.ctoken2("ordinalSuffix"))),t.day)),g.dd=_.cache(_.process(_.each(_.rtoken(/^([0-2]\d|3[0-1])/),_.optional(g.ctoken2("ordinalSuffix"))),t.day)),g.ddd=g.dddd=_.cache(_.process(g.ctoken("sun mon tue wed thu fri sat"),function(s){return function(){this.weekday=s}})),g.M=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d|\d)/),t.month)),g.MM=_.cache(_.process(_.rtoken(/^(1[0-2]|0\d)/),t.month)),g.MMM=g.MMMM=_.cache(_.process(g.ctoken("jan feb mar apr may jun jul aug sep oct nov dec"),t.month)),g.y=_.cache(_.process(_.rtoken(/^(\d\d?)/),t.year)),g.yy=_.cache(_.process(_.rtoken(/^(\d\d)/),t.year)),g.yyy=_.cache(_.process(_.rtoken(/^(\d\d?\d?\d?)/),t.year)),g.yyyy=_.cache(_.process(_.rtoken(/^(\d\d\d\d)/),t.year)),_fn=function(){return _.each(_.any.apply(null,arguments),_.not(g.ctoken2("timeContext")))},g.day=_fn(g.d,g.dd),g.month=_fn(g.M,g.MMM),g.year=_fn(g.yyyy,g.yy),g.orientation=_.process(g.ctoken("past future"),function(s){return function(){this.orient=s}}),g.operator=_.process(g.ctoken("add subtract"),function(s){return function(){this.operator=s}}),g.rday=_.process(g.ctoken("yesterday tomorrow today now"),t.rday),g.unit=_.process(g.ctoken("minute hour day week month year"),function(s){return function(){this.unit=s}}),g.value=_.process(_.rtoken(/^\d\d?(st|nd|rd|th)?/),function(s){return function(){this.value=s.replace(/\D/g,"")}}),g.expression=_.set([g.rday,g.operator,g.value,g.unit,g.orientation,g.ddd,g.MMM]),_fn=function(){return _.set(arguments,g.datePartDelimiter)},g.mdy=_fn(g.ddd,g.month,g.day,g.year),g.ymd=_fn(g.ddd,g.year,g.month,g.day),g.dmy=_fn(g.ddd,g.day,g.month,g.year),g.date=function(s){return(g[Date.CultureInfo.dateElementOrder]||g.mdy).call(this,s)},g.format=_.process(_.many(_.any(_.process(_.rtoken(/^(dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|zz?z?)/),function(fmt){if(g[fmt])return g[fmt];throw Date.Parsing.Exception(fmt)}),_.process(_.rtoken(/^[^dMyhHmstz]+/),function(s){return _.ignore(_.stoken(s))}))),function(rules){return _.process(_.each.apply(null,rules),t.finishExact)});var _F={},_get=function(f){return _F[f]=_F[f]||g.format(f)[0]};g.formats=function(fx){if(fx instanceof Array){for(var rx=[],i=0;i<fx.length;i++)rx.push(_get(fx[i]));return _.any.apply(null,rx)}return _get(fx)},g._formats=g.formats(["yyyy-MM-ddTHH:mm:ss","ddd, MMM dd, yyyy H:mm:ss tt","ddd MMM d yyyy HH:mm:ss zzz","d"]),g._start=_.process(_.set([g.date,g.time,g.expression],g.generalDelimiter,g.whiteSpace),t.finish),g.start=function(s){try{var r=g._formats.call({},s);if(0===r[1].length)return r}catch(e){}return g._start.call({},s)}}(),Date._parse=Date.parse,Date.parse=function(s){var r=null;if(!s)return null;try{r=Date.Grammar.start.call({},s)}catch(e){return null}return 0===r[1].length?r[0]:null},Date.getParseFunction=function(fx){var fn=Date.Grammar.formats(fx);return function(s){var r=null;try{r=fn.call({},s)}catch(e){return null}return 0===r[1].length?r[0]:null}},Date.parseExact=function(s,fx){return Date.getParseFunction(fx)(s)},function(a){function b(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function c(a,b){function c(){ib.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}var d=!0;return i(function(){return d&&(c(),d=!1),b.apply(this,arguments)},b)}function d(a,b){return function(c){return l(a.call(this,c),b)}}function e(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function f(){}function g(a){y(a),i(this,a)}function h(a){var b=r(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._bubble()}function i(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return b.hasOwnProperty("toString")&&(a.toString=b.toString),b.hasOwnProperty("valueOf")&&(a.valueOf=b.valueOf),a}function j(a){var b,c={};for(b in a)a.hasOwnProperty(b)&&wb.hasOwnProperty(b)&&(c[b]=a[b]);return c}function k(a){return 0>a?Math.ceil(a):Math.floor(a)}function l(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function m(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&db(a,"Date",cb(a,"Date")+f*c),g&&bb(a,cb(a,"Month")+g*c),d&&ib.updateOffset(a,f||g)}function n(a){return"[object Array]"===Object.prototype.toString.call(a)}function o(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function p(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&t(a[d])!==t(b[d]))&&g++;return g+f}function q(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=Zb[a]||$b[b]||b}return a}function r(a){var b,c,d={};for(c in a)a.hasOwnProperty(c)&&(b=q(c),b&&(d[b]=a[c]));return d}function s(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}ib[b]=function(e,f){var g,h,i=ib.fn._lang[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=ib().utc().set(d,a);return i.call(ib.fn._lang,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function t(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function u(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function v(a,b,c){return $(ib([a,11,31+b-c]),b,c).week}function w(a){return x(a)?366:365}function x(a){return a%4===0&&a%100!==0||a%400===0}function y(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[pb]<0||a._a[pb]>11?pb:a._a[qb]<1||a._a[qb]>u(a._a[ob],a._a[pb])?qb:a._a[rb]<0||a._a[rb]>23?rb:a._a[sb]<0||a._a[sb]>59?sb:a._a[tb]<0||a._a[tb]>59?tb:a._a[ub]<0||a._a[ub]>999?ub:-1,a._pf._overflowDayOfYear&&(ob>b||b>qb)&&(b=qb),a._pf.overflow=b)}function z(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function A(a){return a?a.toLowerCase().replace("_","-"):a}function B(a,b){return b._isUTC?ib(a).zone(b._offset||0):ib(a).local()}function C(a,b){return b.abbr=a,vb[a]||(vb[a]=new f),vb[a].set(b),vb[a]}function D(a){delete vb[a]}function E(a){var b,c,d,e,f=0,g=function(a){if(!vb[a]&&xb)try{require("./lang/"+a)}catch(b){}return vb[a]};if(!a)return ib.fn._lang;if(!n(a)){if(c=g(a))return c;a=[a]}for(;f<a.length;){for(e=A(a[f]).split("-"),b=e.length,d=A(a[f+1]),d=d?d.split("-"):null;b>0;){if(c=g(e.slice(0,b).join("-")))return c;if(d&&d.length>=b&&p(e,d,!0)>=b-1)break;b--}f++}return ib.fn._lang}function F(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function G(a){var b,c,d=a.match(Bb);for(b=0,c=d.length;c>b;b++)d[b]=cc[d[b]]?cc[d[b]]:F(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function H(a,b){return a.isValid()?(b=I(b,a.lang()),_b[b]||(_b[b]=G(b)),_b[b](a)):a.lang().invalidDate()}function I(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Cb.lastIndex=0;d>=0&&Cb.test(a);)a=a.replace(Cb,c),Cb.lastIndex=0,d-=1;return a}function J(a,b){var c,d=b._strict;switch(a){case"Q":return Nb;case"DDDD":return Pb;case"YYYY":case"GGGG":case"gggg":return d?Qb:Fb;case"Y":case"G":case"g":return Sb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?Rb:Gb;case"S":if(d)return Nb;case"SS":if(d)return Ob;case"SSS":if(d)return Pb;case"DDD":return Eb;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ib;case"a":case"A":return E(b._l)._meridiemParse;case"X":return Lb;case"Z":case"ZZ":return Jb;case"T":return Kb;case"SSSS":return Hb;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?Ob:Db;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Db;case"Do":return Mb;default:return c=new RegExp(R(Q(a.replace("\\","")),"i"))}}function K(a){a=a||"";var b=a.match(Jb)||[],c=b[b.length-1]||[],d=(c+"").match(Xb)||["-",0,0],e=+(60*d[1])+t(d[2]);return"+"===d[0]?-e:e}function L(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[pb]=3*(t(b)-1));break;case"M":case"MM":null!=b&&(e[pb]=t(b)-1);break;case"MMM":case"MMMM":d=E(c._l).monthsParse(b),null!=d?e[pb]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[qb]=t(b));break;case"Do":null!=b&&(e[qb]=t(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=t(b));break;case"YY":e[ob]=ib.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[ob]=t(b);break;case"a":case"A":c._isPm=E(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[rb]=t(b);break;case"m":case"mm":e[sb]=t(b);break;case"s":case"ss":e[tb]=t(b);break;case"S":case"SS":case"SSS":case"SSSS":e[ub]=t(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=K(b);break;case"w":case"ww":case"W":case"WW":case"d":case"dd":case"ddd":case"dddd":case"e":case"E":a=a.substr(0,1);case"gg":case"gggg":case"GG":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=b)}}function M(a){var b,c,d,e,f,g,h,i,j,k,l=[];if(!a._d){for(d=O(a),a._w&&null==a._a[qb]&&null==a._a[pb]&&(f=function(b){var c=parseInt(b,10);return b?b.length<3?c>68?1900+c:2e3+c:c:null==a._a[ob]?ib().weekYear():a._a[ob]},g=a._w,null!=g.GG||null!=g.W||null!=g.E?h=_(f(g.GG),g.W||1,g.E,4,1):(i=E(a._l),j=null!=g.d?X(g.d,i):null!=g.e?parseInt(g.e,10)+i._week.dow:0,k=parseInt(g.w,10)||1,null!=g.d&&j<i._week.dow&&k++,h=_(f(g.gg),k,j,i._week.doy,i._week.dow)),a._a[ob]=h.year,a._dayOfYear=h.dayOfYear),a._dayOfYear&&(e=null==a._a[ob]?d[ob]:a._a[ob],a._dayOfYear>w(e)&&(a._pf._overflowDayOfYear=!0),c=W(e,0,a._dayOfYear),a._a[pb]=c.getUTCMonth(),a._a[qb]=c.getUTCDate()),b=0;3>b&&null==a._a[b];++b)a._a[b]=l[b]=d[b];for(;7>b;b++)a._a[b]=l[b]=null==a._a[b]?2===b?1:0:a._a[b];l[rb]+=t((a._tzm||0)/60),l[sb]+=t((a._tzm||0)%60),a._d=(a._useUTC?W:V).apply(null,l)}}function N(a){var b;a._d||(b=r(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],M(a))}function O(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function P(a){a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=E(a._l),h=""+a._i,i=h.length,j=0;for(d=I(a._f,g).match(Bb)||[],b=0;b<d.length;b++)e=d[b],c=(h.match(J(e,a))||[])[0],c&&(f=h.substr(0,h.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),h=h.slice(h.indexOf(c)+c.length),j+=c.length),cc[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),L(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=i-j,h.length>0&&a._pf.unusedInput.push(h),a._isPm&&a._a[rb]<12&&(a._a[rb]+=12),a._isPm===!1&&12===a._a[rb]&&(a._a[rb]=0),M(a),y(a)}function Q(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function R(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function S(a){var c,d,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(0/0));for(f=0;f<a._f.length;f++)g=0,c=i({},a),c._pf=b(),c._f=a._f[f],P(c),z(c)&&(g+=c._pf.charsLeftOver,g+=10*c._pf.unusedTokens.length,c._pf.score=g,(null==e||e>g)&&(e=g,d=c));i(a,d||c)}function T(a){var b,c,d=a._i,e=Tb.exec(d);if(e){for(a._pf.iso=!0,b=0,c=Vb.length;c>b;b++)if(Vb[b][1].exec(d)){a._f=Vb[b][0]+(e[6]||" ");break}for(b=0,c=Wb.length;c>b;b++)if(Wb[b][1].exec(d)){a._f+=Wb[b][0];break}d.match(Jb)&&(a._f+="Z"),P(a)}else ib.createFromInputFallback(a)}function U(b){var c=b._i,d=yb.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?T(b):n(c)?(b._a=c.slice(0),M(b)):o(c)?b._d=new Date(+c):"object"==typeof c?N(b):"number"==typeof c?b._d=new Date(c):ib.createFromInputFallback(b)}function V(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function W(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function X(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function Y(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function Z(a,b,c){var d=nb(Math.abs(a)/1e3),e=nb(d/60),f=nb(e/60),g=nb(f/24),h=nb(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",nb(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,Y.apply({},i)}function $(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=ib(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function _(a,b,c,d,e){var f,g,h=W(a,0,1).getUTCDay();return c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:w(a-1)+g}}function ab(b){var c=b._i,d=b._f;return null===c||d===a&&""===c?ib.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=E().preparse(c)),ib.isMoment(c)?(b=j(c),b._d=new Date(+c._d)):d?n(d)?S(b):P(b):U(b),new g(b))}function bb(a,b){var c;return"string"==typeof b&&(b=a.lang().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),u(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function cb(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function db(a,b,c){return"Month"===b?bb(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function eb(a,b){return function(c){return null!=c?(db(this,a,c),ib.updateOffset(this,b),this):cb(this,a)}}function fb(a){ib.duration.fn[a]=function(){return this._data[a]}}function gb(a,b){ib.duration.fn["as"+a]=function(){return+this/b}}function hb(a){"undefined"==typeof ender&&(jb=mb.moment,mb.moment=a?c("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ib):ib)}for(var ib,jb,kb,lb="2.6.0",mb="undefined"!=typeof global?global:this,nb=Math.round,ob=0,pb=1,qb=2,rb=3,sb=4,tb=5,ub=6,vb={},wb={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_isUTC:null,_offset:null,_pf:null,_lang:null},xb="undefined"!=typeof module&&module.exports,yb=/^\/?Date\((\-?\d+)/i,zb=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ab=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Bb=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Cb=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Db=/\d\d?/,Eb=/\d{1,3}/,Fb=/\d{1,4}/,Gb=/[+\-]?\d{1,6}/,Hb=/\d+/,Ib=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Jb=/Z|[\+\-]\d\d:?\d\d/gi,Kb=/T/i,Lb=/[\+\-]?\d+(\.\d{1,3})?/,Mb=/\d{1,2}/,Nb=/\d/,Ob=/\d\d/,Pb=/\d{3}/,Qb=/\d{4}/,Rb=/[+-]?\d{6}/,Sb=/[+-]?\d+/,Tb=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ub="YYYY-MM-DDTHH:mm:ssZ",Vb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],Wb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],Xb=/([\+\-]|\d\d)/gi,Yb=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),Zb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},$b={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},_b={},ac="DDD w W M D d".split(" "),bc="M D H h m s w W".split(" "),cc={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return l(this.year()%100,2)},YYYY:function(){return l(this.year(),4)},YYYYY:function(){return l(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+l(Math.abs(a),6)},gg:function(){return l(this.weekYear()%100,2)},gggg:function(){return l(this.weekYear(),4)},ggggg:function(){return l(this.weekYear(),5)},GG:function(){return l(this.isoWeekYear()%100,2)},GGGG:function(){return l(this.isoWeekYear(),4)},GGGGG:function(){return l(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return t(this.milliseconds()/100)},SS:function(){return l(t(this.milliseconds()/10),2)
},SSS:function(){return l(this.milliseconds(),3)},SSSS:function(){return l(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+l(t(a/60),2)+":"+l(t(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+l(t(a/60),2)+l(t(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},dc=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];ac.length;)kb=ac.pop(),cc[kb+"o"]=e(cc[kb],kb);for(;bc.length;)kb=bc.pop(),cc[kb+kb]=d(cc[kb],2);for(cc.DDDD=d(cc.DDD,3),i(f.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=ib.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=ib([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return $(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ib=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=c,g._f=d,g._l=e,g._strict=f,g._isUTC=!1,g._pf=b(),ab(g)},ib.suppressDeprecationWarnings=!1,ib.createFromInputFallback=c("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),ib.utc=function(c,d,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=c,g._f=d,g._strict=f,g._pf=b(),ab(g).utc()},ib.unix=function(a){return ib(1e3*a)},ib.duration=function(a,b){var c,d,e,f=a,g=null;return ib.isDuration(a)?f={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(f={},b?f[b]=a:f.milliseconds=a):(g=zb.exec(a))?(c="-"===g[1]?-1:1,f={y:0,d:t(g[qb])*c,h:t(g[rb])*c,m:t(g[sb])*c,s:t(g[tb])*c,ms:t(g[ub])*c}):(g=Ab.exec(a))&&(c="-"===g[1]?-1:1,e=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*c},f={y:e(g[2]),M:e(g[3]),d:e(g[4]),h:e(g[5]),m:e(g[6]),s:e(g[7]),w:e(g[8])}),d=new h(f),ib.isDuration(a)&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},ib.version=lb,ib.defaultFormat=Ub,ib.momentProperties=wb,ib.updateOffset=function(){},ib.lang=function(a,b){var c;return a?(b?C(A(a),b):null===b?(D(a),a="en"):vb[a]||E(a),c=ib.duration.fn._lang=ib.fn._lang=E(a),c._abbr):ib.fn._lang._abbr},ib.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),E(a)},ib.isMoment=function(a){return a instanceof g||null!=a&&a.hasOwnProperty("_isAMomentObject")},ib.isDuration=function(a){return a instanceof h},kb=dc.length-1;kb>=0;--kb)s(dc[kb]);ib.normalizeUnits=function(a){return q(a)},ib.invalid=function(a){var b=ib.utc(0/0);return null!=a?i(b._pf,a):b._pf.userInvalidated=!0,b},ib.parseZone=function(){return ib.apply(null,arguments).parseZone()},ib.parseTwoDigitYear=function(a){return t(a)+(t(a)>68?1900:2e3)},i(ib.fn=g.prototype,{clone:function(){return ib(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=ib(this).utc();return 0<a.year()&&a.year()<=9999?H(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):H(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return z(this)},isDSTShifted:function(){return this._a?this.isValid()&&p(this._a,(this._isUTC?ib.utc(this._a):ib(this._a)).toArray())>0:!1},parsingFlags:function(){return i({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=H(this,a||ib.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?ib.duration(+b,a):ib.duration(a,b),m(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?ib.duration(+b,a):ib.duration(a,b),m(this,c,-1),this},diff:function(a,b,c){var d,e,f=B(a,this),g=6e4*(this.zone()-f.zone());return b=q(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-ib(this).startOf("month")-(f-ib(f).startOf("month")))/d,e-=6e4*(this.zone()-ib(this).startOf("month").zone()-(f.zone()-ib(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:k(e)},from:function(a,b){return ib.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(ib(),a)},calendar:function(){var a=B(ib(),this).startOf("day"),b=this.diff(a,"days",!0),c=-6>b?"sameElse":-1>b?"lastWeek":0>b?"lastDay":1>b?"sameDay":2>b?"nextDay":7>b?"nextWeek":"sameElse";return this.format(this.lang().calendar(c,this))},isLeapYear:function(){return x(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=X(a,this.lang()),this.add({d:a-b})):b},month:eb("Month",!0),startOf:function(a){switch(a=q(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=q(a),this.startOf(a).add("isoWeek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+ib(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+ib(a).startOf(b)},isSame:function(a,b){return b=b||"ms",+this.clone().startOf(b)===+B(a,this).startOf(b)},min:function(a){return a=ib.apply(null,arguments),this>a?this:a},max:function(a){return a=ib.apply(null,arguments),a>this?this:a},zone:function(a,b){var c=this._offset||0;return null==a?this._isUTC?c:this._d.getTimezoneOffset():("string"==typeof a&&(a=K(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,c!==a&&(!b||this._changeInProgress?m(this,ib.duration(c-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ib.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?ib(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return u(this.year(),this.month())},dayOfYear:function(a){var b=nb((ib(this).startOf("day")-ib(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=$(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=$(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=$(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this.day()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return v(this.year(),1,4)},weeksInYear:function(){var a=this._lang._week;return v(this.year(),a.dow,a.doy)},get:function(a){return a=q(a),this[a]()},set:function(a,b){return a=q(a),"function"==typeof this[a]&&this[a](b),this},lang:function(b){return b===a?this._lang:(this._lang=E(b),this)}}),ib.fn.millisecond=ib.fn.milliseconds=eb("Milliseconds",!1),ib.fn.second=ib.fn.seconds=eb("Seconds",!1),ib.fn.minute=ib.fn.minutes=eb("Minutes",!1),ib.fn.hour=ib.fn.hours=eb("Hours",!0),ib.fn.date=eb("Date",!0),ib.fn.dates=c("dates accessor is deprecated. Use date instead.",eb("Date",!0)),ib.fn.year=eb("FullYear",!0),ib.fn.years=c("years accessor is deprecated. Use year instead.",eb("FullYear",!0)),ib.fn.days=ib.fn.day,ib.fn.months=ib.fn.month,ib.fn.weeks=ib.fn.week,ib.fn.isoWeeks=ib.fn.isoWeek,ib.fn.quarters=ib.fn.quarter,ib.fn.toJSON=ib.fn.toISOString,i(ib.duration.fn=h.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,h=this._data;h.milliseconds=e%1e3,a=k(e/1e3),h.seconds=a%60,b=k(a/60),h.minutes=b%60,c=k(b/60),h.hours=c%24,f+=k(c/24),h.days=f%30,g+=k(f/30),h.months=g%12,d=k(g/12),h.years=d},weeks:function(){return k(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*t(this._months/12)},humanize:function(a){var b=+this,c=Z(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=ib.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=ib.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=q(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=q(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:ib.fn.lang,toIsoString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"}});for(kb in Yb)Yb.hasOwnProperty(kb)&&(gb(kb,Yb[kb]),fb(kb.toLowerCase()));gb("Weeks",6048e5),ib.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ib.lang("en",{ordinal:function(a){var b=a%10,c=1===t(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),xb?module.exports=ib:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(mb.moment=jb),ib}),hb(!0)):hb()}.call(this),Date.ext={},Date.ext.util={},Date.ext.util.xPad=function(a,c,b){for("undefined"==typeof b&&(b=10);parseInt(a,10)<b&&b>1;b/=10)a=c.toString()+a;return a.toString()},Date.prototype.locale="en-GB",document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang&&(Date.prototype.locale=document.getElementsByTagName("html")[0].lang),Date.ext.locales={},Date.ext.locales.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"},Date.ext.locales["en-US"]=Date.ext.locales.en,Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z",Date.ext.locales["en-US"].x="%D",Date.ext.locales["en-US"].X="%r",Date.ext.locales["en-GB"]=Date.ext.locales.en,Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"],Date.ext.formats={a:function(a){return Date.ext.locales[a.locale].a[a.getDay()]},A:function(a){return Date.ext.locales[a.locale].A[a.getDay()]},b:function(a){return Date.ext.locales[a.locale].b[a.getMonth()]},B:function(a){return Date.ext.locales[a.locale].B[a.getMonth()]},c:"toLocaleString",C:function(a){return Date.ext.util.xPad(parseInt(a.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(a){return Date.ext.util.xPad(parseInt(Date.ext.util.G(a)/100,10),0)},G:function(c){var e=c.getFullYear(),b=parseInt(Date.ext.formats.V(c),10),a=parseInt(Date.ext.formats.W(c),10);return a>b?e++:0===a&&b>=52&&e--,e},H:["getHours","0"],I:function(b){var a=b.getHours()%12;return Date.ext.util.xPad(0===a?12:a,0)},j:function(c){var a=c-new Date(""+c.getFullYear()+"/1/1 GMT");a+=6e4*c.getTimezoneOffset();var b=parseInt(a/6e4/60/24,10)+1;return Date.ext.util.xPad(b,0,100)},m:function(a){return Date.ext.util.xPad(a.getMonth()+1,0)},M:["getMinutes","0"],p:function(a){return Date.ext.locales[a.locale].p[a.getHours()>=12?1:0]},P:function(a){return Date.ext.locales[a.locale].P[a.getHours()>=12?1:0]},S:["getSeconds","0"],u:function(a){var b=a.getDay();return 0===b?7:b},U:function(e){var a=parseInt(Date.ext.formats.j(e),10),c=6-e.getDay(),b=parseInt((a+c)/7,10);return Date.ext.util.xPad(b,0)},V:function(e){var c=parseInt(Date.ext.formats.W(e),10),a=new Date(""+e.getFullYear()+"/1/1").getDay(),b=c+(a>4||1>=a?0:1);return 53==b&&new Date(""+e.getFullYear()+"/12/31").getDay()<4?b=1:0===b&&(b=Date.ext.formats.V(new Date(""+(e.getFullYear()-1)+"/12/31"))),Date.ext.util.xPad(b,0)},w:"getDay",W:function(e){var a=parseInt(Date.ext.formats.j(e),10),c=7-Date.ext.formats.u(e),b=parseInt((a+c)/7,10);return Date.ext.util.xPad(b,0,10)},y:function(a){return Date.ext.util.xPad(a.getFullYear()%100,0)},Y:"getFullYear",z:function(c){var b=c.getTimezoneOffset(),a=Date.ext.util.xPad(parseInt(Math.abs(b/60),10),0),e=Date.ext.util.xPad(b%60,0);return(b>0?"-":"+")+a+e},Z:function(a){return a.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(){return"%"}},Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"},Date.ext.aggregates.z=Date.ext.formats.z(new Date),Date.ext.aggregates.Z=Date.ext.formats.Z(new Date),Date.ext.unsupported={},Date.prototype.strftime=function(a){this.locale in Date.ext.locales||(this.locale=this.locale.replace(/-[a-zA-Z]+$/,"")in Date.ext.locales?this.locale.replace(/-[a-zA-Z]+$/,""):"en-GB");for(var c=this;a.match(/%[cDhnrRtTxXzZ]/);)a=a.replace(/%([cDhnrRtTxXzZ])/g,function(e,d){var g=Date.ext.aggregates[d];return"locale"==g?Date.ext.locales[c.locale][d]:g});var b=a.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(e,d){var g=Date.ext.formats[d];return"string"==typeof g?c[g]():"function"==typeof g?g.call(c,c):"object"==typeof g&&"string"==typeof g[0]?Date.ext.util.xPad(c[g[0]](),g[1]):d});return c=null,b},printStackTrace.implementation=function(){},printStackTrace.implementation.prototype={run:function(a,b){return a=a||this.createException(),b=b||this.mode(a),"other"===b?this.other(arguments.callee):this[b](a)},createException:function(){try{this.undef()}catch(a){return a}},mode:function(a){return a.arguments&&a.stack?"chrome":"string"==typeof a.message&&"undefined"!=typeof window&&window.opera?a.stacktrace?a.message.indexOf("\n")>-1&&a.message.split("\n").length>a.stacktrace.split("\n").length?"opera9":a.stack?a.stacktrace.indexOf("called from line")<0?"opera10b":"opera11":"opera10a":"opera9":a.stack?"firefox":"other"},instrumentFunction:function(b,d,e){b=b||window;var a=b[d];b[d]=function(){return e.call(this,printStackTrace().slice(4)),b[d]._instrumented.apply(this,arguments)},b[d]._instrumented=a},deinstrumentFunction:function(a,b){a[b].constructor===Function&&a[b]._instrumented&&a[b]._instrumented.constructor===Function&&(a[b]=a[b]._instrumented)},chrome:function(b){var a=(b.stack+"\n").replace(/^\S[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^([^\(]+?)([\n$])/gm,"{anonymous}()@$1$2").replace(/^Object.<anonymous>\s*\(([^\)]+)\)/gm,"{anonymous}()@$1").split("\n");return a.pop(),a},firefox:function(a){return a.stack.replace(/(?:\n@:0)?\s+$/m,"").replace(/^\(/gm,"{anonymous}(").split("\n")},opera11:function(g){for(var a="{anonymous}",h=/^.*line (\d+), column (\d+)(?: in (.+))? in (\S+):$/,k=g.stacktrace.split("\n"),l=[],c=0,f=k.length;f>c;c+=2){var d=h.exec(k[c]);if(d){var j=d[4]+":"+d[1]+":"+d[2],b=d[3]||"global code";b=b.replace(/<anonymous function: (\S+)>/,"$1").replace(/<anonymous function>/,a),l.push(b+"@"+j+" -- "+k[c+1].replace(/^\s+/,""))}}return l},opera10b:function(g){for(var h=/^(.*)@(.+):(\d+)$/,j=g.stacktrace.split("\n"),k=[],c=0,f=j.length;f>c;c++){var d=h.exec(j[c]);if(d){var b=d[1]?d[1]+"()":"global code";k.push(b+"@"+d[2]+":"+d[3])}}return k},opera10a:function(g){for(var a="{anonymous}",h=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,j=g.stacktrace.split("\n"),k=[],c=0,f=j.length;f>c;c+=2){var d=h.exec(j[c]);if(d){var b=d[3]||a;k.push(b+"()@"+d[2]+":"+d[1]+" -- "+j[c+1].replace(/^\s+/,""))}}return k},opera9:function(j){for(var d="{anonymous}",h=/Line (\d+).*script (?:in )?(\S+)/i,c=j.message.split("\n"),b=[],g=2,a=c.length;a>g;g+=2){var f=h.exec(c[g]);f&&b.push(d+"()@"+f[2]+":"+f[1]+" -- "+c[g+1].replace(/^\s+/,""))}return b},other:function(g){for(var d,c,b="{anonymous}",f=/function\s*([\w\-$]+)?\s*\(/i,a=[],e=10;g&&a.length<e;)d=f.test(g.toString())?RegExp.$1||b:b,c=Array.prototype.slice.call(g.arguments||[]),a[a.length]=d+"("+this.stringifyArguments(c)+")",g=g.caller;return a},stringifyArguments:function(c){for(var b=[],e=Array.prototype.slice,d=0;d<c.length;++d){var a=c[d];void 0===a?b[d]="undefined":null===a?b[d]="null":a.constructor&&(a.constructor===Array?b[d]=a.length<3?"["+this.stringifyArguments(a)+"]":"["+this.stringifyArguments(e.call(a,0,1))+"..."+this.stringifyArguments(e.call(a,-1))+"]":a.constructor===Object?b[d]="#object":a.constructor===Function?b[d]="#function":a.constructor===String?b[d]='"'+a+'"':a.constructor===Number&&(b[d]=a))}return b.join(",")},sourceCache:{},ajax:function(a){var b=this.createXMLHTTPObject();if(b)try{return b.open("GET",a,!1),b.send(null),b.responseText}catch(c){}return""},createXMLHTTPObject:function(){for(var c,a=[function(){return new XMLHttpRequest},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml3.XMLHTTP")},function(){return new ActiveXObject("Microsoft.XMLHTTP")}],b=0;b<a.length;b++)try{return c=a[b](),this.createXMLHTTPObject=a[b],c}catch(d){}},isSameDomain:function(a){return-1!==a.indexOf(location.hostname)},getSource:function(a){return a in this.sourceCache||(this.sourceCache[a]=this.ajax(a).split("\n")),this.sourceCache[a]},guessAnonymousFunctions:function(k){for(var g=0;g<k.length;++g){var f=/\{anonymous\}\(.*\)@(.*)/,l=/^(.*?)(?::(\d+))(?::(\d+))?(?: -- .+)?$/,b=k[g],c=f.exec(b);if(c){var e=l.exec(c[1]),d=e[1],a=e[2],j=e[3]||0;if(d&&this.isSameDomain(d)&&a){var h=this.guessAnonymousFunction(d,a,j);k[g]=b.replace("{anonymous}",h)}}}return k},guessAnonymousFunction:function(c,f){var b;try{b=this.findFunctionName(this.getSource(c),f)}catch(d){b="getSource failed with url: "+c+", exception: "+d.toString()}return b},findFunctionName:function(a,e){for(var l,d,c,g=/function\s+([^(]*?)\s*\(([^)]*)\)/,k=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*function\b/,h=/['"]?([0-9A-Za-z_]+)['"]?\s*[:=]\s*(?:eval|new Function)\b/,b="",j=Math.min(e,20),f=0;j>f;++f)if(l=a[e-f-1],c=l.indexOf("//"),c>=0&&(l=l.substr(0,c)),l){if(b=l+b,d=k.exec(b),d&&d[1])return d[1];if(d=g.exec(b),d&&d[1])return d[1];if(d=h.exec(b),d&&d[1])return d[1]}return"(?)"}},CanvasRenderingContext2D.prototype.installPattern=function(e){if("undefined"!=typeof this.isPatternInstalled)throw"Must un-install old line pattern before installing a new one.";this.isPatternInstalled=!0;var g=[0,0],b=[],f=this.beginPath,d=this.lineTo,c=this.moveTo,a=this.stroke;this.uninstallPattern=function(){this.beginPath=f,this.lineTo=d,this.moveTo=c,this.stroke=a,this.uninstallPattern=void 0,this.isPatternInstalled=void 0},this.beginPath=function(){b=[],f.call(this)},this.moveTo=function(h,i){b.push([[h,i]]),c.call(this,h,i)},this.lineTo=function(h,j){var i=b[b.length-1];i.push([h,j])},this.stroke=function(){if(0===b.length)return void a.call(this);for(var p=0;p<b.length;p++)for(var o=b[p],l=o[0][0],u=o[0][1],n=1;n<o.length;n++){var h=o[n][0],s=o[n][1];this.save();var w=h-l,v=s-u,r=Math.sqrt(w*w+v*v),k=Math.atan2(v,w);this.translate(l,u),c.call(this,0,0),this.rotate(k);for(var m=g[0],t=0;r>t;){var q=e[m];t+=g[1]?g[1]:q,t>r?(g=[m,t-r],t=r):g=[(m+1)%e.length,0],m%2===0?d.call(this,t,0):c.call(this,t,0),m=(m+1)%e.length}this.restore(),l=h,u=s}a.call(this),b=[]}},CanvasRenderingContext2D.prototype.uninstallPattern=function(){throw"Must install a line pattern before uninstalling it."};var DygraphOptions=function(){var a=function(b){this.dygraph_=b,this.yAxes_=[],this.xAxis_={},this.series_={},this.global_=this.dygraph_.attrs_,this.user_=this.dygraph_.user_attrs_||{},this.labels_=[],this.highlightSeries_=this.get("highlightSeriesOpts")||{},this.reparseSeries()};return a.AXIS_STRING_MAPPINGS_={y:0,Y:0,y1:0,Y1:0,y2:1,Y2:1},a.axisToIndex_=function(b){if("string"==typeof b){if(a.AXIS_STRING_MAPPINGS_.hasOwnProperty(b))return a.AXIS_STRING_MAPPINGS_[b];throw"Unknown axis : "+b}if("number"==typeof b){if(0===b||1===b)return b;throw"Dygraphs only supports two y-axes, indexed from 0-1."}if(b)throw"Unknown axis : "+b;return 0},a.prototype.reparseSeries=function(){var g=this.get("labels");if(g){this.labels_=g.slice(1),this.yAxes_=[{series:[],options:{}}],this.xAxis_={options:{}},this.series_={};var h=!this.user_.series;if(h){for(var c=0,j=0;j<this.labels_.length;j++){var i=this.labels_[j],e=this.user_[i]||{},b=0,d=e.axis;"object"==typeof d&&(b=++c,this.yAxes_[b]={series:[i],options:d}),d||this.yAxes_[0].series.push(i),this.series_[i]={idx:j,yAxis:b,options:e}}for(var j=0;j<this.labels_.length;j++){var i=this.labels_[j],e=this.series_[i].options,d=e.axis;if("string"==typeof d){if(!this.series_.hasOwnProperty(d))return void Dygraph.error("Series "+i+" wants to share a y-axis with series "+d+", which does not define its own axis.");var b=this.series_[d].yAxis;this.series_[i].yAxis=b,this.yAxes_[b].series.push(i)}}}else for(var j=0;j<this.labels_.length;j++){var i=this.labels_[j],e=this.user_.series[i]||{},b=a.axisToIndex_(e.axis);this.series_[i]={idx:j,yAxis:b,options:e},this.yAxes_[b]?this.yAxes_[b].series.push(i):this.yAxes_[b]={series:[i],options:{}}}var f=this.user_.axes||{};Dygraph.update(this.yAxes_[0].options,f.y||{}),this.yAxes_.length>1&&Dygraph.update(this.yAxes_[1].options,f.y2||{}),Dygraph.update(this.xAxis_.options,f.x||{})}},a.prototype.get=function(c){var b=this.getGlobalUser_(c);return null!==b?b:this.getGlobalDefault_(c)},a.prototype.getGlobalUser_=function(b){return this.user_.hasOwnProperty(b)?this.user_[b]:null},a.prototype.getGlobalDefault_=function(b){return this.global_.hasOwnProperty(b)?this.global_[b]:Dygraph.DEFAULT_ATTRS.hasOwnProperty(b)?Dygraph.DEFAULT_ATTRS[b]:null},a.prototype.getForAxis=function(d,e){var f,i;if("number"==typeof e)f=e,i=0===f?"y":"y2";else{if("y1"==e&&(e="y"),"y"==e)f=0;else if("y2"==e)f=1;else{if("x"!=e)throw"Unknown axis "+e;f=-1}i=e}var g=-1==f?this.xAxis_:this.yAxes_[f];if(g){var h=g.options;if(h.hasOwnProperty(d))return h[d]}var c=this.getGlobalUser_(d);if(null!==c)return c;var b=Dygraph.DEFAULT_ATTRS.axes[i];return b.hasOwnProperty(d)?b[d]:this.getGlobalDefault_(d)},a.prototype.getForSeries=function(c,e){if(e===this.dygraph_.getHighlightSeries()&&this.highlightSeries_.hasOwnProperty(c))return this.highlightSeries_[c];if(!this.series_.hasOwnProperty(e))throw"Unknown series: "+e;var d=this.series_[e],b=d.options;return b.hasOwnProperty(c)?b[c]:this.getForAxis(c,d.yAxis)},a.prototype.numAxes=function(){return this.yAxes_.length},a.prototype.axisForSeries=function(b){return this.series_[b].yAxis},a.prototype.axisOptions=function(b){return this.yAxes_[b].options},a.prototype.seriesForAxis=function(b){return this.yAxes_[b].series},a.prototype.seriesNames=function(){return this.labels_},a.prototype.indexOfSeries=function(b){return this.series_[b].idx},a}(),DygraphLayout=function(a){this.dygraph_=a,this.points=[],this.setNames=[],this.annotations=[],this.yAxes_=null,this.xTicks_=null,this.yTicks_=null};DygraphLayout.prototype.attr_=function(a){return this.dygraph_.attr_(a)},DygraphLayout.prototype.addDataset=function(a,b){this.points.push(b),this.setNames.push(a)},DygraphLayout.prototype.getPlotArea=function(){return this.area_},DygraphLayout.prototype.computePlotArea=function(){var a={x:0,y:0};a.w=this.dygraph_.width_-a.x-this.attr_("rightGap"),a.h=this.dygraph_.height_;var b={chart_div:this.dygraph_.graphDiv,reserveSpaceLeft:function(c){var d={x:a.x,y:a.y,w:c,h:a.h};return a.x+=c,a.w-=c,d},reserveSpaceRight:function(c){var d={x:a.x+a.w-c,y:a.y,w:c,h:a.h};return a.w-=c,d},reserveSpaceTop:function(c){var d={x:a.x,y:a.y,w:a.w,h:c};return a.y+=c,a.h-=c,d},reserveSpaceBottom:function(c){var d={x:a.x,y:a.y+a.h-c,w:a.w,h:c};return a.h-=c,d},chartRect:function(){return{x:a.x,y:a.y,w:a.w,h:a.h}}};this.dygraph_.cascadeEvents_("layout",b),this.area_=a},DygraphLayout.prototype.setAnnotations=function(d){this.annotations=[];for(var e=this.attr_("xValueParser")||function(a){return a},c=0;c<d.length;c++){var b={};if(!d[c].xval&&void 0===d[c].x)return void this.dygraph_.error("Annotations must have an 'x' property");if(d[c].icon&&(!d[c].hasOwnProperty("width")||!d[c].hasOwnProperty("height")))return void this.dygraph_.error("Must set width and height when setting annotation.icon property");Dygraph.update(b,d[c]),b.xval||(b.xval=e(b.x)),this.annotations.push(b)}},DygraphLayout.prototype.setXTicks=function(a){this.xTicks_=a},DygraphLayout.prototype.setYAxes=function(a){this.yAxes_=a},DygraphLayout.prototype.evaluate=function(){this._evaluateLimits(),this._evaluateLineCharts(),this._evaluateLineTicks(),this._evaluateAnnotations()},DygraphLayout.prototype._evaluateLimits=function(){var a=this.dygraph_.xAxisRange();this.minxval=a[0],this.maxxval=a[1];var d=a[1]-a[0];this.xscale=0!==d?1/d:1;for(var b=0;b<this.yAxes_.length;b++){var c=this.yAxes_[b];c.minyval=c.computedValueRange[0],c.maxyval=c.computedValueRange[1],c.yrange=c.maxyval-c.minyval,c.yscale=0!==c.yrange?1/c.yrange:1,c.g.attr_("logscale")&&(c.ylogrange=Dygraph.log10(c.maxyval)-Dygraph.log10(c.minyval),c.ylogscale=0!==c.ylogrange?1/c.ylogrange:1,(!isFinite(c.ylogrange)||isNaN(c.ylogrange))&&c.g.error("axis "+b+" of graph at "+c.g+" can't be displayed in log scale for range ["+c.minyval+" - "+c.maxyval+"]"))}},DygraphLayout._calcYNormal=function(b,c,a){return a?1-(Dygraph.log10(c)-Dygraph.log10(b.minyval))*b.ylogscale:1-(c-b.minyval)*b.yscale},DygraphLayout.prototype._evaluateLineCharts=function(){for(var c=this.attr_("connectSeparatedPoints"),k=this.attr_("stackedGraph"),e=this.attr_("errorBars")||this.attr_("customBars"),a=0;a<this.points.length;a++)for(var l=this.points[a],f=this.setNames[a],b=this.dygraph_.axisPropertiesForSeries(f),g=this.dygraph_.attributes_.getForSeries("logscale",f),d=0;d<l.length;d++){var i=l[d];i.x=(i.xval-this.minxval)*this.xscale;var h=i.yval;k&&(i.y_stacked=DygraphLayout._calcYNormal(b,i.yval_stacked,g),null===h||isNaN(h)||(h=i.yval_stacked)),null===h&&(h=0/0,c||(i.yval=0/0)),i.y=DygraphLayout._calcYNormal(b,h,g),e&&(i.y_top=DygraphLayout._calcYNormal(b,h-i.yval_minus,g),i.y_bottom=DygraphLayout._calcYNormal(b,h+i.yval_plus,g))}},DygraphLayout.parseFloat_=function(a){return null===a?0/0:a},DygraphLayout.prototype._evaluateLineTicks=function(){var d,c,b,f;for(this.xticks=[],d=0;d<this.xTicks_.length;d++)c=this.xTicks_[d],b=c.label,f=this.xscale*(c.v-this.minxval),f>=0&&1>=f&&this.xticks.push([f,b]);for(this.yticks=[],d=0;d<this.yAxes_.length;d++)for(var e=this.yAxes_[d],a=0;a<e.ticks.length;a++)c=e.ticks[a],b=c.label,f=this.dygraph_.toPercentYCoord(c.v,d),f>=0&&1>=f&&this.yticks.push([d,f,b])},DygraphLayout.prototype._evaluateAnnotations=function(){var d,g={};for(d=0;d<this.annotations.length;d++){var b=this.annotations[d];g[b.xval+","+b.series]=b}if(this.annotated_points=[],this.annotations&&this.annotations.length)for(var h=0;h<this.points.length;h++){var e=this.points[h];for(d=0;d<e.length;d++){var f=e[d],c=f.xval+","+f.name;c in g&&(f.annotation=g[c],this.annotated_points.push(f))}}},DygraphLayout.prototype.removeAllDatasets=function(){delete this.points,delete this.setNames,delete this.setPointsLengths,delete this.setPointsOffsets,this.points=[],this.setNames=[],this.setPointsLengths=[],this.setPointsOffsets=[]};var DygraphCanvasRenderer=function(d,c,b,e){if(this.dygraph_=d,this.layout=e,this.element=c,this.elementContext=b,this.container=this.element.parentNode,this.height=this.element.height,this.width=this.element.width,!this.isIE&&!DygraphCanvasRenderer.isSupported(this.element))throw"Canvas is not supported.";if(this.area=e.getPlotArea(),this.container.style.position="relative",this.container.style.width=this.width+"px",this.dygraph_.isUsingExcanvas_)this._createIEClipArea();else if(!Dygraph.isAndroid()){var a=this.dygraph_.canvas_ctx_;a.beginPath(),a.rect(this.area.x,this.area.y,this.area.w,this.area.h),a.clip(),a=this.dygraph_.hidden_ctx_,a.beginPath(),a.rect(this.area.x,this.area.y,this.area.w,this.area.h),a.clip()}};DygraphCanvasRenderer.prototype.attr_=function(a,b){return this.dygraph_.attr_(a,b)},DygraphCanvasRenderer.prototype.clear=function(){var a;if(this.isIE)try{this.clearDelay&&(this.clearDelay.cancel(),this.clearDelay=null),a=this.elementContext}catch(b){return}a=this.elementContext,a.clearRect(0,0,this.width,this.height)},DygraphCanvasRenderer.isSupported=function(f){var b=null;try{b="undefined"==typeof f||null===f?document.createElement("canvas"):f,b.getContext("2d")}catch(c){var d=navigator.appVersion.match(/MSIE (\d\.\d)/),a=-1!=navigator.userAgent.toLowerCase().indexOf("opera");
return!d||d[1]<6||a?!1:!0}return!0},DygraphCanvasRenderer.prototype.render=function(){this._updatePoints(),this._renderLineChart()},DygraphCanvasRenderer.prototype._createIEClipArea=function(){function b(j){if(0!==j.w&&0!==j.h){var i=document.createElement("div");i.className=g,i.style.backgroundColor=c,i.style.position="absolute",i.style.left=j.x+"px",i.style.top=j.y+"px",i.style.width=j.w+"px",i.style.height=j.h+"px",f.appendChild(i)}}for(var g="dygraph-clip-div",f=this.dygraph_.graphDiv,e=f.childNodes.length-1;e>=0;e--)f.childNodes[e].className==g&&f.removeChild(f.childNodes[e]);for(var c=document.bgColor,d=this.dygraph_.graphDiv;d!=document;){var a=d.currentStyle.backgroundColor;if(a&&"transparent"!=a){c=a;break}d=d.parentNode}var h=this.area;b({x:0,y:0,w:h.x,h:this.height}),b({x:h.x,y:0,w:this.width-h.x,h:h.y}),b({x:h.x+h.w,y:0,w:this.width-h.x-h.w,h:this.height}),b({x:h.x,y:h.y+h.h,w:this.width-h.x,h:this.height-h.h-h.y})},DygraphCanvasRenderer._getIteratorPredicate=function(a){return a?DygraphCanvasRenderer._predicateThatSkipsEmptyPoints:null},DygraphCanvasRenderer._predicateThatSkipsEmptyPoints=function(b,a){return null!==b[a].yval},DygraphCanvasRenderer._drawStyledLine=function(i,a,m,q,f,n,d){var h=i.dygraph,c=h.getOption("stepPlot",i.setName);Dygraph.isArrayLike(q)||(q=null);var l=h.getOption("drawGapEdgePoints",i.setName),o=i.points,k=Dygraph.createIterator(o,0,o.length,DygraphCanvasRenderer._getIteratorPredicate(h.getOption("connectSeparatedPoints"))),j=q&&q.length>=2,p=i.drawingContext;p.save(),j&&p.installPattern(q);var b=DygraphCanvasRenderer._drawSeries(i,k,m,d,f,l,c,a);DygraphCanvasRenderer._drawPointsOnLine(i,b,n,a,d),j&&p.uninstallPattern(),p.restore()},DygraphCanvasRenderer._drawSeries=function(v,t,m,h,p,s,g,q){var j,o,b=null,w=null,k=null,l=[],f=!0,n=v.drawingContext;n.beginPath(),n.strokeStyle=q,n.lineWidth=m;for(var c=t.array_,u=t.end_,a=t.predicate_,r=t.start_;u>r;r++){if(o=c[r],a){for(;u>r&&!a(c,r);)r++;if(r==u)break;o=c[r]}if(null===o.canvasy||o.canvasy!=o.canvasy)g&&null!==b&&(n.moveTo(b,w),n.lineTo(o.canvasx,w)),b=w=null;else{if(j=!1,s||!b){t.nextIdx_=r,t.next(),k=t.hasNext?t.peek.canvasy:null;var d=null===k||k!=k;j=!b&&d,s&&(!f&&!b||t.hasNext&&d)&&(j=!0)}null!==b?m&&(g&&(n.moveTo(b,w),n.lineTo(o.canvasx,w)),n.lineTo(o.canvasx,o.canvasy)):n.moveTo(o.canvasx,o.canvasy),(p||j)&&l.push([o.canvasx,o.canvasy,o.idx]),b=o.canvasx,w=o.canvasy}f=!1}return n.stroke(),l},DygraphCanvasRenderer._drawPointsOnLine=function(h,i,f,d,g){for(var c=h.drawingContext,b=0;b<i.length;b++){var a=i[b];c.save(),f(h.dygraph,h.setName,c,a[0],a[1],d,g,a[2]),c.restore()}},DygraphCanvasRenderer.prototype._updatePoints=function(){for(var e=this.layout.points,c=e.length;c--;)for(var d=e[c],b=d.length;b--;){var a=d[b];a.canvasx=this.area.w*a.x+this.area.x,a.canvasy=this.area.h*a.y+this.area.y}},DygraphCanvasRenderer.prototype._renderLineChart=function(g,u){var n,b,h=u||this.elementContext,a=this.layout.points,s=this.layout.setNames;this.colors=this.dygraph_.colorsMap_;var o=this.attr_("plotter"),f=o;Dygraph.isArrayLike(f)||(f=[f]);var c={};for(n=0;n<s.length;n++){b=s[n];var t=this.attr_("plotter",b);t!=o&&(c[b]=t)}for(n=0;n<f.length;n++)for(var r=f[n],q=n==f.length-1,l=0;l<a.length;l++)if(b=s[l],!g||b==g){var m=a[l],e=r;if(b in c){if(!q)continue;e=c[b]}var k=this.colors[b],d=this.dygraph_.getOption("strokeWidth",b);h.save(),h.strokeStyle=k,h.lineWidth=d,e({points:m,setName:b,drawingContext:h,color:k,strokeWidth:d,dygraph:this.dygraph_,axis:this.dygraph_.axisPropertiesForSeries(b),plotArea:this.area,seriesIndex:l,seriesCount:a.length,singleSeriesName:g,allSeriesPoints:a}),h.restore()}},DygraphCanvasRenderer._Plotters={linePlotter:function(a){DygraphCanvasRenderer._linePlotter(a)},fillPlotter:function(a){DygraphCanvasRenderer._fillPlotter(a)},errorPlotter:function(a){DygraphCanvasRenderer._errorPlotter(a)}},DygraphCanvasRenderer._linePlotter=function(f){var d=f.dygraph,h=f.setName,i=f.strokeWidth,a=d.getOption("strokeBorderWidth",h),j=d.getOption("drawPointCallback",h)||Dygraph.Circles.DEFAULT,k=d.getOption("strokePattern",h),c=d.getOption("drawPoints",h),b=d.getOption("pointSize",h);a&&i&&DygraphCanvasRenderer._drawStyledLine(f,d.getOption("strokeBorderColor",h),i+2*a,k,c,j,b),DygraphCanvasRenderer._drawStyledLine(f,f.color,i,k,c,j,b)},DygraphCanvasRenderer._errorPlotter=function(s){var r=s.dygraph,f=s.setName,t=r.getOption("errorBars")||r.getOption("customBars");if(t){var k=r.getOption("fillGraph",f);k&&r.warn("Can't use fillGraph option with error bars");var j,m=s.drawingContext,n=s.color,o=r.getOption("fillAlpha",f),i=r.getOption("stepPlot",f),p=s.points,q=Dygraph.createIterator(p,0,p.length,DygraphCanvasRenderer._getIteratorPredicate(r.getOption("connectSeparatedPoints"))),h=0/0,c=0/0,d=[-1,-1],a=new RGBColorParser(n),u="rgba("+a.r+","+a.g+","+a.b+","+o+")";m.fillStyle=u,m.beginPath();for(var b=function(e){return null===e||void 0===e||isNaN(e)};q.hasNext;){var l=q.next();!i&&b(l.y)||i&&!isNaN(c)&&b(c)?h=0/0:(i?(j=[l.y_bottom,l.y_top],c=l.y):j=[l.y_bottom,l.y_top],j[0]=s.plotArea.h*j[0]+s.plotArea.y,j[1]=s.plotArea.h*j[1]+s.plotArea.y,isNaN(h)||(i?(m.moveTo(h,d[0]),m.lineTo(l.canvasx,d[0]),m.lineTo(l.canvasx,d[1])):(m.moveTo(h,d[0]),m.lineTo(l.canvasx,j[0]),m.lineTo(l.canvasx,j[1])),m.lineTo(h,d[1]),m.closePath()),d=j,h=l.canvasx)}m.fill()}},DygraphCanvasRenderer._fillPlotter=function(F){if(!F.singleSeriesName&&0===F.seriesIndex){for(var D=F.dygraph,I=D.getLabels().slice(1),C=I.length;C>=0;C--)D.visibility()[C]||I.splice(C,1);var h=function(){for(var e=0;e<I.length;e++)if(D.getOption("fillGraph",I[e]))return!0;return!1}();if(h)for(var a,r,w=F.drawingContext,E=F.plotArea,c=F.allSeriesPoints,z=c.length,y=D.getOption("fillAlpha"),k=D.getOption("stackedGraph"),q=D.getColors(),s={},u=z-1;u>=0;u--){var n=I[u];if(D.getOption("fillGraph",n)){var p=D.getOption("stepPlot",n),x=q[u],f=D.axisPropertiesForSeries(n),d=1+f.minyval*f.yscale;0>d?d=0:d>1&&(d=1),d=E.h*d+E.y;var t,B=c[u],A=Dygraph.createIterator(B,0,B.length,DygraphCanvasRenderer._getIteratorPredicate(D.getOption("connectSeparatedPoints"))),m=0/0,l=[-1,-1],b=new RGBColorParser(x),H="rgba("+b.r+","+b.g+","+b.b+","+y+")";w.fillStyle=H,w.beginPath();for(var j,G=!0;A.hasNext;){var v=A.next();if(Dygraph.isOK(v.y)){if(k){if(!G&&j==v.xval)continue;G=!1,j=v.xval,a=s[v.canvasx];var o;o=void 0===a?d:r?a[0]:a,t=[v.canvasy,o],s[v.canvasx]=p?-1===l[0]?[v.canvasy,d]:[v.canvasy,l[0]]:v.canvasy}else t=[v.canvasy,d];isNaN(m)||(w.moveTo(m,l[0]),p?w.lineTo(v.canvasx,l[0]):w.lineTo(v.canvasx,t[0]),r&&a?w.lineTo(v.canvasx,a[1]):w.lineTo(v.canvasx,t[1]),w.lineTo(m,l[1]),w.closePath()),l=t,m=v.canvasx}else m=0/0,null===v.y_stacked||isNaN(v.y_stacked)||(s[v.canvasx]=E.h*v.y_stacked+E.y)}r=p,w.fill()}}}};var Dygraph=function(d,c,b,a){void 0!==a?(this.warn("Using deprecated four-argument dygraph constructor"),this.__old_init__(d,c,b,a)):this.__init__(d,c,b)};Dygraph.NAME="Dygraph",Dygraph.VERSION="1.2",Dygraph.__repr__=function(){return"["+this.NAME+" "+this.VERSION+"]"},Dygraph.toString=function(){return this.__repr__()},Dygraph.DEFAULT_ROLL_PERIOD=1,Dygraph.DEFAULT_WIDTH=480,Dygraph.DEFAULT_HEIGHT=320,Dygraph.ANIMATION_STEPS=12,Dygraph.ANIMATION_DURATION=200,Dygraph.KMB_LABELS=["K","M","B","T","Q"],Dygraph.KMG2_BIG_LABELS=["k","M","G","T","P","E","Z","Y"],Dygraph.KMG2_SMALL_LABELS=["m","u","n","p","f","a","z","y"],Dygraph.numberValueFormatter=function(s,a){var e=a("sigFigs");if(null!==e)return Dygraph.floatFormat(s,e);var q,c=a("digitsAfterDecimal"),o=a("maxNumberWidth"),b=a("labelsKMB"),r=a("labelsKMG2");if(q=0!==s&&(Math.abs(s)>=Math.pow(10,o)||Math.abs(s)<Math.pow(10,-c))?s.toExponential(c):""+Dygraph.round_(s,c),b||r){var f,t=[],m=[];b&&(f=1e3,t=Dygraph.KMB_LABELS),r&&(b&&Dygraph.warn("Setting both labelsKMB and labelsKMG2. Pick one!"),f=1024,t=Dygraph.KMG2_BIG_LABELS,m=Dygraph.KMG2_SMALL_LABELS);for(var p=Math.abs(s),d=Dygraph.pow(f,t.length),h=t.length-1;h>=0;h--,d/=f)if(p>=d){q=Dygraph.round_(s/d,c)+t[h];break}if(r){var i=String(s.toExponential()).split("e-");2===i.length&&i[1]>=3&&i[1]<=24&&(q=i[1]%3>0?Dygraph.round_(i[0]/Dygraph.pow(10,i[1]%3),c):Number(i[0]).toFixed(2),q+=m[Math.floor(i[1]/3)-1])}}return q},Dygraph.numberAxisLabelFormatter=function(a,d,c,b){return Dygraph.numberValueFormatter(a,c,b)},Dygraph.dateString_=function(e){var i=Dygraph.zeropad,h=new Date(e),f=""+h.getFullYear(),g=i(h.getMonth()+1),a=i(h.getDate()),c="",b=3600*h.getHours()+60*h.getMinutes()+h.getSeconds();return b&&(c=" "+Dygraph.hmsString_(e)),f+"/"+g+"/"+a+c},Dygraph.dateAxisFormatter=function(b,c){if(c>=Dygraph.DECADAL)return b.strftime("%Y");if(c>=Dygraph.MONTHLY)return b.strftime("%b %y");var a=3600*b.getHours()+60*b.getMinutes()+b.getSeconds()+b.getMilliseconds();return 0===a||c>=Dygraph.DAILY?new Date(b.getTime()+36e5).strftime("%d%b"):Dygraph.hmsString_(b.getTime())},Dygraph.Plotters=DygraphCanvasRenderer._Plotters,Dygraph.DEFAULT_ATTRS={highlightCircleSize:3,highlightSeriesOpts:null,highlightSeriesBackgroundAlpha:.5,labelsDivWidth:250,labelsDivStyles:{},labelsSeparateLines:!1,labelsShowZeroValues:!0,labelsKMB:!1,labelsKMG2:!1,showLabelsOnHighlight:!0,digitsAfterDecimal:2,maxNumberWidth:6,sigFigs:null,strokeWidth:1,strokeBorderWidth:0,strokeBorderColor:"white",axisTickSize:3,axisLabelFontSize:14,xAxisLabelWidth:50,yAxisLabelWidth:50,rightGap:5,showRoller:!1,xValueParser:Dygraph.dateParser,delimiter:",",sigma:2,errorBars:!1,fractions:!1,wilsonInterval:!0,customBars:!1,fillGraph:!1,fillAlpha:.15,connectSeparatedPoints:!1,stackedGraph:!1,stackedGraphNaNFill:"all",hideOverlayOnMouseOut:!0,legend:"onmouseover",stepPlot:!1,avoidMinZero:!1,xRangePad:0,yRangePad:null,drawAxesAtZero:!1,titleHeight:28,xLabelHeight:18,yLabelWidth:18,drawXAxis:!0,drawYAxis:!0,axisLineColor:"black",axisLineWidth:.3,gridLineWidth:.3,axisLabelColor:"black",axisLabelFont:"Arial",axisLabelWidth:50,drawYGrid:!0,drawXGrid:!0,gridLineColor:"rgb(128,128,128)",interactionModel:null,animatedZooms:!1,showRangeSelector:!1,rangeSelectorHeight:40,rangeSelectorPlotStrokeColor:"#808FAB",rangeSelectorPlotFillColor:"#A7B1C4",plotter:[Dygraph.Plotters.fillPlotter,Dygraph.Plotters.errorPlotter,Dygraph.Plotters.linePlotter],plugins:[],axes:{x:{pixelsPerLabel:60,axisLabelFormatter:Dygraph.dateAxisFormatter,valueFormatter:Dygraph.dateString_,drawGrid:!0,independentTicks:!0,ticker:null},y:{pixelsPerLabel:30,valueFormatter:Dygraph.numberValueFormatter,axisLabelFormatter:Dygraph.numberAxisLabelFormatter,drawGrid:!0,independentTicks:!0,ticker:null},y2:{pixelsPerLabel:30,valueFormatter:Dygraph.numberValueFormatter,axisLabelFormatter:Dygraph.numberAxisLabelFormatter,drawGrid:!1,independentTicks:!1,ticker:null}}},Dygraph.HORIZONTAL=1,Dygraph.VERTICAL=2,Dygraph.PLUGINS=[],Dygraph.addedAnnotationCSS=!1,Dygraph.prototype.__old_init__=function(f,d,e,b){if(null!==e){for(var a=["Date"],c=0;c<e.length;c++)a.push(e[c]);Dygraph.update(b,{labels:a})}this.__init__(f,d,b)},Dygraph.prototype.__init__=function(a,c,l){if(/MSIE/.test(navigator.userAgent)&&!window.opera&&"undefined"!=typeof G_vmlCanvasManager&&"complete"!=document.readyState){var o=this;return void setTimeout(function(){o.__init__(a,c,l)},100)}if((null===l||void 0===l)&&(l={}),l=Dygraph.mapLegacyOptions_(l),"string"==typeof a&&(a=document.getElementById(a)),!a)return void Dygraph.error("Constructing dygraph with a non-existent div!");this.isUsingExcanvas_="undefined"!=typeof G_vmlCanvasManager,this.maindiv_=a,this.file_=c,this.rollPeriod_=l.rollPeriod||Dygraph.DEFAULT_ROLL_PERIOD,this.previousVerticalX_=-1,this.fractions_=l.fractions||!1,this.dateWindow_=l.dateWindow||null,this.is_initial_draw_=!0,this.annotations_=[],this.zoomed_x_=!1,this.zoomed_y_=!1,a.innerHTML="",""===a.style.width&&l.width&&(a.style.width=l.width+"px"),""===a.style.height&&l.height&&(a.style.height=l.height+"px"),""===a.style.height&&0===a.clientHeight&&(a.style.height=Dygraph.DEFAULT_HEIGHT+"px",""===a.style.width&&(a.style.width=Dygraph.DEFAULT_WIDTH+"px")),this.width_=a.clientWidth||l.width||0,this.height_=a.clientHeight||l.height||0,l.stackedGraph&&(l.fillGraph=!0),this.user_attrs_={},Dygraph.update(this.user_attrs_,l),this.attrs_={},Dygraph.updateDeep(this.attrs_,Dygraph.DEFAULT_ATTRS),this.boundaryIds_=[],this.setIndexByName_={},this.datasetIndex_=[],this.registeredEvents_=[],this.eventListeners_={},this.attributes_=new DygraphOptions(this),this.createInterface_(),this.plugins_=[];for(var d=Dygraph.PLUGINS.concat(this.getOption("plugins")),g=0;g<d.length;g++){var k=d[g],f=new k,j={plugin:f,events:{},options:{},pluginOptions:{}},b=f.activate(this);for(var h in b)j.events[h]=b[h];this.plugins_.push(j)}for(var g=0;g<this.plugins_.length;g++){var n=this.plugins_[g];for(var h in n.events)if(n.events.hasOwnProperty(h)){var m=n.events[h],e=[n.plugin,m];h in this.eventListeners_?this.eventListeners_[h].push(e):this.eventListeners_[h]=[e]}}this.createDragInterface_(),this.start_()},Dygraph.prototype.cascadeEvents_=function(c,b){if(!(c in this.eventListeners_))return!0;var g={dygraph:this,cancelable:!1,defaultPrevented:!1,preventDefault:function(){if(!g.cancelable)throw"Cannot call preventDefault on non-cancelable event.";g.defaultPrevented=!0},propagationStopped:!1,stopPropagation:function(){g.propagationStopped=!0}};Dygraph.update(g,b);var a=this.eventListeners_[c];if(a)for(var d=a.length-1;d>=0;d--){var f=a[d][0],h=a[d][1];if(h.call(f,g),g.propagationStopped)break}return g.defaultPrevented},Dygraph.prototype.isZoomed=function(a){if(null===a||void 0===a)return this.zoomed_x_||this.zoomed_y_;if("x"===a)return this.zoomed_x_;if("y"===a)return this.zoomed_y_;throw"axis parameter is ["+a+"] must be null, 'x' or 'y'."},Dygraph.prototype.toString=function(){var a=this.maindiv_,b=a&&a.id?a.id:a;return"[Dygraph "+b+"]"},Dygraph.prototype.attr_=function(b,a){return a?this.attributes_.getForSeries(b,a):this.attributes_.get(b)},Dygraph.prototype.getOption=function(a,b){return this.attr_(a,b)},Dygraph.prototype.getOptionForAxis=function(a,b){return this.attributes_.getForAxis(a,b)},Dygraph.prototype.optionsViewForAxis_=function(b){var a=this;return function(c){var d=a.user_attrs_.axes;return d&&d[b]&&d[b].hasOwnProperty(c)?d[b][c]:"undefined"!=typeof a.user_attrs_[c]?a.user_attrs_[c]:(d=a.attrs_.axes,d&&d[b]&&d[b].hasOwnProperty(c)?d[b][c]:"y"==b&&a.axes_[0].hasOwnProperty(c)?a.axes_[0][c]:"y2"==b&&a.axes_[1].hasOwnProperty(c)?a.axes_[1][c]:a.attr_(c))}},Dygraph.prototype.rollPeriod=function(){return this.rollPeriod_},Dygraph.prototype.xAxisRange=function(){return this.dateWindow_?this.dateWindow_:this.xAxisExtremes()},Dygraph.prototype.xAxisExtremes=function(){var d=this.attr_("xRangePad")/this.plotter_.area.w;if(0===this.numRows())return[0-d,1+d];var c=this.rawData_[0][0],b=this.rawData_[this.rawData_.length-1][0];if(d){var a=b-c;c-=a*d,b+=a*d}return[c,b]},Dygraph.prototype.yAxisRange=function(a){if("undefined"==typeof a&&(a=0),0>a||a>=this.axes_.length)return null;var b=this.axes_[a];return[b.computedValueRange[0],b.computedValueRange[1]]},Dygraph.prototype.yAxisRanges=function(){for(var a=[],b=0;b<this.axes_.length;b++)a.push(this.yAxisRange(b));return a},Dygraph.prototype.toDomCoords=function(a,c,b){return[this.toDomXCoord(a),this.toDomYCoord(c,b)]},Dygraph.prototype.toDomXCoord=function(b){if(null===b)return null;var c=this.plotter_.area,a=this.xAxisRange();return c.x+(b-a[0])/(a[1]-a[0])*c.w},Dygraph.prototype.toDomYCoord=function(d,a){var c=this.toPercentYCoord(d,a);if(null===c)return null;var b=this.plotter_.area;return b.y+c*b.h},Dygraph.prototype.toDataCoords=function(a,c,b){return[this.toDataXCoord(a),this.toDataYCoord(c,b)]},Dygraph.prototype.toDataXCoord=function(b){if(null===b)return null;var c=this.plotter_.area,a=this.xAxisRange();return a[0]+(b-c.x)/c.w*(a[1]-a[0])},Dygraph.prototype.toDataYCoord=function(h,b){if(null===h)return null;var c=this.plotter_.area,g=this.yAxisRange(b);if("undefined"==typeof b&&(b=0),this.axes_[b].logscale){var f=(h-c.y)/c.h,a=Dygraph.log10(g[1]),e=a-f*(a-Dygraph.log10(g[0])),d=Math.pow(Dygraph.LOG_SCALE,e);return d}return g[0]+(c.y+c.h-h)/c.h*(g[1]-g[0])},Dygraph.prototype.toPercentYCoord=function(f,c){if(null===f)return null;"undefined"==typeof c&&(c=0);var d,e=this.yAxisRange(c),b=this.attributes_.getForAxis("logscale",c);if(b){var a=Dygraph.log10(e[1]);d=(a-Dygraph.log10(f))/(a-Dygraph.log10(e[0]))}else d=(e[1]-f)/(e[1]-e[0]);return d},Dygraph.prototype.toPercentXCoord=function(b){if(null===b)return null;var a=this.xAxisRange();return(b-a[0])/(a[1]-a[0])},Dygraph.prototype.numColumns=function(){return this.rawData_?this.rawData_[0]?this.rawData_[0].length:this.attr_("labels").length:0},Dygraph.prototype.numRows=function(){return this.rawData_?this.rawData_.length:0},Dygraph.prototype.getValue=function(b,a){return 0>b||b>this.rawData_.length?null:0>a||a>this.rawData_[b].length?null:this.rawData_[b][a]},Dygraph.prototype.createInterface_=function(){var a=this.maindiv_;this.graphDiv=document.createElement("div"),this.graphDiv.style.textAlign="left",a.appendChild(this.graphDiv),this.canvas_=Dygraph.createCanvas(),this.canvas_.style.position="absolute",this.hidden_=this.createPlotKitCanvas_(this.canvas_),this.resizeElements_(),this.canvas_ctx_=Dygraph.getContext(this.canvas_),this.hidden_ctx_=Dygraph.getContext(this.hidden_),this.graphDiv.appendChild(this.hidden_),this.graphDiv.appendChild(this.canvas_),this.mouseEventElement_=this.createMouseEventElement_(),this.layout_=new DygraphLayout(this);var b=this;this.mouseMoveHandler_=function(c){b.mouseMove_(c)},this.mouseOutHandler_=function(f){var d=f.target||f.fromElement,c=f.relatedTarget||f.toElement;Dygraph.isNodeContainedBy(d,b.graphDiv)&&!Dygraph.isNodeContainedBy(c,b.graphDiv)&&b.mouseOut_(f)},this.addAndTrackEvent(window,"mouseout",this.mouseOutHandler_),this.addAndTrackEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),this.resizeHandler_||(this.resizeHandler_=function(){b.resize()},this.addAndTrackEvent(window,"resize",this.resizeHandler_))},Dygraph.prototype.resizeElements_=function(){this.graphDiv.style.width=this.width_+"px",this.graphDiv.style.height=this.height_+"px",this.canvas_.width=this.width_,this.canvas_.height=this.height_,this.canvas_.style.width=this.width_+"px",this.canvas_.style.height=this.height_+"px",this.hidden_.width=this.width_,this.hidden_.height=this.height_,this.hidden_.style.width=this.width_+"px",this.hidden_.style.height=this.height_+"px"},Dygraph.prototype.destroy=function(){this.canvas_ctx_.restore(),this.hidden_ctx_.restore();var a=function(c){for(;c.hasChildNodes();)a(c.firstChild),c.removeChild(c.firstChild)};this.removeTrackedEvents_(),Dygraph.removeEvent(window,"mouseout",this.mouseOutHandler_),Dygraph.removeEvent(this.mouseEventElement_,"mousemove",this.mouseMoveHandler_),Dygraph.removeEvent(window,"resize",this.resizeHandler_),this.resizeHandler_=null,a(this.maindiv_);var b=function(c){for(var d in c)"object"==typeof c[d]&&(c[d]=null)};b(this.layout_),b(this.plotter_),b(this)},Dygraph.prototype.createPlotKitCanvas_=function(a){var b=Dygraph.createCanvas();return b.style.position="absolute",b.style.top=a.style.top,b.style.left=a.style.left,b.width=this.width_,b.height=this.height_,b.style.width=this.width_+"px",b.style.height=this.height_+"px",b},Dygraph.prototype.createMouseEventElement_=function(){if(this.isUsingExcanvas_){var a=document.createElement("div");return a.style.position="absolute",a.style.backgroundColor="white",a.style.filter="alpha(opacity=0)",a.style.width=this.width_+"px",a.style.height=this.height_+"px",this.graphDiv.appendChild(a),a}return this.canvas_},Dygraph.prototype.setColors_=function(){var g=this.getLabels(),e=g.length-1;this.colors_=[],this.colorsMap_={};var d,a=this.attr_("colors");if(a){for(d=0;e>d;d++)if(this.visibility()[d]){var j=a[d%a.length];this.colors_.push(j),this.colorsMap_[g[1+d]]=j}}else{var c=this.attr_("colorSaturation")||1,b=this.attr_("colorValue")||.5,k=Math.ceil(e/2);for(d=1;e>=d;d++)if(this.visibility()[d-1]){var h=d%2?Math.ceil(d/2):k+d/2,f=1*h/(1+e),j=Dygraph.hsvToRGB(f,c,b);this.colors_.push(j),this.colorsMap_[g[d]]=j}}},Dygraph.prototype.getColors=function(){return this.colors_},Dygraph.prototype.getPropertiesForSeries=function(c){for(var a=-1,d=this.getLabels(),b=1;b<d.length;b++)if(d[b]==c){a=b;break}return-1==a?null:{name:c,column:a,visible:this.visibility()[a-1],color:this.colorsMap_[c],axis:1+this.attributes_.axisForSeries(c)}},Dygraph.prototype.createRollInterface_=function(){this.roller_||(this.roller_=document.createElement("input"),this.roller_.type="text",this.roller_.style.display="none",this.graphDiv.appendChild(this.roller_));var e=this.attr_("showRoller")?"block":"none",d=this.plotter_.area,b={position:"absolute",zIndex:10,top:d.y+d.h-25+"px",left:d.x+1+"px",display:e};this.roller_.size="2",this.roller_.value=this.rollPeriod_;for(var a in b)b.hasOwnProperty(a)&&(this.roller_.style[a]=b[a]);var c=this;this.roller_.onchange=function(){c.adjustRoll(c.roller_.value)}},Dygraph.prototype.dragGetX_=function(b,a){return Dygraph.pageX(b)-a.px},Dygraph.prototype.dragGetY_=function(b,a){return Dygraph.pageY(b)-a.py},Dygraph.prototype.createDragInterface_=function(){var c={isZooming:!1,isPanning:!1,is2DPan:!1,dragStartX:null,dragStartY:null,dragEndX:null,dragEndY:null,dragDirection:null,prevEndX:null,prevEndY:null,prevDragDirection:null,cancelNextDblclick:!1,initialLeftmostDate:null,xUnitsPerPixel:null,dateRange:null,px:0,py:0,boundedDates:null,boundedValues:null,tarp:new Dygraph.IFrameTarp,initializeMouseDown:function(j,i,h){j.preventDefault?j.preventDefault():(j.returnValue=!1,j.cancelBubble=!0),h.px=Dygraph.findPosX(i.canvas_),h.py=Dygraph.findPosY(i.canvas_),h.dragStartX=i.dragGetX_(j,h),h.dragStartY=i.dragGetY_(j,h),h.cancelNextDblclick=!1,h.tarp.cover()}},f=this.attr_("interactionModel"),b=this,e=function(g){return function(h){g(h,b,c)}};for(var a in f)f.hasOwnProperty(a)&&this.addAndTrackEvent(this.mouseEventElement_,a,e(f[a]));var d=function(){if((c.isZooming||c.isPanning)&&(c.isZooming=!1,c.dragStartX=null,c.dragStartY=null),c.isPanning){c.isPanning=!1,c.draggingDate=null,c.dateRange=null;for(var g=0;g<b.axes_.length;g++)delete b.axes_[g].draggingValue,delete b.axes_[g].dragValueRange}c.tarp.uncover()};this.addAndTrackEvent(document,"mouseup",d)},Dygraph.prototype.drawZoomRect_=function(e,c,i,b,g,a,f,d){var h=this.canvas_ctx_;a==Dygraph.HORIZONTAL?h.clearRect(Math.min(c,f),this.layout_.getPlotArea().y,Math.abs(c-f),this.layout_.getPlotArea().h):a==Dygraph.VERTICAL&&h.clearRect(this.layout_.getPlotArea().x,Math.min(b,d),this.layout_.getPlotArea().w,Math.abs(b-d)),e==Dygraph.HORIZONTAL?i&&c&&(h.fillStyle="rgba(128,128,128,0.33)",h.fillRect(Math.min(c,i),this.layout_.getPlotArea().y,Math.abs(i-c),this.layout_.getPlotArea().h)):e==Dygraph.VERTICAL&&g&&b&&(h.fillStyle="rgba(128,128,128,0.33)",h.fillRect(this.layout_.getPlotArea().x,Math.min(b,g),this.layout_.getPlotArea().w,Math.abs(g-b))),this.isUsingExcanvas_&&(this.currentZoomRectArgs_=[e,c,i,b,g,0,0,0])},Dygraph.prototype.clearZoomRect_=function(){this.currentZoomRectArgs_=null,this.canvas_ctx_.clearRect(0,0,this.canvas_.width,this.canvas_.height)},Dygraph.prototype.doZoomX_=function(c,a){this.currentZoomRectArgs_=null;var b=this.toDataXCoord(c),d=this.toDataXCoord(a);this.doZoomXDates_(b,d)},Dygraph.zoomAnimationFunction=function(c,b){var a=1.5;return(1-Math.pow(a,-c))/(1-Math.pow(a,-b))},Dygraph.prototype.doZoomXDates_=function(c,e){var a=this.xAxisRange(),d=[c,e];this.zoomed_x_=!0;var b=this;this.doAnimatedZoom(a,d,null,null,function(){b.attr_("zoomCallback")&&b.attr_("zoomCallback")(c,e,b.yAxisRanges())})},Dygraph.prototype.doZoomY_=function(h,f){this.currentZoomRectArgs_=null;for(var c=this.yAxisRanges(),b=[],e=0;e<this.axes_.length;e++){var d=this.toDataYCoord(h,e),a=this.toDataYCoord(f,e);b.push([a,d])}this.zoomed_y_=!0;var g=this;this.doAnimatedZoom(null,null,c,b,function(){if(g.attr_("zoomCallback")){var i=g.xAxisRange();g.attr_("zoomCallback")(i[0],i[1],g.yAxisRanges())}})},Dygraph.prototype.resetZoom=function(){var c=!1,d=!1,a=!1;null!==this.dateWindow_&&(c=!0,d=!0);for(var g=0;g<this.axes_.length;g++)"undefined"!=typeof this.axes_[g].valueWindow&&null!==this.axes_[g].valueWindow&&(c=!0,a=!0);if(this.clearSelection(),c){this.zoomed_x_=!1,this.zoomed_y_=!1;var f=this.rawData_[0][0],b=this.rawData_[this.rawData_.length-1][0];if(!this.attr_("animatedZooms")){for(this.dateWindow_=null,g=0;g<this.axes_.length;g++)null!==this.axes_[g].valueWindow&&delete this.axes_[g].valueWindow;return this.drawGraph_(),void(this.attr_("zoomCallback")&&this.attr_("zoomCallback")(f,b,this.yAxisRanges()))}var l=null,m=null,k=null,h=null;if(d&&(l=this.xAxisRange(),m=[f,b]),a){k=this.yAxisRanges();var n=this.gatherDatasets_(this.rolledSeries_,null),o=n.extremes;for(this.computeYAxisRanges_(o),h=[],g=0;g<this.axes_.length;g++){var e=this.axes_[g];h.push(null!==e.valueRange&&void 0!==e.valueRange?e.valueRange:e.extremeRange)}}var j=this;this.doAnimatedZoom(l,m,k,h,function(){j.dateWindow_=null;for(var p=0;p<j.axes_.length;p++)null!==j.axes_[p].valueWindow&&delete j.axes_[p].valueWindow;j.attr_("zoomCallback")&&j.attr_("zoomCallback")(f,b,j.yAxisRanges())})}},Dygraph.prototype.doAnimatedZoom=function(a,e,b,c,m){var f,d,i=this.attr_("animatedZooms")?Dygraph.ANIMATION_STEPS:1,l=[],k=[];if(null!==a&&null!==e)for(f=1;i>=f;f++)d=Dygraph.zoomAnimationFunction(f,i),l[f-1]=[a[0]*(1-d)+d*e[0],a[1]*(1-d)+d*e[1]];if(null!==b&&null!==c)for(f=1;i>=f;f++){d=Dygraph.zoomAnimationFunction(f,i);for(var n=[],g=0;g<this.axes_.length;g++)n.push([b[g][0]*(1-d)+d*c[g][0],b[g][1]*(1-d)+d*c[g][1]]);k[f-1]=n}var h=this;Dygraph.repeatAndCleanup(function(p){if(k.length)for(var o=0;o<h.axes_.length;o++){var j=k[p][o];h.axes_[o].valueWindow=[j[0],j[1]]}l.length&&(h.dateWindow_=l[p]),h.drawGraph_()},i,Dygraph.ANIMATION_DURATION/i,m)},Dygraph.prototype.getArea=function(){return this.plotter_.area},Dygraph.prototype.eventToDomCoords=function(c){if(c.offsetX&&c.offsetY)return[c.offsetX,c.offsetY];var b=Dygraph.pageX(c)-Dygraph.findPosX(this.mouseEventElement_),a=Dygraph.pageY(c)-Dygraph.findPosY(this.mouseEventElement_);return[b,a]},Dygraph.prototype.findClosestRow=function(a){for(var g=1/0,h=-1,e=this.layout_.points,c=0;c<e.length;c++)for(var l=e[c],d=l.length,b=0;d>b;b++){var k=l[b];if(Dygraph.isValidPoint(k,!0)){var f=Math.abs(k.canvasx-a);g>f&&(g=f,h=k.idx)}}return h},Dygraph.prototype.findClosestPoint=function(f,e){for(var h,o,n,l,d,c,j,k=1/0,b=this.layout_.points.length-1;b>=0;--b)for(var m=this.layout_.points[b],g=0;g<m.length;++g)l=m[g],Dygraph.isValidPoint(l)&&(o=l.canvasx-f,n=l.canvasy-e,h=o*o+n*n,k>h&&(k=h,d=l,c=b,j=l.idx));var a=this.layout_.setNames[c];return{row:j,seriesName:a,point:d}},Dygraph.prototype.findStackedPoint=function(i,h){for(var f,c,p=this.findClosestRow(i),d=0;d<this.layout_.points.length;++d){var g=this.getLeftBoundary_(d),e=p-g,l=this.layout_.points[d];if(!(e>=l.length)){var m=l[e];if(Dygraph.isValidPoint(m)){var j=m.canvasy;if(i>m.canvasx&&e+1<l.length){var k=l[e+1];if(Dygraph.isValidPoint(k)){var o=k.canvasx-m.canvasx;if(o>0){var a=(i-m.canvasx)/o;j+=a*(k.canvasy-m.canvasy)}}}else if(i<m.canvasx&&e>0){var n=l[e-1];if(Dygraph.isValidPoint(n)){var o=m.canvasx-n.canvasx;if(o>0){var a=(m.canvasx-i)/o;j+=a*(n.canvasy-m.canvasy)}}}(0===d||h>j)&&(f=m,c=d)}}}var b=this.layout_.setNames[c];return{row:p,seriesName:b,point:f}},Dygraph.prototype.mouseMove_=function(b){var h=this.layout_.points;if(void 0!==h&&null!==h){var e=this.eventToDomCoords(b),a=e[0],j=e[1],f=this.attr_("highlightSeriesOpts"),d=!1;if(f&&!this.isSeriesLocked()){var c;c=this.attr_("stackedGraph")?this.findStackedPoint(a,j):this.findClosestPoint(a,j),d=this.setSelection(c.row,c.seriesName)}else{var g=this.findClosestRow(a);d=this.setSelection(g)}var i=this.attr_("highlightCallback");i&&d&&i(b,this.lastx_,this.selPoints_,this.lastRow_,this.highlightSet_)}},Dygraph.prototype.getLeftBoundary_=function(b){if(this.boundaryIds_[b])return this.boundaryIds_[b][0];for(var a=0;a<this.boundaryIds_.length;a++)if(void 0!==this.boundaryIds_[a])return this.boundaryIds_[a][0];return 0},Dygraph.prototype.animateSelection_=function(f){var e=10,c=30;void 0===this.fadeLevel&&(this.fadeLevel=0),void 0===this.animateId&&(this.animateId=0);var g=this.fadeLevel,b=0>f?g:e-g;if(0>=b)return void(this.fadeLevel&&this.updateSelection_(1));var a=++this.animateId,d=this;Dygraph.repeatAndCleanup(function(){d.animateId==a&&(d.fadeLevel+=f,0===d.fadeLevel?d.clearSelection():d.updateSelection_(d.fadeLevel/e))},b,c,function(){})},Dygraph.prototype.updateSelection_=function(d){this.cascadeEvents_("select",{selectedX:this.lastx_,selectedPoints:this.selPoints_});var h,n=this.canvas_ctx_;if(this.attr_("highlightSeriesOpts")){n.clearRect(0,0,this.width_,this.height_);var f=1-this.attr_("highlightSeriesBackgroundAlpha");if(f){var g=!0;if(g){if(void 0===d)return void this.animateSelection_(1);f*=d}n.fillStyle="rgba(255,255,255,"+f+")",n.fillRect(0,0,this.width_,this.height_)}this.plotter_._renderLineChart(this.highlightSet_,n)}else if(this.previousVerticalX_>=0){var j=0,k=this.attr_("labels");for(h=1;h<k.length;h++){var c=this.attr_("highlightCircleSize",k[h]);c>j&&(j=c)}var l=this.previousVerticalX_;n.clearRect(l-j-1,0,2*j+2,this.height_)}if(this.isUsingExcanvas_&&this.currentZoomRectArgs_&&Dygraph.prototype.drawZoomRect_.apply(this,this.currentZoomRectArgs_),this.selPoints_.length>0){var b=this.selPoints_[0].canvasx;for(n.save(),h=0;h<this.selPoints_.length;h++){var o=this.selPoints_[h];if(Dygraph.isOK(o.canvasy)){var a=this.attr_("highlightCircleSize",o.name),m=this.attr_("drawHighlightPointCallback",o.name),e=this.plotter_.colors[o.name];m||(m=Dygraph.Circles.DEFAULT),n.lineWidth=this.attr_("strokeWidth",o.name),n.strokeStyle=e,n.fillStyle=e,m(this.g,o.name,n,b,o.canvasy,e,a,o.idx)}}n.restore(),this.previousVerticalX_=b}},Dygraph.prototype.setSelection=function(f,h,g){this.selPoints_=[];var e=!1;if(f!==!1&&f>=0){f!=this.lastRow_&&(e=!0),this.lastRow_=f;for(var d=0;d<this.layout_.points.length;++d){var b=this.layout_.points[d],c=f-this.getLeftBoundary_(d);if(c<b.length){var a=b[c];null!==a.yval&&this.selPoints_.push(a)}}}else this.lastRow_>=0&&(e=!0),this.lastRow_=-1;return this.lastx_=this.selPoints_.length?this.selPoints_[0].xval:-1,void 0!==h&&(this.highlightSet_!==h&&(e=!0),this.highlightSet_=h),void 0!==g&&(this.lockedSet_=g),e&&this.updateSelection_(void 0),e},Dygraph.prototype.mouseOut_=function(a){this.attr_("unhighlightCallback")&&this.attr_("unhighlightCallback")(a),this.attr_("hideOverlayOnMouseOut")&&!this.lockedSet_&&this.clearSelection()},Dygraph.prototype.clearSelection=function(){return this.cascadeEvents_("deselect",{}),this.lockedSet_=!1,this.fadeLevel?void this.animateSelection_(-1):(this.canvas_ctx_.clearRect(0,0,this.width_,this.height_),this.fadeLevel=0,this.selPoints_=[],this.lastx_=-1,this.lastRow_=-1,void(this.highlightSet_=null))},Dygraph.prototype.getSelection=function(){if(!this.selPoints_||this.selPoints_.length<1)return-1;for(var c=0;c<this.layout_.points.length;c++)for(var a=this.layout_.points[c],b=0;b<a.length;b++)if(a[b].x==this.selPoints_[0].x)return a[b].idx;return-1},Dygraph.prototype.getHighlightSeries=function(){return this.highlightSet_},Dygraph.prototype.isSeriesLocked=function(){return this.lockedSet_},Dygraph.prototype.loadedEvent_=function(a){this.rawData_=this.parseCSV_(a),this.predraw_()},Dygraph.prototype.addXTicks_=function(){var a;a=this.dateWindow_?[this.dateWindow_[0],this.dateWindow_[1]]:this.xAxisExtremes();var c=this.optionsViewForAxis_("x"),b=c("ticker")(a[0],a[1],this.width_,c,this);this.layout_.setXTicks(b)},Dygraph.prototype.extremeValues_=function(d){var c,g,h=null,f=null,b=this.attr_("errorBars")||this.attr_("customBars");if(b){for(c=0;c<d.length;c++)if(g=d[c][1][0],null!==g&&!isNaN(g)){var a=g-d[c][1][1],e=g+d[c][1][2];a>g&&(a=g),g>e&&(e=g),(null===f||e>f)&&(f=e),(null===h||h>a)&&(h=a)}}else for(c=0;c<d.length;c++)g=d[c][1],null===g||isNaN(g)||((null===f||g>f)&&(f=g),(null===h||h>g)&&(h=g));return[h,f]
},Dygraph.prototype.predraw_=function(){var e=new Date;this.layout_.computePlotArea(),this.computeYAxes_(),this.plotter_&&(this.cascadeEvents_("clearChart"),this.plotter_.clear()),this.is_initial_draw_||(this.canvas_ctx_.restore(),this.hidden_ctx_.restore()),this.canvas_ctx_.save(),this.hidden_ctx_.save(),this.plotter_=new DygraphCanvasRenderer(this,this.hidden_,this.hidden_ctx_,this.layout_),this.createRollInterface_(),this.cascadeEvents_("predraw"),this.rolledSeries_=[null];for(var c=1;c<this.numColumns();c++){var d=this.attr_("logscale"),b=this.extractSeries_(this.rawData_,c,d);b=this.rollingAverage(b,this.rollPeriod_),this.rolledSeries_.push(b)}this.drawGraph_();var a=new Date;this.drawingTimeMs_=a-e},Dygraph.PointType=void 0,Dygraph.seriesToPoints_=function(b,j,d,f){for(var h=[],c=0;c<b.length;++c){var k=b[c],a=j?k[1][0]:k[1],e=null===a?null:DygraphLayout.parseFloat_(a),g={x:0/0,y:0/0,xval:DygraphLayout.parseFloat_(k[0]),yval:e,name:d,idx:c+f};j&&(g.y_top=0/0,g.y_bottom=0/0,g.yval_minus=DygraphLayout.parseFloat_(k[1][1]),g.yval_plus=DygraphLayout.parseFloat_(k[1][2])),h.push(g)}return h},Dygraph.stackPoints_=function(m,l,o,f){for(var h=null,d=null,g=null,c=-1,k=function(i){if(!(c>=i))for(var p=i;p<m.length;++p)if(g=null,!isNaN(m[p].yval)&&null!==m[p].yval){c=p,g=m[p];break}},b=0;b<m.length;++b){var j=m[b],n=j.xval;void 0===l[n]&&(l[n]=0);var e=j.yval;isNaN(e)||null===e?(k(b),e=d&&g&&"none"!=f?d.yval+(g.yval-d.yval)*((n-d.xval)/(g.xval-d.xval)):d&&"all"==f?d.yval:g&&"all"==f?g.yval:0):d=j;var a=l[n];h!=n&&(a+=e,l[n]=a),h=n,j.yval_stacked=a,a>o[1]&&(o[1]=a),a<o[0]&&(o[0]=a)}},Dygraph.prototype.gatherDatasets_=function(w,f){var u,r,l,s=[],t=[],q=[],a={},x=this.attr_("errorBars"),h=this.attr_("customBars"),p=x||h,b=function(i){return p?h?null===i[1][1]:x?null===i[1][0]:!1:null===i[1]},n=w.length-1;for(u=n;u>=1;u--)if(this.visibility()[u-1]){if(f){l=w[u];var z=f[0],j=f[1],g=null,y=null;for(r=0;r<l.length;r++)l[r][0]>=z&&null===g&&(g=r),l[r][0]<=j&&(y=r);null===g&&(g=0);for(var e=g,d=!0;d&&e>0;)e--,d=b(l[e]);null===y&&(y=l.length-1);var c=y;for(d=!0;d&&c<l.length-1;)c++,d=b(l[c]);e!==g&&(g=e),c!==y&&(y=c),s[u-1]=[g,y],l=l.slice(g,y+1)}else l=w[u],s[u-1]=[0,l.length-1];var v=this.attr_("labels")[u],o=this.extremeValues_(l),m=Dygraph.seriesToPoints_(l,p,v,s[u-1][0]);this.attr_("stackedGraph")&&Dygraph.stackPoints_(m,q,o,this.attr_("stackedGraphNaNFill")),a[v]=o,t[u]=m}return{points:t,extremes:a,boundaryIds:s}},Dygraph.prototype.drawGraph_=function(){var a=new Date,d=this.is_initial_draw_;this.is_initial_draw_=!1,this.layout_.removeAllDatasets(),this.setColors_(),this.attrs_.pointSize=.5*this.attr_("highlightCircleSize");var j=this.gatherDatasets_(this.rolledSeries_,this.dateWindow_),h=j.points,k=j.extremes;this.boundaryIds_=j.boundaryIds,this.setIndexByName_={};var g=this.attr_("labels");g.length>0&&(this.setIndexByName_[g[0]]=0);for(var e=0,f=1;f<h.length;f++)this.setIndexByName_[g[f]]=f,this.visibility()[f-1]&&(this.layout_.addDataset(g[f],h[f]),this.datasetIndex_[f]=e++);this.computeYAxisRanges_(k),this.layout_.setYAxes(this.axes_),this.addXTicks_();var b=this.zoomed_x_;if(this.zoomed_x_=b,this.layout_.evaluate(),this.renderGraph_(d),this.attr_("timingName")){var c=new Date;Dygraph.info(this.attr_("timingName")+" - drawGraph: "+(c-a)+"ms")}},Dygraph.prototype.renderGraph_=function(a){this.cascadeEvents_("clearChart"),this.plotter_.clear(),this.attr_("underlayCallback")&&this.attr_("underlayCallback")(this.hidden_ctx_,this.layout_.getPlotArea(),this,this);var b={canvas:this.hidden_,drawingContext:this.hidden_ctx_};this.cascadeEvents_("willDrawChart",b),this.plotter_.render(),this.cascadeEvents_("didDrawChart",b),this.lastRow_=-1,this.canvas_.getContext("2d").clearRect(0,0,this.canvas_.width,this.canvas_.height),null!==this.attr_("drawCallback")&&this.attr_("drawCallback")(this,a)},Dygraph.prototype.computeYAxes_=function(){var b,d,c,f,a;if(void 0!==this.axes_&&this.user_attrs_.hasOwnProperty("valueRange")===!1)for(b=[],c=0;c<this.axes_.length;c++)b.push(this.axes_[c].valueWindow);for(this.axes_=[],d=0;d<this.attributes_.numAxes();d++)f={g:this},Dygraph.update(f,this.attributes_.axisOptions(d)),this.axes_[d]=f;if(a=this.attr_("valueRange"),a&&(this.axes_[0].valueRange=a),void 0!==b){var e=Math.min(b.length,this.axes_.length);for(c=0;e>c;c++)this.axes_[c].valueWindow=b[c]}for(d=0;d<this.axes_.length;d++)if(0===d)f=this.optionsViewForAxis_("y"+(d?"2":"")),a=f("valueRange"),a&&(this.axes_[d].valueRange=a);else{var g=this.user_attrs_.axes;g&&g.y2&&(a=g.y2.valueRange,a&&(this.axes_[d].valueRange=a))}},Dygraph.prototype.numAxes=function(){return this.attributes_.numAxes()},Dygraph.prototype.axisPropertiesForSeries=function(a){return this.axes_[this.attributes_.axisForSeries(a)]},Dygraph.prototype.computeYAxisRanges_=function(a){for(var b,x,o,B,p,g=function(i){return isNaN(parseFloat(i))},q=this.attributes_.numAxes(),y=0;q>y;y++){var c=this.axes_[y],C=this.attributes_.getForAxis("logscale",y),G=this.attributes_.getForAxis("includeZero",y),l=this.attributes_.getForAxis("independentTicks",y);if(o=this.attributes_.seriesForAxis(y),b=!0,B=.1,null!==this.attr_("yRangePad")&&(b=!1,B=this.attr_("yRangePad")/this.plotter_.area.h),0===o.length)c.extremeRange=[0,1];else{for(var t,s,D=1/0,A=-1/0,w=0;w<o.length;w++)a.hasOwnProperty(o[w])&&(t=a[o[w]][0],null!==t&&(D=Math.min(t,D)),s=a[o[w]][1],null!==s&&(A=Math.max(s,A)));G&&!C&&(D>0&&(D=0),0>A&&(A=0)),1/0==D&&(D=0),A==-1/0&&(A=1),x=A-D,0===x&&(0!==A?x=Math.abs(A):(A=1,x=1));var h,H;if(C)if(b)h=A+B*x,H=D;else{var E=Math.exp(Math.log(x)*B);h=A*E,H=D/E}else h=A+B*x,H=D-B*x,b&&!this.attr_("avoidMinZero")&&(0>H&&D>=0&&(H=0),h>0&&0>=A&&(h=0));c.extremeRange=[H,h]}if(c.valueWindow)c.computedValueRange=[c.valueWindow[0],c.valueWindow[1]];else if(c.valueRange){var e=g(c.valueRange[0])?c.extremeRange[0]:c.valueRange[0],d=g(c.valueRange[1])?c.extremeRange[1]:c.valueRange[1];if(!b)if(c.logscale){var E=Math.exp(Math.log(x)*B);e*=E,d/=E}else x=d-e,e-=x*B,d+=x*B;c.computedValueRange=[e,d]}else c.computedValueRange=c.extremeRange;if(l){c.independentTicks=l;var r=this.optionsViewForAxis_("y"+(y?"2":"")),F=r("ticker");c.ticks=F(c.computedValueRange[0],c.computedValueRange[1],this.height_,r,this),p||(p=c)}}if(void 0===p)throw'Configuration Error: At least one axis has to have the "independentTicks" option activated.';for(var y=0;q>y;y++){var c=this.axes_[y];if(!c.independentTicks){for(var r=this.optionsViewForAxis_("y"+(y?"2":"")),F=r("ticker"),m=p.ticks,n=p.computedValueRange[1]-p.computedValueRange[0],I=c.computedValueRange[1]-c.computedValueRange[0],f=[],v=0;v<m.length;v++){var u=(m[v].v-p.computedValueRange[0])/n,z=c.computedValueRange[0]+u*I;f.push(z)}c.ticks=F(c.computedValueRange[0],c.computedValueRange[1],this.height_,r,this,f)}}},Dygraph.prototype.extractSeries_=function(a,f,c){for(var g=[],h=this.attr_("errorBars"),e=this.attr_("customBars"),d=0;d<a.length;d++){var l=a[d][0],m=a[d][f];if(c)if(h||e){for(var b=0;b<m.length;b++)if(m[b]<=0){m=null;break}}else 0>=m&&(m=null);g.push(null!==m?[l,m]:[l,h?[null,null]:e?[null,null,null]:m])}return g},Dygraph.prototype.rollingAverage=function(l,d){d=Math.min(d,l.length);var G,o,z,x,m,c,F,A,b=[],t=this.attr_("sigma");if(this.fractions_){var k=0,h=0,e=100;for(z=0;z<l.length;z++){k+=l[z][1][0],h+=l[z][1][1],z-d>=0&&(k-=l[z-d][1][0],h-=l[z-d][1][1]);var C=l[z][0],w=h?k/h:0;if(this.attr_("errorBars"))if(this.attr_("wilsonInterval"))if(h){var s=0>w?0:w,u=h,B=t*Math.sqrt(s*(1-s)/u+t*t/(4*u*u)),a=1+t*t/h;G=(s+t*t/(2*h)-B)/a,o=(s+t*t/(2*h)+B)/a,b[z]=[C,[s*e,(s-G)*e,(o-s)*e]]}else b[z]=[C,[0,0,0]];else A=h?t*Math.sqrt(w*(1-w)/h):1,b[z]=[C,[e*w,e*A,e*A]];else b[z]=[C,e*w]}}else if(this.attr_("customBars")){G=0;var D=0;o=0;var g=0;for(z=0;z<l.length;z++){var E=l[z][1];if(m=E[1],b[z]=[l[z][0],[m,m-E[0],E[2]-m]],null===m||isNaN(m)||(G+=E[0],D+=m,o+=E[2],g+=1),z-d>=0){var r=l[z-d];null===r[1][1]||isNaN(r[1][1])||(G-=r[1][0],D-=r[1][1],o-=r[1][2],g-=1)}b[z]=g?[l[z][0],[1*D/g,1*(D-G)/g,1*(o-D)/g]]:[l[z][0],[null,null,null]]}}else if(this.attr_("errorBars"))for(z=0;z<l.length;z++){c=0;var f=0;for(F=0,x=Math.max(0,z-d+1);z+1>x;x++)m=l[x][1][0],null===m||isNaN(m)||(F++,c+=l[x][1][0],f+=Math.pow(l[x][1][1],2));if(F)A=Math.sqrt(f)/F,b[z]=[l[z][0],[c/F,t*A,t*A]];else{var q=1==d?l[z][1][0]:null;b[z]=[l[z][0],[q,q,q]]}}else{if(1==d)return l;for(z=0;z<l.length;z++){for(c=0,F=0,x=Math.max(0,z-d+1);z+1>x;x++)m=l[x][1],null===m||isNaN(m)||(F++,c+=l[x][1]);b[z]=F?[l[z][0],c/F]:[l[z][0],null]}}return b},Dygraph.prototype.detectTypeFromString_=function(b){var a=!1,c=b.indexOf("-");c>0&&"e"!=b[c-1]&&"E"!=b[c-1]||b.indexOf("/")>=0||isNaN(parseFloat(b))?a=!0:8==b.length&&b>"19700101"&&"20371231">b&&(a=!0),this.setXAxisOptions_(a)},Dygraph.prototype.setXAxisOptions_=function(a){a?(this.attrs_.xValueParser=Dygraph.dateParser,this.attrs_.axes.x.valueFormatter=Dygraph.dateString_,this.attrs_.axes.x.ticker=Dygraph.dateTicker,this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter):(this.attrs_.xValueParser=function(b){return parseFloat(b)},this.attrs_.axes.x.valueFormatter=function(b){return b},this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter)},Dygraph.prototype.parseFloat_=function(a,c,b){var e=parseFloat(a);if(!isNaN(e))return e;if(/^ *$/.test(a))return null;if(/^ *nan *$/i.test(a))return 0/0;var d="Unable to parse '"+a+"' as a number";return null!==b&&null!==c&&(d+=" on line "+(1+c)+" ('"+b+"') of CSV."),this.error(d),null},Dygraph.prototype.parseCSV_=function(t){var g,k,r=[],s=Dygraph.detectLineDelimiter(t),a=t.split(s||"\n"),p=this.attr_("delimiter");-1==a[0].indexOf(p)&&a[0].indexOf("	")>=0&&(p="	");var b=0;"labels"in this.user_attrs_||(b=1,this.attrs_.labels=a[0].split(p),this.attributes_.reparseSeries());for(var m,o=0,q=!1,c=this.attr_("labels").length,f=!1,l=b;l<a.length;l++){var e=a[l];if(o=l,0!==e.length&&"#"!=e[0]){var d=e.split(p);if(!(d.length<2)){var h=[];if(q||(this.detectTypeFromString_(d[0]),m=this.attr_("xValueParser"),q=!0),h[0]=m(d[0],this),this.fractions_)for(k=1;k<d.length;k++)g=d[k].split("/"),2!=g.length?(this.error('Expected fractional "num/den" values in CSV data but found a value \''+d[k]+"' on line "+(1+l)+" ('"+e+"') which is not of this form."),h[k]=[0,0]):h[k]=[this.parseFloat_(g[0],l,e),this.parseFloat_(g[1],l,e)];else if(this.attr_("errorBars"))for(d.length%2!=1&&this.error("Expected alternating (value, stdev.) pairs in CSV data but line "+(1+l)+" has an odd number of values ("+(d.length-1)+"): '"+e+"'"),k=1;k<d.length;k+=2)h[(k+1)/2]=[this.parseFloat_(d[k],l,e),this.parseFloat_(d[k+1],l,e)];else if(this.attr_("customBars"))for(k=1;k<d.length;k++){var u=d[k];/^ *$/.test(u)?h[k]=[null,null,null]:(g=u.split(";"),3==g.length?h[k]=[this.parseFloat_(g[0],l,e),this.parseFloat_(g[1],l,e),this.parseFloat_(g[2],l,e)]:this.warn('When using customBars, values must be either blank or "low;center;high" tuples (got "'+u+'" on line '+(1+l)))}else for(k=1;k<d.length;k++)h[k]=this.parseFloat_(d[k],l,e);if(r.length>0&&h[0]<r[r.length-1][0]&&(f=!0),h.length!=c&&this.error("Number of columns in line "+l+" ("+h.length+") does not agree with number of labels ("+c+") "+e),0===l&&this.attr_("labels")){var n=!0;for(k=0;n&&k<h.length;k++)h[k]&&(n=!1);if(n){this.warn("The dygraphs 'labels' option is set, but the first row of CSV data ('"+e+"') appears to also contain labels. Will drop the CSV labels and use the option labels.");continue}}r.push(h)}}}return f&&(this.warn("CSV is out of order; order it correctly to speed loading."),r.sort(function(j,i){return j[0]-i[0]})),r},Dygraph.prototype.parseArray_=function(c){if(0===c.length)return this.error("Can't plot empty data set"),null;if(0===c[0].length)return this.error("Data set cannot contain an empty row"),null;var a;if(null===this.attr_("labels")){for(this.warn("Using default labels. Set labels explicitly via 'labels' in the options parameter"),this.attrs_.labels=["X"],a=1;a<c[0].length;a++)this.attrs_.labels.push("Y"+a);this.attributes_.reparseSeries()}else{var b=this.attr_("labels");if(b.length!=c[0].length)return this.error("Mismatch between number of labels ("+b+") and number of columns in array ("+c[0].length+")"),null}if(Dygraph.isDateLike(c[0][0])){this.attrs_.axes.x.valueFormatter=Dygraph.dateString_,this.attrs_.axes.x.ticker=Dygraph.dateTicker,this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter;var d=Dygraph.clone(c);for(a=0;a<c.length;a++){if(0===d[a].length)return this.error("Row "+(1+a)+" of data is empty"),null;if(null===d[a][0]||"function"!=typeof d[a][0].getTime||isNaN(d[a][0].getTime()))return this.error("x value in row "+(1+a)+" is not a Date"),null;d[a][0]=d[a][0].getTime()}return d}return this.attrs_.axes.x.valueFormatter=function(e){return e},this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks,this.attrs_.axes.x.axisLabelFormatter=Dygraph.numberAxisLabelFormatter,c},Dygraph.prototype.parseDataTable_=function(w){var d=function(i){var j=String.fromCharCode(65+i%26);for(i=Math.floor(i/26);i>0;)j=String.fromCharCode(65+(i-1)%26)+j.toLowerCase(),i=Math.floor((i-1)/26);return j},h=w.getNumberOfColumns(),g=w.getNumberOfRows(),f=w.getColumnType(0);if("date"==f||"datetime"==f)this.attrs_.xValueParser=Dygraph.dateParser,this.attrs_.axes.x.valueFormatter=Dygraph.dateString_,this.attrs_.axes.x.ticker=Dygraph.dateTicker,this.attrs_.axes.x.axisLabelFormatter=Dygraph.dateAxisFormatter;else{if("number"!=f)return this.error("only 'date', 'datetime' and 'number' types are supported for column 1 of DataTable input (Got '"+f+"')"),null;this.attrs_.xValueParser=function(i){return parseFloat(i)},this.attrs_.axes.x.valueFormatter=function(i){return i},this.attrs_.axes.x.ticker=Dygraph.numericLinearTicks,this.attrs_.axes.x.axisLabelFormatter=this.attrs_.axes.x.valueFormatter}var q,o,m=[],t={},s=!1;for(q=1;h>q;q++){var b=w.getColumnType(q);if("number"==b)m.push(q);else if("string"==b&&this.attr_("displayAnnotations")){var r=m[m.length-1];t.hasOwnProperty(r)?t[r].push(q):t[r]=[q],s=!0}else this.error("Only 'number' is supported as a dependent type with Gviz. 'string' is only supported if displayAnnotations is true")}var u=[w.getColumnLabel(0)];for(q=0;q<m.length;q++)u.push(w.getColumnLabel(m[q])),this.attr_("errorBars")&&(q+=1);this.attrs_.labels=u,h=u.length;var v=[],l=!1,a=[];for(q=0;g>q;q++){var e=[];if("undefined"!=typeof w.getValue(q,0)&&null!==w.getValue(q,0)){if(e.push("date"==f||"datetime"==f?w.getValue(q,0).getTime():w.getValue(q,0)),this.attr_("errorBars"))for(o=0;h-1>o;o++)e.push([w.getValue(q,1+2*o),w.getValue(q,2+2*o)]);else{for(o=0;o<m.length;o++){var c=m[o];if(e.push(w.getValue(q,c)),s&&t.hasOwnProperty(c)&&null!==w.getValue(q,t[c][0])){var p={};p.series=w.getColumnLabel(c),p.xval=e[0],p.shortText=d(a.length),p.text="";for(var n=0;n<t[c].length;n++)n&&(p.text+="\n"),p.text+=w.getValue(q,t[c][n]);a.push(p)}}for(o=0;o<e.length;o++)isFinite(e[o])||(e[o]=null)}v.length>0&&e[0]<v[v.length-1][0]&&(l=!0),v.push(e)}else this.warn("Ignoring row "+q+" of DataTable because of undefined or null first column.")}l&&(this.warn("DataTable is out of order; order it correctly to speed loading."),v.sort(function(j,i){return j[0]-i[0]})),this.rawData_=v,a.length>0&&this.setAnnotations(a,!0),this.attributes_.reparseSeries()},Dygraph.prototype.start_=function(){var d=this.file_;if("function"==typeof d&&(d=d()),Dygraph.isArrayLike(d))this.rawData_=this.parseArray_(d),this.predraw_();else if("object"==typeof d&&"function"==typeof d.getColumnRange)this.parseDataTable_(d),this.predraw_();else if("string"==typeof d){var c=Dygraph.detectLineDelimiter(d);if(c)this.loadedEvent_(d);else{var b=new XMLHttpRequest,a=this;b.onreadystatechange=function(){4==b.readyState&&(200===b.status||0===b.status)&&a.loadedEvent_(b.responseText)},b.open("GET",d,!0),b.send(null)}}else this.error("Unknown data format: "+typeof d)},Dygraph.prototype.updateOptions=function(e,b){"undefined"==typeof b&&(b=!1);var d=e.file,c=Dygraph.mapLegacyOptions_(e);"rollPeriod"in c&&(this.rollPeriod_=c.rollPeriod),"dateWindow"in c&&(this.dateWindow_=c.dateWindow,"isZoomedIgnoreProgrammaticZoom"in c||(this.zoomed_x_=null!==c.dateWindow)),"valueRange"in c&&!("isZoomedIgnoreProgrammaticZoom"in c)&&(this.zoomed_y_=null!==c.valueRange);var a=Dygraph.isPixelChangingOptionList(this.attr_("labels"),c);Dygraph.updateDeep(this.user_attrs_,c),this.attributes_.reparseSeries(),d?(this.file_=d,b||this.start_()):b||(a?this.predraw_():this.renderGraph_(!1))},Dygraph.mapLegacyOptions_=function(c){var a={};for(var b in c)"file"!=b&&c.hasOwnProperty(b)&&(a[b]=c[b]);var e=function(g,f,h){a.axes||(a.axes={}),a.axes[g]||(a.axes[g]={}),a.axes[g][f]=h},d=function(f,g,h){"undefined"!=typeof c[f]&&(Dygraph.warn("Option "+f+" is deprecated. Use the "+h+" option for the "+g+" axis instead. (e.g. { axes : { "+g+" : { "+h+" : ... } } } (see http://dygraphs.com/per-axis.html for more information."),e(g,h,c[f]),delete a[f])};return d("xValueFormatter","x","valueFormatter"),d("pixelsPerXLabel","x","pixelsPerLabel"),d("xAxisLabelFormatter","x","axisLabelFormatter"),d("xTicker","x","ticker"),d("yValueFormatter","y","valueFormatter"),d("pixelsPerYLabel","y","pixelsPerLabel"),d("yAxisLabelFormatter","y","axisLabelFormatter"),d("yTicker","y","ticker"),a},Dygraph.prototype.resize=function(d,b){if(!this.resize_lock){this.resize_lock=!0,null===d!=(null===b)&&(this.warn("Dygraph.resize() should be called with zero parameters or two non-NULL parameters. Pretending it was zero."),d=b=null);var a=this.width_,c=this.height_;d?(this.maindiv_.style.width=d+"px",this.maindiv_.style.height=b+"px",this.width_=d,this.height_=b):(this.width_=this.maindiv_.clientWidth,this.height_=this.maindiv_.clientHeight),(a!=this.width_||c!=this.height_)&&(this.resizeElements_(),this.predraw_()),this.resize_lock=!1}},Dygraph.prototype.adjustRoll=function(a){this.rollPeriod_=a,this.predraw_()},Dygraph.prototype.visibility=function(){for(this.attr_("visibility")||(this.attrs_.visibility=[]);this.attr_("visibility").length<this.numColumns()-1;)this.attrs_.visibility.push(!0);return this.attr_("visibility")},Dygraph.prototype.setVisibility=function(b,c){var a=this.visibility();0>b||b>=a.length?this.warn("invalid series number in setVisibility: "+b):(a[b]=c,this.predraw_())},Dygraph.prototype.size=function(){return{width:this.width_,height:this.height_}},Dygraph.prototype.setAnnotations=function(b,a){return Dygraph.addAnnotationRule(),this.annotations_=b,this.layout_?(this.layout_.setAnnotations(this.annotations_),void(a||this.predraw_())):void this.warn("Tried to setAnnotations before dygraph was ready. Try setting them in a drawCallback. See dygraphs.com/tests/annotation.html")},Dygraph.prototype.annotations=function(){return this.annotations_},Dygraph.prototype.getLabels=function(){var a=this.attr_("labels");return a?a.slice():null},Dygraph.prototype.indexFromSetName=function(a){return this.setIndexByName_[a]},Dygraph.prototype.datasetIndexFromSetName_=function(a){return this.datasetIndex_[this.indexFromSetName(a)]},Dygraph.addAnnotationRule=function(){if(!Dygraph.addedAnnotationCSS){var f="border: 1px solid black; background-color: white; text-align: center;",e=document.createElement("style");e.type="text/css",document.getElementsByTagName("head")[0].appendChild(e);for(var b=0;b<document.styleSheets.length;b++)if(!document.styleSheets[b].disabled){var d=document.styleSheets[b];try{if(d.insertRule){var a=d.cssRules?d.cssRules.length:0;d.insertRule(".dygraphDefaultAnnotation { "+f+" }",a)}else d.addRule&&d.addRule(".dygraphDefaultAnnotation",f);return void(Dygraph.addedAnnotationCSS=!0)}catch(c){}}this.warn("Unable to add default annotation CSS rule; display may be off.")}};var DateGraph=Dygraph;Dygraph.LOG_SCALE=10,Dygraph.LN_TEN=Math.log(Dygraph.LOG_SCALE),Dygraph.log10=function(a){return Math.log(a)/Dygraph.LN_TEN},Dygraph.DEBUG=1,Dygraph.INFO=2,Dygraph.WARNING=3,Dygraph.ERROR=3,Dygraph.LOG_STACK_TRACES=!1,Dygraph.DOTTED_LINE=[2,2],Dygraph.DASHED_LINE=[7,3],Dygraph.DOT_DASH_LINE=[7,2,2,2],Dygraph.log=function(c,g){var b;if("undefined"!=typeof printStackTrace)try{for(b=printStackTrace({guess:!1});-1!=b[0].indexOf("stacktrace");)b.splice(0,1);b.splice(0,2);for(var d=0;d<b.length;d++)b[d]=b[d].replace(/\([^)]*\/(.*)\)/,"@$1").replace(/\@.*\/([^\/]*)/,"@$1").replace("[object Object].","");var j=b.splice(0,1)[0];g+=" ("+j.replace(/^.*@ ?/,"")+")"}catch(h){}if("undefined"!=typeof window.console){var a=window.console,f=function(e,k,i){k&&"function"==typeof k?k.call(e,i):e.log(i)};switch(c){case Dygraph.DEBUG:f(a,a.debug,"dygraphs: "+g);break;case Dygraph.INFO:f(a,a.info,"dygraphs: "+g);break;case Dygraph.WARNING:f(a,a.warn,"dygraphs: "+g);break;case Dygraph.ERROR:f(a,a.error,"dygraphs: "+g)}}Dygraph.LOG_STACK_TRACES&&window.console.log(b.join("\n"))},Dygraph.info=function(a){Dygraph.log(Dygraph.INFO,a)},Dygraph.prototype.info=Dygraph.info,Dygraph.warn=function(a){Dygraph.log(Dygraph.WARNING,a)},Dygraph.prototype.warn=Dygraph.warn,Dygraph.error=function(a){Dygraph.log(Dygraph.ERROR,a)},Dygraph.prototype.error=Dygraph.error,Dygraph.getContext=function(a){return a.getContext("2d")},Dygraph.addEvent=function(c,b,a){c.addEventListener?c.addEventListener(b,a,!1):(c[b+a]=function(){a(window.event)},c.attachEvent("on"+b,c[b+a]))},Dygraph.prototype.addAndTrackEvent=function(c,b,a){Dygraph.addEvent(c,b,a),this.registeredEvents_.push({elem:c,type:b,fn:a})},Dygraph.removeEvent=function(c,b,a){if(c.removeEventListener)c.removeEventListener(b,a,!1);else{try{c.detachEvent("on"+b,c[b+a])}catch(d){}c[b+a]=null}},Dygraph.prototype.removeTrackedEvents_=function(){if(this.registeredEvents_)for(var a=0;a<this.registeredEvents_.length;a++){var b=this.registeredEvents_[a];Dygraph.removeEvent(b.elem,b.type,b.fn)}this.registeredEvents_=[]},Dygraph.cancelEvent=function(a){return a=a?a:window.event,a.stopPropagation&&a.stopPropagation(),a.preventDefault&&a.preventDefault(),a.cancelBubble=!0,a.cancel=!0,a.returnValue=!1,!1},Dygraph.hsvToRGB=function(h,g,k){var c,d,l;if(0===g)c=k,d=k,l=k;else{var e=Math.floor(6*h),j=6*h-e,b=k*(1-g),a=k*(1-g*j),m=k*(1-g*(1-j));switch(e){case 1:c=a,d=k,l=b;break;case 2:c=b,d=k,l=m;break;case 3:c=b,d=a,l=k;break;case 4:c=m,d=b,l=k;break;case 5:c=k,d=b,l=a;break;case 6:case 0:c=k,d=m,l=b}}return c=Math.floor(255*c+.5),d=Math.floor(255*d+.5),l=Math.floor(255*l+.5),"rgb("+c+","+d+","+l+")"},Dygraph.findPosX=function(c){var d=0;if(c.offsetParent)for(var a=c;;){var b="0";if(window.getComputedStyle&&(b=window.getComputedStyle(a,null).borderLeft||"0"),d+=parseInt(b,10),d+=a.offsetLeft,!a.offsetParent)break;a=a.offsetParent}else c.x&&(d+=c.x);for(;c&&c!=document.body;)d-=c.scrollLeft,c=c.parentNode;return d},Dygraph.findPosY=function(c){var b=0;if(c.offsetParent)for(var a=c;;){var d="0";if(window.getComputedStyle&&(d=window.getComputedStyle(a,null).borderTop||"0"),b+=parseInt(d,10),b+=a.offsetTop,!a.offsetParent)break;a=a.offsetParent}else c.y&&(b+=c.y);for(;c&&c!=document.body;)b-=c.scrollTop,c=c.parentNode;return b},Dygraph.pageX=function(c){if(c.pageX)return!c.pageX||c.pageX<0?0:c.pageX;var d=document.documentElement,a=document.body;return c.clientX+(d.scrollLeft||a.scrollLeft)-(d.clientLeft||0)},Dygraph.pageY=function(c){if(c.pageY)return!c.pageY||c.pageY<0?0:c.pageY;var d=document.documentElement,a=document.body;return c.clientY+(d.scrollTop||a.scrollTop)-(d.clientTop||0)},Dygraph.isOK=function(a){return!!a&&!isNaN(a)},Dygraph.isValidPoint=function(b,a){return b?null===b.yval?!1:null===b.x||void 0===b.x?!1:null===b.y||void 0===b.y?!1:isNaN(b.x)||!a&&isNaN(b.y)?!1:!0:!1},Dygraph.floatFormat=function(a,b){var c=Math.min(Math.max(1,b||2),21);return Math.abs(a)<.001&&0!==a?a.toExponential(c-1):a.toPrecision(c)},Dygraph.zeropad=function(a){return 10>a?"0"+a:""+a},Dygraph.hmsString_=function(a){var c=Dygraph.zeropad,b=new Date(a);return b.getSeconds()?c(b.getHours())+":"+c(b.getMinutes())+":"+c(b.getSeconds()):c(b.getHours())+":"+c(b.getMinutes())},Dygraph.round_=function(c,b){var a=Math.pow(10,b);return Math.round(c*a)/a},Dygraph.binarySearch=function(a,d,i,e,b){if((null===e||void 0===e||null===b||void 0===b)&&(e=0,b=d.length-1),e>b)return-1;(null===i||void 0===i)&&(i=0);var f,h=function(j){return j>=0&&j<d.length},g=parseInt((e+b)/2,10),c=d[g];return c==a?g:c>a?i>0&&(f=g-1,h(f)&&d[f]<a)?g:Dygraph.binarySearch(a,d,i,e,g-1):a>c?0>i&&(f=g+1,h(f)&&d[f]>a)?g:Dygraph.binarySearch(a,d,i,g+1,b):-1},Dygraph.dateParser=function(a){var b,c;if((-1==a.search("-")||-1!=a.search("T")||-1!=a.search("Z"))&&(c=Dygraph.dateStrToMillis(a),c&&!isNaN(c)))return c;if(-1!=a.search("-")){for(b=a.replace("-","/","g");-1!=b.search("-");)b=b.replace("-","/");c=Dygraph.dateStrToMillis(b)}else 8==a.length?(b=a.substr(0,4)+"/"+a.substr(4,2)+"/"+a.substr(6,2),c=Dygraph.dateStrToMillis(b)):c=Dygraph.dateStrToMillis(a);return(!c||isNaN(c))&&Dygraph.error("Couldn't parse "+a+" as a date"),c},Dygraph.dateStrToMillis=function(a){return new Date(a).getTime()},Dygraph.update=function(b,c){if("undefined"!=typeof c&&null!==c)for(var a in c)c.hasOwnProperty(a)&&(b[a]=c[a]);return b},Dygraph.updateDeep=function(b,d){function c(e){return"object"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}if("undefined"!=typeof d&&null!==d)for(var a in d)d.hasOwnProperty(a)&&(null===d[a]?b[a]=null:Dygraph.isArrayLike(d[a])?b[a]=d[a].slice():c(d[a])?b[a]=d[a]:"object"==typeof d[a]?(("object"!=typeof b[a]||null===b[a])&&(b[a]={}),Dygraph.updateDeep(b[a],d[a])):b[a]=d[a]);return b},Dygraph.isArrayLike=function(b){var a=typeof b;return"object"!=a&&("function"!=a||"function"!=typeof b.item)||null===b||"number"!=typeof b.length||3===b.nodeType?!1:!0},Dygraph.isDateLike=function(a){return"object"!=typeof a||null===a||"function"!=typeof a.getTime?!1:!0},Dygraph.clone=function(c){for(var b=[],a=0;a<c.length;a++)b.push(Dygraph.isArrayLike(c[a])?Dygraph.clone(c[a]):c[a]);return b},Dygraph.createCanvas=function(){var a=document.createElement("canvas"),b=/MSIE/.test(navigator.userAgent)&&!window.opera;return b&&"undefined"!=typeof G_vmlCanvasManager&&(a=G_vmlCanvasManager.initElement(a)),a},Dygraph.isAndroid=function(){return/Android/.test(navigator.userAgent)},Dygraph.Iterator=function(d,c,b,a){c=c||0,b=b||d.length,this.hasNext=!0,this.peek=null,this.start_=c,this.array_=d,this.predicate_=a,this.end_=Math.min(d.length,c+b),this.nextIdx_=c-1,this.next()},Dygraph.Iterator.prototype.next=function(){if(!this.hasNext)return null;for(var c=this.peek,b=this.nextIdx_+1,a=!1;b<this.end_;){if(!this.predicate_||this.predicate_(this.array_,b)){this.peek=this.array_[b],a=!0;break}b++}return this.nextIdx_=b,a||(this.hasNext=!1,this.peek=null),c},Dygraph.createIterator=function(d,c,b,a){return new Dygraph.Iterator(d,c,b,a)},Dygraph.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}(),Dygraph.repeatAndCleanup=function(h,g,f,a){var d,i=0,b=(new Date).getTime();if(h(i),1==g)return void a();var e=g-1;!function c(){i>=g||Dygraph.requestAnimFrame.call(window,function(){var l=(new Date).getTime(),j=l-b;d=i,i=Math.floor(j/f);var k=i-d,m=i+k>e;m||i>=e?(h(e),a()):(0!==k&&h(i),c())})}()},Dygraph.isPixelChangingOptionList=function(h,e){var d={annotationClickHandler:!0,annotationDblClickHandler:!0,annotationMouseOutHandler:!0,annotationMouseOverHandler:!0,axisLabelColor:!0,axisLineColor:!0,axisLineWidth:!0,clickCallback:!0,digitsAfterDecimal:!0,drawCallback:!0,drawHighlightPointCallback:!0,drawPoints:!0,drawPointCallback:!0,drawXGrid:!0,drawYGrid:!0,fillAlpha:!0,gridLineColor:!0,gridLineWidth:!0,hideOverlayOnMouseOut:!0,highlightCallback:!0,highlightCircleSize:!0,interactionModel:!0,isZoomedIgnoreProgrammaticZoom:!0,labelsDiv:!0,labelsDivStyles:!0,labelsDivWidth:!0,labelsKMB:!0,labelsKMG2:!0,labelsSeparateLines:!0,labelsShowZeroValues:!0,legend:!0,maxNumberWidth:!0,panEdgeFraction:!0,pixelsPerYLabel:!0,pointClickCallback:!0,pointSize:!0,rangeSelectorPlotFillColor:!0,rangeSelectorPlotStrokeColor:!0,showLabelsOnHighlight:!0,showRoller:!0,sigFigs:!0,strokeWidth:!0,underlayCallback:!0,unhighlightCallback:!0,xAxisLabelFormatter:!0,xTicker:!0,xValueFormatter:!0,yAxisLabelFormatter:!0,yValueFormatter:!0,zoomCallback:!0},a=!1,b={};if(h)for(var f=1;f<h.length;f++)b[h[f]]=!0;for(var g in e){if(a)break;if(e.hasOwnProperty(g))if(b[g])for(var c in e[g]){if(a)break;e[g].hasOwnProperty(c)&&!d[c]&&(a=!0)}else d[g]||(a=!0)}return a},Dygraph.compareArrays=function(c,b){if(!Dygraph.isArrayLike(c)||!Dygraph.isArrayLike(b))return!1;if(c.length!==b.length)return!1;for(var a=0;a<c.length;a++)if(c[a]!==b[a])return!1;return!0},Dygraph.regularShape_=function(o,c,i,f,e,a,n){a=a||0,n=n||2*Math.PI/c,o.beginPath();var g=a,d=g,h=function(){var p=f+Math.sin(d)*i,q=e+-Math.cos(d)*i;return[p,q]},b=h(),l=b[0],j=b[1];o.moveTo(l,j);for(var m=0;c>m;m++){d=m==c-1?g:d+n;var k=h();o.lineTo(k[0],k[1])}o.fill(),o.stroke()},Dygraph.shapeFunction_=function(b,a,c){return function(j,i,f,e,k,h,d){f.strokeStyle=h,f.fillStyle="white",Dygraph.regularShape_(f,b,d,e,k,a,c)}},Dygraph.Circles={DEFAULT:function(h,f,b,e,d,c,a){b.beginPath(),b.fillStyle=c,b.arc(e,d,a,0,2*Math.PI,!1),b.fill()},TRIANGLE:Dygraph.shapeFunction_(3),SQUARE:Dygraph.shapeFunction_(4,Math.PI/4),DIAMOND:Dygraph.shapeFunction_(4),PENTAGON:Dygraph.shapeFunction_(5),HEXAGON:Dygraph.shapeFunction_(6),CIRCLE:function(f,e,c,b,h,d,a){c.beginPath(),c.strokeStyle=d,c.fillStyle="white",c.arc(b,h,a,0,2*Math.PI,!1),c.fill(),c.stroke()},STAR:Dygraph.shapeFunction_(5,0,4*Math.PI/5),PLUS:function(f,e,c,b,h,d,a){c.strokeStyle=d,c.beginPath(),c.moveTo(b+a,h),c.lineTo(b-a,h),c.closePath(),c.stroke(),c.beginPath(),c.moveTo(b,h+a),c.lineTo(b,h-a),c.closePath(),c.stroke()},EX:function(f,e,c,b,h,d,a){c.strokeStyle=d,c.beginPath(),c.moveTo(b+a,h+a),c.lineTo(b-a,h-a),c.closePath(),c.stroke(),c.beginPath(),c.moveTo(b+a,h-a),c.lineTo(b-a,h+a),c.closePath(),c.stroke()}},Dygraph.IFrameTarp=function(){this.tarps=[]},Dygraph.IFrameTarp.prototype.cover=function(){for(var f=document.getElementsByTagName("iframe"),c=0;c<f.length;c++){var e=f[c],b=Dygraph.findPosX(e),h=Dygraph.findPosY(e),d=e.offsetWidth,a=e.offsetHeight,g=document.createElement("div");g.style.position="absolute",g.style.left=b+"px",g.style.top=h+"px",g.style.width=d+"px",g.style.height=a+"px",g.style.zIndex=999,document.body.appendChild(g),this.tarps.push(g)}},Dygraph.IFrameTarp.prototype.uncover=function(){for(var a=0;a<this.tarps.length;a++)this.tarps[a].parentNode.removeChild(this.tarps[a]);this.tarps=[]},Dygraph.detectLineDelimiter=function(c){for(var a=0;a<c.length;a++){var b=c.charAt(a);if("\r"===b)return a+1<c.length&&"\n"===c.charAt(a+1)?"\r\n":b;if("\n"===b)return a+1<c.length&&"\r"===c.charAt(a+1)?"\n\r":b}return null},Dygraph.isNodeContainedBy=function(b,a){if(null===a||null===b)return!1;for(var c=b;c&&c!==a;)c=c.parentNode;return c===a},Dygraph.pow=function(a,b){return 0>b?1/Math.pow(a,-b):Math.pow(a,b)},Dygraph.dateSetters={ms:Date.prototype.setMilliseconds,s:Date.prototype.setSeconds,m:Date.prototype.setMinutes,h:Date.prototype.setHours},Dygraph.setDateSameTZ=function(c,b){var f=c.getTimezoneOffset();for(var a in b)if(b.hasOwnProperty(a)){var e=Dygraph.dateSetters[a];if(!e)throw"Invalid setter: "+a;e.call(c,b[a]),c.getTimezoneOffset()!=f&&c.setTime(c.getTime()+60*(f-c.getTimezoneOffset())*1e3)}},Dygraph.GVizChart=function(a){this.container=a},Dygraph.GVizChart.prototype.draw=function(b,a){this.container.innerHTML="","undefined"!=typeof this.date_graph&&this.date_graph.destroy(),this.date_graph=new Dygraph(this.container,b,a)},Dygraph.GVizChart.prototype.setSelection=function(b){var a=!1;b.length&&(a=b[0].row),this.date_graph.setSelection(a)},Dygraph.GVizChart.prototype.getSelection=function(){var b=[],d=this.date_graph.getSelection();if(0>d)return b;for(var a=this.date_graph.layout_.points,c=0;c<a.length;++c)b.push({row:d,column:c+1});
return b},Dygraph.Interaction={},Dygraph.Interaction.startPan=function(o,t,c){var r,b;c.isPanning=!0;var k=t.xAxisRange();if(c.dateRange=k[1]-k[0],c.initialLeftmostDate=k[0],c.xUnitsPerPixel=c.dateRange/(t.plotter_.area.w-1),t.attr_("panEdgeFraction")){var x=t.width_*t.attr_("panEdgeFraction"),d=t.xAxisExtremes(),j=t.toDomXCoord(d[0])-x,l=t.toDomXCoord(d[1])+x,u=t.toDataXCoord(j),w=t.toDataXCoord(l);c.boundedDates=[u,w];var f=[],a=t.height_*t.attr_("panEdgeFraction");for(r=0;r<t.axes_.length;r++){b=t.axes_[r];var p=b.extremeRange,q=t.toDomYCoord(p[0],r)+a,s=t.toDomYCoord(p[1],r)-a,n=t.toDataYCoord(q,r),e=t.toDataYCoord(s,r);f[r]=[n,e]}c.boundedValues=f}for(c.is2DPan=!1,c.axes=[],r=0;r<t.axes_.length;r++){b=t.axes_[r];var h={},m=t.yAxisRange(r),v=t.attributes_.getForAxis("logscale",r);v?(h.initialTopValue=Dygraph.log10(m[1]),h.dragValueRange=Dygraph.log10(m[1])-Dygraph.log10(m[0])):(h.initialTopValue=m[1],h.dragValueRange=m[1]-m[0]),h.unitsPerPixel=h.dragValueRange/(t.plotter_.area.h-1),c.axes.push(h),(b.valueWindow||b.valueRange)&&(c.is2DPan=!0)}},Dygraph.Interaction.movePan=function(b,k,c){c.dragEndX=k.dragGetX_(b,c),c.dragEndY=k.dragGetY_(b,c);var h=c.initialLeftmostDate-(c.dragEndX-c.dragStartX)*c.xUnitsPerPixel;c.boundedDates&&(h=Math.max(h,c.boundedDates[0]));var a=h+c.dateRange;if(c.boundedDates&&a>c.boundedDates[1]&&(h-=a-c.boundedDates[1],a=h+c.dateRange),k.dateWindow_=[h,a],c.is2DPan)for(var d=c.dragEndY-c.dragStartY,j=0;j<k.axes_.length;j++){var e=k.axes_[j],o=c.axes[j],p=d*o.unitsPerPixel,f=c.boundedValues?c.boundedValues[j]:null,l=o.initialTopValue+p;f&&(l=Math.min(l,f[1]));var n=l-o.dragValueRange;f&&n<f[0]&&(l-=n-f[0],n=l-o.dragValueRange);var m=k.attributes_.getForAxis("logscale",j);e.valueWindow=m?[Math.pow(Dygraph.LOG_SCALE,n),Math.pow(Dygraph.LOG_SCALE,l)]:[n,l]}k.drawGraph_(!1)},Dygraph.Interaction.endPan=function(c,b,a){a.dragEndX=b.dragGetX_(c,a),a.dragEndY=b.dragGetY_(c,a);var e=Math.abs(a.dragEndX-a.dragStartX),d=Math.abs(a.dragEndY-a.dragStartY);2>e&&2>d&&void 0!==b.lastx_&&-1!=b.lastx_&&Dygraph.Interaction.treatMouseOpAsClick(b,c,a),a.isPanning=!1,a.is2DPan=!1,a.initialLeftmostDate=null,a.dateRange=null,a.valueRange=null,a.boundedDates=null,a.boundedValues=null,a.axes=null},Dygraph.Interaction.startZoom=function(c,b,a){a.isZooming=!0,a.zoomMoved=!1},Dygraph.Interaction.moveZoom=function(c,b,a){a.zoomMoved=!0,a.dragEndX=b.dragGetX_(c,a),a.dragEndY=b.dragGetY_(c,a);var e=Math.abs(a.dragStartX-a.dragEndX),d=Math.abs(a.dragStartY-a.dragEndY);a.dragDirection=d/2>e?Dygraph.VERTICAL:Dygraph.HORIZONTAL,b.drawZoomRect_(a.dragDirection,a.dragStartX,a.dragEndX,a.dragStartY,a.dragEndY,a.prevDragDirection,a.prevEndX,a.prevEndY),a.prevEndX=a.dragEndX,a.prevEndY=a.dragEndY,a.prevDragDirection=a.dragDirection},Dygraph.Interaction.treatMouseOpAsClick=function(f,b,d){var k=f.attr_("clickCallback"),n=f.attr_("pointClickCallback"),j=null;if(n){for(var l=-1,m=Number.MAX_VALUE,e=0;e<f.selPoints_.length;e++){var c=f.selPoints_[e],a=Math.pow(c.canvasx-d.dragEndX,2)+Math.pow(c.canvasy-d.dragEndY,2);!isNaN(a)&&(-1==l||m>a)&&(m=a,l=e)}var h=f.attr_("highlightCircleSize")+2;h*h>=m&&(j=f.selPoints_[l])}j&&n(b,j),k&&k(b,f.lastx_,f.selPoints_)},Dygraph.Interaction.endZoom=function(c,i,e){e.isZooming=!1,e.dragEndX=i.dragGetX_(c,e),e.dragEndY=i.dragGetY_(c,e);var h=Math.abs(e.dragEndX-e.dragStartX),d=Math.abs(e.dragEndY-e.dragStartY);2>h&&2>d&&void 0!==i.lastx_&&-1!=i.lastx_&&Dygraph.Interaction.treatMouseOpAsClick(i,c,e);var b=i.getArea();if(h>=10&&e.dragDirection==Dygraph.HORIZONTAL){var f=Math.min(e.dragStartX,e.dragEndX),k=Math.max(e.dragStartX,e.dragEndX);f=Math.max(f,b.x),k=Math.min(k,b.x+b.w),k>f&&i.doZoomX_(f,k),e.cancelNextDblclick=!0}else if(d>=10&&e.dragDirection==Dygraph.VERTICAL){var j=Math.min(e.dragStartY,e.dragEndY),a=Math.max(e.dragStartY,e.dragEndY);j=Math.max(j,b.y),a=Math.min(a,b.y+b.h),a>j&&i.doZoomY_(j,a),e.cancelNextDblclick=!0}else e.zoomMoved&&i.clearZoomRect_();e.dragStartX=null,e.dragStartY=null},Dygraph.Interaction.startTouch=function(f,e,d){f.preventDefault(),f.touches.length>1&&(d.startTimeForDoubleTapMs=null);for(var h=[],c=0;c<f.touches.length;c++){var b=f.touches[c];h.push({pageX:b.pageX,pageY:b.pageY,dataX:e.toDataXCoord(b.pageX),dataY:e.toDataYCoord(b.pageY)})}if(d.initialTouches=h,1==h.length)d.initialPinchCenter=h[0],d.touchDirections={x:!0,y:!0};else if(h.length>=2){d.initialPinchCenter={pageX:.5*(h[0].pageX+h[1].pageX),pageY:.5*(h[0].pageY+h[1].pageY),dataX:.5*(h[0].dataX+h[1].dataX),dataY:.5*(h[0].dataY+h[1].dataY)};var a=180/Math.PI*Math.atan2(d.initialPinchCenter.pageY-h[0].pageY,h[0].pageX-d.initialPinchCenter.pageX);a=Math.abs(a),a>90&&(a=90-a),d.touchDirections={x:67.5>a,y:a>22.5}}d.initialRange={x:e.xAxisRange(),y:e.yAxisRange()}},Dygraph.Interaction.moveTouch=function(n,q,d){d.startTimeForDoubleTapMs=null;var p,l=[];for(p=0;p<n.touches.length;p++){var k=n.touches[p];l.push({pageX:k.pageX,pageY:k.pageY})}var h,a=d.initialTouches,j=d.initialPinchCenter;h=1==l.length?l[0]:{pageX:.5*(l[0].pageX+l[1].pageX),pageY:.5*(l[0].pageY+l[1].pageY)};var m={pageX:h.pageX-j.pageX,pageY:h.pageY-j.pageY},f=d.initialRange.x[1]-d.initialRange.x[0],o=d.initialRange.y[0]-d.initialRange.y[1];m.dataX=m.pageX/q.plotter_.area.w*f,m.dataY=m.pageY/q.plotter_.area.h*o;var w,c;if(1==l.length)w=1,c=1;else if(l.length>=2){var e=a[1].pageX-j.pageX;w=(l[1].pageX-h.pageX)/e;var v=a[1].pageY-j.pageY;c=(l[1].pageY-h.pageY)/v}w=Math.min(8,Math.max(.125,w)),c=Math.min(8,Math.max(.125,c));var u=!1;if(d.touchDirections.x&&(q.dateWindow_=[j.dataX-m.dataX+(d.initialRange.x[0]-j.dataX)/w,j.dataX-m.dataX+(d.initialRange.x[1]-j.dataX)/w],u=!0),d.touchDirections.y)for(p=0;1>p;p++){var b=q.axes_[p],s=q.attributes_.getForAxis("logscale",p);s||(b.valueWindow=[j.dataY-m.dataY+(d.initialRange.y[0]-j.dataY)/c,j.dataY-m.dataY+(d.initialRange.y[1]-j.dataY)/c],u=!0)}if(q.drawGraph_(!1),u&&l.length>1&&q.attr_("zoomCallback")){var r=q.xAxisRange();q.attr_("zoomCallback")(r[0],r[1],q.yAxisRanges())}},Dygraph.Interaction.endTouch=function(e,d,c){if(0!==e.touches.length)Dygraph.Interaction.startTouch(e,d,c);else if(1==e.changedTouches.length){var a=(new Date).getTime(),b=e.changedTouches[0];c.startTimeForDoubleTapMs&&a-c.startTimeForDoubleTapMs<500&&c.doubleTapX&&Math.abs(c.doubleTapX-b.screenX)<50&&c.doubleTapY&&Math.abs(c.doubleTapY-b.screenY)<50?d.resetZoom():(c.startTimeForDoubleTapMs=a,c.doubleTapX=b.screenX,c.doubleTapY=b.screenY)}},Dygraph.Interaction.defaultModel={mousedown:function(c,b,a){c.button&&2==c.button||(a.initializeMouseDown(c,b,a),c.altKey||c.shiftKey?Dygraph.startPan(c,b,a):Dygraph.startZoom(c,b,a))},mousemove:function(c,b,a){a.isZooming?Dygraph.moveZoom(c,b,a):a.isPanning&&Dygraph.movePan(c,b,a)},mouseup:function(c,b,a){a.isZooming?Dygraph.endZoom(c,b,a):a.isPanning&&Dygraph.endPan(c,b,a)},touchstart:function(c,b,a){Dygraph.Interaction.startTouch(c,b,a)},touchmove:function(c,b,a){Dygraph.Interaction.moveTouch(c,b,a)},touchend:function(c,b,a){Dygraph.Interaction.endTouch(c,b,a)},mouseout:function(c,b,a){a.isZooming&&(a.dragEndX=null,a.dragEndY=null,b.clearZoomRect_())},dblclick:function(c,b,a){return a.cancelNextDblclick?void(a.cancelNextDblclick=!1):void(c.altKey||c.shiftKey||b.resetZoom())}},Dygraph.DEFAULT_ATTRS.interactionModel=Dygraph.Interaction.defaultModel,Dygraph.defaultInteractionModel=Dygraph.Interaction.defaultModel,Dygraph.endZoom=Dygraph.Interaction.endZoom,Dygraph.moveZoom=Dygraph.Interaction.moveZoom,Dygraph.startZoom=Dygraph.Interaction.startZoom,Dygraph.endPan=Dygraph.Interaction.endPan,Dygraph.movePan=Dygraph.Interaction.movePan,Dygraph.startPan=Dygraph.Interaction.startPan,Dygraph.Interaction.nonInteractiveModel_={mousedown:function(c,b,a){a.initializeMouseDown(c,b,a)},mouseup:function(c,b,a){a.dragEndX=b.dragGetX_(c,a),a.dragEndY=b.dragGetY_(c,a);var e=Math.abs(a.dragEndX-a.dragStartX),d=Math.abs(a.dragEndY-a.dragStartY);2>e&&2>d&&void 0!==b.lastx_&&-1!=b.lastx_&&Dygraph.Interaction.treatMouseOpAsClick(b,c,a)}},Dygraph.Interaction.dragIsPanInteractionModel={mousedown:function(c,b,a){a.initializeMouseDown(c,b,a),Dygraph.startPan(c,b,a)},mousemove:function(c,b,a){a.isPanning&&Dygraph.movePan(c,b,a)},mouseup:function(c,b,a){a.isPanning&&Dygraph.endPan(c,b,a)}},Dygraph.TickList=void 0,Dygraph.Ticker=void 0,Dygraph.numericLinearTicks=function(d,c,i,g,f,h){var e=function(a){return"logscale"===a?!1:g(a)};return Dygraph.numericTicks(d,c,i,e,f,h)},Dygraph.numericTicks=function(F,E,u,p,d,q){var C,A,t,y,z=p("pixelsPerLabel"),G=[];if(q)for(C=0;C<q.length;C++)G.push({v:q[C]});else{if(p("logscale")){y=Math.floor(u/z);var l=Dygraph.binarySearch(F,Dygraph.PREFERRED_LOG_TICK_VALUES,1),H=Dygraph.binarySearch(E,Dygraph.PREFERRED_LOG_TICK_VALUES,-1);-1==l&&(l=0),-1==H&&(H=Dygraph.PREFERRED_LOG_TICK_VALUES.length-1);var s=null;if(H-l>=y/4){for(var r=H;r>=l;r--){var m=Dygraph.PREFERRED_LOG_TICK_VALUES[r],k=Math.log(m/F)/Math.log(E/F)*u,D={v:m};null===s?s={tickValue:m,pixel_coord:k}:Math.abs(k-s.pixel_coord)>=z?s={tickValue:m,pixel_coord:k}:D.label="",G.push(D)}G.reverse()}}if(0===G.length){var n,h,g=p("labelsKMG2");g?(n=[1,2,4,8,16,32,64,128,256],h=16):(n=[1,2,5,10,20,50,100],h=10);var I,x,c,e,w=Math.ceil(u/z),o=Math.abs(E-F)/w,v=Math.floor(Math.log(o)/Math.log(h)),f=Math.pow(h,v);for(A=0;A<n.length&&(I=f*n[A],x=Math.floor(F/I)*I,c=Math.ceil(E/I)*I,y=Math.abs(c-x)/I,e=u/y,!(e>z));A++);for(x>c&&(I*=-1),C=0;y>C;C++)t=x+C*I,G.push({v:t})}}var B=p("axisLabelFormatter");for(C=0;C<G.length;C++)void 0===G[C].label&&(G[C].label=B(G[C].v,0,p,d));return G},Dygraph.dateTicker=function(e,c,i,g,f){var d=Dygraph.pickDateTickGranularity(e,c,i,g);return d>=0?Dygraph.getDateAxis(e,c,d,g,f):[]},Dygraph.SECONDLY=0,Dygraph.TWO_SECONDLY=1,Dygraph.FIVE_SECONDLY=2,Dygraph.TEN_SECONDLY=3,Dygraph.THIRTY_SECONDLY=4,Dygraph.MINUTELY=5,Dygraph.TWO_MINUTELY=6,Dygraph.FIVE_MINUTELY=7,Dygraph.TEN_MINUTELY=8,Dygraph.THIRTY_MINUTELY=9,Dygraph.HOURLY=10,Dygraph.TWO_HOURLY=11,Dygraph.SIX_HOURLY=12,Dygraph.DAILY=13,Dygraph.WEEKLY=14,Dygraph.MONTHLY=15,Dygraph.QUARTERLY=16,Dygraph.BIANNUAL=17,Dygraph.ANNUAL=18,Dygraph.DECADAL=19,Dygraph.CENTENNIAL=20,Dygraph.NUM_GRANULARITIES=21,Dygraph.SHORT_SPACINGS=[],Dygraph.SHORT_SPACINGS[Dygraph.SECONDLY]=1e3,Dygraph.SHORT_SPACINGS[Dygraph.TWO_SECONDLY]=2e3,Dygraph.SHORT_SPACINGS[Dygraph.FIVE_SECONDLY]=5e3,Dygraph.SHORT_SPACINGS[Dygraph.TEN_SECONDLY]=1e4,Dygraph.SHORT_SPACINGS[Dygraph.THIRTY_SECONDLY]=3e4,Dygraph.SHORT_SPACINGS[Dygraph.MINUTELY]=6e4,Dygraph.SHORT_SPACINGS[Dygraph.TWO_MINUTELY]=12e4,Dygraph.SHORT_SPACINGS[Dygraph.FIVE_MINUTELY]=3e5,Dygraph.SHORT_SPACINGS[Dygraph.TEN_MINUTELY]=6e5,Dygraph.SHORT_SPACINGS[Dygraph.THIRTY_MINUTELY]=18e5,Dygraph.SHORT_SPACINGS[Dygraph.HOURLY]=36e5,Dygraph.SHORT_SPACINGS[Dygraph.TWO_HOURLY]=72e5,Dygraph.SHORT_SPACINGS[Dygraph.SIX_HOURLY]=216e5,Dygraph.SHORT_SPACINGS[Dygraph.DAILY]=864e5,Dygraph.SHORT_SPACINGS[Dygraph.WEEKLY]=6048e5,Dygraph.LONG_TICK_PLACEMENTS=[],Dygraph.LONG_TICK_PLACEMENTS[Dygraph.MONTHLY]={months:[0,1,2,3,4,5,6,7,8,9,10,11],year_mod:1},Dygraph.LONG_TICK_PLACEMENTS[Dygraph.QUARTERLY]={months:[0,3,6,9],year_mod:1},Dygraph.LONG_TICK_PLACEMENTS[Dygraph.BIANNUAL]={months:[0,6],year_mod:1},Dygraph.LONG_TICK_PLACEMENTS[Dygraph.ANNUAL]={months:[0],year_mod:1},Dygraph.LONG_TICK_PLACEMENTS[Dygraph.DECADAL]={months:[0],year_mod:10},Dygraph.LONG_TICK_PLACEMENTS[Dygraph.CENTENNIAL]={months:[0],year_mod:100},Dygraph.PREFERRED_LOG_TICK_VALUES=function(){for(var c=[],b=-39;39>=b;b++)for(var a=Math.pow(10,b),d=1;9>=d;d++){var e=a*d;c.push(e)}return c}(),Dygraph.pickDateTickGranularity=function(d,c,j,h){for(var g=h("pixelsPerLabel"),f=0;f<Dygraph.NUM_GRANULARITIES;f++){var e=Dygraph.numDateTicks(d,c,f);if(j/e>=g)return f}return-1},Dygraph.numDateTicks=function(e,b,f){if(f<Dygraph.MONTHLY){var g=Dygraph.SHORT_SPACINGS[f];return Math.floor(.5+1*(b-e)/g)}var d=Dygraph.LONG_TICK_PLACEMENTS[f],c=31557807360,a=1*(b-e)/c;return Math.floor(.5+1*a*d.months.length/d.year_mod)},Dygraph.getDateAxis=function(p,l,a,n,z){var m,w=n("axisLabelFormatter"),C=[];if(a<Dygraph.MONTHLY){var c=Dygraph.SHORT_SPACINGS[a],y=c/1e3,A=new Date(p);Dygraph.setDateSameTZ(A,{ms:0});var h;60>=y?(h=A.getSeconds(),Dygraph.setDateSameTZ(A,{s:h-h%y})):(Dygraph.setDateSameTZ(A,{s:0}),y/=60,60>=y?(h=A.getMinutes(),Dygraph.setDateSameTZ(A,{m:h-h%y})):(Dygraph.setDateSameTZ(A,{m:0}),y/=60,24>=y?(h=A.getHours(),A.setHours(h-h%y)):(A.setHours(0),y/=24,7==y&&A.setDate(A.getDate()-A.getDay())))),p=A.getTime();var B=new Date(p).getTimezoneOffset(),e=c>=Dygraph.SHORT_SPACINGS[Dygraph.TWO_HOURLY];for(m=p;l>=m;m+=c){if(A=new Date(m),e&&A.getTimezoneOffset()!=B){var k=A.getTimezoneOffset()-B;m+=60*k*1e3,A=new Date(m),B=A.getTimezoneOffset(),new Date(m+c).getTimezoneOffset()!=B&&(m+=c,A=new Date(m),B=A.getTimezoneOffset())}C.push({v:m,label:w(A,a,n,z)})}}else{var f,r=1;a<Dygraph.NUM_GRANULARITIES?(f=Dygraph.LONG_TICK_PLACEMENTS[a].months,r=Dygraph.LONG_TICK_PLACEMENTS[a].year_mod):Dygraph.warn("Span of dates is too long");for(var v=new Date(p).getFullYear(),q=new Date(l).getFullYear(),b=Dygraph.zeropad,u=v;q>=u;u++)if(u%r===0)for(var s=0;s<f.length;s++){var o=u+"/"+b(1+f[s])+"/01";m=Dygraph.dateStrToMillis(o),p>m||m>l||C.push({v:m,label:w(new Date(m),a,n,z)})}}return C},Dygraph&&Dygraph.DEFAULT_ATTRS&&Dygraph.DEFAULT_ATTRS.axes&&Dygraph.DEFAULT_ATTRS.axes.x&&Dygraph.DEFAULT_ATTRS.axes.y&&Dygraph.DEFAULT_ATTRS.axes.y2&&(Dygraph.DEFAULT_ATTRS.axes.x.ticker=Dygraph.dateTicker,Dygraph.DEFAULT_ATTRS.axes.y.ticker=Dygraph.numericTicks,Dygraph.DEFAULT_ATTRS.axes.y2.ticker=Dygraph.numericTicks),Dygraph.Plugins={},Dygraph.Plugins.Annotations=function(){var a=function(){this.annotations_=[]};return a.prototype.toString=function(){return"Annotations Plugin"},a.prototype.activate=function(){return{clearChart:this.clearChart,didDrawChart:this.didDrawChart}},a.prototype.detachLabels=function(){for(var c=0;c<this.annotations_.length;c++){var b=this.annotations_[c];b.parentNode&&b.parentNode.removeChild(b),this.annotations_[c]=null}this.annotations_=[]},a.prototype.clearChart=function(){this.detachLabels()},a.prototype.didDrawChart=function(v){var t=v.dygraph,r=t.layout_.annotated_points;if(r&&0!==r.length)for(var h=v.canvas.parentNode,x={position:"absolute",fontSize:t.getOption("axisLabelFontSize")+"px",zIndex:10,overflow:"hidden"},b=function(e,g,i){return function(y){var p=i.annotation;p.hasOwnProperty(e)?p[e](p,i,t,y):t.getOption(g)&&t.getOption(g)(p,i,t,y)}},u=v.dygraph.plotter_.area,q={},s=0;s<r.length;s++){var l=r[s];if(!(l.canvasx<u.x||l.canvasx>u.x+u.w||l.canvasy<u.y||l.canvasy>u.y+u.h)){var w=l.annotation,n=6;w.hasOwnProperty("tickHeight")&&(n=w.tickHeight);var j=document.createElement("div");for(var A in x)x.hasOwnProperty(A)&&(j.style[A]=x[A]);w.hasOwnProperty("icon")||(j.className="dygraphDefaultAnnotation"),w.hasOwnProperty("cssClass")&&(j.className+=" "+w.cssClass);var m=w.hasOwnProperty("width")?w.width:16,k=w.hasOwnProperty("height")?w.height:16;if(w.hasOwnProperty("icon")){var z=document.createElement("img");z.src=w.icon,z.width=m,z.height=k,j.appendChild(z)}else l.annotation.hasOwnProperty("shortText")&&j.appendChild(document.createTextNode(l.annotation.shortText));var c=l.canvasx-m/2;j.style.left=c+"px";var f=0;if(w.attachAtBottom){var d=u.y+u.h-k-n;q[c]?d-=q[c]:q[c]=0,q[c]+=n+k,f=d}else f=l.canvasy-k-n;j.style.top=f+"px",j.style.width=m+"px",j.style.height=k+"px",j.title=l.annotation.text,j.style.color=t.colorsMap_[l.name],j.style.borderColor=t.colorsMap_[l.name],w.div=j,t.addAndTrackEvent(j,"click",b("clickHandler","annotationClickHandler",l,this)),t.addAndTrackEvent(j,"mouseover",b("mouseOverHandler","annotationMouseOverHandler",l,this)),t.addAndTrackEvent(j,"mouseout",b("mouseOutHandler","annotationMouseOutHandler",l,this)),t.addAndTrackEvent(j,"dblclick",b("dblClickHandler","annotationDblClickHandler",l,this)),h.appendChild(j),this.annotations_.push(j);var o=v.drawingContext;if(o.save(),o.strokeStyle=t.colorsMap_[l.name],o.beginPath(),w.attachAtBottom){var d=f+k;o.moveTo(l.canvasx,d),o.lineTo(l.canvasx,d+n)}else o.moveTo(l.canvasx,l.canvasy),o.lineTo(l.canvasx,l.canvasy-2-n);o.closePath(),o.stroke(),o.restore()}}},a.prototype.destroy=function(){this.detachLabels()},a}(),Dygraph.Plugins.Axes=function(){var a=function(){this.xlabels_=[],this.ylabels_=[]};return a.prototype.toString=function(){return"Axes Plugin"},a.prototype.activate=function(){return{layout:this.layout,clearChart:this.clearChart,willDrawChart:this.willDrawChart}},a.prototype.layout=function(f){var d=f.dygraph;if(d.getOption("drawYAxis")){var b=d.getOption("yAxisLabelWidth")+2*d.getOption("axisTickSize");f.reserveSpaceLeft(b)}if(d.getOption("drawXAxis")){var c;c=d.getOption("xAxisHeight")?d.getOption("xAxisHeight"):d.getOptionForAxis("axisLabelFontSize","x")+2*d.getOption("axisTickSize"),f.reserveSpaceBottom(c)}if(2==d.numAxes()){if(d.getOption("drawYAxis")){var b=d.getOption("yAxisLabelWidth")+2*d.getOption("axisTickSize");f.reserveSpaceRight(b)}}else d.numAxes()>2&&d.error("Only two y-axes are supported at this time. (Trying to use "+d.numAxes()+")")},a.prototype.detachLabels=function(){function b(d){for(var c=0;c<d.length;c++){var e=d[c];e.parentNode&&e.parentNode.removeChild(e)}}b(this.xlabels_),b(this.ylabels_),this.xlabels_=[],this.ylabels_=[]},a.prototype.clearChart=function(){this.detachLabels()},a.prototype.willDrawChart=function(H){function B(e){return Math.round(e)+.5}function A(e){return Math.round(e)-.5}var F=H.dygraph;if(F.getOption("drawXAxis")||F.getOption("drawYAxis")){var s,u,t,E,D,j=H.drawingContext,v=H.canvas.parentNode,J=H.canvas.width,d=H.canvas.height,C=function(e){return{position:"absolute",fontSize:F.getOptionForAxis("axisLabelFontSize",e)+"px",zIndex:10,color:F.getOptionForAxis("axisLabelColor",e),width:F.getOption("axisLabelWidth")+"px",lineHeight:"normal",overflow:"hidden"}},p={x:C("x"),y:C("y"),y2:C("y2")},m=function(g,x,y){var K=document.createElement("div"),e=p["y2"==y?"y2":x];for(var r in e)e.hasOwnProperty(r)&&(K.style[r]=e[r]);var i=document.createElement("div");return i.className="dygraph-axis-label dygraph-axis-label-"+x+(y?" dygraph-axis-label-"+y:""),i.innerHTML=g,K.appendChild(i),K};j.save();var I=F.layout_,G=H.dygraph.plotter_.area;if(F.getOption("drawYAxis")){if(I.yticks&&I.yticks.length>0){var h=F.numAxes();for(D=0;D<I.yticks.length;D++){if(E=I.yticks[D],"function"==typeof E)return;u=G.x;var o=1,f="y1";1==E[0]&&(u=G.x+G.w,o=-1,f="y2");var k=F.getOptionForAxis("axisLabelFontSize",f);t=G.y+E[1]*G.h,s=m(E[2],"y",2==h?f:null);var z=t-k/2;0>z&&(z=0),z+k+3>d?s.style.bottom="0px":s.style.top=z+"px",0===E[0]?(s.style.left=G.x-F.getOption("yAxisLabelWidth")-F.getOption("axisTickSize")+"px",s.style.textAlign="right"):1==E[0]&&(s.style.left=G.x+G.w+F.getOption("axisTickSize")+"px",s.style.textAlign="left"),s.style.width=F.getOption("yAxisLabelWidth")+"px",v.appendChild(s),this.ylabels_.push(s)}var n=this.ylabels_[0],k=F.getOptionForAxis("axisLabelFontSize","y"),q=parseInt(n.style.top,10)+k;q>d-k&&(n.style.top=parseInt(n.style.top,10)-k/2+"px")}var c;if(F.getOption("drawAxesAtZero")){var w=F.toPercentXCoord(0);(w>1||0>w||isNaN(w))&&(w=0),c=B(G.x+w*G.w)}else c=B(G.x);j.strokeStyle=F.getOptionForAxis("axisLineColor","y"),j.lineWidth=F.getOptionForAxis("axisLineWidth","y"),j.beginPath(),j.moveTo(c,A(G.y)),j.lineTo(c,A(G.y+G.h)),j.closePath(),j.stroke(),2==F.numAxes()&&(j.strokeStyle=F.getOptionForAxis("axisLineColor","y2"),j.lineWidth=F.getOptionForAxis("axisLineWidth","y2"),j.beginPath(),j.moveTo(A(G.x+G.w),A(G.y)),j.lineTo(A(G.x+G.w),A(G.y+G.h)),j.closePath(),j.stroke())}if(F.getOption("drawXAxis")){if(I.xticks)for(D=0;D<I.xticks.length;D++){E=I.xticks[D],u=G.x+E[0]*G.w,t=G.y+G.h,s=m(E[1],"x"),s.style.textAlign="center",s.style.top=t+F.getOption("axisTickSize")+"px";var l=u-F.getOption("axisLabelWidth")/2;l+F.getOption("axisLabelWidth")>J&&(l=J-F.getOption("xAxisLabelWidth"),s.style.textAlign="right"),0>l&&(l=0,s.style.textAlign="left"),s.style.left=l+"px",s.style.width=F.getOption("xAxisLabelWidth")+"px",v.appendChild(s),this.xlabels_.push(s)}j.strokeStyle=F.getOptionForAxis("axisLineColor","x"),j.lineWidth=F.getOptionForAxis("axisLineWidth","x"),j.beginPath();var b;if(F.getOption("drawAxesAtZero")){var w=F.toPercentYCoord(0,0);(w>1||0>w)&&(w=1),b=A(G.y+w*G.h)}else b=A(G.y+G.h);j.moveTo(B(G.x),b),j.lineTo(B(G.x+G.w),b),j.closePath(),j.stroke()}j.restore()}},a}(),Dygraph.Plugins.ChartLabels=function(){var c=function(){this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};c.prototype.toString=function(){return"ChartLabels Plugin"},c.prototype.activate=function(){return{layout:this.layout,didDrawChart:this.didDrawChart}};var b=function(d){var e=document.createElement("div");return e.style.position="absolute",e.style.left=d.x+"px",e.style.top=d.y+"px",e.style.width=d.w+"px",e.style.height=d.h+"px",e};c.prototype.detachLabels_=function(){for(var e=[this.title_div_,this.xlabel_div_,this.ylabel_div_,this.y2label_div_],d=0;d<e.length;d++){var f=e[d];f&&f.parentNode&&f.parentNode.removeChild(f)}this.title_div_=null,this.xlabel_div_=null,this.ylabel_div_=null,this.y2label_div_=null};var a=function(l,i,f,h,j){var d=document.createElement("div");d.style.position="absolute",d.style.left=1==f?"0px":i.x+"px",d.style.top=i.y+"px",d.style.width=i.w+"px",d.style.height=i.h+"px",d.style.fontSize=l.getOption("yLabelWidth")-2+"px";var m=document.createElement("div");m.style.position="absolute",m.style.width=i.h+"px",m.style.height=i.w+"px",m.style.top=i.h/2-i.w/2+"px",m.style.left=i.w/2-i.h/2+"px",m.style.textAlign="center";var e="rotate("+(1==f?"-":"")+"90deg)";m.style.transform=e,m.style.WebkitTransform=e,m.style.MozTransform=e,m.style.OTransform=e,m.style.msTransform=e,"undefined"!=typeof document.documentMode&&document.documentMode<9&&(m.style.filter="progid:DXImageTransform.Microsoft.BasicImage(rotation="+(1==f?"3":"1")+")",m.style.left="0px",m.style.top="0px");var k=document.createElement("div");return k.className=h,k.innerHTML=j,m.appendChild(k),d.appendChild(m),d};return c.prototype.layout=function(k){this.detachLabels_();var i=k.dygraph,m=k.chart_div;if(i.getOption("title")){var d=k.reserveSpaceTop(i.getOption("titleHeight"));this.title_div_=b(d),this.title_div_.style.textAlign="center",this.title_div_.style.fontSize=i.getOption("titleHeight")-8+"px",this.title_div_.style.fontWeight="bold",this.title_div_.style.zIndex=10;var f=document.createElement("div");f.className="dygraph-label dygraph-title",f.innerHTML=i.getOption("title"),this.title_div_.appendChild(f),m.appendChild(this.title_div_)}if(i.getOption("xlabel")){var j=k.reserveSpaceBottom(i.getOption("xLabelHeight"));this.xlabel_div_=b(j),this.xlabel_div_.style.textAlign="center",this.xlabel_div_.style.fontSize=i.getOption("xLabelHeight")-2+"px";var f=document.createElement("div");f.className="dygraph-label dygraph-xlabel",f.innerHTML=i.getOption("xlabel"),this.xlabel_div_.appendChild(f),m.appendChild(this.xlabel_div_)}if(i.getOption("ylabel")){var h=k.reserveSpaceLeft(0);this.ylabel_div_=a(i,h,1,"dygraph-label dygraph-ylabel",i.getOption("ylabel")),m.appendChild(this.ylabel_div_)}if(i.getOption("y2label")&&2==i.numAxes()){var l=k.reserveSpaceRight(0);this.y2label_div_=a(i,l,2,"dygraph-label dygraph-y2label",i.getOption("y2label")),m.appendChild(this.y2label_div_)}},c.prototype.didDrawChart=function(f){var d=f.dygraph;this.title_div_&&(this.title_div_.children[0].innerHTML=d.getOption("title")),this.xlabel_div_&&(this.xlabel_div_.children[0].innerHTML=d.getOption("xlabel")),this.ylabel_div_&&(this.ylabel_div_.children[0].children[0].innerHTML=d.getOption("ylabel")),this.y2label_div_&&(this.y2label_div_.children[0].children[0].innerHTML=d.getOption("y2label"))},c.prototype.clearChart=function(){},c.prototype.destroy=function(){this.detachLabels_()},c}(),Dygraph.Plugins.Grid=function(){var a=function(){};return a.prototype.toString=function(){return"Gridline Plugin"},a.prototype.activate=function(){return{willDrawChart:this.willDrawChart}},a.prototype.willDrawChart=function(s){function k(e){return Math.round(e)+.5}function j(e){return Math.round(e)-.5}var h,f,p,u,q=s.dygraph,l=s.drawingContext,t=q.layout_,r=s.dygraph.plotter_.area;if(q.getOption("drawYGrid")){for(var o=["y","y2"],m=[],v=[],b=[],n=[],d=[],p=0;p<o.length;p++)b[p]=q.getOptionForAxis("drawGrid",o[p]),b[p]&&(m[p]=q.getOptionForAxis("gridLineColor",o[p]),v[p]=q.getOptionForAxis("gridLineWidth",o[p]),d[p]=q.getOptionForAxis("gridLinePattern",o[p]),n[p]=d[p]&&d[p].length>=2);for(u=t.yticks,l.save(),p=0;p<u.length;p++){var c=u[p][0];b[c]&&(n[c]&&l.installPattern(d[c]),l.strokeStyle=m[c],l.lineWidth=v[c],h=k(r.x),f=j(r.y+u[p][1]*r.h),l.beginPath(),l.moveTo(h,f),l.lineTo(h+r.w,f),l.closePath(),l.stroke(),n[c]&&l.uninstallPattern())}l.restore()}if(q.getOption("drawXGrid")&&q.getOptionForAxis("drawGrid","x")){u=t.xticks,l.save();var d=q.getOptionForAxis("gridLinePattern","x"),n=d&&d.length>=2;for(n&&l.installPattern(d),l.strokeStyle=q.getOptionForAxis("gridLineColor","x"),l.lineWidth=q.getOptionForAxis("gridLineWidth","x"),p=0;p<u.length;p++)h=k(r.x+u[p][0]*r.w),f=j(r.y+r.h),l.beginPath(),l.moveTo(h,f),l.lineTo(h,r.y),l.closePath(),l.stroke();n&&l.uninstallPattern(),l.restore()}},a.prototype.destroy=function(){},a}(),Dygraph.Plugins.Legend=function(){var c=function(){this.legend_div_=null,this.is_generated_div_=!1};c.prototype.toString=function(){return"Legend Plugin"};var a,d;c.prototype.activate=function(j){var m,f=j.getOption("labelsDivWidth"),l=j.getOption("labelsDiv");if(l&&null!==l)m="string"==typeof l||l instanceof String?document.getElementById(l):l;else{var i={position:"absolute",fontSize:"14px",zIndex:10,width:f+"px",top:"0px",left:j.size().width-f-2+"px",background:"white",lineHeight:"normal",textAlign:"left",overflow:"hidden"};Dygraph.update(i,j.getOption("labelsDivStyles")),m=document.createElement("div"),m.className="dygraph-legend";for(var h in i)if(i.hasOwnProperty(h))try{m.style[h]=i[h]}catch(k){this.warn("You are using unsupported css properties for your browser in labelsDivStyles")}j.graphDiv.appendChild(m),this.is_generated_div_=!0}return this.legend_div_=m,this.one_em_width_=10,{select:this.select,deselect:this.deselect,predraw:this.predraw,didDrawChart:this.didDrawChart}};var b=function(g){var f=document.createElement("span");f.setAttribute("style","margin: 0; padding: 0 0 0 1em; border: 0;"),g.appendChild(f);var e=f.offsetWidth;return g.removeChild(f),e};return c.prototype.select=function(i){var h=i.selectedX,g=i.selectedPoints,f=a(i.dygraph,h,g,this.one_em_width_);this.legend_div_.innerHTML=f},c.prototype.deselect=function(h){var f=b(this.legend_div_);this.one_em_width_=f;var g=a(h.dygraph,void 0,void 0,f);this.legend_div_.innerHTML=g},c.prototype.didDrawChart=function(f){this.deselect(f)},c.prototype.predraw=function(h){if(this.is_generated_div_){h.dygraph.graphDiv.appendChild(this.legend_div_);var g=h.dygraph.plotter_.area,f=h.dygraph.getOption("labelsDivWidth");this.legend_div_.style.left=g.x+g.w-f-1+"px",this.legend_div_.style.top=g.y+"px",this.legend_div_.style.width=f+"px"}},c.prototype.destroy=function(){this.legend_div_=null},a=function(w,p,l,f){if(w.getOption("showLabelsOnHighlight")!==!0)return"";var r,C,u,s,m,z=w.getLabels();if("undefined"==typeof p){if("always"!=w.getOption("legend"))return"";for(C=w.getOption("labelsSeparateLines"),r="",u=1;u<z.length;u++){var q=w.getPropertiesForSeries(z[u]);q.visible&&(""!==r&&(r+=C?"<br/>":" "),m=w.getOption("strokePattern",z[u]),s=d(m,q.color,f),r+="<span style='font-weight: bold; color: "+q.color+";'>"+s+" "+z[u]+"</span>")}return r}var A=w.optionsViewForAxis_("x"),o=A("valueFormatter");r=o(p,A,z[0],w),""!==r&&(r+=":");var v=[],j=w.numAxes();for(u=0;j>u;u++)v[u]=w.optionsViewForAxis_("y"+(u?1+u:""));var k=w.getOption("labelsShowZeroValues");C=w.getOption("labelsSeparateLines");var B=w.getHighlightSeries();for(u=0;u<l.length;u++){var t=l[u];if((0!==t.yval||k)&&Dygraph.isOK(t.canvasy)){C&&(r+="<br/>");var q=w.getPropertiesForSeries(t.name),n=v[q.axis-1],y=n("valueFormatter"),e=y(t.yval,n,t.name,w),h=t.name==B?" class='highlight'":"";r+="<span"+h+"> <b><span style='color: "+q.color+";'>"+t.name+"</span></b>:&nbsp;"+e+"</span>"}}return r},d=function(s,h,r){var e=/MSIE/.test(navigator.userAgent)&&!window.opera;if(e)return"&mdash;";if(!s||s.length<=1)return'<div style="display: inline-block; position: relative; bottom: .5ex; padding-left: 1em; height: 1px; border-bottom: 2px solid '+h+';"></div>';var l,k,f,o,n,g=0,q=0,p=[];for(l=0;l<=s.length;l++)g+=s[l%s.length];if(n=Math.floor(r/(g-s[0])),n>1){for(l=0;l<s.length;l++)p[l]=s[l]/r;q=p.length}else{for(n=1,l=0;l<s.length;l++)p[l]=s[l]/g;q=p.length+1}var m="";for(k=0;n>k;k++)for(l=0;q>l;l+=2)f=p[l%p.length],o=l<s.length?p[(l+1)%p.length]:0,m+='<div style="display: inline-block; position: relative; bottom: .5ex; margin-right: '+o+"em; padding-left: "+f+"em; height: 1px; border-bottom: 2px solid "+h+';"></div>';return m},c}(),Dygraph.Plugins.RangeSelector=function(){var a=function(){this.isIE_=/MSIE/.test(navigator.userAgent)&&!window.opera,this.hasTouchInterface_="undefined"!=typeof TouchEvent,this.isMobileDevice_=/mobile|android/gi.test(navigator.appVersion),this.interfaceCreated_=!1};return a.prototype.toString=function(){return"RangeSelector Plugin"},a.prototype.activate=function(b){return this.dygraph_=b,this.isUsingExcanvas_=b.isUsingExcanvas_,this.getOption_("showRangeSelector")&&this.createInterface_(),{layout:this.reserveSpace_,predraw:this.renderStaticLayer_,didDrawChart:this.renderInteractiveLayer_}},a.prototype.destroy=function(){this.bgcanvas_=null,this.fgcanvas_=null,this.leftZoomHandle_=null,this.rightZoomHandle_=null,this.iePanOverlay_=null},a.prototype.getOption_=function(b){return this.dygraph_.getOption(b)},a.prototype.setDefaultOption_=function(b,c){return this.dygraph_.attrs_[b]=c},a.prototype.createInterface_=function(){this.createCanvases_(),this.isUsingExcanvas_&&this.createIEPanOverlay_(),this.createZoomHandles_(),this.initInteraction_(),this.getOption_("animatedZooms")&&(this.dygraph_.warn("Animated zooms and range selector are not compatible; disabling animatedZooms."),this.dygraph_.updateOptions({animatedZooms:!1},!0)),this.interfaceCreated_=!0,this.addToGraph_()},a.prototype.addToGraph_=function(){var b=this.graphDiv_=this.dygraph_.graphDiv;b.appendChild(this.bgcanvas_),b.appendChild(this.fgcanvas_),b.appendChild(this.leftZoomHandle_),b.appendChild(this.rightZoomHandle_)},a.prototype.removeFromGraph_=function(){var b=this.graphDiv_;b.removeChild(this.bgcanvas_),b.removeChild(this.fgcanvas_),b.removeChild(this.leftZoomHandle_),b.removeChild(this.rightZoomHandle_),this.graphDiv_=null},a.prototype.reserveSpace_=function(b){this.getOption_("showRangeSelector")&&b.reserveSpaceBottom(this.getOption_("rangeSelectorHeight")+4)},a.prototype.renderStaticLayer_=function(){this.updateVisibility_()&&(this.resize_(),this.drawStaticLayer_())},a.prototype.renderInteractiveLayer_=function(){this.updateVisibility_()&&!this.isChangingRange_&&(this.placeZoomHandles_(),this.drawInteractiveLayer_())},a.prototype.updateVisibility_=function(){var b=this.getOption_("showRangeSelector");if(b)this.interfaceCreated_?this.graphDiv_&&this.graphDiv_.parentNode||this.addToGraph_():this.createInterface_();else if(this.graphDiv_){this.removeFromGraph_();var c=this.dygraph_;setTimeout(function(){c.width_=0,c.resize()},1)}return b},a.prototype.resize_=function(){function d(e,f){e.style.top=f.y+"px",e.style.left=f.x+"px",e.width=f.w,e.height=f.h,e.style.width=e.width+"px",e.style.height=e.height+"px"}var c=this.dygraph_.layout_.getPlotArea(),b=0;this.getOption_("drawXAxis")&&(b=this.getOption_("xAxisHeight")||this.getOption_("axisLabelFontSize")+2*this.getOption_("axisTickSize")),this.canvasRect_={x:c.x,y:c.y+c.h+b+4,w:c.w,h:this.getOption_("rangeSelectorHeight")},d(this.bgcanvas_,this.canvasRect_),d(this.fgcanvas_,this.canvasRect_)},a.prototype.createCanvases_=function(){this.bgcanvas_=Dygraph.createCanvas(),this.bgcanvas_.className="dygraph-rangesel-bgcanvas",this.bgcanvas_.style.position="absolute",this.bgcanvas_.style.zIndex=9,this.bgcanvas_ctx_=Dygraph.getContext(this.bgcanvas_),this.fgcanvas_=Dygraph.createCanvas(),this.fgcanvas_.className="dygraph-rangesel-fgcanvas",this.fgcanvas_.style.position="absolute",this.fgcanvas_.style.zIndex=9,this.fgcanvas_.style.cursor="default",this.fgcanvas_ctx_=Dygraph.getContext(this.fgcanvas_)
},a.prototype.createIEPanOverlay_=function(){this.iePanOverlay_=document.createElement("div"),this.iePanOverlay_.style.position="absolute",this.iePanOverlay_.style.backgroundColor="white",this.iePanOverlay_.style.filter="alpha(opacity=0)",this.iePanOverlay_.style.display="none",this.iePanOverlay_.style.cursor="move",this.fgcanvas_.appendChild(this.iePanOverlay_)},a.prototype.createZoomHandles_=function(){var b=new Image;b.className="dygraph-rangesel-zoomhandle",b.style.position="absolute",b.style.zIndex=10,b.style.visibility="hidden",b.style.cursor="col-resize",/MSIE 7/.test(navigator.userAgent)?(b.width=7,b.height=14,b.style.backgroundColor="white",b.style.border="1px solid #333333"):(b.width=9,b.height=16,b.src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAkAAAAQCAYAAADESFVDAAAAAXNSR0IArs4c6QAAAAZiS0dEANAAzwDP4Z7KegAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAAd0SU1FB9sHGw0cMqdt1UwAAAAZdEVYdENvbW1lbnQAQ3JlYXRlZCB3aXRoIEdJTVBXgQ4XAAAAaElEQVQoz+3SsRFAQBCF4Z9WJM8KCDVwownl6YXsTmCUsyKGkZzcl7zkz3YLkypgAnreFmDEpHkIwVOMfpdi9CEEN2nGpFdwD03yEqDtOgCaun7sqSTDH32I1pQA2Pb9sZecAxc5r3IAb21d6878xsAAAAAASUVORK5CYII="),this.isMobileDevice_&&(b.width*=2,b.height*=2),this.leftZoomHandle_=b,this.rightZoomHandle_=b.cloneNode(!1)},a.prototype.initInteraction_=function(){var p,f,r,j,w,h,x,t,q,c,l,e,n,m,o=this,i=this.isIE_?document:window,u=0,v=null,s=!1,d=!1,g=!this.isMobileDevice_&&!this.isUsingExcanvas_,k=new Dygraph.IFrameTarp;p=function(C){var B=o.dygraph_.xAxisExtremes(),z=(B[1]-B[0])/o.canvasRect_.w,A=B[0]+(C.leftHandlePos-o.canvasRect_.x)*z,y=B[0]+(C.rightHandlePos-o.canvasRect_.x)*z;return[A,y]},f=function(y){return Dygraph.cancelEvent(y),s=!0,u=y.clientX,v=y.target?y.target:y.srcElement,("mousedown"===y.type||"dragstart"===y.type)&&(Dygraph.addEvent(i,"mousemove",r),Dygraph.addEvent(i,"mouseup",j)),o.fgcanvas_.style.cursor="col-resize",k.cover(),!0},r=function(C){if(!s)return!1;Dygraph.cancelEvent(C);var z=C.clientX-u;if(Math.abs(z)<4)return!0;u=C.clientX;var y,B=o.getZoomHandleStatus_();v==o.leftZoomHandle_?(y=B.leftHandlePos+z,y=Math.min(y,B.rightHandlePos-v.width-3),y=Math.max(y,o.canvasRect_.x)):(y=B.rightHandlePos+z,y=Math.min(y,o.canvasRect_.x+o.canvasRect_.w),y=Math.max(y,B.leftHandlePos+v.width+3));var A=v.width/2;return v.style.left=y-A+"px",o.drawInteractiveLayer_(),g&&w(),!0},j=function(){return s?(s=!1,k.uncover(),Dygraph.removeEvent(i,"mousemove",r),Dygraph.removeEvent(i,"mouseup",j),o.fgcanvas_.style.cursor="default",g||w(),!0):!1},w=function(){try{var z=o.getZoomHandleStatus_();if(o.isChangingRange_=!0,z.isZoomed){var y=p(z);o.dygraph_.doZoomXDates_(y[0],y[1])}else o.dygraph_.resetZoom()}finally{o.isChangingRange_=!1}},h=function(A){if(o.isUsingExcanvas_)return A.srcElement==o.iePanOverlay_;var z=o.leftZoomHandle_.getBoundingClientRect(),y=z.left+z.width/2;z=o.rightZoomHandle_.getBoundingClientRect();var B=z.left+z.width/2;return A.clientX>y&&A.clientX<B},x=function(y){return!d&&h(y)&&o.getZoomHandleStatus_().isZoomed?(Dygraph.cancelEvent(y),d=!0,u=y.clientX,"mousedown"===y.type&&(Dygraph.addEvent(i,"mousemove",t),Dygraph.addEvent(i,"mouseup",q)),!0):!1},t=function(C){if(!d)return!1;Dygraph.cancelEvent(C);var z=C.clientX-u;if(Math.abs(z)<4)return!0;u=C.clientX;var B=o.getZoomHandleStatus_(),E=B.leftHandlePos,y=B.rightHandlePos,D=y-E;E+z<=o.canvasRect_.x?(E=o.canvasRect_.x,y=E+D):y+z>=o.canvasRect_.x+o.canvasRect_.w?(y=o.canvasRect_.x+o.canvasRect_.w,E=y-D):(E+=z,y+=z);var A=o.leftZoomHandle_.width/2;return o.leftZoomHandle_.style.left=E-A+"px",o.rightZoomHandle_.style.left=y-A+"px",o.drawInteractiveLayer_(),g&&c(),!0},q=function(){return d?(d=!1,Dygraph.removeEvent(i,"mousemove",t),Dygraph.removeEvent(i,"mouseup",q),g||c(),!0):!1},c=function(){try{o.isChangingRange_=!0,o.dygraph_.dateWindow_=p(o.getZoomHandleStatus_()),o.dygraph_.drawGraph_(!1)}finally{o.isChangingRange_=!1}},l=function(y){if(!s&&!d){var z=h(y)?"move":"default";z!=o.fgcanvas_.style.cursor&&(o.fgcanvas_.style.cursor=z)}},e=function(y){"touchstart"==y.type&&1==y.targetTouches.length?f(y.targetTouches[0])&&Dygraph.cancelEvent(y):"touchmove"==y.type&&1==y.targetTouches.length?r(y.targetTouches[0])&&Dygraph.cancelEvent(y):j(y)},n=function(y){"touchstart"==y.type&&1==y.targetTouches.length?x(y.targetTouches[0])&&Dygraph.cancelEvent(y):"touchmove"==y.type&&1==y.targetTouches.length?t(y.targetTouches[0])&&Dygraph.cancelEvent(y):q(y)},m=function(B,A){for(var z=["touchstart","touchend","touchmove","touchcancel"],y=0;y<z.length;y++)o.dygraph_.addAndTrackEvent(B,z[y],A)},this.setDefaultOption_("interactionModel",Dygraph.Interaction.dragIsPanInteractionModel),this.setDefaultOption_("panEdgeFraction",1e-4);var b=window.opera?"mousedown":"dragstart";this.dygraph_.addAndTrackEvent(this.leftZoomHandle_,b,f),this.dygraph_.addAndTrackEvent(this.rightZoomHandle_,b,f),this.isUsingExcanvas_?this.dygraph_.addAndTrackEvent(this.iePanOverlay_,"mousedown",x):(this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousedown",x),this.dygraph_.addAndTrackEvent(this.fgcanvas_,"mousemove",l)),this.hasTouchInterface_&&(m(this.leftZoomHandle_,e),m(this.rightZoomHandle_,e),m(this.fgcanvas_,n))},a.prototype.drawStaticLayer_=function(){var b=this.bgcanvas_ctx_;b.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);try{this.drawMiniPlot_()}catch(c){Dygraph.warn(c)}var d=.5;this.bgcanvas_ctx_.lineWidth=1,b.strokeStyle="gray",b.beginPath(),b.moveTo(d,d),b.lineTo(d,this.canvasRect_.h-d),b.lineTo(this.canvasRect_.w-d,this.canvasRect_.h-d),b.lineTo(this.canvasRect_.w-d,d),b.stroke()},a.prototype.drawMiniPlot_=function(){var f=this.getOption_("rangeSelectorPlotFillColor"),r=this.getOption_("rangeSelectorPlotStrokeColor");if(f||r){var j=this.getOption_("stepPlot"),v=this.computeCombinedSeriesAndLimits_(),q=v.yMax-v.yMin,p=this.bgcanvas_ctx_,n=.5,e=this.dygraph_.xAxisExtremes(),o=Math.max(e[1]-e[0],1e-30),g=(this.canvasRect_.w-n)/o,u=(this.canvasRect_.h-n)/q,t=this.canvasRect_.w-n,b=this.canvasRect_.h-n,d=null,c=null;p.beginPath(),p.moveTo(n,b);for(var s=0;s<v.data.length;s++){var h=v.data[s],l=null!==h[0]?(h[0]-e[0])*g:0/0,k=null!==h[1]?b-(h[1]-v.yMin)*u:0/0;isFinite(l)&&isFinite(k)?(null===d?p.lineTo(l,b):j&&p.lineTo(l,c),p.lineTo(l,k),d=l,c=k):(null!==d&&(j?(p.lineTo(l,c),p.lineTo(l,b)):p.lineTo(d,b)),d=c=null)}if(p.lineTo(t,b),p.closePath(),f){var m=this.bgcanvas_ctx_.createLinearGradient(0,0,0,b);m.addColorStop(0,"white"),m.addColorStop(1,f),this.bgcanvas_ctx_.fillStyle=m,p.fill()}r&&(this.bgcanvas_ctx_.strokeStyle=r,this.bgcanvas_ctx_.lineWidth=1.5,p.stroke())}},a.prototype.computeCombinedSeriesAndLimits_=function(){var d,h,m,t,s,r,e,g,v=this.dygraph_.rawData_,u=this.getOption_("logscale"),q=[];for(t=0;t<v.length;t++)if(v[t].length>1&&null!==v[t][1]){if(m="number"!=typeof v[t][1])for(d=[],h=[],r=0;r<v[t][1].length;r++)d.push(0),h.push(0);break}for(t=0;t<v.length;t++){var l=v[t];if(e=l[0],m)for(r=0;r<d.length;r++)d[r]=h[r]=0;else d=h=0;for(s=1;s<l.length;s++)if(this.dygraph_.visibility()[s-1]){var n;if(m)for(r=0;r<d.length;r++)n=l[s][r],null===n||isNaN(n)||(d[r]+=n,h[r]++);else{if(n=l[s],null===n||isNaN(n))continue;d+=n,h++}}if(m){for(r=0;r<d.length;r++)d[r]/=h[r];g=d.slice(0)}else g=d/h;q.push([e,g])}if(q=this.dygraph_.rollingAverage(q,this.dygraph_.rollPeriod_),"number"!=typeof q[0][1])for(t=0;t<q.length;t++)g=q[t][1],q[t][1]=g[0];var b=Number.MAX_VALUE,c=-Number.MAX_VALUE;for(t=0;t<q.length;t++)g=q[t][1],null!==g&&isFinite(g)&&(!u||g>0)&&(b=Math.min(b,g),c=Math.max(c,g));var o=.25;if(u)for(c=Dygraph.log10(c),c+=c*o,b=Dygraph.log10(b),t=0;t<q.length;t++)q[t][1]=Dygraph.log10(q[t][1]);else{var f,p=c-b;f=p<=Number.MIN_VALUE?c*o:p*o,c+=f,b-=f}return{data:q,yMin:b,yMax:c}},a.prototype.placeZoomHandles_=function(){var h=this.dygraph_.xAxisExtremes(),b=this.dygraph_.xAxisRange(),c=h[1]-h[0],j=Math.max(0,(b[0]-h[0])/c),f=Math.max(0,(h[1]-b[1])/c),i=this.canvasRect_.x+this.canvasRect_.w*j,e=this.canvasRect_.x+this.canvasRect_.w*(1-f),d=Math.max(this.canvasRect_.y,this.canvasRect_.y+(this.canvasRect_.h-this.leftZoomHandle_.height)/2),g=this.leftZoomHandle_.width/2;this.leftZoomHandle_.style.left=i-g+"px",this.leftZoomHandle_.style.top=d+"px",this.rightZoomHandle_.style.left=e-g+"px",this.rightZoomHandle_.style.top=this.leftZoomHandle_.style.top,this.leftZoomHandle_.style.visibility="visible",this.rightZoomHandle_.style.visibility="visible"},a.prototype.drawInteractiveLayer_=function(){var c=this.fgcanvas_ctx_;c.clearRect(0,0,this.canvasRect_.w,this.canvasRect_.h);var f=1,e=this.canvasRect_.w-f,b=this.canvasRect_.h-f,h=this.getZoomHandleStatus_();if(c.strokeStyle="black",h.isZoomed){var g=Math.max(f,h.leftHandlePos-this.canvasRect_.x),d=Math.min(e,h.rightHandlePos-this.canvasRect_.x);c.fillStyle="rgba(240, 240, 240, 0.6)",c.fillRect(0,0,g,this.canvasRect_.h),c.fillRect(d,0,this.canvasRect_.w-d,this.canvasRect_.h),c.beginPath(),c.moveTo(f,f),c.lineTo(g,f),c.lineTo(g,b),c.lineTo(d,b),c.lineTo(d,f),c.lineTo(e,f),c.stroke(),this.isUsingExcanvas_&&(this.iePanOverlay_.style.width=d-g+"px",this.iePanOverlay_.style.left=g+"px",this.iePanOverlay_.style.height=b+"px",this.iePanOverlay_.style.display="inline")}else c.beginPath(),c.moveTo(f,f),c.lineTo(f,b),c.lineTo(e,b),c.lineTo(e,f),c.stroke(),this.iePanOverlay_&&(this.iePanOverlay_.style.display="none")},a.prototype.getZoomHandleStatus_=function(){var c=this.leftZoomHandle_.width/2,d=parseFloat(this.leftZoomHandle_.style.left)+c,b=parseFloat(this.rightZoomHandle_.style.left)+c;return{leftHandlePos:d,rightHandlePos:b,isZoomed:d-1>this.canvasRect_.x||b+1<this.canvasRect_.x+this.canvasRect_.w}},a}(),Dygraph.PLUGINS.push(Dygraph.Plugins.Legend,Dygraph.Plugins.Axes,Dygraph.Plugins.RangeSelector,Dygraph.Plugins.ChartLabels,Dygraph.Plugins.Annotations,Dygraph.Plugins.Grid),jQuery(document).ready(function($){function KSslideshow(slideshow,next){var wrap=slideshow.parents(".slideshow-wrap"),inner=slideshow.parents(".slideshow-inner"),current=slideshow.find("li.current"),nav=slideshow.parents(".slideshow-wrap").find(".slideshow-buttons li"),sstop=nav.filter(".slideshow-stop");null==next?(next=current.next(),next.length<1&&(next=slideshow.find("li:first")),wrap.removeClass("paused"),sstop.find("a").html("Stop")):(wrap.addClass("paused"),sstop.find("a").html("Play"));inner.scrollTo(next,1e3);current.removeClass("current"),next.addClass("current"),nav.removeClass("current").eq(next.index()).addClass("current"),slideshow.delay(3e3).animate({alpha:1},function(){0==wrap.hasClass("paused")&&KSslideshow(slideshow,null)})}$("ul.menu").each(function(){$(this).find("li").has("ul").addClass("has-menu").append('<span class="arrow">&nbsp;</span>')}),$("ul.menu li").hover(function(){$(this).find("ul:first").stop(!0,!0).fadeIn("fast"),$(this).addClass("hover")},function(){$(this).find("ul").stop(!0,!0).fadeOut("slow"),$(this).removeClass("hover")}),$.localScroll({filter:":not(.tabs>li>a)",lazy:!0,hash:!0}),$("ul.slideshow").wrap('<div class="slideshow-wrap"><div class="slideshow-inner"></div></div>').each(function(){var wrap=$(this).parents(".slideshow-wrap"),inner=$(this).parents(".slideshow-inner"),swidth=$(this).attr("width"),sheight=$(this).attr("height");void 0!=swidth&&void 0!=sheight&&(wrap.width(swidth),inner.height(sheight)),$(this).width("999em").attr("width","").attr("height",""),$(this).find("li:first").addClass("current"),$(this).delay(2e3).animate({alpha:1},function(){KSslideshow($(this),null)});var items=$(this).find("li");wrap.append('<ul class="slideshow-buttons"></ul>'),items.each(function(index){wrap.find(".slideshow-buttons").append('<li><a href="#slideshow-'+index+'" rel="'+index+'">'+(index+1)+"</a></li>")}),wrap.find(".slideshow-buttons").append('<li class="slideshow-stop"><a href="#slideshow-stop">Stop</a></li>'),wrap.find(".slideshow-stop a").click(function(e){e.preventDefault(),next=wrap.hasClass("paused")?null:wrap.find(".slideshow li.current");var slideshow=$(this).parents(".slideshow-wrap").find("ul.slideshow");KSslideshow(slideshow,next)}),$(".slideshow-buttons li:first").addClass("current"),wrap.find(".slideshow-buttons li").not(".slideshow-stop").find("a").click(function(e){e.preventDefault();var slideshow=wrap.find("ul.slideshow"),link=$(e.currentTarget).attr("rel"),next=slideshow.find("li").eq(link);KSslideshow(slideshow,next)})}),$("input[placeholder], textarea[placeholder]").placeholder(),$("a.video-placeholder").each(function(){$(this).append('<span class="icon x-large white" data-icon="&nbsp;"></span>')}),$(".calendar").each(function(){$(this).attr("data-month")&&(cMonth=$(this).attr("data-month")),$(this).attr("data-year")&&(cYear=$(this).attr("data-year")),$(this).calendarWidget({month:cMonth,year:cYear})}),$(".rte").each(function(index){var newID=$(this).attr("id")+index;$(this).hide(),$(this).wrap('<div id="'+newID+'" class="rte-wrap editmode"></div>');var wrap=$(this).parents(".rte-wrap"),rhtml=wrap.find("textarea.rte"),toolbar='<div class="rte-toolbar clearfix">			<ul>			<li><select class="inline">			<option value="&lt;p&gt;">P</option>			<option value="&lt;h1&gt;">H1</option>			<option value="&lt;h2&gt;">H2</option>			<option value="&lt;h3&gt;">H3</option>			<option value="&lt;h4&gt;">H4</option>			<option value="&lt;h5&gt;">H5</option>			<option value="&lt;h6&gt;">H6</option>			<option value="&lt;blockquote&gt;">blockquote</option>			<option value="&lt;pre&gt;">pre</option>			</select></li>			<li><a href="#" title="Bold" class="tooltip rte-bold" data-command="bold"></a></li>			<li><a href="#" title="Italic" class="tooltip rte-italic" data-command="italic"></a></li>			<li><a href="#" title="Unordered List" class="tooltip rte-ul" data-command="insertunorderedlist"></a></li>			<li><a href="#" title="Numbered List" class="tooltip rte-ol" data-command="insertorderedlist"></a></li>			<li><a href="#" title="Image" class="tooltip rte-img" data-command="insertimage" data-prompt="Image Url?"></a></li>			<li><a href="#" title="Link" class="tooltip rte-link" data-command="createLink" data-prompt="Url?"></a></li>			<li><a href="#" title="unLink" class="tooltip rte-unlink" data-command="unlink"></a></li>			<li><a href="#" title="Align Left" class="tooltip rte-justifyleft" data-command="justifyleft"></a></li>			<li><a href="#" title="Align Center" class="tooltip rte-justifycenter" data-command="justifycenter"></a></li>			<li><a href="#" title="Align Right" class="tooltip rte-justifyright" data-command="justifyright"></a></li>			<li><a href="#" title="Subscript" class="tooltip rte-sub" data-command="subscript" data-value="&lt;sup&gt;"></a></li>			<li><a href="#" title="Superscript" class="tooltip rte-sup" data-command="superscript" data-value="&lt;sup&gt;"></a></li>			<li class="html-toggle"><a href="">HTML</a></li>			</ul></div>',editor='<div class="rte-editor" style="height:'+rhtml.innerHeight()+'px" contenteditable="true"></div>';wrap.prepend(toolbar+editor),wrap.find(".rte-editor").html(rhtml.val())}),$(document).on("click",".rte-wrap .rte-toolbar a",function(e){e.preventDefault();var rte=$(this).parents(".rte-wrap"),editor=(rte.find(".rte-toolbar"),rte.find(".rte-editor")),rhtml=rte.find("textarea.rte"),bool=!1,value=$(this).attr("data-value"),command=$(this).attr("data-command"),rprompt=$(this).attr("data-prompt");rprompt&&(value=prompt(rprompt)),$(this).parent().hasClass("html-toggle")&&(rhtml.is(":hidden")?(rhtml.val(editor.html()),rte.removeClass("editmode")):(editor.html(rhtml.val()),rte.addClass("editmode")),editor.toggle(),rhtml.toggle()),document.execCommand(command,bool,value)}),$(document).on("change",".rte-wrap .rte-toolbar select",function(){var bool=!1,value=$(this).val();document.execCommand("formatblock",bool,value)}),$(".tab-content").addClass("clearfix").not(":first").hide(),$("ul.tabs").each(function(){var current=$(this).find("li.current");current.length<1&&$(this).find("li:first").addClass("current"),current=$(this).find("li.current span").attr("alt"),$(current).show()}),$(document).on("click",'ul.tabs span[alt^="#"]',function(e){e.preventDefault();var tabs=$(this).parents("ul.tabs").find("li"),tab_next=$(this).attr("alt"),tab_current=tabs.filter(".current").find("span").attr("alt");return $(tab_current).hide(),tabs.removeClass("current"),$(this).parent().addClass("current"),$(tab_next).show(),!1}),$("img.style1, img.style2, img.style3").each(function(){$(this).wrap("<span>"),$(this).parent("span").attr("class","img-wrap "+$(this).attr("class")).css("background-image","url("+$(this).attr("src")+")").css("background-position","center center").css("background-repeat","no-repeat").css("height",$(this).height()).css("width",$(this).width()),$(this).attr("class","").hide()}),$("img.caption").each(function(){$(this).wrap('<div class="caption">'),$(this).parents("div.caption").attr("class","caption "+$(this).attr("class")).css("width",$(this).width()+"px"),$(this).attr("title")&&$(this).parents("div.caption").append("<span>"+$(this).attr("title")+"</span>")}),$(document).on("click",".notice a.close",function(e){e.preventDefault();var notice=$(this).parents(".notice");$(this).hide(),notice.fadeOut("slow")}),$(".tooltip, .tooltip-top, .tooltip-bottom, .tooltip-right, .tooltip-left").each(function(){var tpos="top",content=$(this).attr("title"),dataContent=$(this).attr("data-content"),keepAlive=!1,action="hover";$(this).hasClass("tooltip-top")&&(tpos="top"),$(this).hasClass("tooltip-right")&&(tpos="right"),$(this).hasClass("tooltip-bottom")&&(tpos="bottom"),$(this).hasClass("tooltip-left")&&(tpos="left"),$(".tooltip-content").removeClass("hide").wrap('<div class="hide"></div>'),dataContent&&(content=$(dataContent).html(),keepAlive=!0),"click"==$(this).attr("data-action")&&(action="click"),$(this).attr("title","").tipTip({defaultPosition:tpos,content:content,keepAlive:keepAlive,activation:action,delay:1e3})});var aAsc=[];$("table.sortable").each(function(){$(this).find("thead th").each(function(index){$(this).attr("rel",index)}),$(this).find("th,td").each(function(){$(this).attr("value",$(this).text())})}),$(document).on("click","table.sortable thead th",function(){$(this).parents("table.sortable").find("span.arrow").remove(),$(this).append('<span class="arrow"></span>');var nr=$(this).attr("rel");aAsc[nr]="asc"==aAsc[nr]?"desc":"asc","desc"==aAsc[nr]&&$(this).find("span.arrow").addClass("up");var rows=$(this).parents("table.sortable").find("tbody tr");rows.tsort("td:eq("+nr+")",{order:aAsc[nr],attr:"value"}),rows.removeClass("alt first last");var table=$(this).parents("table.sortable");table.find("tr:even").addClass("alt"),table.find("tr:first").addClass("first"),table.find("tr:last").addClass("last")}),$(".icon").each(function(){$(this).append('<span aria-hidden="true">'+$(this).attr("data-icon")+"</span>").css("display","inline-block")}),$("input[type=checkbox]").addClass("checkbox"),$("input[type=radio]").addClass("radio"),$("input[type=file]").addClass("file"),$("[disabled=disabled]").addClass("disabled"),$("table").find("tr:even").addClass("alt"),$("table").find("tr:first-child").addClass("first"),$("table").find("tr:last-child").addClass("last"),$("ul").find("li:first-child").addClass("first"),$("ul").find("li:last-child").addClass("last"),$("hr").before('<div class="clear">&nbsp;</div>')}),function($){function i(a,e,b){var d=e.hash.slice(1),f=document.getElementById(d)||document.getElementsByName(d)[0];if(f){a&&a.preventDefault();var h=$(b.target);if(!(b.lock&&h.is(":animated")||b.onBefore&&b.onBefore.call(b,a,f,h)===!1)){if(b.stop&&h.stop(!0),b.hash){var j=f.id==d?"id":"name",k=$("<a> </a>").attr(j,d).css({position:"absolute",top:$(window).scrollTop(),left:$(window).scrollLeft()});f[j]="",$("body").prepend(k),location=e.hash,k.remove(),f[j]=d}h.scrollTo(f,b).trigger("notify.serialScroll",[f])}}}var l=location.href.replace(/#.*/,""),g=$.localScroll=function(a){$("body").localScroll(a)};g.defaults={duration:1e3,axis:"y",event:"click",stop:!0,target:window,reset:!0},g.hash=function(a){if(location.hash){if(a=$.extend({},g.defaults,a),a.hash=!1,a.reset){var e=a.duration;delete a.duration,$(a.target).scrollTo(0,a),a.duration=e}i(0,location,a)}},$.fn.localScroll=function(b){function d(){return!(!this.href||!this.hash||this.href.replace(this.hash,"")!=l||b.filter&&!$(this).is(b.filter))}return b=$.extend({},g.defaults,b),b.lazy?this.bind(b.event,function(a){var e=$([a.target,a.target.parentNode]).filter(d)[0];e&&i(a,e,b)}):this.find("a,area").filter(d).bind(b.event,function(a){i(a,this,b)}).end().end()}}(jQuery),function(d){function p(a){return"object"==typeof a?a:{top:a,left:a}}var k=d.scrollTo=function(a,i,e){d(window).scrollTo(a,i,e)};k.defaults={axis:"xy",duration:parseFloat(d.fn.jquery)>=1.3?0:1},k.window=function(){return d(window)._scrollable()},d.fn._scrollable=function(){return this.map(function(){var a=this,i=!a.nodeName||-1!=d.inArray(a.nodeName.toLowerCase(),["iframe","#document","html","body"]);if(!i)return a;var e=(a.contentWindow||a).document||a.ownerDocument||a;return d.browser.safari||"BackCompat"==e.compatMode?e.body:e.documentElement})},d.fn.scrollTo=function(n,j,b){return"object"==typeof j&&(b=j,j=0),"function"==typeof b&&(b={onAfter:b}),"max"==n&&(n=9e9),b=d.extend({},k.defaults,b),j=j||b.speed||b.duration,b.queue=b.queue&&b.axis.length>1,b.queue&&(j/=2),b.offset=p(b.offset),b.over=p(b.over),this._scrollable().each(function(){function t(a){r.animate(g,j,b.easing,a&&function(){a.call(this,n,b)})}var s,q=this,r=d(q),f=n,g={},u=r.is("html,body");switch(typeof f){case"number":case"string":if(/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(f)){f=p(f);break}f=d(f,this);case"object":(f.is||f.style)&&(s=(f=d(f)).offset())}d.each(b.axis.split(""),function(a,i){var e="x"==i?"Left":"Top",h=e.toLowerCase(),c="scroll"+e,l=q[c],m=k.max(q,i);if(s)g[c]=s[h]+(u?0:l-r.offset()[h]),b.margin&&(g[c]-=parseInt(f.css("margin"+e))||0,g[c]-=parseInt(f.css("border"+e+"Width"))||0),g[c]+=b.offset[h]||0,b.over[h]&&(g[c]+=f["x"==i?"width":"height"]()*b.over[h]);else{var o=f[h];g[c]=o.slice&&"%"==o.slice(-1)?parseFloat(o)/100*m:o}/^\d+$/.test(g[c])&&(g[c]=g[c]<=0?0:Math.min(g[c],m)),!a&&b.queue&&(l!=g[c]&&t(b.onAfterFirst),delete g[c])}),t(b.onAfter)}).end()},k.max=function(a,i){var e="x"==i?"Width":"Height",h="scroll"+e;if(!d(a).is("html,body"))return a[h]-d(a)[e.toLowerCase()]();var c="client"+e,l=a.ownerDocument.documentElement,m=a.ownerDocument.body;return Math.max(l[h],m[h])-Math.min(l[c],m[c])}}(jQuery),function(b){function d(a){this.input=a,"password"==a.attr("type")&&this.handlePassword(),b(a[0].form).submit(function(){a.hasClass("placeholder")&&a[0].value==a.attr("placeholder")&&(a[0].value="")})}d.prototype={show:function(a){if(""===this.input[0].value||a&&this.valueIsPlaceholder()){if(this.isPassword)try{this.input[0].setAttribute("type","text")}catch(b){this.input.before(this.fakePassword.show()).hide()}this.input.addClass("placeholder"),this.input[0].value=this.input.attr("placeholder")}},hide:function(){if(this.valueIsPlaceholder()&&this.input.hasClass("placeholder")&&(this.input.removeClass("placeholder"),this.input[0].value="",this.isPassword)){try{this.input[0].setAttribute("type","password")}catch(a){}this.input.show(),this.input[0].focus()}},valueIsPlaceholder:function(){return this.input[0].value==this.input.attr("placeholder")},handlePassword:function(){var a=this.input;if(a.attr("realType","password"),this.isPassword=!0,b.browser.msie&&a[0].outerHTML){var c=b(a[0].outerHTML.replace(/type=(['"])?password\1/gi,"type=$1text$1"));this.fakePassword=c.val(a.attr("placeholder")).addClass("placeholder").focus(function(){a.trigger("focus"),b(this).hide()}),b(a[0].form).submit(function(){c.remove(),a.show()})}}};var e=!!("placeholder"in document.createElement("input"));b.fn.placeholder=function(){return e?this:this.each(function(){var a=b(this),c=new d(a);c.show(!0),a.focus(function(){c.hide()}),a.blur(function(){c.show(!1)}),b.browser.msie&&(b(window).load(function(){a.val()&&a.removeClass("placeholder"),c.show(!0)}),a.focus(function(){if(""==this.value){var a=this.createTextRange();a.collapse(!0),a.moveStart("character",0),a.select()}}))})}}(jQuery),function($){$.fn.tipTip=function(options){var defaults={activation:"hover",keepAlive:!1,maxWidth:"200px",edgeOffset:3,defaultPosition:"bottom",delay:400,fadeIn:200,fadeOut:200,attribute:"title",content:!1,enter:function(){},exit:function(){}},opts=$.extend(defaults,options);if($("#tiptip_holder").length<=0){var tiptip_holder=$('<div id="tiptip_holder" style="max-width:'+opts.maxWidth+';"></div>'),tiptip_content=$('<div id="tiptip_content"></div>'),tiptip_arrow=$('<div id="tiptip_arrow"></div>');$("body").append(tiptip_holder.html(tiptip_content).prepend(tiptip_arrow.html('<div id="tiptip_arrow_inner"></div>')))}else var tiptip_holder=$("#tiptip_holder"),tiptip_content=$("#tiptip_content"),tiptip_arrow=$("#tiptip_arrow");return this.each(function(){function active_tiptip(){opts.enter.call(this),tiptip_content.html(org_title),tiptip_holder.hide().removeAttr("class").css("margin","0"),tiptip_arrow.removeAttr("style");var top=parseInt(org_elem.offset().top),left=parseInt(org_elem.offset().left),org_width=parseInt(org_elem.outerWidth()),org_height=parseInt(org_elem.outerHeight()),tip_w=tiptip_holder.outerWidth(),tip_h=tiptip_holder.outerHeight(),w_compare=Math.round((org_width-tip_w)/2),h_compare=Math.round((org_height-tip_h)/2),marg_left=Math.round(left+w_compare),marg_top=Math.round(top+org_height+opts.edgeOffset),t_class="",arrow_top="",arrow_left=Math.round(tip_w-12)/2;"bottom"==opts.defaultPosition?t_class="_bottom":"top"==opts.defaultPosition?t_class="_top":"left"==opts.defaultPosition?t_class="_left":"right"==opts.defaultPosition&&(t_class="_right");var right_compare=w_compare+left<parseInt($(window).scrollLeft()),left_compare=tip_w+left>parseInt($(window).width());right_compare&&0>w_compare||"_right"==t_class&&!left_compare||"_left"==t_class&&left<tip_w+opts.edgeOffset+5?(t_class="_right",arrow_top=Math.round(tip_h-13)/2,arrow_left=-12,marg_left=Math.round(left+org_width+opts.edgeOffset),marg_top=Math.round(top+h_compare)):(left_compare&&0>w_compare||"_left"==t_class&&!right_compare)&&(t_class="_left",arrow_top=Math.round(tip_h-13)/2,arrow_left=Math.round(tip_w),marg_left=Math.round(left-(tip_w+opts.edgeOffset+5)),marg_top=Math.round(top+h_compare));var top_compare=top+org_height+opts.edgeOffset+tip_h+8>parseInt($(window).height()+$(window).scrollTop()),bottom_compare=top+org_height-(opts.edgeOffset+tip_h+8)<0;top_compare||"_bottom"==t_class&&top_compare||"_top"==t_class&&!bottom_compare?("_top"==t_class||"_bottom"==t_class?t_class="_top":t_class+="_top",arrow_top=tip_h,marg_top=Math.round(top-(tip_h+5+opts.edgeOffset))):(bottom_compare|("_top"==t_class&&bottom_compare)||"_bottom"==t_class&&!top_compare)&&("_top"==t_class||"_bottom"==t_class?t_class="_bottom":t_class+="_bottom",arrow_top=-12,marg_top=Math.round(top+org_height+opts.edgeOffset)),"_right_top"==t_class||"_left_top"==t_class?marg_top+=5:("_right_bottom"==t_class||"_left_bottom"==t_class)&&(marg_top-=5),("_left_top"==t_class||"_left_bottom"==t_class)&&(marg_left+=5),tiptip_arrow.css({"margin-left":arrow_left+"px","margin-top":arrow_top+"px"}),tiptip_holder.css({"margin-left":marg_left+"px","margin-top":marg_top+"px"}).attr("class","tip"+t_class),timeout&&clearTimeout(timeout),timeout=setTimeout(function(){tiptip_holder.stop(!0,!0).fadeIn(opts.fadeIn)},opts.delay)}function deactive_tiptip(){opts.exit.call(this),timeout&&clearTimeout(timeout),tiptip_holder.fadeOut(opts.fadeOut)}var org_elem=$(this);if(opts.content)var org_title=opts.content;else var org_title=org_elem.attr(opts.attribute);if(""!=org_title){opts.content||org_elem.removeAttr(opts.attribute);var timeout=!1;"hover"==opts.activation?(org_elem.hover(function(){active_tiptip()},function(){opts.keepAlive||deactive_tiptip()}),opts.keepAlive&&tiptip_holder.hover(function(){},function(){deactive_tiptip()})):"focus"==opts.activation?org_elem.focus(function(){active_tiptip()}).blur(function(){deactive_tiptip()}):"click"==opts.activation&&(org_elem.click(function(){return active_tiptip(),!1}).hover(function(){},function(){opts.keepAlive||deactive_tiptip()}),opts.keepAlive&&tiptip_holder.hover(function(){},function(){deactive_tiptip()}))}})}}(jQuery),function(e){function d(h){return h&&h.toLowerCase?h.toLowerCase():h}function c(j,m){for(var k=0,h=j.length;h>k;k++)if(j[k]==m)return!a;return a}var a=!1,g=null,f=parseFloat,b=/(\d+\.?\d*)$/g;e.tinysort={id:"TinySort",version:"1.2.18",copyright:"Copyright (c) 2008-2012 Ron Valstar",uri:"http://tinysort.sjeiti.com/",licenced:{MIT:"http://www.opensource.org/licenses/mit-license.php",GPL:"http://www.gnu.org/licenses/gpl.html"},defaults:{order:"asc",attr:g,data:g,useVal:a,place:"start",returns:a,cases:a,forceStrings:a,sortFunction:g}},e.fn.extend({tinysort:function(m,h){m&&"string"!=typeof m&&(h=m,m=g);var s,n=e.extend({},e.tinysort.defaults,h),B=this,x=e(this).length,C={},p=!(!m||""==m),q=!(n.attr===g||""==n.attr),w=n.data!==g,j=p&&":"==m[0],k=j?B.filter(m):B,r=n.sortFunction,v="asc"==n.order?1:-1,l=[];r||(r="rand"==n.order?function(){return Math.random()<.5?1:-1}:function(F,E){var i=n.cases?F.s:d(F.s),K=n.cases?E.s:d(E.s);if(!n.forceStrings){var H=i.match(b),G=K.match(b);if(H&&G){var J=i.substr(0,i.length-H[0].length),I=K.substr(0,K.length-G[0].length);J==I&&(i=f(H[0]),K=f(G[0]))}}return v*(K>i?-1:i>K?1:0)}),B.each(function(G,H){var I=e(H),E=p?j?k.filter(H):I.find(m):I,J=w?E.data(n.data):q?E.attr(n.attr):n.useVal?E.val():E.text(),F=I.parent();C[F]||(C[F]={s:[],n:[]}),E.length>0?C[F].s.push({s:J,e:I,n:G}):C[F].n.push({e:I,n:G})});for(s in C)C[s].s.sort(r);for(s in C){var z,y=C[s],A=[],D=x,u=[0,0];switch(n.place){case"first":e.each(y.s,function(E,F){D=Math.min(D,F.n)});break;case"org":e.each(y.s,function(E,F){A.push(F.n)});break;case"end":D=y.n.length;break;default:D=0}for(z=0;x>z;z++){var o=c(A,z)?!a:z>=D&&z<D+y.s.length,t=(o?y.s:y.n)[u[o?0:1]].e;t.parent().append(t),(o||!n.returns)&&l.push(t.get(0)),u[o?0:1]++}}return B.pushStack(l)}}),e.fn.TinySort=e.fn.Tinysort=e.fn.tsort=e.fn.tinysort}(jQuery),function(g){function f(a,b){var c=[31,28,31,30,31,30,31,31,30,31,30,31];return 1!=a||0!=b%4||0==b%100&&0!=b%400?c[a]:29}g.fn.calendarWidget=function(a){var b=new Date,c=b.getMonth(),b=b.getYear()+1900,c={month:c,year:b};g.extend(c,a);var e="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(",");for(month=b=parseInt(c.month),year=parseInt(c.year),a=""+('<h4 id="current-month">'+"January,February,March,April,May,June,July,August,September,October,November,December".split(",")[month]+" "+year+"</h4>"),a=a+('<table class="calendar-month " id="calendar-month'+b+' " cellspacing="0">')+"<tr>",d=0;7>d;d++)a+='<th class="weekday">'+e[d]+"</th>";for(a+="</tr>",f(month,year),b=new Date(year,month,1),c=b.getDay(),e=f(month,year),b=new Date(year,month,1),c=b.getDay(),e=0==month?11:month-1,e=f(e,11==e?year-1:year),c=0==c&&b?7:c,j=b=0;42>j;j++)c>j?a+='<td class="other-month"><span class="day">'+(e-c+j+1)+"</span></td>":j>=c+f(month,year)?(b+=1,a+='<td class="other-month"><span class="day">'+b+"</span></td>"):a+='<td class="current-month day'+(j-c+1)+'"><span class="day">'+(j-c+1)+"</span></td>",6==j%7&&(a+="</tr>");return this.html(a+"</table>"),this}}(jQuery),Date.ext={},Date.ext.util={},Date.ext.util.xPad=function(x,pad,r){for("undefined"==typeof r&&(r=10);parseInt(x,10)<r&&r>1;r/=10)x=pad.toString()+x;return x.toString()},Date.prototype.locale="ru-RU",document.getElementsByTagName("html")&&document.getElementsByTagName("html")[0].lang&&(Date.prototype.locale=document.getElementsByTagName("html")[0].lang),Date.ext.locales={},Date.ext.locales.en={a:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],A:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],b:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],B:["January","February","March","April","May","June","July","August","September","October","November","December"],c:"%a %d %b %Y %T %Z",p:["AM","PM"],P:["am","pm"],x:"%d/%m/%y",X:"%T"},Date.ext.locales["en-US"]=Date.ext.locales.en,Date.ext.locales["en-US"].c="%a %d %b %Y %r %Z",Date.ext.locales["en-US"].x="%D",Date.ext.locales["en-US"].X="%r",Date.ext.locales["en-GB"]=Date.ext.locales.en,Date.ext.locales["en-AU"]=Date.ext.locales["en-GB"],Date.ext.formats={a:function(d){return Date.ext.locales[d.locale].a[d.getDay()]
},A:function(d){return Date.ext.locales[d.locale].A[d.getDay()]},b:function(d){return Date.ext.locales[d.locale].b[d.getMonth()]},B:function(d){return Date.ext.locales[d.locale].B[d.getMonth()]},c:"toLocaleString",C:function(d){return Date.ext.util.xPad(parseInt(d.getFullYear()/100,10),0)},d:["getDate","0"],e:["getDate"," "],g:function(d){return Date.ext.util.xPad(parseInt(Date.ext.util.G(d)/100,10),0)},G:function(d){var y=d.getFullYear(),V=parseInt(Date.ext.formats.V(d),10),W=parseInt(Date.ext.formats.W(d),10);return W>V?y++:0===W&&V>=52&&y--,y},H:["getHours","0"],I:function(d){var I=d.getHours()%12;return Date.ext.util.xPad(0===I?12:I,0)},j:function(d){var ms=d-new Date(""+d.getFullYear()+"/1/1 GMT");ms+=6e4*d.getTimezoneOffset();var doy=parseInt(ms/6e4/60/24,10)+1;return Date.ext.util.xPad(doy,0,100)},m:function(d){return Date.ext.util.xPad(d.getMonth()+1,0)},M:["getMinutes","0"],p:function(d){return Date.ext.locales[d.locale].p[d.getHours()>=12?1:0]},P:function(d){return Date.ext.locales[d.locale].P[d.getHours()>=12?1:0]},S:["getSeconds","0"],u:function(d){var dow=d.getDay();return 0===dow?7:dow},U:function(d){var doy=parseInt(Date.ext.formats.j(d),10),rdow=6-d.getDay(),woy=parseInt((doy+rdow)/7,10);return Date.ext.util.xPad(woy,0)},V:function(d){var woy=parseInt(Date.ext.formats.W(d),10),dow1_1=new Date(""+d.getFullYear()+"/1/1").getDay(),idow=woy+(dow1_1>4||1>=dow1_1?0:1);return 53==idow&&new Date(""+d.getFullYear()+"/12/31").getDay()<4?idow=1:0===idow&&(idow=Date.ext.formats.V(new Date(""+(d.getFullYear()-1)+"/12/31"))),Date.ext.util.xPad(idow,0)},w:"getDay",W:function(d){var doy=parseInt(Date.ext.formats.j(d),10),rdow=7-Date.ext.formats.u(d),woy=parseInt((doy+rdow)/7,10);return Date.ext.util.xPad(woy,0,10)},y:function(d){return Date.ext.util.xPad(d.getFullYear()%100,0)},Y:"getFullYear",z:function(d){var o=d.getTimezoneOffset(),H=Date.ext.util.xPad(parseInt(Math.abs(o/60),10),0),M=Date.ext.util.xPad(o%60,0);return(o>0?"-":"+")+H+M},Z:function(d){return d.toString().replace(/^.*\(([^)]+)\)$/,"$1")},"%":function(){return"%"}},Date.ext.aggregates={c:"locale",D:"%m/%d/%y",h:"%b",n:"\n",r:"%I:%M:%S %p",R:"%H:%M",t:"	",T:"%H:%M:%S",x:"locale",X:"locale"},Date.ext.aggregates.z=Date.ext.formats.z(new Date),Date.ext.aggregates.Z=Date.ext.formats.Z(new Date),Date.ext.unsupported={},Date.prototype.strftime=function(fmt){this.locale in Date.ext.locales||(this.locale=this.locale.replace(/-[a-zA-Z]+$/,"")in Date.ext.locales?this.locale.replace(/-[a-zA-Z]+$/,""):"en-GB");for(var d=this;fmt.match(/%[cDhnrRtTxXzZ]/);)fmt=fmt.replace(/%([cDhnrRtTxXzZ])/g,function(m0,m1){var f=Date.ext.aggregates[m1];return"locale"==f?Date.ext.locales[d.locale][m1]:f});var str=fmt.replace(/%([aAbBCdegGHIjmMpPSuUVwWyY%])/g,function(m0,m1){var f=Date.ext.formats[m1];return"string"==typeof f?d[f]():"function"==typeof f?f.call(d,d):"object"==typeof f&&"string"==typeof f[0]?Date.ext.util.xPad(d[f[0]](),f[1]):m1});return d=null,str},function($){var s,m={init:function(){},start:function(){},complete:function(){},error:function(){return 0},traverse:function(files,input,area){if("undefined"!=typeof files)for(var i=0,l=files.length;l>i;i++)m.control(files[i],input,area);else area.html(nosupport)},control:function(file,input,area){var tld=file.name.toLowerCase().split(/\./);return tld=tld[tld.length-1],input.data("type")&&!types.indexOf(file.type)?(s.error({error:"only image files: "+input.data("type")},input,area),!1):file.size>1048576*s.maxsize?(s.error({error:"max upload size: "+s.maxsize+"Mb"},input,area),!1):void(/image/i.test(file.type)&&input.data("canvas")?m.resize(file,input,area):m.upload(file,input,area))},resize:function(file,input,area){var name=file.name,canvas=document.createElement("canvas"),img=document.createElement("img"),WIDTH=0|input.data("width"),HEIGHT=0|input.data("height"),reader=new FileReader;reader.onloadend=function(e){img.src=e.target.result;var width=img.width,height=img.height,crop=input.data("crop");(WIDTH&&width>WIDTH||HEIGHT&&height>HEIGHT)&&(ratio=width/height,(ratio>=1||0==HEIGHT)&&WIDTH&&!crop?(width=WIDTH,height=WIDTH/ratio):crop&&WIDTH/HEIGHT>=ratio?(width=WIDTH,height=WIDTH/ratio):(width=HEIGHT*ratio,height=HEIGHT)),canvas.width=width,canvas.height=height;var ctx=canvas.getContext("2d");ctx.drawImage(img,0,0,width,height);var data=canvas.toDataURL("image/jpeg");return data.length<=6?(s.error({error:"Image did not created. Please, try again."},input,area),0):(file=m.dataURItoBlob(data),file.name=name,input.data("post")?m.upload(file,input,area):($(canvas).appendTo(area),input.attr("disabled","disabled"),$("<input>").attr("name",input.attr("name")).val(data).insertAfter(input)),void 0)},reader.readAsDataURL(file)},upload:function(file,input,area){area.find("div").empty();var progress=$("<div>",{"class":"progress"});area.append(progress);var xhr=new XMLHttpRequest;xhr.open("post",input.data("post"),!0);var token=$('meta[name="csrf-token"]').attr("content");token&&xhr.setRequestHeader("X-CSRF-Token",token),xhr.setRequestHeader("X-Requested-With","XMLHttpRequest"),xhr.upload.addEventListener("progress",function(e){if(e.lengthComputable){var loaded=Math.ceil(e.loaded/e.total*100);progress.css({width:loaded+"%"}).html(loaded+"%")}},!1),xhr.addEventListener("load",function(e){if("200"!=e.target.status)return void s.error({error:e.target.statusText},input,area);var result=jQuery.parseJSON(e.target.responseText);s.complete(result,file,input,area),progress.addClass("uploaded"),progress.html(s.uploaded).fadeOut("slow",function(){progress.remove()})},!1);var fd=new FormData;for(var i in input.data())"object"!=typeof input.data(i)&&fd.append(i,input.data(i));fd.append(input.attr("name"),file),xhr.send(fd)},dataURItoBlob:function(dataURI){for(var byteString=atob(dataURI.split(",")[1]),mimeString=dataURI.split(",")[0].split(":")[1].split(";")[0],ab=new ArrayBuffer(byteString.length),ia=new Uint8Array(ab),i=0;i<byteString.length;i++)ia[i]=byteString.charCodeAt(i);var bb=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder);return bb.append(ab),bb.getBlob(mimeString)}};$.fn.droparea=function(o){s={init:m.init,start:m.start,complete:m.complete,instructions:"drop a file to here",over:"drop file here!",nosupport:"No support for the File API in this web browser",noimage:"Unsupported file type!",uploaded:"Uploaded",maxsize:"100",wrap_container:!1},o&&$.extend(s,o),this.each(function(){var area=$(this),input=$(this).children("input")||$(this),instructions=$('<div class="instructions"></div>');area.prepend(instructions),1==s.wrap_container&&(area=$("<div"+($(this).attr("class")?' class="'+$(this).attr("class")+'"':"")+">").insertAfter($(this)),instructions=$("<div>").appendTo(area),input=$(this).appendTo(area)),s.init($(this)),input.data("value")&&input.data("value").length?$('<img src="'+input.data("value")+'">').appendTo(area):instructions.addClass("instructions").html(s.instructions),$(document).bind({dragleave:function(e){e.preventDefault(),input.data("value")||area.find("img").length?instructions.removeClass("over").empty():instructions.removeClass("over").html(s.instructions)},drop:function(e){e.preventDefault(),input.data("value")||area.find("img").length?instructions.removeClass("over").empty():instructions.removeClass("over").html(s.instructions)},dragenter:function(e){e.preventDefault(),instructions.addClass("instructions over").html(s.over)},dragover:function(e){e.preventDefault(),instructions.addClass("instructions over").html(s.over)}}),this.addEventListener("drop",function(e){e.preventDefault(),s.start($(this)),m.traverse(e.dataTransfer.files,input,area),instructions.removeClass("over").empty()},!1),input.change(function(e){m.traverse(e.target.files,input,area)})})}}(jQuery),function(){var root=this,timezoneJS;timezoneJS="undefined"!=typeof exports?exports:root.timezoneJS={},timezoneJS.VERSION="0.4.4";for(var $=root.$||root.jQuery||root.Zepto,fleegix=root.fleegix,DAYS=timezoneJS.Days=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],MONTHS=timezoneJS.Months=["January","February","March","April","May","June","July","August","September","October","November","December"],SHORT_MONTHS={},SHORT_DAYS={},EXACT_DATE_TIME={},TZ_REGEXP=new RegExp("^[a-zA-Z]+/"),i=0;i<MONTHS.length;i++)SHORT_MONTHS[MONTHS[i].substr(0,3)]=i;for(i=0;i<DAYS.length;i++)SHORT_DAYS[DAYS[i].substr(0,3)]=i;var _arrIndexOf=Array.prototype.indexOf||function(el){if(null===this)throw new TypeError;var t=Object(this),len=t.length>>>0;if(0===len)return-1;var n=0;if(arguments.length>1&&(n=Number(arguments[1]),n!=n?n=0:0!==n&&1/0!==n&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=len)return-1;for(var k=n>=0?n:Math.max(len-Math.abs(n),0);len>k;k++)if(k in t&&t[k]===el)return k;return-1},_fixWidth=function(number,digits){if("number"!=typeof number)throw"not a number: "+number;var s=number.toString();if(number.length>digits)return number.substr(number.length-digits,number.length);for(;s.length<digits;)s="0"+s;return s},_transport=function(opts){if(!(fleegix&&"undefined"!=typeof fleegix.xhr||jQuery&&"undefined"!=typeof jQuery.ajax))throw new Error("Please use the Fleegix.js XHR module, jQuery ajax, Zepto ajax, or define your own transport mechanism for downloading zone files.");if(opts){if(!opts.url)throw new Error("URL must be specified");return"async"in opts||(opts.async=!0),opts.async?fleegix&&fleegix.xhr?fleegix.xhr.send({url:opts.url,method:"get",handleSuccess:opts.success,handleErr:opts.error}):jQuery.ajax({url:opts.url,dataType:"text",method:"GET",error:opts.error,success:opts.success}):fleegix&&fleegix.xhr?fleegix.xhr.doReq({url:opts.url,async:!1}):jQuery.ajax({url:opts.url,async:!1}).responseText}};timezoneJS.Date=function(){var args=Array.prototype.slice.apply(arguments),dt=null,tz=null,arr=[];switch("[object Array]"===Object.prototype.toString.call(args[0])&&(args=args[0]),"string"==typeof args[args.length-1]&&TZ_REGEXP.test(args[args.length-1])&&(tz=args.pop()),args.length){case 0:dt=new Date;break;case 1:dt=new Date(args[0]);break;default:for(var i=0;7>i;i++)arr[i]=args[i]||0;dt=new Date(arr[0],arr[1],arr[2],arr[3],arr[4],arr[5],arr[6])}this._useCache=!1,this._tzInfo={},this._day=0,this.year=0,this.month=0,this.date=0,this.hours=0,this.minutes=0,this.seconds=0,this.milliseconds=0,this.timezone=tz||null,arr.length?this.setFromDateObjProxy(dt):this.setFromTimeProxy(dt.getTime(),tz)},timezoneJS.Date.prototype={getDate:function(){return this.date},getDay:function(){return this._day},getFullYear:function(){return this.year},getMonth:function(){return this.month},getYear:function(){return this.year-1900},getHours:function(){return this.hours},getMilliseconds:function(){return this.milliseconds},getMinutes:function(){return this.minutes},getSeconds:function(){return this.seconds},getUTCDate:function(){return this.getUTCDateProxy().getUTCDate()},getUTCDay:function(){return this.getUTCDateProxy().getUTCDay()},getUTCFullYear:function(){return this.getUTCDateProxy().getUTCFullYear()},getUTCHours:function(){return this.getUTCDateProxy().getUTCHours()},getUTCMilliseconds:function(){return this.getUTCDateProxy().getUTCMilliseconds()},getUTCMinutes:function(){return this.getUTCDateProxy().getUTCMinutes()},getUTCMonth:function(){return this.getUTCDateProxy().getUTCMonth()},getUTCSeconds:function(){return this.getUTCDateProxy().getUTCSeconds()},getTime:function(){return this._timeProxy+60*this.getTimezoneOffset()*1e3},getTimezone:function(){return this.timezone},getTimezoneOffset:function(){return this.getTimezoneInfo().tzOffset},getTimezoneAbbreviation:function(){return this.getTimezoneInfo().tzAbbr},getTimezoneInfo:function(){if(this._useCache)return this._tzInfo;var res;return res=this.timezone?"Etc/UTC"===this.timezone||"Etc/GMT"===this.timezone?{tzOffset:0,tzAbbr:"UTC"}:timezoneJS.timezone.getTzInfo(this._timeProxy,this.timezone):{tzOffset:this.getLocalOffset(),tzAbbr:null},this._tzInfo=res,this._useCache=!0,res},getUTCDateProxy:function(){var dt=new Date(this._timeProxy);return dt.setUTCMinutes(dt.getUTCMinutes()+this.getTimezoneOffset()),dt},setDate:function(date){return this.setAttribute("date",date),this.getTime()},setFullYear:function(year,month,date){return void 0!==date&&this.setAttribute("date",1),this.setAttribute("year",year),void 0!==month&&this.setAttribute("month",month),void 0!==date&&this.setAttribute("date",date),this.getTime()},setMonth:function(month,date){return this.setAttribute("month",month),void 0!==date&&this.setAttribute("date",date),this.getTime()},setYear:function(year){return year=Number(year),year>=0&&99>=year&&(year+=1900),this.setUTCAttribute("year",year),this.getTime()},setHours:function(hours,minutes,seconds,milliseconds){return this.setAttribute("hours",hours),void 0!==minutes&&this.setAttribute("minutes",minutes),void 0!==seconds&&this.setAttribute("seconds",seconds),void 0!==milliseconds&&this.setAttribute("milliseconds",milliseconds),this.getTime()},setMinutes:function(minutes,seconds,milliseconds){return this.setAttribute("minutes",minutes),void 0!==seconds&&this.setAttribute("seconds",seconds),void 0!==milliseconds&&this.setAttribute("milliseconds",milliseconds),this.getTime()},setSeconds:function(seconds,milliseconds){return this.setAttribute("seconds",seconds),void 0!==milliseconds&&this.setAttribute("milliseconds",milliseconds),this.getTime()},setMilliseconds:function(milliseconds){return this.setAttribute("milliseconds",milliseconds),this.getTime()},setTime:function(n){if(isNaN(n))throw new Error("Units must be a number.");return this.setFromTimeProxy(n,this.timezone),this.getTime()},setUTCFullYear:function(year,month,date){return void 0!==date&&this.setUTCAttribute("date",1),this.setUTCAttribute("year",year),void 0!==month&&this.setUTCAttribute("month",month),void 0!==date&&this.setUTCAttribute("date",date),this.getTime()},setUTCMonth:function(month,date){return this.setUTCAttribute("month",month),void 0!==date&&this.setUTCAttribute("date",date),this.getTime()},setUTCDate:function(date){return this.setUTCAttribute("date",date),this.getTime()},setUTCHours:function(hours,minutes,seconds,milliseconds){return this.setUTCAttribute("hours",hours),void 0!==minutes&&this.setUTCAttribute("minutes",minutes),void 0!==seconds&&this.setUTCAttribute("seconds",seconds),void 0!==milliseconds&&this.setUTCAttribute("milliseconds",milliseconds),this.getTime()},setUTCMinutes:function(minutes,seconds,milliseconds){return this.setUTCAttribute("minutes",minutes),void 0!==seconds&&this.setUTCAttribute("seconds",seconds),void 0!==milliseconds&&this.setUTCAttribute("milliseconds",milliseconds),this.getTime()},setUTCSeconds:function(seconds,milliseconds){return this.setUTCAttribute("seconds",seconds),void 0!==milliseconds&&this.setUTCAttribute("milliseconds",milliseconds),this.getTime()},setUTCMilliseconds:function(milliseconds){return this.setUTCAttribute("milliseconds",milliseconds),this.getTime()},setFromDateObjProxy:function(dt){this.year=dt.getFullYear(),this.month=dt.getMonth(),this.date=dt.getDate(),this.hours=dt.getHours(),this.minutes=dt.getMinutes(),this.seconds=dt.getSeconds(),this.milliseconds=dt.getMilliseconds(),this._day=dt.getDay(),this._dateProxy=dt,this._timeProxy=Date.UTC(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.milliseconds),this._useCache=!1},setFromTimeProxy:function(utcMillis,tz){var tzOffset,dt=new Date(utcMillis);tzOffset=tz?timezoneJS.timezone.getTzInfo(dt,tz).tzOffset:dt.getTimezoneOffset(),dt.setTime(utcMillis+6e4*(dt.getTimezoneOffset()-tzOffset)),this.setFromDateObjProxy(dt)},setAttribute:function(unit,n){if(isNaN(n))throw new Error("Units must be a number.");var dt=this._dateProxy,meth="year"===unit?"FullYear":unit.substr(0,1).toUpperCase()+unit.substr(1);dt["set"+meth](n),this.setFromDateObjProxy(dt)},setUTCAttribute:function(unit,n){if(isNaN(n))throw new Error("Units must be a number.");var meth="year"===unit?"FullYear":unit.substr(0,1).toUpperCase()+unit.substr(1),dt=this.getUTCDateProxy();dt["setUTC"+meth](n),dt.setUTCMinutes(dt.getUTCMinutes()-this.getTimezoneOffset()),this.setFromTimeProxy(dt.getTime()+6e4*this.getTimezoneOffset(),this.timezone)},setTimezone:function(tz){var previousOffset=this.getTimezoneInfo().tzOffset;this.timezone=tz,this._useCache=!1,this.setUTCMinutes(this.getUTCMinutes()-this.getTimezoneInfo().tzOffset+previousOffset)},removeTimezone:function(){this.timezone=null,this._useCache=!1},valueOf:function(){return this.getTime()},clone:function(){return this.timezone?new timezoneJS.Date(this.getTime(),this.timezone):new timezoneJS.Date(this.getTime())},toGMTString:function(){return this.toString("EEE, dd MMM yyyy HH:mm:ss Z","Etc/GMT")},toLocaleString:function(){},toLocaleDateString:function(){},toLocaleTimeString:function(){},toSource:function(){},toISOString:function(){return this.toString("yyyy-MM-ddTHH:mm:ss.SSS","Etc/UTC")+"Z"},toJSON:function(){return this.toISOString()},toString:function(format,tz){format||(format="yyyy-MM-dd HH:mm:ss");var result=format,tzInfo=tz?timezoneJS.timezone.getTzInfo(this.getTime(),tz):this.getTimezoneInfo(),_this=this;tz&&(_this=this.clone(),_this.setTimezone(tz));var hours=_this.getHours();return result.replace(/a+/g,function(){return"k"}).replace(/y+/g,function(token){return _fixWidth(_this.getFullYear(),token.length)}).replace(/d+/g,function(token){return _fixWidth(_this.getDate(),token.length)}).replace(/m+/g,function(token){return _fixWidth(_this.getMinutes(),token.length)}).replace(/s+/g,function(token){return _fixWidth(_this.getSeconds(),token.length)}).replace(/S+/g,function(token){return _fixWidth(_this.getMilliseconds(),token.length)}).replace(/M+/g,function(token){var _month=_this.getMonth(),_len=token.length;return _len>3?timezoneJS.Months[_month]:_len>2?timezoneJS.Months[_month].substring(0,_len):_fixWidth(_month+1,_len)}).replace(/k+/g,function(){return hours>=12?(hours>12&&(hours-=12),"PM"):"AM"}).replace(/H+/g,function(token){return _fixWidth(hours,token.length)}).replace(/h+/g,function(token){return _fixWidth(hours%12===0?12:hours%12,token.length)}).replace(/E+/g,function(token){return DAYS[_this.getDay()].substring(0,token.length)}).replace(/Z+/gi,function(){return tzInfo.tzAbbr})},toUTCString:function(){return this.toGMTString()},civilToJulianDayNumber:function(y,m,d){var a;m++,m>12&&(a=parseInt(m/12,10),m%=12,y+=a),2>=m&&(y-=1,m+=12),a=Math.floor(y/100);var b=2-a+Math.floor(a/4),jDt=Math.floor(365.25*(y+4716))+Math.floor(30.6001*(m+1))+d+b-1524;return jDt},getLocalOffset:function(){return this._dateProxy.getTimezoneOffset()}},timezoneJS.timezone=new function(){function invalidTZError(t){throw new Error('Timezone "'+t+'" is either incorrect, or not loaded in the timezone registry.')}function builtInLoadZoneFile(fileName,opts){var url=_this.zoneFileBasePath+"/"+fileName;return opts&&opts.async?_this.transport({async:!0,url:url,success:function(str){return _this.parseZones(str)&&"function"==typeof opts.callback&&opts.callback()},error:function(){throw new Error('Error retrieving "'+url+'" zoneinfo files')}}):_this.parseZones(_this.transport({url:url,async:!1}))}function getRegionForTimezone(tz){var reg,ret,exc=regionExceptions[tz];if(exc)return exc;if(reg=tz.split("/")[0],ret=regionMap[reg])return ret;var link=_this.zones[tz];return"string"==typeof link?getRegionForTimezone(link):_this.loadedZones.backward?void invalidTZError(tz):(_this.loadZoneFile("backward"),getRegionForTimezone(tz))}function parseTimeString(str){var pat=/(\d+)(?::0*(\d*))?(?::0*(\d*))?([wsugz])?$/,hms=str.match(pat);return hms[1]=parseInt(hms[1],10),hms[2]=hms[2]?parseInt(hms[2],10):0,hms[3]=hms[3]?parseInt(hms[3],10):0,hms.slice(1,5)}function processZone(z){if(z[3]){var yea=parseInt(z[3],10),mon=11,dat=31;z[4]&&(mon=SHORT_MONTHS[z[4].substr(0,3)],dat=parseInt(z[5],10)||1);var t=z[6]?parseTimeString(z[6]):[0,0,0];return[yea,mon,dat,t[0],t[1],t[2]]}}function getZone(dt,tz){for(var utcMillis="number"==typeof dt?dt:new Date(dt).getTime(),t=tz,zoneList=_this.zones[t];"string"==typeof zoneList;)t=zoneList,zoneList=_this.zones[t];if(!zoneList){if(!_this.loadedZones.backward)return _this.loadZoneFile("backward"),getZone(dt,tz);invalidTZError(t)}if(0===zoneList.length)throw new Error('No Zone found for "'+tz+'" on '+dt);for(var i=zoneList.length-1;i>=0;i--){var z=zoneList[i];if(z[3]&&utcMillis>z[3])break}return zoneList[i+1]}function getBasicOffset(time){var off=parseTimeString(time),adj="-"===time.charAt(0)?-1:1;return off=1e3*adj*(60*(60*off[0]+off[1])+off[2]),off/60/1e3}function getRule(dt,zone,isUTC){var date="number"==typeof dt?new Date(dt):dt,ruleset=zone[1],basicOffset=zone[0],staticDstMatch=ruleset.match(/^([0-9]):([0-9][0-9])$/);if(staticDstMatch)return[-1e6,"max","-","Jan",1,[0,0,0],60*parseInt(staticDstMatch[1],10)+parseInt(staticDstMatch[2],10),"-"];var applicableRules,convertDateToUTC=function(date,type,rule){var offset=0;if("u"===type||"g"===type||"z"===type)offset=0;else if("s"===type)offset=basicOffset;else{if("w"!==type&&type)throw new Error("unknown type "+type);offset=getAdjustedOffset(basicOffset,rule)}return offset*=6e4,new Date(date.getTime()+offset)},convertRuleToExactDateAndTime=function(yearAndRule,prevRule){var effectiveDate,year=yearAndRule[0],rule=yearAndRule[1],hms=rule[5];if(EXACT_DATE_TIME[year]||(EXACT_DATE_TIME[year]={}),EXACT_DATE_TIME[year][rule])effectiveDate=EXACT_DATE_TIME[year][rule];else{if(isNaN(rule[4])){var targetDay,operator;"last"===rule[4].substr(0,4)?(effectiveDate=new Date(Date.UTC(year,SHORT_MONTHS[rule[3]]+1,1,hms[0]-24,hms[1],hms[2],0)),targetDay=SHORT_DAYS[rule[4].substr(4,3)],operator="<="):(effectiveDate=new Date(Date.UTC(year,SHORT_MONTHS[rule[3]],rule[4].substr(5),hms[0],hms[1],hms[2],0)),targetDay=SHORT_DAYS[rule[4].substr(0,3)],operator=rule[4].substr(3,2));var ourDay=effectiveDate.getUTCDay();effectiveDate.setUTCDate(">="===operator?effectiveDate.getUTCDate()+(targetDay-ourDay+(ourDay>targetDay?7:0)):effectiveDate.getUTCDate()+(targetDay-ourDay-(targetDay>ourDay?7:0)))}else effectiveDate=new Date(Date.UTC(year,SHORT_MONTHS[rule[3]],rule[4],hms[0],hms[1],hms[2],0));EXACT_DATE_TIME[year][rule]=effectiveDate}return prevRule&&(effectiveDate=convertDateToUTC(effectiveDate,hms[3],prevRule)),effectiveDate},findApplicableRules=function(year,ruleset){for(var applicableRules=[],i=0;ruleset&&i<ruleset.length;i++)ruleset[i][0]<=year&&(ruleset[i][1]>=year||ruleset[i][0]===year&&"only"===ruleset[i][1]||"max"===ruleset[i][1])&&applicableRules.push([year,ruleset[i]]);return applicableRules},compareDates=function(a,b,prev){var year,rule;return a.constructor!==Date?(year=a[0],rule=a[1],a=!prev&&EXACT_DATE_TIME[year]&&EXACT_DATE_TIME[year][rule]?EXACT_DATE_TIME[year][rule]:convertRuleToExactDateAndTime(a,prev)):prev&&(a=convertDateToUTC(a,isUTC?"u":"w",prev)),b.constructor!==Date?(year=b[0],rule=b[1],b=!prev&&EXACT_DATE_TIME[year]&&EXACT_DATE_TIME[year][rule]?EXACT_DATE_TIME[year][rule]:convertRuleToExactDateAndTime(b,prev)):prev&&(b=convertDateToUTC(b,isUTC?"u":"w",prev)),a=Number(a),b=Number(b),a-b},year=date.getUTCFullYear();applicableRules=findApplicableRules(year,_this.rules[ruleset]),applicableRules.push(date),applicableRules.sort(compareDates),_arrIndexOf.call(applicableRules,date)<2&&(applicableRules=applicableRules.concat(findApplicableRules(year-1,_this.rules[ruleset])),applicableRules.sort(compareDates));var pinpoint=_arrIndexOf.call(applicableRules,date);return pinpoint>1&&compareDates(date,applicableRules[pinpoint-1],applicableRules[pinpoint-2][1])<0?applicableRules[pinpoint-2][1]:pinpoint>0&&pinpoint<applicableRules.length-1&&compareDates(date,applicableRules[pinpoint+1],applicableRules[pinpoint-1][1])>0?applicableRules[pinpoint+1][1]:0===pinpoint?null:applicableRules[pinpoint-1][1]}function getAdjustedOffset(off,rule){return-Math.ceil(rule[6]-off)}function getAbbreviation(zone,rule){var res,base=zone[2];if(base.indexOf("%s")>-1){var repl;repl=rule?"-"===rule[7]?"":rule[7]:"S",res=base.replace("%s",repl)}else res=base.indexOf("/")>-1?base.split("/",2)[rule[6]?1:0]:base;return res}var _this=this,regionMap={Etc:"etcetera",EST:"northamerica",MST:"northamerica",HST:"northamerica",EST5EDT:"northamerica",CST6CDT:"northamerica",MST7MDT:"northamerica",PST8PDT:"northamerica",America:"northamerica",Pacific:"australasia",Atlantic:"europe",Africa:"africa",Indian:"africa",Antarctica:"antarctica",Asia:"asia",Australia:"australasia",Europe:"europe",WET:"europe",CET:"europe",MET:"europe",EET:"europe"},regionExceptions={"Pacific/Honolulu":"northamerica","Atlantic/Bermuda":"northamerica","Atlantic/Cape_Verde":"africa","Atlantic/St_Helena":"africa","Indian/Kerguelen":"antarctica","Indian/Chagos":"asia","Indian/Maldives":"asia","Indian/Christmas":"australasia","Indian/Cocos":"australasia","America/Danmarkshavn":"europe","America/Scoresbysund":"europe","America/Godthab":"europe","America/Thule":"europe","Asia/Yekaterinburg":"europe","Asia/Omsk":"europe","Asia/Novosibirsk":"europe","Asia/Krasnoyarsk":"europe","Asia/Irkutsk":"europe","Asia/Yakutsk":"europe","Asia/Vladivostok":"europe","Asia/Sakhalin":"europe","Asia/Magadan":"europe","Asia/Kamchatka":"europe","Asia/Anadyr":"europe","Africa/Ceuta":"europe","America/Argentina/Buenos_Aires":"southamerica","America/Argentina/Cordoba":"southamerica","America/Argentina/Tucuman":"southamerica","America/Argentina/La_Rioja":"southamerica","America/Argentina/San_Juan":"southamerica","America/Argentina/Jujuy":"southamerica","America/Argentina/Catamarca":"southamerica","America/Argentina/Mendoza":"southamerica","America/Argentina/Rio_Gallegos":"southamerica","America/Argentina/Ushuaia":"southamerica","America/Aruba":"southamerica","America/La_Paz":"southamerica","America/Noronha":"southamerica","America/Belem":"southamerica","America/Fortaleza":"southamerica","America/Recife":"southamerica","America/Araguaina":"southamerica","America/Maceio":"southamerica","America/Bahia":"southamerica","America/Sao_Paulo":"southamerica","America/Campo_Grande":"southamerica","America/Cuiaba":"southamerica","America/Porto_Velho":"southamerica","America/Boa_Vista":"southamerica","America/Manaus":"southamerica","America/Eirunepe":"southamerica","America/Rio_Branco":"southamerica","America/Santiago":"southamerica","Pacific/Easter":"southamerica","America/Bogota":"southamerica","America/Curacao":"southamerica","America/Guayaquil":"southamerica","Pacific/Galapagos":"southamerica","Atlantic/Stanley":"southamerica","America/Cayenne":"southamerica","America/Guyana":"southamerica","America/Asuncion":"southamerica","America/Lima":"southamerica","Atlantic/South_Georgia":"southamerica","America/Paramaribo":"southamerica","America/Port_of_Spain":"southamerica","America/Montevideo":"southamerica","America/Caracas":"southamerica"};this.zoneFileBasePath=null,this.zoneFiles=["africa","antarctica","asia","australasia","backward","etcetera","europe","northamerica","pacificnew","southamerica"],this.loadingSchemes={PRELOAD_ALL:"preloadAll",LAZY_LOAD:"lazyLoad",MANUAL_LOAD:"manualLoad"},this.loadingScheme=this.loadingSchemes.LAZY_LOAD,this.loadedZones={},this.zones={},this.rules={},this.init=function(o){var callbackFn,opts={async:!0},def=this.loadingScheme===this.loadingSchemes.PRELOAD_ALL?this.zoneFiles:this.defaultZoneFile||"northamerica",done=0;for(var p in o)opts[p]=o[p];if("string"==typeof def)return this.loadZoneFile(def,opts);callbackFn=opts.callback,opts.callback=function(){done++,done===def.length&&"function"==typeof callbackFn&&callbackFn()};for(var i=0;i<def.length;i++)this.loadZoneFile(def[i],opts)},this.loadZoneFile=function(fileName,opts){if("undefined"==typeof this.zoneFileBasePath)throw new Error("Please define a base path to your zone file directory -- timezoneJS.timezone.zoneFileBasePath.");if(!this.loadedZones[fileName])return this.loadedZones[fileName]=!0,builtInLoadZoneFile(fileName,opts)},this.loadZoneJSONData=function(url,sync){var processData=function(data){data=eval("("+data+")");for(var z in data.zones)_this.zones[z]=data.zones[z];for(var r in data.rules)_this.rules[r]=data.rules[r]};return sync?processData(_this.transport({url:url,async:!1})):_this.transport({url:url,success:processData})},this.loadZoneDataFromObject=function(data){if(data){for(var z in data.zones)_this.zones[z]=data.zones[z];for(var r in data.rules)_this.rules[r]=data.rules[r]}},this.getAllZones=function(){var arr=[];for(var z in this.zones)arr.push(z);return arr.sort()},this.parseZones=function(str){for(var l,lines=str.split("\n"),arr=[],chunk="",zone=null,rule=null,i=0;i<lines.length;i++)if(l=lines[i],l.match(/^\s/)&&(l="Zone "+zone+l),l=l.split("#")[0],l.length>3)switch(arr=l.split(/\s+/),chunk=arr.shift()){case"Zone":if(zone=arr.shift(),_this.zones[zone]||(_this.zones[zone]=[]),arr.length<3)break;arr.splice(3,arr.length,processZone(arr)),arr[3]&&(arr[3]=Date.UTC.apply(null,arr[3])),arr[0]=-getBasicOffset(arr[0]),_this.zones[zone].push(arr);break;case"Rule":rule=arr.shift(),_this.rules[rule]||(_this.rules[rule]=[]),arr[0]=parseInt(arr[0],10),arr[1]=parseInt(arr[1],10)||arr[1],arr[5]=parseTimeString(arr[5]),arr[6]=getBasicOffset(arr[6]),_this.rules[rule].push(arr);break;case"Link":if(_this.zones[arr[1]])throw new Error("Error with Link "+arr[1]+". Cannot create link of a preexisted zone.");_this.zones[arr[1]]=arr[0]}return!0},this.transport=_transport,this.getTzInfo=function(dt,tz,isUTC){if(this.loadingScheme===this.loadingSchemes.LAZY_LOAD){var zoneFile=getRegionForTimezone(tz);if(!zoneFile)throw new Error("Not a valid timezone ID.");this.loadedZones[zoneFile]||this.loadZoneFile(zoneFile)}var z=getZone(dt,tz),off=z[0],rule=getRule(dt,z,isUTC);rule&&(off=getAdjustedOffset(off,rule));var abbr=getAbbreviation(z,rule);return{tzOffset:off,tzAbbr:abbr}}}}.call(this),!function(a){"undefined"==typeof a.fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){"use strict";function n(b){var c=a(document.createTextNode(""));b.before(c),c.before(b),c.remove()}function o(a){function b(a){return m[a]||a}return a.replace(/[^\u0000-\u007E]/g,b)}function p(a,b){for(var c=0,d=b.length;d>c;c+=1)if(r(a,b[c]))return c;return-1}function q(){var b=a(l);b.appendTo("body");var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function r(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+""==c+"":c.constructor===String?c+""==a+"":!1}function s(b,c){var d,e,f;if(null===b||b.length<1)return[];for(d=b.split(c),e=0,f=d.length;f>e;e+=1)d[e]=a.trim(d[e]);return d}function t(a){return a.outerWidth(!1)-a.width()}function u(c){var d="keyup-change-value";c.on("keydown",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on("keyup",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger("keyup-change"))})}function v(c){c.on("mousemove",function(c){var d=i;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger("mousemove-filtered",c)})}function w(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function x(a,b){var c=w(a,function(a){b.trigger("scroll-debounced",a)});b.on("scroll",function(a){p(a.target,b.get())>=0&&c(a)})}function y(a){a[0]!==document.activeElement&&window.setTimeout(function(){var d,b=a[0],c=a.val().length;a.focus();var e=b.offsetWidth>0||b.offsetHeight>0;e&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(d=b.createTextRange(),d.collapse(!1),d.select()))},0)}function z(b){b=a(b)[0];var c=0,d=0;if("selectionStart"in b)c=b.selectionStart,d=b.selectionEnd-c;else if("selection"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart("character",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function A(a){a.preventDefault(),a.stopPropagation()}function B(a){a.preventDefault(),a.stopImmediatePropagation()}function C(b){if(!h){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);
h=a(document.createElement("div")).css({position:"absolute",left:"-10000px",top:"-10000px",display:"none",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:"nowrap"}),h.attr("class","select2-sizer"),a("body").append(h)}return h.text(b.val()),h.width()}function D(b,c,d){var e,g,f=[];e=a.trim(b.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0===this.indexOf("select2-")&&f.push(this)})),e=a.trim(c.attr("class")),e&&(e=""+e,a(e.split(/\s+/)).each2(function(){0!==this.indexOf("select2-")&&(g=d(this),g&&f.push(g))})),b.attr("class",f.join(" "))}function E(a,b,c,d){var e=o(a.toUpperCase()).indexOf(o(b.toUpperCase())),f=b.length;return 0>e?void c.push(d(a)):(c.push(d(a.substring(0,e))),c.push("<span class='select2-match'>"),c.push(d(a.substring(e,e+f))),c.push("</span>"),void c.push(d(a.substring(e+f,a.length))))}function F(a){var b={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return String(a).replace(/[&<>"'\/\\]/g,function(a){return b[a]})}function G(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||"GET",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||"json"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f="function"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&"function"==typeof e.abort&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page,i);i.callback(b)},error:function(a,b,c){var d={hasError:!0,jqXHR:a,textStatus:b,errorThrown:c};i.callback(d)}}),e=j.call(h,l)},f)}}function H(b){var d,e,c=b,f=function(a){return""+a.text};a.isArray(c)&&(e=c,c={results:e}),a.isFunction(c)===!1&&(e=c,c=function(){return e});var g=c();return g.text&&(f=g.text,a.isFunction(f)||(d=g.text,f=function(a){return a[d]})),function(b){var g,d=b.term,e={results:[]};return""===d?void b.callback(c()):(g=function(c,e){var h,i;if(c=c[0],c.children){h={};for(i in c)c.hasOwnProperty(i)&&(h[i]=c[i]);h.children=[],a(c.children).each2(function(a,b){g(b,h.children)}),(h.children.length||b.matcher(d,f(h),c))&&e.push(h)}else b.matcher(d,f(c),c)&&e.push(c)},a(c().results).each2(function(a,b){g(b,e.results)}),void b.callback(e))}}function I(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]},h=d?c(e):c;a.isArray(h)&&(a(h).each(function(){var a=this.text!==b,c=a?this.text:this;(""===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g))}}function J(b,c){if(a.isFunction(b))return!0;if(!b)return!1;if("string"==typeof b)return!0;throw new Error(c+" must be a string, function, or falsy value")}function K(b,c){if(a.isFunction(b)){var d=Array.prototype.slice.call(arguments,2);return b.apply(c,d)}return b}function L(b){var c=0;return a.each(b,function(a,b){b.children?c+=L(b.children):c++}),c}function M(a,c,d,e){var h,i,j,k,l,f=a,g=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(i=-1,j=0,k=e.tokenSeparators.length;k>j&&(l=e.tokenSeparators[j],i=a.indexOf(l),!(i>=0));j++);if(0>i)break;if(h=a.substring(0,i),a=a.substring(i+l.length),h.length>0&&(h=e.createSearchChoice.call(this,h,c),h!==b&&null!==h&&e.id(h)!==b&&null!==e.id(h))){for(g=!1,j=0,k=c.length;k>j;j++)if(r(e.id(h),e.id(c[j]))){g=!0;break}g||d(h)}}return f!==a?a:void 0}function N(){var b=this;a.each(arguments,function(a,c){b[c].remove(),b[c]=null})}function O(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var c,d,e,f,g,h,j,k,i={x:0,y:0},c={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case c.LEFT:case c.RIGHT:case c.UP:case c.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case c.SHIFT:case c.CTRL:case c.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},l="<div class='select2-measure-scrollbar'></div>",m={"Ⓐ":"A",Ａ:"A",À:"A",Á:"A",Â:"A",Ầ:"A",Ấ:"A",Ẫ:"A",Ẩ:"A",Ã:"A",Ā:"A",Ă:"A",Ằ:"A",Ắ:"A",Ẵ:"A",Ẳ:"A",Ȧ:"A",Ǡ:"A",Ä:"A",Ǟ:"A",Ả:"A",Å:"A",Ǻ:"A",Ǎ:"A",Ȁ:"A",Ȃ:"A",Ạ:"A",Ậ:"A",Ặ:"A",Ḁ:"A",Ą:"A",Ⱥ:"A",Ɐ:"A",Ꜳ:"AA",Æ:"AE",Ǽ:"AE",Ǣ:"AE",Ꜵ:"AO",Ꜷ:"AU",Ꜹ:"AV",Ꜻ:"AV",Ꜽ:"AY","Ⓑ":"B",Ｂ:"B",Ḃ:"B",Ḅ:"B",Ḇ:"B",Ƀ:"B",Ƃ:"B",Ɓ:"B","Ⓒ":"C",Ｃ:"C",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",Ç:"C",Ḉ:"C",Ƈ:"C",Ȼ:"C",Ꜿ:"C","Ⓓ":"D",Ｄ:"D",Ḋ:"D",Ď:"D",Ḍ:"D",Ḑ:"D",Ḓ:"D",Ḏ:"D",Đ:"D",Ƌ:"D",Ɗ:"D",Ɖ:"D",Ꝺ:"D",Ǳ:"DZ",Ǆ:"DZ",ǲ:"Dz",ǅ:"Dz","Ⓔ":"E",Ｅ:"E",È:"E",É:"E",Ê:"E",Ề:"E",Ế:"E",Ễ:"E",Ể:"E",Ẽ:"E",Ē:"E",Ḕ:"E",Ḗ:"E",Ĕ:"E",Ė:"E",Ë:"E",Ẻ:"E",Ě:"E",Ȅ:"E",Ȇ:"E",Ẹ:"E",Ệ:"E",Ȩ:"E",Ḝ:"E",Ę:"E",Ḙ:"E",Ḛ:"E",Ɛ:"E",Ǝ:"E","Ⓕ":"F",Ｆ:"F",Ḟ:"F",Ƒ:"F",Ꝼ:"F","Ⓖ":"G",Ｇ:"G",Ǵ:"G",Ĝ:"G",Ḡ:"G",Ğ:"G",Ġ:"G",Ǧ:"G",Ģ:"G",Ǥ:"G",Ɠ:"G","Ꞡ":"G",Ᵹ:"G",Ꝿ:"G","Ⓗ":"H",Ｈ:"H",Ĥ:"H",Ḣ:"H",Ḧ:"H",Ȟ:"H",Ḥ:"H",Ḩ:"H",Ḫ:"H",Ħ:"H",Ⱨ:"H",Ⱶ:"H","Ɥ":"H","Ⓘ":"I",Ｉ:"I",Ì:"I",Í:"I",Î:"I",Ĩ:"I",Ī:"I",Ĭ:"I",İ:"I",Ï:"I",Ḯ:"I",Ỉ:"I",Ǐ:"I",Ȉ:"I",Ȋ:"I",Ị:"I",Į:"I",Ḭ:"I",Ɨ:"I","Ⓙ":"J",Ｊ:"J",Ĵ:"J",Ɉ:"J","Ⓚ":"K",Ｋ:"K",Ḱ:"K",Ǩ:"K",Ḳ:"K",Ķ:"K",Ḵ:"K",Ƙ:"K",Ⱪ:"K",Ꝁ:"K",Ꝃ:"K",Ꝅ:"K","Ꞣ":"K","Ⓛ":"L",Ｌ:"L",Ŀ:"L",Ĺ:"L",Ľ:"L",Ḷ:"L",Ḹ:"L",Ļ:"L",Ḽ:"L",Ḻ:"L",Ł:"L",Ƚ:"L",Ɫ:"L",Ⱡ:"L",Ꝉ:"L",Ꝇ:"L",Ꞁ:"L",Ǉ:"LJ",ǈ:"Lj","Ⓜ":"M",Ｍ:"M",Ḿ:"M",Ṁ:"M",Ṃ:"M",Ɱ:"M",Ɯ:"M","Ⓝ":"N",Ｎ:"N",Ǹ:"N",Ń:"N",Ñ:"N",Ṅ:"N",Ň:"N",Ṇ:"N",Ņ:"N",Ṋ:"N",Ṉ:"N",Ƞ:"N",Ɲ:"N","Ꞑ":"N","Ꞥ":"N",Ǌ:"NJ",ǋ:"Nj","Ⓞ":"O",Ｏ:"O",Ò:"O",Ó:"O",Ô:"O",Ồ:"O",Ố:"O",Ỗ:"O",Ổ:"O",Õ:"O",Ṍ:"O",Ȭ:"O",Ṏ:"O",Ō:"O",Ṑ:"O",Ṓ:"O",Ŏ:"O",Ȯ:"O",Ȱ:"O",Ö:"O",Ȫ:"O",Ỏ:"O",Ő:"O",Ǒ:"O",Ȍ:"O",Ȏ:"O",Ơ:"O",Ờ:"O",Ớ:"O",Ỡ:"O",Ở:"O",Ợ:"O",Ọ:"O",Ộ:"O",Ǫ:"O",Ǭ:"O",Ø:"O",Ǿ:"O",Ɔ:"O",Ɵ:"O",Ꝋ:"O",Ꝍ:"O",Ƣ:"OI",Ꝏ:"OO",Ȣ:"OU","Ⓟ":"P",Ｐ:"P",Ṕ:"P",Ṗ:"P",Ƥ:"P",Ᵽ:"P",Ꝑ:"P",Ꝓ:"P",Ꝕ:"P","Ⓠ":"Q",Ｑ:"Q",Ꝗ:"Q",Ꝙ:"Q",Ɋ:"Q","Ⓡ":"R",Ｒ:"R",Ŕ:"R",Ṙ:"R",Ř:"R",Ȑ:"R",Ȓ:"R",Ṛ:"R",Ṝ:"R",Ŗ:"R",Ṟ:"R",Ɍ:"R",Ɽ:"R",Ꝛ:"R","Ꞧ":"R",Ꞃ:"R","Ⓢ":"S",Ｓ:"S",ẞ:"S",Ś:"S",Ṥ:"S",Ŝ:"S",Ṡ:"S",Š:"S",Ṧ:"S",Ṣ:"S",Ṩ:"S",Ș:"S",Ş:"S","Ȿ":"S","Ꞩ":"S",Ꞅ:"S","Ⓣ":"T",Ｔ:"T",Ṫ:"T",Ť:"T",Ṭ:"T",Ț:"T",Ţ:"T",Ṱ:"T",Ṯ:"T",Ŧ:"T",Ƭ:"T",Ʈ:"T",Ⱦ:"T",Ꞇ:"T",Ꜩ:"TZ","Ⓤ":"U",Ｕ:"U",Ù:"U",Ú:"U",Û:"U",Ũ:"U",Ṹ:"U",Ū:"U",Ṻ:"U",Ŭ:"U",Ü:"U",Ǜ:"U",Ǘ:"U",Ǖ:"U",Ǚ:"U",Ủ:"U",Ů:"U",Ű:"U",Ǔ:"U",Ȕ:"U",Ȗ:"U",Ư:"U",Ừ:"U",Ứ:"U",Ữ:"U",Ử:"U",Ự:"U",Ụ:"U",Ṳ:"U",Ų:"U",Ṷ:"U",Ṵ:"U",Ʉ:"U","Ⓥ":"V",Ｖ:"V",Ṽ:"V",Ṿ:"V",Ʋ:"V",Ꝟ:"V",Ʌ:"V",Ꝡ:"VY","Ⓦ":"W",Ｗ:"W",Ẁ:"W",Ẃ:"W",Ŵ:"W",Ẇ:"W",Ẅ:"W",Ẉ:"W",Ⱳ:"W","Ⓧ":"X",Ｘ:"X",Ẋ:"X",Ẍ:"X","Ⓨ":"Y",Ｙ:"Y",Ỳ:"Y",Ý:"Y",Ŷ:"Y",Ỹ:"Y",Ȳ:"Y",Ẏ:"Y",Ÿ:"Y",Ỷ:"Y",Ỵ:"Y",Ƴ:"Y",Ɏ:"Y",Ỿ:"Y","Ⓩ":"Z",Ｚ:"Z",Ź:"Z",Ẑ:"Z",Ż:"Z",Ž:"Z",Ẓ:"Z",Ẕ:"Z",Ƶ:"Z",Ȥ:"Z","Ɀ":"Z",Ⱬ:"Z",Ꝣ:"Z","ⓐ":"a",ａ:"a",ẚ:"a",à:"a",á:"a",â:"a",ầ:"a",ấ:"a",ẫ:"a",ẩ:"a",ã:"a",ā:"a",ă:"a",ằ:"a",ắ:"a",ẵ:"a",ẳ:"a",ȧ:"a",ǡ:"a",ä:"a",ǟ:"a",ả:"a",å:"a",ǻ:"a",ǎ:"a",ȁ:"a",ȃ:"a",ạ:"a",ậ:"a",ặ:"a",ḁ:"a",ą:"a",ⱥ:"a",ɐ:"a",ꜳ:"aa",æ:"ae",ǽ:"ae",ǣ:"ae",ꜵ:"ao",ꜷ:"au",ꜹ:"av",ꜻ:"av",ꜽ:"ay","ⓑ":"b",ｂ:"b",ḃ:"b",ḅ:"b",ḇ:"b",ƀ:"b",ƃ:"b",ɓ:"b","ⓒ":"c",ｃ:"c",ć:"c",ĉ:"c",ċ:"c",č:"c",ç:"c",ḉ:"c",ƈ:"c",ȼ:"c",ꜿ:"c",ↄ:"c","ⓓ":"d",ｄ:"d",ḋ:"d",ď:"d",ḍ:"d",ḑ:"d",ḓ:"d",ḏ:"d",đ:"d",ƌ:"d",ɖ:"d",ɗ:"d",ꝺ:"d",ǳ:"dz",ǆ:"dz","ⓔ":"e",ｅ:"e",è:"e",é:"e",ê:"e",ề:"e",ế:"e",ễ:"e",ể:"e",ẽ:"e",ē:"e",ḕ:"e",ḗ:"e",ĕ:"e",ė:"e",ë:"e",ẻ:"e",ě:"e",ȅ:"e",ȇ:"e",ẹ:"e",ệ:"e",ȩ:"e",ḝ:"e",ę:"e",ḙ:"e",ḛ:"e",ɇ:"e",ɛ:"e",ǝ:"e","ⓕ":"f",ｆ:"f",ḟ:"f",ƒ:"f",ꝼ:"f","ⓖ":"g",ｇ:"g",ǵ:"g",ĝ:"g",ḡ:"g",ğ:"g",ġ:"g",ǧ:"g",ģ:"g",ǥ:"g",ɠ:"g","ꞡ":"g",ᵹ:"g",ꝿ:"g","ⓗ":"h",ｈ:"h",ĥ:"h",ḣ:"h",ḧ:"h",ȟ:"h",ḥ:"h",ḩ:"h",ḫ:"h",ẖ:"h",ħ:"h",ⱨ:"h",ⱶ:"h",ɥ:"h",ƕ:"hv","ⓘ":"i",ｉ:"i",ì:"i",í:"i",î:"i",ĩ:"i",ī:"i",ĭ:"i",ï:"i",ḯ:"i",ỉ:"i",ǐ:"i",ȉ:"i",ȋ:"i",ị:"i",į:"i",ḭ:"i",ɨ:"i",ı:"i","ⓙ":"j",ｊ:"j",ĵ:"j",ǰ:"j",ɉ:"j","ⓚ":"k",ｋ:"k",ḱ:"k",ǩ:"k",ḳ:"k",ķ:"k",ḵ:"k",ƙ:"k",ⱪ:"k",ꝁ:"k",ꝃ:"k",ꝅ:"k","ꞣ":"k","ⓛ":"l",ｌ:"l",ŀ:"l",ĺ:"l",ľ:"l",ḷ:"l",ḹ:"l",ļ:"l",ḽ:"l",ḻ:"l",ſ:"l",ł:"l",ƚ:"l",ɫ:"l",ⱡ:"l",ꝉ:"l",ꞁ:"l",ꝇ:"l",ǉ:"lj","ⓜ":"m",ｍ:"m",ḿ:"m",ṁ:"m",ṃ:"m",ɱ:"m",ɯ:"m","ⓝ":"n",ｎ:"n",ǹ:"n",ń:"n",ñ:"n",ṅ:"n",ň:"n",ṇ:"n",ņ:"n",ṋ:"n",ṉ:"n",ƞ:"n",ɲ:"n",ŉ:"n","ꞑ":"n","ꞥ":"n",ǌ:"nj","ⓞ":"o",ｏ:"o",ò:"o",ó:"o",ô:"o",ồ:"o",ố:"o",ỗ:"o",ổ:"o",õ:"o",ṍ:"o",ȭ:"o",ṏ:"o",ō:"o",ṑ:"o",ṓ:"o",ŏ:"o",ȯ:"o",ȱ:"o",ö:"o",ȫ:"o",ỏ:"o",ő:"o",ǒ:"o",ȍ:"o",ȏ:"o",ơ:"o",ờ:"o",ớ:"o",ỡ:"o",ở:"o",ợ:"o",ọ:"o",ộ:"o",ǫ:"o",ǭ:"o",ø:"o",ǿ:"o",ɔ:"o",ꝋ:"o",ꝍ:"o",ɵ:"o",ƣ:"oi",ȣ:"ou",ꝏ:"oo","ⓟ":"p",ｐ:"p",ṕ:"p",ṗ:"p",ƥ:"p",ᵽ:"p",ꝑ:"p",ꝓ:"p",ꝕ:"p","ⓠ":"q",ｑ:"q",ɋ:"q",ꝗ:"q",ꝙ:"q","ⓡ":"r",ｒ:"r",ŕ:"r",ṙ:"r",ř:"r",ȑ:"r",ȓ:"r",ṛ:"r",ṝ:"r",ŗ:"r",ṟ:"r",ɍ:"r",ɽ:"r",ꝛ:"r","ꞧ":"r",ꞃ:"r","ⓢ":"s",ｓ:"s",ß:"s",ś:"s",ṥ:"s",ŝ:"s",ṡ:"s",š:"s",ṧ:"s",ṣ:"s",ṩ:"s",ș:"s",ş:"s",ȿ:"s","ꞩ":"s",ꞅ:"s",ẛ:"s","ⓣ":"t",ｔ:"t",ṫ:"t",ẗ:"t",ť:"t",ṭ:"t",ț:"t",ţ:"t",ṱ:"t",ṯ:"t",ŧ:"t",ƭ:"t",ʈ:"t",ⱦ:"t",ꞇ:"t",ꜩ:"tz","ⓤ":"u",ｕ:"u",ù:"u",ú:"u",û:"u",ũ:"u",ṹ:"u",ū:"u",ṻ:"u",ŭ:"u",ü:"u",ǜ:"u",ǘ:"u",ǖ:"u",ǚ:"u",ủ:"u",ů:"u",ű:"u",ǔ:"u",ȕ:"u",ȗ:"u",ư:"u",ừ:"u",ứ:"u",ữ:"u",ử:"u",ự:"u",ụ:"u",ṳ:"u",ų:"u",ṷ:"u",ṵ:"u",ʉ:"u","ⓥ":"v",ｖ:"v",ṽ:"v",ṿ:"v",ʋ:"v",ꝟ:"v",ʌ:"v",ꝡ:"vy","ⓦ":"w",ｗ:"w",ẁ:"w",ẃ:"w",ŵ:"w",ẇ:"w",ẅ:"w",ẘ:"w",ẉ:"w",ⱳ:"w","ⓧ":"x",ｘ:"x",ẋ:"x",ẍ:"x","ⓨ":"y",ｙ:"y",ỳ:"y",ý:"y",ŷ:"y",ỹ:"y",ȳ:"y",ẏ:"y",ÿ:"y",ỷ:"y",ẙ:"y",ỵ:"y",ƴ:"y",ɏ:"y",ỿ:"y","ⓩ":"z",ｚ:"z",ź:"z",ẑ:"z",ż:"z",ž:"z",ẓ:"z",ẕ:"z",ƶ:"z",ȥ:"z",ɀ:"z",ⱬ:"z",ꝣ:"z",Ά:"Α",Έ:"Ε",Ή:"Η",Ί:"Ι",Ϊ:"Ι",Ό:"Ο",Ύ:"Υ",Ϋ:"Υ",Ώ:"Ω",ά:"α",έ:"ε",ή:"η",ί:"ι",ϊ:"ι",ΐ:"ι",ό:"ο",ύ:"υ",ϋ:"υ",ΰ:"υ",ω:"ω",ς:"σ"};j=a(document),g=function(){var a=1;return function(){return a++}}(),d=O(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,f=".select2-results";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data("select2")!==b&&null!==c.element.data("select2")&&c.element.data("select2").destroy(),this.container=this.createContainer(),this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("select2-hidden-accessible").appendTo(document.body),this.containerId="s2id_"+(c.element.attr("id")||"autogen"+g()),this.containerEventName=this.containerId.replace(/([.])/g,"_").replace(/([;&,\-\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.container.attr("title",c.element.attr("title")),this.body=a("body"),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr("style",c.element.attr("style")),this.container.css(K(c.containerCss,this.opts.element)),this.container.addClass(K(c.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.element.data("select2",this).attr("tabindex","-1").before(this.container).on("click.select2",A),this.container.data("select2",this),this.dropdown=this.container.find(".select2-drop"),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(c.dropdownCssClass,this.opts.element)),this.dropdown.data("select2",this),this.dropdown.on("click",A),this.results=d=this.container.find(f),this.search=e=this.container.find("input.select2-input"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on("click",A),v(this.results),this.dropdown.on("mousemove-filtered",f,this.bind(this.highlightUnderEvent)),this.dropdown.on("touchstart touchmove touchend",f,this.bind(function(a){this._touchEvent=!0,this.highlightUnderEvent(a)})),this.dropdown.on("touchmove",f,this.bind(this.touchMoved)),this.dropdown.on("touchstart touchend",f,this.bind(this.clearTouchMoved)),this.dropdown.on("click",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),x(80,this.results),this.dropdown.on("scroll-debounced",f,this.bind(this.loadMoreIfNeeded)),a(this.container).on("change",".select2-input",function(a){a.stopPropagation()}),a(this.dropdown).on("change",".select2-input",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),A(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),A(a))}),u(e),e.on("keyup-change input paste",this.bind(this.updateResults)),e.on("focus",function(){e.addClass("select2-focused")}),e.on("blur",function(){e.removeClass("select2-focused")}),this.dropdown.on("mouseup",f,this.bind(function(b){a(b.target).closest(".select2-result-selectable").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on("click mouseup mousedown touchstart touchend focusin",function(a){a.stopPropagation()}),this.nextSearchTerm=b,a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr("maxlength",c.maximumInputLength);var h=c.element.prop("disabled");h===b&&(h=!1),this.enable(!h);var i=c.element.prop("readonly");i===b&&(i=!1),this.readonly(i),k=k||q(),this.autofocus=c.element.prop("autofocus"),c.element.prop("autofocus",!1),this.autofocus&&this.focus(),this.search.attr("placeholder",c.searchInputPlaceholder)},destroy:function(){var a=this.opts.element,c=a.data("select2"),d=this;this.close(),a.length&&a[0].detachEvent&&a.each(function(){this.detachEvent("onpropertychange",d._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,c!==b&&(c.container.remove(),c.liveRegion.remove(),c.dropdown.remove(),a.removeClass("select2-offscreen").removeData("select2").off(".select2").prop("autofocus",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr("tabindex"),a.show()),N.call(this,"container","liveRegion","dropdown","results","search")},optionToData:function(a){return a.is("option")?{id:a.prop("value"),text:a.text(),element:a.get(),css:a.attr("class"),disabled:a.prop("disabled"),locked:r(a.attr("locked"),"locked")||r(a.data("locked"),!0)}:a.is("optgroup")?{text:a.attr("label"),children:[],element:a.get(),css:a.attr("class")}:void 0},prepareOpts:function(c){var d,e,f,h,i=this;if(d=c.element,"select"===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each(["id","multiple","ajax","query","createSearchChoice","initSelection","data","tags"],function(){if(this in c)throw new Error("Option '"+this+"' is not allowed for Select2 when attached to a <select> element.")}),c=a.extend({},{populateResults:function(d,e,f){var h,j=this.opts.id,k=this.liveRegion;(h=function(d,e,l){var m,n,o,p,q,r,s,t,u,v;d=c.sortResults(d,e,f);var w=[];for(m=0,n=d.length;n>m;m+=1)o=d[m],q=o.disabled===!0,p=!q&&j(o)!==b,r=o.children&&o.children.length>0,s=a("<li></li>"),s.addClass("select2-results-dept-"+l),s.addClass("select2-result"),s.addClass(p?"select2-result-selectable":"select2-result-unselectable"),q&&s.addClass("select2-disabled"),r&&s.addClass("select2-result-with-children"),s.addClass(i.opts.formatResultCssClass(o)),s.attr("role","presentation"),t=a(document.createElement("div")),t.addClass("select2-result-label"),t.attr("id","select2-result-label-"+g()),t.attr("role","option"),v=c.formatResult(o,t,f,i.opts.escapeMarkup),v!==b&&(t.html(v),s.append(t)),r&&(u=a("<ul></ul>"),u.addClass("select2-result-sub"),h(o.children,u,l+1),s.append(u)),s.data("select2-data",o),w.push(s[0]);e.append(w),k.text(c.formatMatches(d.length))})(e,d,0)}},a.fn.select2.defaults,c),"function"!=typeof c.id&&(f=c.id,c.id=function(a){return a[f]}),a.isArray(c.element.data("select2Tags"))){if("tags"in c)throw"tags specified as both an attribute 'data-select2-tags' and in options of Select2 "+c.element.attr("id");c.tags=c.element.data("select2Tags")}if(e?(c.query=this.bind(function(a){var f,g,h,c={results:[],more:!1},e=a.term;h=function(b,c){var d;b.is("option")?a.matcher(e,b.text(),b)&&c.push(i.optionToData(b)):b.is("optgroup")&&(d=i.optionToData(b),b.children().each2(function(a,b){h(b,d.children)}),d.children.length>0&&c.push(d))},f=d.children(),this.getPlaceholder()!==b&&f.length>0&&(g=this.getPlaceholderOption(),g&&(f=f.not(g))),f.each2(function(a,b){h(b,c.results)}),a.callback(c)}),c.id=function(a){return a.id}):"query"in c||("ajax"in c?(h=c.element.data("ajax-url"),h&&h.length>0&&(c.ajax.url=h),c.query=G.call(c.element,c.ajax)):"data"in c?c.query=H(c.data):"tags"in c&&(c.query=I(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(s(b.val(),c.separator)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){return r(this.id,b.id)?(b=this,!1):void 0}),e.push(b)}),d(e)}))),"function"!=typeof c.query)throw"query function not defined for Select2 "+c.element.attr("id");if("top"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.unshift(b)};else if("bottom"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.push(b)};else if("function"!=typeof c.createSearchChoicePosition)throw"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function";return c},monitorSource:function(){var d,c=this.opts.element,e=this;c.on("change.select2",this.bind(function(){this.opts.element.data("select2-change-triggered")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var a=c.prop("disabled");a===b&&(a=!1),this.enable(!a);var d=c.prop("readonly");d===b&&(d=!1),this.readonly(d),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(K(this.opts.containerCssClass,this.opts.element)),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(this.opts.dropdownCssClass,this.opts.element))}),c.length&&c[0].attachEvent&&c.each(function(){this.attachEvent("onpropertychange",e._sync)}),d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,d!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new d(function(b){a.each(b,e._sync)}),this.propertyObserver.observe(c.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event("select2-selecting",{val:this.id(b),object:b,choice:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:"change",val:this.val()}),this.opts.element.data("select2-change-triggered",!0),this.opts.element.trigger(b),this.opts.element.data("select2-change-triggered",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass("select2-container-disabled",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop("disabled",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===b&&(a=!1),this._readonly!==a&&(this._readonly=a,this.opts.element.prop("readonly",a),this.enableInterface())},opened:function(){return this.container?this.container.hasClass("select2-dropdown-open"):!1},positionDropdown:function(){var t,u,v,w,x,b=this.dropdown,c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),g=a(window),h=g.width(),i=g.height(),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,o=l>=m+f,p=c.top-f>=g.scrollTop(),q=b.outerWidth(!1),r=j>=n+q,s=b.hasClass("select2-drop-above");s?(u=!0,!p&&o&&(v=!0,u=!1)):(u=!1,!o&&p&&(v=!0,u=!0)),v&&(b.hide(),c=this.container.offset(),d=this.container.outerHeight(!1),e=this.container.outerWidth(!1),f=b.outerHeight(!1),j=g.scrollLeft()+h,l=g.scrollTop()+i,m=c.top+d,n=c.left,q=b.outerWidth(!1),r=j>=n+q,b.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(x=a(".select2-results",b)[0],b.addClass("select2-drop-auto-width"),b.css("width",""),q=b.outerWidth(!1)+(x.scrollHeight===x.clientHeight?0:k.width),q>e?e=q:q=e,f=b.outerHeight(!1),r=j>=n+q):this.container.removeClass("select2-drop-auto-width"),"static"!==this.body.css("position")&&(t=this.body.offset(),m-=t.top,n-=t.left),r||(n=c.left+this.container.outerWidth(!1)-q),w={left:n,width:e},u?(w.top=c.top-f,w.bottom="auto",this.container.addClass("select2-drop-above"),b.addClass("select2-drop-above")):(w.top=m,w.bottom="auto",this.container.removeClass("select2-drop-above"),b.removeClass("select2-drop-above")),w=a.extend(w,K(this.opts.dropdownCss,this.opts.element)),b.css(w)},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event("select2-opening"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass("select2-drop-above"),this.dropdown.removeClass("select2-drop-above")},open:function(){return this.shouldOpen()?(this.opening(),j.on("mousemove.select2Event",function(a){i.x=a.pageX,i.y=a.pageY}),!0):!1},opening:function(){var f,b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.addClass("select2-dropdown-open").addClass("select2-container-active"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),f=a("#select2-drop-mask"),0==f.length&&(f=a(document.createElement("div")),f.attr("id","select2-drop-mask").attr("class","select2-drop-mask"),f.hide(),f.appendTo(this.body),f.on("mousedown touchstart click",function(b){n(f);var d,c=a("#select2-drop");c.length>0&&(d=c.data("select2"),d.opts.selectOnBlur&&d.selectHighlighted({noFocus:!0}),d.close(),b.preventDefault(),b.stopPropagation())})),this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f),a("#select2-drop").removeAttr("id"),this.dropdown.attr("id","select2-drop"),f.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass("select2-drop-active");var g=this;this.container.parents().add(window).each(function(){a(this).on(d+" "+c+" "+e,function(){g.opened()&&g.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerEventName,c="scroll."+b,d="resize."+b,e="orientationchange."+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a("#select2-drop-mask").hide(),this.dropdown.removeAttr("id"),this.dropdown.hide(),this.container.removeClass("select2-dropdown-open").removeClass("select2-container-active"),this.results.empty(),j.off("mousemove.select2Event"),this.clearSearch(),this.search.removeClass("select2-active"),this.opts.element.trigger(a.Event("select2-close"))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return K(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var c,d,e,f,g,h,i,j,b=this.results;if(d=this.highlight(),!(0>d)){if(0==d)return void b.scrollTop(0);c=this.findHighlightableChoices().find(".select2-result-label"),e=a(c[d]),j=(e.offset()||{}).top||0,f=j+e.outerHeight(!0),d===c.length-1&&(i=b.find("li.select2-more-results"),i.length>0&&(f=i.offset().top+i.outerHeight(!0))),g=b.offset().top+b.outerHeight(!0),f>g&&b.scrollTop(b.scrollTop()+(f-g)),h=j-b.offset().top,0>h&&"none"!=e.css("display")&&b.scrollTop(b.scrollTop()+h)}},findHighlightableChoices:function(){return this.results.find(".select2-result-selectable:not(.select2-disabled):not(.select2-selected)")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&d<c.length;){d+=b;var e=a(c[d]);if(e.hasClass("select2-result-selectable")&&!e.hasClass("select2-disabled")&&!e.hasClass("select2-selected")){this.highlight(d);break}}},highlight:function(b){var d,e,c=this.findHighlightableChoices();return 0===arguments.length?p(c.filter(".select2-highlighted")[0],c.get()):(b>=c.length&&(b=c.length-1),0>b&&(b=0),this.removeHighlight(),d=a(c[b]),d.addClass("select2-highlighted"),this.search.attr("aria-activedescendant",d.find(".select2-result-label").attr("id")),this.ensureHighlightVisible(),this.liveRegion.text(d.text()),e=d.data("select2-data"),void(e&&this.opts.element.trigger({type:"select2-highlight",val:this.id(e),choice:e})))},removeHighlight:function(){this.results.find(".select2-highlighted").removeClass("select2-highlighted")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(".select2-result-selectable");if(c.length>0&&!c.is(".select2-highlighted")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var c,a=this.results,b=a.find("li.select2-more-results"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-a.height(),c<=this.opts.loadMorePadding&&(b.addClass("select2-active"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:f,page:d,context:g}),e.postprocessResults(c,!1,!1),c.more===!0?(b.detach().appendTo(a).text(K(e.opts.formatLoadMore,e.opts.element,d+1)),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,this.opts.element.trigger({type:"select2-loaded",items:c}))})})))},tokenize:function(){},updateResults:function(c){function m(){d.removeClass("select2-active"),h.positionDropdown(),h.liveRegion.text(e.find(".select2-no-results,.select2-selection-limit,.select2-searching").length?e.text():h.opts.formatMatches(e.find(".select2-result-selectable").length))}function n(a){e.html(a),m()}var g,i,l,d=this.search,e=this.results,f=this.opts,h=this,j=d.val(),k=a.data(this.container,"select2-last-term");if((c===!0||!k||!r(j,k))&&(a.data(this.container,"select2-last-term",j),c===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var o=this.getMaximumSelectionSize();if(o>=1&&(g=this.data(),a.isArray(g)&&g.length>=o&&J(f.formatSelectionTooBig,"formatSelectionTooBig")))return void n("<li class='select2-selection-limit'>"+K(f.formatSelectionTooBig,f.element,o)+"</li>");if(d.val().length<f.minimumInputLength)return n(J(f.formatInputTooShort,"formatInputTooShort")?"<li class='select2-no-results'>"+K(f.formatInputTooShort,f.element,d.val(),f.minimumInputLength)+"</li>":""),void(c&&this.showSearch&&this.showSearch(!0));if(f.maximumInputLength&&d.val().length>f.maximumInputLength)return void n(J(f.formatInputTooLong,"formatInputTooLong")?"<li class='select2-no-results'>"+K(f.formatInputTooLong,f.element,d.val(),f.maximumInputLength)+"</li>":"");f.formatSearching&&0===this.findHighlightableChoices().length&&n("<li class='select2-searching'>"+K(f.formatSearching,f.element)+"</li>"),d.addClass("select2-active"),this.removeHighlight(),i=this.tokenize(),i!=b&&null!=i&&d.val(i),this.resultsPage=1,f.query({element:f.element,term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(g){var i;if(l==this.queryCount){if(!this.opened())return void this.search.removeClass("select2-active");if(g.hasError!==b&&J(f.formatAjaxError,"formatAjaxError"))return void n("<li class='select2-ajax-error'>"+K(f.formatAjaxError,f.element,g.jqXHR,g.textStatus,g.errorThrown)+"</li>");if(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&""!==d.val()&&(i=this.opts.createSearchChoice.call(h,d.val(),g.results),i!==b&&null!==i&&h.id(i)!==b&&null!==h.id(i)&&0===a(g.results).filter(function(){return r(h.id(this),h.id(i))}).length&&this.opts.createSearchChoicePosition(g.results,i)),0===g.results.length&&J(f.formatNoMatches,"formatNoMatches"))return void n("<li class='select2-no-results'>"+K(f.formatNoMatches,f.element,d.val())+"</li>");e.empty(),h.opts.populateResults.call(this,e,g.results,{term:d.val(),page:this.resultsPage,context:null}),g.more===!0&&J(f.formatLoadMore,"formatLoadMore")&&(e.append("<li class='select2-more-results'>"+f.escapeMarkup(K(f.formatLoadMore,f.element,this.resultsPage))+"</li>"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),m(),this.opts.element.trigger({type:"select2-loaded",items:g})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass("select2-container-active"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus")},focusSearch:function(){y(this.search)},selectHighlighted:function(a){if(this._touchMoved)return void this.clearTouchMoved();var b=this.highlight(),c=this.results.find(".select2-highlighted"),d=c.closest(".select2-result").data("select2-data");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var c=this.select.children("option").first();if(this.opts.placeholderOption!==b)return"first"===this.opts.placeholderOption&&c||"function"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(""===a.trim(c.text())&&""===c.val())return c}},initContainerWidth:function(){function c(){var c,d,e,f,g,h;if("off"===this.opts.width)return null;if("element"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px";if("copy"===this.opts.width||"resolve"===this.opts.width){if(c=this.opts.element.attr("style"),c!==b)for(d=c.split(";"),f=0,g=d.length;g>f;f+=1)if(h=d[f].replace(/\s/g,""),e=h.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];return"resolve"===this.opts.width?(c=this.opts.element.css("width"),c.indexOf("%")>0?c:0===this.opts.element.outerWidth(!1)?"auto":this.opts.element.outerWidth(!1)+"px"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css("width",d)}}),e=O(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container"}).html(["<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>","   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>","   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>","</a>","<label for='' class='select2-offscreen'></label>","<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />","<div class='select2-drop select2-display-none'>","   <div class='select2-search'>","       <label for='' class='select2-offscreen'></label>","       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'","       aria-autocomplete='list' />","   </div>","   <ul class='select2-results' role='listbox'>","   </ul>","</div>"].join(""));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop("disabled",!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e))),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop("disabled",!0).val(""),this.updateResults(!0),this.opts.element.trigger(a.Event("select2-open"))
},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass("select2-container-active")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop("disabled",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){a("label[for='"+this.focusser.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"selection","focusser")},initContainer:function(){var b,h,d=this.container,e=this.dropdown,f=g();this.showSearch(this.opts.minimumResultsForSearch<0?!1:!0),this.selection=b=d.find(".select2-choice"),this.focusser=d.find(".select2-focusser"),b.find(".select2-chosen").attr("id","select2-chosen-"+f),this.focusser.attr("aria-labelledby","select2-chosen-"+f),this.results.attr("id","select2-results-"+f),this.search.attr("aria-owns","select2-results-"+f),this.focusser.attr("id","s2id_autogen"+f),h=a("label[for='"+this.opts.element.attr("id")+"']"),this.focusser.prev().text(h.text()).attr("for",this.focusser.attr("id"));var i=this.opts.element.attr("title");this.opts.element.attr("title",i||h.text()),this.focusser.attr("tabindex",this.elementTabIndex),this.search.attr("id",this.focusser.attr("id")+"_search"),this.search.prev().text(a("label[for='"+this.focusser.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&229!=a.keyCode){if(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)return void A(a);switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:return void this.selectHighlighted({noFocus:!0});case c.ESC:return this.cancel(a),void A(a)}}})),this.search.on("blur",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.ESC){if(this.opts.openOnEnter===!1&&a.which===c.ENTER)return void A(a);if(a.which==c.DOWN||a.which==c.UP||a.which==c.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),void A(a)}return a.which==c.DELETE||a.which==c.BACKSPACE?(this.opts.allowClear&&this.clear(),void A(a)):void 0}})),u(this.focusser),this.focusser.on("keyup-change input",this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on("mousedown touchstart","abbr",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),B(a),this.close(),this.selection.focus())})),b.on("mousedown touchstart",this.bind(function(c){n(b),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),A(c)})),e.on("mousedown touchstart",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),b.on("focus",this.bind(function(a){A(a)})),this.focusser.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})).on("blur",this.bind(function(){this.opened()||(this.container.removeClass("select2-container-active"),this.opts.element.trigger(a.Event("select2-blur")))})),this.search.on("focus",this.bind(function(){this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active")})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.setPlaceholder()},clear:function(b){var c=this.selection.data("select2-data");if(c){var d=a.Event("select2-clearing");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():""),this.selection.find(".select2-chosen").empty(),this.selection.removeData("select2-data"),this.setPlaceholder(),b!==!1&&(this.opts.element.trigger({type:"select2-removed",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.setPlaceholder(),c.nextSearchTerm=c.opts.nextSearchTerm(a,c.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()===b?!1:(a=this.getPlaceholderOption())!==b&&a.prop("selected")||""===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val()},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find("option").filter(function(){return this.selected&&!this.disabled});b(c.optionToData(d))}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var g=r(e,b.id(d));return g&&(f=d),g},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(".select2-chosen").html(this.opts.escapeMarkup(a)),this.selection.addClass("select2-default"),this.container.removeClass("select2-allowclear")}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){return r(e.id(b.data("select2-data")),e.opts.element.val())?(d=a,!1):void 0}),c!==!1&&this.highlight(b===!0&&d>=0?d:0),b===!0){var g=this.opts.minimumResultsForSearch;g>=0&&this.showSearch(L(a.results)>=g)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(".select2-search").toggleClass("select2-search-hidden",!b),this.dropdown.find(".select2-search").toggleClass("select2-offscreen",!b),a(this.dropdown,this.container).toggleClass("select2-with-searchbox",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:"select2-selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var d,e,c=this.selection.find(".select2-chosen");this.selection.data("select2-data",a),c.empty(),null!==a&&(d=this.opts.formatSelection(a,c,this.opts.escapeMarkup)),d!==b&&c.append(d),e=this.opts.formatSelectionCssClass(a,c),e!==b&&c.addClass(e),this.selection.removeClass("select2-default"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass("select2-allowclear")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find("option").filter(function(){return this.selected}).each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return void this.clear(c);if(this.opts.initSelection===b)throw new Error("cannot call val() if initSelection() is not defined");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):""),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(""),this.focusser.val("")},data:function(a){var c,d=!1;return 0===arguments.length?(c=this.selection.data("select2-data"),c==b&&(c=null),c):(arguments.length>1&&(d=arguments[1]),void(a?(c=this.data(),this.opts.element.val(a?this.id(a):""),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d)))}}),f=O(d,{createContainer:function(){var b=a(document.createElement("div")).attr({"class":"select2-container select2-container-multi"}).html(["<ul class='select2-choices'>","  <li class='select2-search-field'>","    <label for='' class='select2-offscreen'></label>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>","  </li>","</ul>","<div class='select2-drop select2-drop-multi select2-display-none'>","   <ul class='select2-results'>","   </ul>","</div>"].join(""));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return"select"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find("option").filter(function(){return this.selected&&!this.disabled}).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:"data"in b&&(b.initSelection=b.initSelection||function(c,d){var e=s(c.val(),b.separator),f=[];b.query({matcher:function(c,d,g){var h=a.grep(e,function(a){return r(a,b.id(g))}).length;return h&&f.push(g),h},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var g=e[c],h=0;h<f.length;h++){var i=f[h];if(r(g,b.id(i))){a.push(i),f.splice(h,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(".select2-search-choice-focus");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger("choice-deselected",b),b.removeClass("select2-search-choice-focus"),a&&a.length&&(this.close(),a.addClass("select2-search-choice-focus"),this.opts.element.trigger("choice-selected",a)))},destroy:function(){a("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),this.parent.destroy.apply(this,arguments),N.call(this,"searchContainer","selection")},initContainer:function(){var d,b=".select2-choices";this.searchContainer=this.container.find(".select2-search-field"),this.selection=d=this.container.find(b);var e=this;this.selection.on("click",".select2-search-choice:not(.select2-locked)",function(){e.search[0].focus(),e.selectChoice(a(this))}),this.search.attr("id","s2id_autogen"+g()),this.search.prev().text(a("label[for='"+this.opts.element.attr("id")+"']").text()).attr("for",this.search.attr("id")),this.search.on("input paste",this.bind(function(){this.search.attr("placeholder")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var b=d.find(".select2-search-choice-focus"),e=b.prev(".select2-search-choice:not(.select2-locked)"),f=b.next(".select2-search-choice:not(.select2-locked)"),g=z(this.search);if(b.length&&(a.which==c.LEFT||a.which==c.RIGHT||a.which==c.BACKSPACE||a.which==c.DELETE||a.which==c.ENTER)){var h=b;return a.which==c.LEFT&&e.length?h=e:a.which==c.RIGHT?h=f.length?f:null:a.which===c.BACKSPACE?this.unselect(b.first())&&(this.search.width(10),h=e.length?e:f):a.which==c.DELETE?this.unselect(b.first())&&(this.search.width(10),h=f.length?f:null):a.which==c.ENTER&&(h=null),this.selectChoice(h),A(a),void(h&&h.length||this.open())}if((a.which===c.BACKSPACE&&1==this.keydowns||a.which==c.LEFT)&&0==g.offset&&!g.length)return this.selectChoice(d.find(".select2-search-choice:not(.select2-locked)").last()),void A(a);if(this.selectChoice(null),this.opened())switch(a.which){case c.UP:case c.DOWN:return this.moveHighlight(a.which===c.UP?-1:1),void A(a);case c.ENTER:return this.selectHighlighted(),void A(a);case c.TAB:return this.selectHighlighted({noFocus:!0}),void this.close();case c.ESC:return this.cancel(a),void A(a)}if(a.which!==c.TAB&&!c.isControl(a)&&!c.isFunctionKey(a)&&a.which!==c.BACKSPACE&&a.which!==c.ESC){if(a.which===c.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===c.PAGE_UP||a.which===c.PAGE_DOWN)&&A(a),a.which===c.ENTER&&A(a)}}})),this.search.on("keyup",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on("blur",this.bind(function(b){this.container.removeClass("select2-container-active"),this.search.removeClass("select2-focused"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event("select2-blur"))})),this.container.on("click",b,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(".select2-search-choice").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on("focus",b,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass("select2-container-active")||this.opts.element.trigger(a.Event("select2-focus")),this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.addClass("select2-offscreen"),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this.isInterfaceEnabled())},initSelection:function(){if(""===this.opts.element.val()&&""===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||""!==this.opts.element.val()){var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass("select2-focused")===!1?(this.search.val(a).addClass("select2-default"),this.search.width(c>0?c:this.container.css("width"))):this.search.val("").width(10)},clearPlaceholder:function(){this.search.hasClass("select2-default")&&this.search.val("").removeClass("select2-default")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),""===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(a.Event("select2-open"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass("select2-focused")},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){p(e.id(this),c)<0&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(".select2-search-choice").remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,c){this.triggerSelect(a)&&""!==a.text&&(this.addSelectedChoice(a),this.opts.element.trigger({type:"selected",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),c&&c.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var j,k,d=!c.locked,e=a("<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>"),f=a("<li class='select2-search-choice select2-locked'><div></div></li>"),g=d?e:f,h=this.id(c),i=this.getVal();j=this.opts.formatSelection(c,g.find("div"),this.opts.escapeMarkup),j!=b&&g.find("div").replaceWith("<div>"+j+"</div>"),k=this.opts.formatSelectionCssClass(c,g.find("div")),k!=b&&g.addClass(k),d&&g.find(".select2-search-choice-close").on("mousedown",A).on("click dblclick",this.bind(function(b){this.isInterfaceEnabled()&&(this.unselect(a(b.target)),this.selection.find(".select2-search-choice-focus").removeClass("select2-search-choice-focus"),A(b),this.close(),this.focusSearch())})).on("focus",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass("select2-container-active"),this.dropdown.addClass("select2-drop-active"))})),g.data("select2-data",c),g.insertBefore(this.searchContainer),i.push(h),this.setVal(i)},unselect:function(b){var d,e,c=this.getVal();if(b=b.closest(".select2-search-choice"),0===b.length)throw"Invalid argument: "+b+". Must be .select2-search-choice";if(d=b.data("select2-data")){var f=a.Event("select2-removing");if(f.val=this.id(d),f.choice=d,this.opts.element.trigger(f),f.isDefaultPrevented())return!1;for(;(e=p(this.id(d),c))>=0;)c.splice(e,1),this.setVal(c),this.select&&this.postprocessResults();return b.remove(),this.opts.element.trigger({type:"select2-removed",val:this.id(d),choice:d}),this.triggerChange({removed:d}),!0}},postprocessResults:function(a,b,c){var d=this.getVal(),e=this.results.find(".select2-result"),f=this.results.find(".select2-result-with-children"),g=this;e.each2(function(a,b){var c=g.id(b.data("select2-data"));p(c,d)>=0&&(b.addClass("select2-selected"),b.find(".select2-result-selectable").addClass("select2-selected"))}),f.each2(function(a,b){b.is(".select2-result-selectable")||0!==b.find(".select2-result-selectable:not(.select2-selected)").length||b.addClass("select2-selected")}),-1==this.highlight()&&c!==!1&&g.highlight(0),!this.opts.createSearchChoice&&!e.filter(".select2-result:not(.select2-selected)").length>0&&(!a||a&&!a.more&&0===this.results.find(".select2-no-results").length)&&J(g.opts.formatNoMatches,"formatNoMatches")&&this.results.append("<li class='select2-no-results'>"+K(g.opts.formatNoMatches,g.opts.element,g.search.val())+"</li>")},getMaxSearchWidth:function(){return this.selection.width()-t(this.search)},resizeSearch:function(){var a,b,c,d,e,f=t(this.search);a=C(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,a>e&&(e=c-f),40>e&&(e=c-f),0>=e&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),s(a,this.opts.separator))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){p(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?"":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)r(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c>0&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(""),this.updateSelection([]),this.clearSearch(),void(d&&this.triggerChange({added:this.data(),removed:e}));if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error("val() cannot be called if initSelection() is not defined");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error("Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(".select2-search-choice").each(function(){b.push(c.opts.id(a(this).data("select2-data")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var e,f,d=this;return 0===arguments.length?this.selection.children(".select2-search-choice").map(function(){return a(this).data("select2-data")}).get():(f=this.data(),b||(b=[]),e=a.map(b,function(a){return d.opts.id(a)}),this.setVal(e),this.updateSelection(b),this.clearSearch(),void(c&&this.triggerChange(this.buildChangeDetails(f,this.data()))))}}),a.fn.select2=function(){var d,e,f,g,h,c=Array.prototype.slice.call(arguments,0),i=["val","destroy","opened","open","close","focus","isFocused","container","dropdown","onSortStart","onSortEnd","enable","disable","readonly","positionDropdown","data","search"],j=["opened","isFocused","container","dropdown"],k=["val","data"],l={search:"externalSearch"};return this.each(function(){if(0===c.length||"object"==typeof c[0])d=0===c.length?{}:a.extend({},c[0]),d.element=a(this),"select"===d.element.get(0).tagName.toLowerCase()?h=d.element.prop("multiple"):(h=d.multiple||!1,"tags"in d&&(d.multiple=h=!0)),e=h?new window.Select2["class"].multi:new window.Select2["class"].single,e.init(d);else{if("string"!=typeof c[0])throw"Invalid arguments to select2 plugin: "+c;if(p(c[0],i)<0)throw"Unknown method: "+c[0];if(g=b,e=a(this).data("select2"),e===b)return;if(f=c[0],"container"===f?g=e.container:"dropdown"===f?g=e.dropdown:(l[f]&&(f=l[f]),g=e[f].apply(e,c.slice(1))),p(c[0],j)>=0||p(c[0],k)>=0&&1==c.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:"copy",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:"",dropdownCssClass:"",formatResult:function(a,b,c,d){var e=[];return E(a.text,c.term,e,d),e.join("")},formatSelection:function(a,c,d){return a?d(a.text):b},sortResults:function(a){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(){return b},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==b?null:a.id},matcher:function(a,b){return o(""+b).toUpperCase().indexOf(o(""+a).toUpperCase())>=0},separator:",",tokenSeparators:[],tokenizer:M,escapeMarkup:F,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b},searchInputPlaceholder:"",createSearchChoicePosition:"top",shouldFocusInput:function(a){var b="ontouchstart"in window||navigator.msMaxTouchPoints>0;return b&&a.opts.minimumResultsForSearch<0?!1:!0}},a.fn.select2.locales=[],a.fn.select2.locales.en={formatMatches:function(a){return 1===a?"One result is available, press enter to select it.":a+" results are available, use up and down arrow keys to navigate."},formatNoMatches:function(){return"No matches found"},formatAjaxError:function(){return"Loading failed"},formatInputTooShort:function(a,b){var c=b-a.length;return"Please enter "+c+" or more character"+(1==c?"":"s")},formatInputTooLong:function(a,b){var c=a.length-b;return"Please delete "+c+" character"+(1==c?"":"s")},formatSelectionTooBig:function(a){return"You can only select "+a+" item"+(1==a?"":"s")},formatLoadMore:function(){return"Loading more results…"},formatSearching:function(){return"Searching…"}},a.extend(a.fn.select2.defaults,a.fn.select2.locales.en),a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:"GET",cache:!1,dataType:"json"}},window.Select2={query:{ajax:G,local:H,tags:I},util:{debounce:w,markMatch:E,escapeMarkup:F,stripDiacritics:o},"class":{"abstract":d,single:e,multi:f}}}}(jQuery);var FrequencyPlannerControls=function(){};FrequencyPlannerControls.prototype.init=function(){this.f&&(this.f.destroy(),this.f=null),this.canvas=document.getElementById("frequency_planner_canvas"),this.canvas&&(this.create(),this.createBindings())},FrequencyPlannerControls.prototype.getBounds=function(){var start=Math.floor(this.f.transformer.startTimestamp),end=Math.floor(this.f.transformer.endTimestamp);return start-=86400,end+=86400,{start:start,end:end}},FrequencyPlannerControls.prototype.updateTimestamps=function(updateRequest){if(this.f&&this.f.transformer)for(var i=updateRequest.length-1;i>=0;i--)if("frequency_planner"==updateRequest[i].what){updateRequest[i].datasrc=this.getBounds();break}},FrequencyPlannerControls.prototype.create=function(){if(!this.f&&this.canvas){var canvas=this.canvas,data={bandwidth:[],allocation:[]};canvas.height=$(window).height()-270,canvas.width=$("#frequency_planner").width(),this.f=new FrequencyPlanner(canvas,data,{tzOffset:$("#tzoffset").val(),autoupdate:!0,clickHandler:this.clickHandler()}),subscribe({what:"frequency_planner",datasrc:this.getBounds()}),updateTick([{what:"frequency_planner",datasrc:this.getBounds()}])}var display_canvas=$("#frequency_display_canvas")[0];display_canvas.width=$("#frequency_planner").width();var display_data=JSON.parse($("#frequency_plan").html());$(".frequency-display-switcher").click(function(){$(this).hasClass("closed")?($(".white_lightshadow").animate({height:"75px"},100),$(".frequency_display_switched").show(),$(this).removeClass("closed").addClass("opened"),$(".frequency-display-switcher i").removeClass("fa-caret-down").addClass("fa-caret-up")):($(".white_lightshadow").animate({height:"2px"},100),$(".frequency_display_switched").hide(),$(this).removeClass("opened").addClass("closed"),$(".frequency-display-switcher i").removeClass("fa-caret-up").addClass("fa-caret-down"))}),subscribe({what:"frequency_display"}),this.fdisp=new FrequencyDisplay(display_canvas,display_data,{})},FrequencyPlannerControls.prototype.serviceForm=function(planner_id,alloc_id,self){var self=this,params={action:"getform",planner_id:planner_id,alloc_id:alloc_id};$("#add_res_form").draggable(),$.get("/frequency_plan/",params,function(data){$("#fp_form_content").html(data),self.pickDateText=$(".custom_start_date").text(),$("#add_res_form").slideDown(100),$(".custom_start_date").click(function(){$(".start_datepicker_container").toggle()}),$(".custom_end_date").click(function(){$(".end_datepicker_container").toggle()});var set_duration=function(){var count=parseInt($(".duration").val()),start_time=$(".start_hm").val(),start_date=$(".start_date").val();time=Date.parse(start_date+" "+start_time),time.add(count).minutes(),$(".end_hm").val(time.toString("HH:mm"));var end_date=time.toString("yyyy-MM-dd");$(".end_date").val()!=end_date&&($(".end_date").val(end_date),$(".end_date_type").removeClass("selected"),$(".custom_end_date").text(end_date),$(".custom_end_date").addClass("selected"))};$(".set_duration").click(set_duration),$(".duration").blur(set_duration),$(".start_date_label").click(function(){var selected_date=$(this).attr("data-date");$(".start_date").val(selected_date),$(".start_date_type").removeClass("selected"),$(this).addClass("selected"),$(".custom_start_date").text(self.pickDateText),$(".start_datepicker_container").hide()}),$(".end_date_label").click(function(){var selected_date=$(this).attr("data-date");$(".end_date").val(selected_date),$(".end_date_type").removeClass("selected"),$(this).addClass("selected"),$(".custom_end_date").text(self.pickDateText),$(".end_datepicker_container").hide()}),$(".start_datepicker").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",defaultDate:$(".start_date").val(),altField:".start_date",altFormat:"yy-mm-dd",onSelect:function(date){$(".start_date_type").removeClass("selected"),$(".custom_start_date").text(date),$(".custom_start_date").addClass("selected"),$(".start_datepicker_container").hide()}}),$(".end_datepicker").datepicker({changeMonth:!0,changeYear:!0,dateFormat:"yy-mm-dd",defaultDate:$(".end_date").val(),altField:".end_date",altFormat:"yy-mm-dd",onSelect:function(date){$(".end_date_type").removeClass("selected"),$(".custom_end_date").text(date),$(".custom_end_date").addClass("selected"),$(".end_datepicker_container").hide()}});var lvl_auto=function(){$(".txlvl_auto").is(":checked")?$(".txlvl_val").hide():$(".txlvl_val").show()};$(".txlvl_auto").click(lvl_auto),lvl_auto(),$(".timepicker").timepicker(),$(".t_advanced").click(function(){$(".sh_advanced").slideToggle("fast")}),$("#cancel").click(function(){return self.add_res_form_cnt++,$("#add_res_form").slideUp(100),!1}),addDbFieldsHandlers();var processJsonResponce=function(data){var text=$("<div>").html(data).html(),obj=JSON.parse(text);0==obj.error?($("#add_res_form").slideUp(100),self.add_res_form_cnt++,self.f.update(obj)):$("#error_desc").html(obj.data).show()};$("#add_submit").click(function(){var url="/frequency_plan/insert/";return 0!=$("#frequencyplannerallocation\\[alloc_id\\]").val()&&(url="/frequency_plan/"+$("#frequencyplannerallocation\\[alloc_id\\]").val()+"/update/"),$.post(url,$("#form_add").serializeArray(),processJsonResponce),!1}),$("#delete_submit").click(function(){if(0==$("#frequencyplannerallocation\\[alloc_id\\]").val())return!1;var url="/frequency_plan/"+$("#frequencyplannerallocation\\[alloc_id\\]").val()+"/delete/";return $.get(url,null,processJsonResponce),!1})})},FrequencyPlannerControls.prototype.clickHandler=function(){var self=this;return function(data){var planner_id=$("#sh_id").val();self.serviceForm(planner_id,data.id)}},FrequencyPlannerControls.prototype.createBindings=function(){var self=this;self.add_res_form_cnt=0,$("#add_reservation").click(function(){self.add_res_form_cnt%2==0?self.serviceForm($("#sh_id").val(),0):$("#add_res_form").slideUp(100),self.add_res_form_cnt++}),$("#range_hour").click(function(){self.f.updateRange(3600)}),$("#range_day").click(function(){self.f.updateRange(86400)}),$("#range_twodays").click(function(){self.f.updateRange(172800)}),$("#range_week").click(function(){self.f.updateRange(604800)}),$("#range_month").click(function(){self.f.updateRange(2592e3)});var getDiff=function(){var period=$("#period").val(),diff=86400;switch(period){case"hour":diff=3600;break;case"day":diff=86400;break;case"twodays":diff=86400;break;case"week":diff=86400;break;case"month":diff=86400}return diff},plusminus=function(sign){var diff=getDiff(),start_time=$("#start_time").val()- -1*diff*sign;$("#start_time").val(start_time),chart_reload()};$("#minus").click(function(){return plusminus(-1),!1}),$("#plus").click(function(){return plusminus(1),!1})};var FrequencyPlannerTicker=function(){};FrequencyPlannerTicker.frequencyTicks=function(a,b,pixels){var scale,low_val,high_val,spacing,pixels_per_tick=40,mults=[1,2,5,10,20,50,100],base=10,max_ticks=Math.ceil(pixels/pixels_per_tick),units_per_tick=Math.abs(b-a)/max_ticks,base_power=Math.floor(Math.log(units_per_tick)/Math.log(base)),base_scale=Math.pow(base,base_power);for(j=0;j<mults.length&&(scale=base_scale*mults[j],low_val=Math.floor(a/scale)*scale,high_val=Math.ceil(b/scale)*scale,nTicks=Math.abs(high_val-low_val)/scale,spacing=pixels/nTicks,!(spacing>pixels_per_tick));j++);for(ticks=[],low_val>high_val&&(scale*=-1),i=0;nTicks>i;i++)tickV=low_val+i*scale,ticks.push({v:tickV});var round_number=function(num,dec){return Math.round(num*Math.pow(10,dec))/Math.pow(10,dec)},pow=function(base,exp){return 0>exp?1/Math.pow(base,-exp):Math.pow(base,exp)},formatter=function(x){var label,maxNumberWidth=4,digits=3;
0!==x&&(Math.abs(x)>=Math.pow(10,maxNumberWidth)||Math.abs(x)<Math.pow(10,-digits))&&(label=x.toExponential(digits));for(var k=1e3,k_labels=["K","M","B","T","Q"],absx=Math.abs(x),n=pow(k,k_labels.length),j=k_labels.length-1;j>=0;j--,n/=k)if(absx>=n){label=round_number(x/n,digits);break}return label};for(i=0;i<ticks.length;i++)void 0===ticks[i].label&&(ticks[i].label=formatter(ticks[i].v));return ticks.splice(1)},FrequencyPlannerTicker.SECONDLY=0,FrequencyPlannerTicker.TWO_SECONDLY=1,FrequencyPlannerTicker.FIVE_SECONDLY=2,FrequencyPlannerTicker.TEN_SECONDLY=3,FrequencyPlannerTicker.THIRTY_SECONDLY=4,FrequencyPlannerTicker.MINUTELY=5,FrequencyPlannerTicker.TWO_MINUTELY=6,FrequencyPlannerTicker.FIVE_MINUTELY=7,FrequencyPlannerTicker.TEN_MINUTELY=8,FrequencyPlannerTicker.THIRTY_MINUTELY=9,FrequencyPlannerTicker.HOURLY=10,FrequencyPlannerTicker.TWO_HOURLY=11,FrequencyPlannerTicker.SIX_HOURLY=12,FrequencyPlannerTicker.DAILY=13,FrequencyPlannerTicker.WEEKLY=14,FrequencyPlannerTicker.MONTHLY=15,FrequencyPlannerTicker.QUARTERLY=16,FrequencyPlannerTicker.BIANNUAL=17,FrequencyPlannerTicker.ANNUAL=18,FrequencyPlannerTicker.DECADAL=19,FrequencyPlannerTicker.CENTENNIAL=20,FrequencyPlannerTicker.NUM_GRANULARITIES=21,FrequencyPlannerTicker.SHORT_SPACINGS=[],FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.SECONDLY]=1e3,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.TWO_SECONDLY]=2e3,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.FIVE_SECONDLY]=5e3,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.TEN_SECONDLY]=1e4,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.THIRTY_SECONDLY]=3e4,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.MINUTELY]=6e4,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.TWO_MINUTELY]=12e4,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.FIVE_MINUTELY]=3e5,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.TEN_MINUTELY]=6e5,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.THIRTY_MINUTELY]=18e5,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.HOURLY]=36e5,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.TWO_HOURLY]=72e5,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.SIX_HOURLY]=216e5,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.DAILY]=864e5,FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.WEEKLY]=6048e5,FrequencyPlannerTicker.LONG_TICK_PLACEMENTS=[],FrequencyPlannerTicker.LONG_TICK_PLACEMENTS[FrequencyPlannerTicker.MONTHLY]={months:[0,1,2,3,4,5,6,7,8,9,10,11],year_mod:1},FrequencyPlannerTicker.LONG_TICK_PLACEMENTS[FrequencyPlannerTicker.QUARTERLY]={months:[0,3,6,9],year_mod:1},FrequencyPlannerTicker.LONG_TICK_PLACEMENTS[FrequencyPlannerTicker.BIANNUAL]={months:[0,6],year_mod:1},FrequencyPlannerTicker.LONG_TICK_PLACEMENTS[FrequencyPlannerTicker.ANNUAL]={months:[0],year_mod:1},FrequencyPlannerTicker.LONG_TICK_PLACEMENTS[FrequencyPlannerTicker.DECADAL]={months:[0],year_mod:10},FrequencyPlannerTicker.LONG_TICK_PLACEMENTS[FrequencyPlannerTicker.CENTENNIAL]={months:[0],year_mod:100},FrequencyPlannerTicker.dateSetters={ms:Date.prototype.setMilliseconds,s:Date.prototype.setSeconds,m:Date.prototype.setMinutes,h:Date.prototype.setHours},FrequencyPlannerTicker.setDateSameTZ=function(d,parts){var tz=d.getTimezoneOffset();for(var k in parts)if(parts.hasOwnProperty(k)){var setter=FrequencyPlannerTicker.dateSetters[k];if(!setter)throw"Invalid setter: "+k;setter.call(d,parts[k]),d.getTimezoneOffset()!=tz&&d.setTime(d.getTime()+60*(tz-d.getTimezoneOffset())*1e3)}},FrequencyPlannerTicker.hmsString_=function(date){var zeropad=function(x){return 10>x?"0"+x:""+x},d=new Date(date);return d.getSeconds()?zeropad(d.getHours())+":"+zeropad(d.getMinutes())+":"+zeropad(d.getSeconds()):zeropad(d.getHours())+":"+zeropad(d.getMinutes())},FrequencyPlannerTicker.dateAxisFormatter=function(date,granularity,options){var zeropad=function(x){return 10>x?"0"+x:""+x};date=new Date(date.getTime()+1e3*options.tzOffset);var date_utc=new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds());date_utc.addSeconds($("#tzoffset").val());var date=date_utc;return date.getFullYear()+"-"+zeropad(date.getMonth()+1)+"-"+zeropad(date.getDate())+" "+FrequencyPlannerTicker.hmsString_(date.getTime())},FrequencyPlannerTicker.getDateAxis=function(start_time,end_time,granularity,options){var t,formatter=FrequencyPlannerTicker.dateAxisFormatter,ticks=[];if(granularity<FrequencyPlannerTicker.MONTHLY){var spacing=FrequencyPlannerTicker.SHORT_SPACINGS[granularity],g=spacing/1e3,d=new Date(start_time);FrequencyPlannerTicker.setDateSameTZ(d,{ms:0});var x;60>=g?(x=d.getSeconds(),FrequencyPlannerTicker.setDateSameTZ(d,{s:x-x%g})):(FrequencyPlannerTicker.setDateSameTZ(d,{s:0}),g/=60,60>=g?(x=d.getMinutes(),FrequencyPlannerTicker.setDateSameTZ(d,{m:x-x%g})):(FrequencyPlannerTicker.setDateSameTZ(d,{m:0}),g/=60,24>=g?(x=d.getHours(),d.setHours(x-x%g)):(d.setHours(0),g/=24,7==g&&d.setDate(d.getDate()-d.getDay())))),start_time=d.getTime();var start_offset_min=new Date(start_time).getTimezoneOffset(),check_dst=spacing>=FrequencyPlannerTicker.SHORT_SPACINGS[FrequencyPlannerTicker.TWO_HOURLY];for(t=start_time;end_time>=t;t+=spacing){if(d=new Date(t),check_dst&&d.getTimezoneOffset()!=start_offset_min){var delta_min=d.getTimezoneOffset()-start_offset_min;t+=60*delta_min*1e3,d=new Date(t),start_offset_min=d.getTimezoneOffset(),new Date(t+spacing).getTimezoneOffset()!=start_offset_min&&(t+=spacing,d=new Date(t),start_offset_min=d.getTimezoneOffset())}var v=.001*t;ticks.push({v:v,label:formatter(d,granularity,options)})}}else{var months,year_mod=1;granularity<FrequencyPlannerTicker.NUM_GRANULARITIES?(months=FrequencyPlannerTicker.LONG_TICK_PLACEMENTS[granularity].months,year_mod=FrequencyPlannerTicker.LONG_TICK_PLACEMENTS[granularity].year_mod):FrequencyPlannerTicker.warn("Span of dates is too long");for(var start_year=new Date(start_time).getFullYear(),end_year=new Date(end_time).getFullYear(),zeropad=function(x){return 10>x?"0"+x:""+x},dateStrToMillis=function(str){return new Date(str).getTime()},i=start_year;end_year>=i;i++)if(i%year_mod===0)for(var j=0;j<months.length;j++){var date_str=i+"/"+zeropad(1+months[j])+"/01";if(t=dateStrToMillis(date_str),!(start_time>t||t>end_time)){var v=.001*t;ticks.push({v:v,label:formatter(new Date(t),granularity,options)})}}}return ticks},FrequencyPlannerTicker.dateTicks=function(a,b,pixels,options){a*=1e3,b*=1e3;var numDateTicks=function(start_time,end_time,granularity){if(granularity<FrequencyPlannerTicker.MONTHLY){var spacing=FrequencyPlannerTicker.SHORT_SPACINGS[granularity];return Math.floor(.5+1*(end_time-start_time)/spacing)}var tickPlacement=FrequencyPlannerTicker.LONG_TICK_PLACEMENTS[granularity],msInYear=31557807360,num_years=1*(end_time-start_time)/msInYear;return Math.floor(.5+1*num_years*tickPlacement.months.length/tickPlacement.year_mod)},pickDateTickGranularity=function(a,b,pixels){for(var pixels_per_tick=35,i=0;i<FrequencyPlannerTicker.NUM_GRANULARITIES;i++){var num_ticks=numDateTicks(a,b,i);if(pixels/num_ticks>=pixels_per_tick)return i}return-1},chosen=pickDateTickGranularity(a,b,pixels);return chosen>=0?FrequencyPlannerTicker.getDateAxis(a,b,chosen,options):[]},window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1e3/60)}}(),window.cancelRequestAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout}(),CanvasRenderingContext2D.prototype.echo=function(text,x,y){this.fillText(text,x,y)},CanvasRenderingContext2D.prototype.drawLine=function(sx,sy,ex,ey){this.beginPath(),this.lineWidth=1,this.lineCap="round",this.moveTo(sx,sy),this.lineTo(ex,ey),this.stroke()},CanvasRenderingContext2D.prototype.drawLineBatch=function(sx,sy,ex,ey){this.moveTo(sx,sy),this.lineTo(ex,ey)},CanvasRenderingContext2D.prototype.drawBox=function(x,y,width,height){this.fillRect(x,y,width,height),this.strokeRect(x,y,width,height)},CanvasRenderingContext2D.prototype.drawRoundBox=function(x,y,width,height,radius,fill,stroke){"undefined"==typeof stroke&&(stroke=!0),"undefined"==typeof radius&&(radius=5),this.beginPath(),this.moveTo(x+radius,y),this.lineTo(x+width-radius,y),this.quadraticCurveTo(x+width,y,x+width,y+radius),this.lineTo(x+width,y+height-radius),this.quadraticCurveTo(x+width,y+height,x+width-radius,y+height),this.lineTo(x+radius,y+height),this.quadraticCurveTo(x,y+height,x,y+height-radius),this.lineTo(x,y+radius),this.quadraticCurveTo(x,y,x+radius,y),this.closePath(),stroke&&this.stroke(),fill&&this.fill()};var FrequencyPlanner=function(element,data,options){var self=this;this.name="FrequencyPlanner",this.width=element.width,this.height=element.height,this.options=this.initOptions(options),this.ctx=element.getContext("2d"),this.data=data,this.data||(this.data={bandwidth:[],allocation:[]}),this.animLastFrameTimestamp=0,this.animForceUpdate=1,this.highlightedItem=null,this.canvasCache={},this.allocationList=[],this.bandwidthList=[],this.updateAllocation(),this.updateBandwidth(),this.label=$("<div/>").addClass("fplabel").appendTo($("body")),this.options.autoupdate&&(self.frameRequest=requestAnimFrame(self.updateAnimationFunc(self))),element.onmousemove=this.onmousemove(),element.onmousedown=this.onmousedown(),element.onmouseup=this.onmouseup(),"onwheel"in document?element.onwheel=this.onmousewheel():element.onmousewheel=this.onmousewheel(),element.onclick=this.click(),element.ondblclick=this.ondblclick(),this.transformer=new ZoomPanTransformer(this)};FrequencyPlanner.prototype.destroy=function(){cancelRequestAnimFrame(this.frameRequest),$(".fplabel").remove()},FrequencyPlanner.prototype.initOptions=function(options){var palette={red:"#D5140D",orange:"#FF7900",yellow:"#FFCC28",green:"#60B037",blue:"#0295C1",gray:"#cccccc",dateTicker:"#E6E6E6",frequencyTicker:"#E6E6E6",bandwidthSeparator:"#646464",now:"rgba(255, 100, 100, 1)",allocationBorder:"#999"};opt={},opt.paneX=150,opt.paneY=50,opt.tzOffset=0,opt.autoupdate=0,opt.paneWidth=this.width-opt.paneX,opt.paneHeight=this.height-opt.paneY,opt.highlightColor=palette.orange,opt.fillColor=palette.gray,opt.palette=palette;for(var attrname in options)opt[attrname]=options[attrname];return opt},FrequencyPlanner.prototype.tempContext=function(){var ctx=this.canvasCache.name;if(ctx)ctx.clearRect(0,0,ctx.canvas.width,ctx.canvas.height);else{var canvasTemp=document.createElement("canvas");canvasTemp.width=this.width,canvasTemp.height=this.height,ctx=canvasTemp.getContext("2d"),ctx.translate(.5,.5),ctx.font="12px Arial",this.canvasCache.name=ctx}return ctx},FrequencyPlanner.prototype.update=function(data,rebuild){var self=this;data&&(this.data=data,this.updateAllocation(),this.updateBandwidth()),rebuild&&self.transformer.zoomToNow(),self.animForceUpdate=1},FrequencyPlanner.prototype.updateAnimationFunc=function(self){var result=function(timestamp){var delta=timestamp-self.animLastFrameTimestamp;(delta>1e3||self.animForceUpdate)&&(self.animLastFrameTimestamp&&(self.transformer.startTimestamp+=.001*delta,self.transformer.endTimestamp+=.001*delta),self.animLastFrameTimestamp=timestamp,self.animForceUpdate=0,self.draw()),self.frameRequest=requestAnimFrame(self.updateAnimationFunc(self))};return result},FrequencyPlanner.prototype.pan=function(e){var self=this,endY=e.offsetY?e.offsetY:e.layerY,dt=self.transformer.dYToTimestamp(endY-self.drag.startY);self.transformer.startTimestamp=self.drag.startTimestamp+dt,self.transformer.endTimestamp=self.drag.endTimestamp+dt,self.animForceUpdate=1},FrequencyPlanner.prototype.zoom=function(e){var self=this,y=e.offsetY?e.offsetY:e.layerY;if(!(y<this.options.paneY)){var t=self.transformer.dYToTimestamp(y-this.options.paneY),delta=e.wheelDelta?-e.wheelDelta/120:e.deltaY,zoomfactor=delta,proportion=.05*Math.abs(self.transformer.startTimestamp-self.transformer.endTimestamp),proportion_y=t/Math.abs(self.transformer.startTimestamp-self.transformer.endTimestamp);zoomfactor*=proportion,self.transformer.endTimestamp+=zoomfactor*proportion_y,self.transformer.startTimestamp-=zoomfactor*(1-proportion_y),self.animForceUpdate=1}},FrequencyPlanner.prototype.ondblclick=function(){var self=this;return function(){self.transformer.zoomToNow(),self.animForceUpdate=1}},FrequencyPlanner.prototype.click=function(){var self=this;return function(){self.highlightedItem&&self.options.clickHandler&&self.options.clickHandler({id:self.highlightedItem.id,frequency:self.highlightedItem.frequency})}},FrequencyPlanner.prototype.onmousewheel=function(){var self=this;return function(e){e.preventDefault(),self.zoom(e)}},FrequencyPlanner.prototype.onmouseup=function(){var self=this;return function(e){(e.shiftKey||e.ctrlKey)&&self.pan(e),self.drag=null,this.style.cursor="default"}},FrequencyPlanner.prototype.onmousedown=function(){var self=this;return function(e){self.drag={startX:e.offsetX?e.offsetX:e.layerX,startY:e.offsetY?e.offsetY:e.layerY,startTimestamp:self.transformer.startTimestamp,endTimestamp:self.transformer.endTimestamp},(e.shiftKey||e.ctrlKey)&&(this.style.cursor="move")}},FrequencyPlanner.prototype.calcOffsets=function(event){event.hasOwnProperty("offsetX")||(event.offsetX=event.offsetX||event.clientX-$(event.target).offset().left+window.pageXOffset,event.offsetY=event.offsetY||event.clientY-$(event.target).offset().top+window.pageYOffset)},FrequencyPlanner.prototype.onmousemove=function(){var self=this,handler=function(event){if((event.shiftKey||event.ctrlKey)&&self.drag)return void self.pan(event);self.calcOffsets(event);var mouseX=event.offsetX,mouseY=event.offsetY;self.highlightedItem=null,self.animForceUpdate=1;for(var i=0;i<self.allocationList.length;i++){var item=self.allocationList[i];if(mouseX>=item.l&&mouseX<=item.r&&mouseY<=item.t&&mouseY>=item.b){self.highlightedItem=item,item.color=item.highlightColor(.1),this.style.cursor="pointer";var h=self.label.height();self.label.html(item.comment).css({top:event.clientY-h-30,left:event.clientX+5})}else item.color=item.defaultColor}self.highlightedItem?self.label.show():(this.style.cursor="default",self.label.hide())};return handler},FrequencyPlanner.prototype.draw=function(){this.ctx.clearRect(0,0,this.width,this.height),this.drawDateTicker(),this.drawFrequencyTicker(),this.drawAllocationPane(),this.drawBandwidthSeparators()},FrequencyPlanner.prototype.updateAllocation=function(){this.allocationList=[];for(var length=this.data.allocation.length,i=0;length>i;i++){var item=new Allocation(this.data.allocation[i],this);this.allocationList.push(item)}},FrequencyPlanner.prototype.updateBandwidth=function(){this.bandwidthList=[];for(var length=this.data.bandwidth.length,i=0;length>i;i++){var item=new Bandwidth(this.data.bandwidth[i]);item.width=this.options.paneWidth/length,item.offsetX=i*item.width,this.bandwidthList.push(item)}},FrequencyPlanner.prototype.updateRange=function(seconds){var start=.001*(new Date).getTime()-seconds/2,end=.001*(new Date).getTime()+seconds/2;this.transformer.startTimestamp=start-this.options.tzOffset,this.transformer.endTimestamp=end-this.options.tzOffset,this.animForceUpdate=1},FrequencyPlanner.prototype.drawDateTicker=function(){var ticker=this.tempContext(),ticks=FrequencyPlannerTicker.dateTicks(this.transformer.startTimestamp,this.transformer.endTimestamp,this.options.paneHeight,this.options);ticker.strokeStyle=this.options.palette.dateTicker,ticker.fillStyle="#000",ticker.beginPath();for(var j=0;j<ticks.length;j++){var y=this.transformer.timestampToY(ticks[j].v),text=ticks[j].label,w=ticker.measureText(text).width;y+=this.options.paneY,ticker.echo(text,this.options.paneX-w-30,y+3),ticker.drawLineBatch(this.options.paneX,y,this.width,y)}ticker.stroke(),this.ctx.drawImage(ticker.canvas,0,0)},FrequencyPlanner.prototype.drawFrequencyTicker=function(){var ticker=this.tempContext(),formatF=function(frequency){return frequency/=1e3,(frequency/1e6).toFixed(frequency%1e3!=0?6:6)};ticker.strokeStyle=this.options.palette.frequencyTicker,ticker.fillStyle="#000",ticker.beginPath();var text="GHz",w=ticker.measureText(text).width;ticker.echo(text,this.options.paneX-w-20,this.options.paneY-30);for(var i=0;i<this.bandwidthList.length;i++)for(var ticks=FrequencyPlannerTicker.frequencyTicks(this.bandwidthList[i].startFrequency,this.bandwidthList[i].endFrequency,this.bandwidthList[i].width),j=0;j<ticks.length;j++){var x=this.transformer.frequencyToX(ticks[j].v);x+=this.options.paneX,text=ticks[j].label,w=ticker.measureText(text).width,ticker.echo(text,x-w/2,this.options.paneY-12),ticker.drawLineBatch(x,this.options.paneY,x,this.height),0==j?(x=this.transformer.frequencyToX(this.bandwidthList[i].startFrequency),x+=this.options.paneX,text=formatF(this.bandwidthList[i].startFrequency),ticker.echo(text,x,this.options.paneY-30),console.log(this.name+": "+text+" x:"+x+" y:"+(this.options.paneY-30))):j==ticks.length-1&&(x=this.transformer.frequencyToX(this.bandwidthList[i].endFrequency),x+=this.options.paneX,text=formatF(this.bandwidthList[i].endFrequency),w=ticker.measureText(text).width,ticker.echo(text,x-w-2,this.options.paneY-30))}ticker.stroke(),this.ctx.drawImage(ticker.canvas,0,0)},FrequencyPlanner.prototype.drawBandwidthSeparators=function(){var pane=this.tempContext();pane.strokeStyle=this.options.palette.bandwidthSeparator,pane.drawLine(1,0,1,this.options.paneHeight),length=this.bandwidthList.length;for(var i=0;length>i;i++){var lineX=this.transformer.frequencyToX(this.bandwidthList[i].endFrequency);i==length-1&&(lineX-=2),pane.drawLine(lineX,0,lineX,this.options.paneHeight)}this.ctx.drawImage(pane.canvas,this.options.paneX,this.options.paneY)},FrequencyPlanner.prototype.drawAllocationPane=function(){for(var pane=this.tempContext(),length=this.allocationList.length,i=0;length>i;i++)this.allocationList[i].Draw(pane,this.transformer);pane.strokeStyle=this.options.palette.now;var nowTs=.001*(new Date).getTime()-this.options.tzOffset,nowY=this.transformer.timestampToY(nowTs);pane.drawLine(.5,nowY,this.options.paneWidth,nowY),this.ctx.drawImage(pane.canvas,this.options.paneX,this.options.paneY)};var ZoomPanTransformer=function(planner){this.zoomX=1,this.zoomY=1,this.panX=1,this.panY=1,this.planner=planner,this.zoomToNow()};ZoomPanTransformer.prototype.zoomToNow=function(){this.endTimestamp=Math.floor(.001*(new Date).getTime()+4200)-this.planner.options.tzOffset,this.startTimestamp=Math.floor(.001*(new Date).getTime()-4200)-this.planner.options.tzOffset},ZoomPanTransformer.prototype.Autoscale=function(){for(var MAX_INT=4294967295,minTimestamp=MAX_INT,maxTimestamp=0,i=0;i<this.allocationList.length;i++)this.allocationList[i].startTimestamp<minTimestamp&&(minTimestamp=this.allocationList[i].startTimestamp),this.allocationList[i].endTimestamp>maxTimestamp&&(maxTimestamp=this.allocationList[i].endTimestamp);this.startTimestamp=minTimestamp,this.endTimestamp=maxTimestamp},ZoomPanTransformer.prototype.frequencyToX=function(frequency){for(var i=this.planner.bandwidthList.length-1;i>=0;i--){var bw=this.planner.bandwidthList[i];if(frequency>=bw.startFrequency&&frequency<=bw.endFrequency){var proportion=(frequency-bw.startFrequency)/(bw.endFrequency-bw.startFrequency),positionX=bw.offsetX+bw.width*proportion;return Math.round(this.zoomX*positionX+this.panX)}}return 0},ZoomPanTransformer.prototype.timestampToY=function(timestamp){var proportion=(timestamp-this.startTimestamp)/(this.endTimestamp-this.startTimestamp),positionY=this.planner.options.paneHeight*proportion;return positionY=this.planner.options.paneHeight-positionY,Math.round(this.zoomY*positionY+this.panY)},ZoomPanTransformer.prototype.dYToTimestamp=function(dy){var proportion=dy/this.planner.options.paneHeight,dt=(this.endTimestamp-this.startTimestamp)*proportion;return Math.round(dt)};var Allocation=function(arr,planner){this.id=parseInt(arr[0],10),this.frequency=1e3*parseInt(arr[1],10),this.width=1e3*parseInt(arr[2],10),this.startTimestamp=parseInt(arr[3],10),this.endTimestamp=parseInt(arr[4],10),this.color=this.defaultColor=arr[5],this.comment=arr[6],this.text=arr[7],this.l=this.r=this.r=this.b=0,this.highlightColor=function(percent){var color=this.defaultColor,f=parseInt(color.slice(1),16),t=0>percent?0:255,p=0>percent?-1*percent:percent,R=f>>16,G=f>>8&255,B=255&f;return"#"+(16777216+65536*(Math.round((t-R)*p)+R)+256*(Math.round((t-G)*p)+G)+(Math.round((t-B)*p)+B)).toString(16).slice(1)},this.getRGBComponents=function(color){var r=color.substring(1,3),g=color.substring(3,5),b=color.substring(5,7);return{R:parseInt(r,16),G:parseInt(g,16),B:parseInt(b,16)}},this.textColor=function(bgColor){var nThreshold=105,components=this.getRGBComponents(bgColor),bgDelta=.299*components.R+.587*components.G+.114*components.B;return nThreshold>255-bgDelta?"#000000":"#ffffff"},this.shortenText=!1,this.shortenTextDone=!1,this.Draw=function(ctx,transformer){var l=transformer.frequencyToX(this.frequency-this.width/2),r=transformer.frequencyToX(this.frequency+this.width/2),b=transformer.timestampToY(this.startTimestamp-planner.options.tzOffset),t=transformer.timestampToY(this.endTimestamp-planner.options.tzOffset);this.color||(this.color=planner.options.fillColor),ctx.fillStyle=this.color,ctx.strokeStyle=planner.options.palette.allocationBorder,ctx.drawRoundBox(l,t,r-l,b-t,3,!0,!0);var width;if(!this.shortenTextDone)for(;;){var metrics=ctx.measureText(this.text);if(width=metrics.width,!(width>r-l-15))break;if(this.text=this.text.substr(0,this.text.length-1),this.shortenText=!0,this.text.length<3)break}this.shortenText&&!this.shortenTextDone&&(this.text+="...",this.shortenTextDone=!0);var height=parseInt(ctx.font);b-t>.8*height&&(ctx.fillStyle=this.textColor(this.color),ctx.fillText(this.text,l+5,(t-b)/2+b+height/4)),this.l=l+planner.options.paneX,this.r=r+planner.options.paneX,this.t=b+planner.options.paneY,this.b=t+planner.options.paneY}},Bandwidth=function(arr){this.id=parseInt(arr[0]),this.startFrequency=1e3*parseInt(arr[1]),this.endFrequency=1e3*parseInt(arr[2]),this.offsetX=0,this.width=0},BandwidthPane=function(){};allocationDraw=function(){allocationPane(draw)};var FrequencyDisplay=function(element,data){FrequencyPlanner.apply(this,arguments),this.name="FrequencyDisplay",this.data=data,this.data||(this.data={bandwidth:[],allocation:[],occupied:[]}),this.updateBandwidth(),this.draw()};FrequencyDisplay.prototype=Object.create(FrequencyPlanner.prototype),FrequencyDisplay.prototype.constructor=FrequencyDisplay,FrequencyDisplay.prototype.draw=function(){this.ctx.clearRect(0,0,this.width,this.height),this.drawFrequencyTicker(),this.drawOccupied(),this.drawBandwidthSeparators()},FrequencyDisplay.prototype.drawOccupied=function(){var occupied=this.tempContext();occupied.strokeStyle=this.options.palette.frequencyTicker;for(var list=this.data.occupied,i=0;i<list.length;i++){list[i].highlightColor=function(percent){var color=this.defaultColor,f=parseInt(color.slice(1),16),t=0>percent?0:255,p=0>percent?-1*percent:percent,R=f>>16,G=f>>8&255,B=255&f;return"#"+(16777216+65536*(Math.round((t-R)*p)+R)+256*(Math.round((t-G)*p)+G)+(Math.round((t-B)*p)+B)).toString(16).slice(1)};var cx=this.transformer.frequencyToX(1e3*list[i].frequency),w=this.transformer.frequencyToX(1e3*(list[i].frequency+list[i].symrate/2))-cx,yb=24,yt=0,x1=Math.floor(cx-w*list[i].rolloff),x2=Math.floor(cx-w),x3=Math.floor(cx+w),x4=Math.floor(cx+w*list[i].rolloff),text="";switch(list[i].type){case 1:text="TDM";break;case 2:text="TDMA";break;case 3:text="SCPC";break;case 4:text="SCPC";break;case 5:text="Self",yt=65}occupied.fillStyle=list[i].color,occupied.beginPath(),occupied.moveTo(x1,yb),occupied.quadraticCurveTo(x1,yt,x2,yt),occupied.quadraticCurveTo(x1,yt,x2,yt),occupied.lineTo(x3,yt),occupied.quadraticCurveTo(x4,yt,x4,yb),occupied.lineTo(x1,yb),occupied.fill(),occupied.font="10px Arial";var tw=occupied.measureText(text).width;x3-x2>tw&&(occupied.fillStyle="#000",occupied.echo(text,cx-tw/2,yt+6+(yb-yt)/2)),list[i].l=x1+this.options.paneX,list[i].r=x4+this.options.paneX,list[i].t=(yb>yt?yb:yt)+this.options.paneY,list[i].b=(yb>yt?yt:yb)+this.options.paneY}occupied.beginPath(),occupied.strokeStyle=this.options.palette.bandwidthSeparator,occupied.moveTo(0,yb),occupied.lineTo(this.options.paneWidth,yb),occupied.stroke(),this.ctx.drawImage(occupied.canvas,this.options.paneX,this.options.paneY)},FrequencyDisplay.prototype.calcOffsets=function(event){event.hasOwnProperty("offsetX")||(event.offsetX=event.offsetX||event.clientX-$(event.target).offset().left+window.pageXOffset,event.offsetY=event.offsetY||event.clientY-$(event.target).offset().top+window.pageYOffset)},FrequencyDisplay.prototype.onmousemove=function(){var self=this,handler=function(event){if((event.shiftKey||event.ctrlKey)&&self.drag)return void self.pan(event);self.calcOffsets(event);var mouseX=event.offsetX,mouseY=event.offsetY;self.highlightedItem=null,self.animForceUpdate=1;for(var list=self.data.occupied,i=0;i<list.length;i++){var item=list[i];if(mouseX>=item.l&&mouseX<=item.r&&mouseY<=item.t&&mouseY>=item.b){self.highlightedItem=item,this.style.cursor="pointer";var h=self.label.height();self.label.html(item.text).css({top:event.clientY-h-30,left:event.clientX+5})}else item.color=item.defaultColor}self.highlightedItem?self.label.show():(this.style.cursor="default",self.label.hide())};return handler},FrequencyDisplay.prototype.update=function(data){var self=this;data&&(this.data=data,this.updateBandwidth(),this.draw()),self.animForceUpdate=1},FrequencyDisplay.prototype.tempContext=function(){var ctx=FrequencyPlanner.prototype.tempContext.apply(this,arguments);return ctx.font="10px Arial",ctx};var AcmStat=function(element,data){this.data=data,this.width=element.width,this.height=element.height,this.ctx=element.getContext("2d"),this.ctx.translate(.5,.5),this.default_cell_size=60,this.cell_size=60,this.label_offset=10,this.scr_cols=Math.floor(this.width/this.cell_size),this.scr_rows=Math.floor(this.height/this.cell_size+this.label_offset),this.cols=this.data.length<=this.scr_cols?this.data.length:this.scr_cols,this.rows=Math.ceil(this.data.length/this.scr_cols),this.qty=this.data.length,this.drawPunchCard(),$("#acm_stat").mousemove({cell_x:this.cell_size,cell_txt_offset:this.label_offset,rect_cords:this.rect_cords,remote:this.data},function(event){var os=$("#acm_stat").offset(),pos_x=event.pageX-os.left,pos_y=event.pageY-os.top,col=Math.ceil(pos_x/event.data.cell_x),row=Math.ceil(pos_y/(event.data.cell_x+event.data.cell_txt_offset)),k=row+"_"+col;$("#test").html("Station num: "+event.data.rect_cords[k])})};AcmStat.prototype.drawPunchCard=function(){for(this.ctx.clearRect(0,0,this.width-1,this.height-1);this.rows*(this.cell_size+this.label_offset)>this.height;)this.cols=this.cols+1,this.rows=Math.ceil(this.qty/this.cols),this.cell_size=Math.floor(this.width/this.cols);var cell_size_ratio=1;this.cell_size<this.default_cell_size&&(cell_size_ratio=this.cell_size/this.default_cell_size),this.draw_mesh();var max_spd=0,min_spd=0;for(var key in this.data){var traf=Number(this.data[key].tx_spd);traf>max_spd&&(max_spd=traf),0==min_spd&&traf>0&&(min_spd=traf),min_spd>traf&&traf>0&&(min_spd=traf)}max_spd/20>min_spd&&(min_spd=Math.floor(max_spd/20));var max_radius=Math.round(50*cell_size_ratio),min_radius=5,xc=this.cell_size/2,x_rect_c=0,yc=this.cell_size/2;this.rect_cords=[];var i=0;for(var key in this.data){i++;var traf=Number(this.data[key].tx_spd);if(traf>0){var radius=Math.floor(traf*max_radius/max_spd);min_radius>radius&&(radius=min_radius),this.ctx.beginPath(),this.ctx.arc(xc,yc,radius/2,0,2*Math.PI),this.ctx.closePath();var acm_fill_color,acm_channel=Number(this.data[key].acm_channel);switch(acm_channel){case 0:acm_fill_color="#FF0000";break;case 1:acm_fill_color="#FC6D00";break;case 2:acm_fill_color="#00A005";break;case 3:acm_fill_color="#0053D1";break;case 4:acm_fill_color="magenta";break;case 5:acm_fill_color="purple"}this.ctx.fillStyle=acm_fill_color,this.ctx.fill()}else this.ctx.beginPath(),this.ctx.moveTo(xc-3,yc),this.ctx.lineTo(xc+3,yc),this.ctx.moveTo(xc,yc-3),this.ctx.lineTo(xc,yc+3),this.ctx.closePath(),this.ctx.strokeStyle="#BBB",this.ctx.stroke();this.ctx.font="10px Arial",this.ctx.fillStyle="#555";var txt=this.data[key].number,txt_width=this.ctx.measureText(txt);this.ctx.fillText(txt,xc-txt_width.width/2,yc+this.cell_size/2+5);var k=Math.ceil(yc/(this.cell_size+this.label_offset))+"_"+Math.ceil(xc/this.cell_size);this.rect_cords[k]=this.data[key].number;var xc=xc+this.cell_size;i%this.cols==0&&(yc=yc+this.cell_size+this.label_offset,xc=this.cell_size/2);var x_rect_c=x_rect_c+this.cell_size}},AcmStat.prototype.update=function(data){data&&(this.data=data,this.drawPunchCard())},AcmStat.prototype.draw_canvas_border=function(){this.ctx.rect(0,0,this.width-1,this.height-1),this.ctx.strokeStyle="#000",this.ctx.stroke()},AcmStat.prototype.draw_mesh=function(){for(var tl_x=0,tl_y=0,i=1;i<=this.data.length;i++)this.ctx.rect(tl_x,tl_y,this.cell_size,this.cell_size+this.label_offset),this.strokeStyle="#000",this.ctx.stroke(),tl_x+=this.cell_size,i%this.cols==0&&(tl_y=tl_y+this.cell_size+this.label_offset,tl_x=0)},function($){"use strict";function getElementSelection(that){var position={};if(void 0===that.selectionStart){that.focus();var select=document.selection.createRange();position.length=select.text.length,select.moveStart("character",-that.value.length),position.end=select.text.length,position.start=position.end-position.length}else position.start=that.selectionStart,position.end=that.selectionEnd,position.length=position.end-position.start;return position}function setElementSelection(that,start,end){if(void 0===that.selectionStart){that.focus();var r=that.createTextRange();r.collapse(!0),r.moveEnd("character",end),r.moveStart("character",start),r.select()}else that.selectionStart=start,that.selectionEnd=end}function runCallbacks($this,settings){$.each(settings,function(k,val){"function"==typeof val?settings[k]=val($this,settings,k):"function"==typeof $this.autoNumeric[val]&&(settings[k]=$this.autoNumeric[val]($this,settings,k))})}function convertKeyToNumber(settings,key){"string"==typeof settings[key]&&(settings[key]*=1)}function autoCode($this,settings){runCallbacks($this,settings),settings.oEvent=null,settings.tagList=["B","CAPTION","CITE","CODE","DD","DEL","DIV","DFN","DT","EM","H1","H2","H3","H4","H5","H6","INS","KDB","LABEL","LI","OUTPUT","P","Q","S","SAMPLE","SPAN","STRONG","TD","TH","U","VAR"];var vmax=settings.vMax.toString().split("."),vmin=settings.vMin||0===settings.vMin?settings.vMin.toString().split("."):[];if(convertKeyToNumber(settings,"vMax"),convertKeyToNumber(settings,"vMin"),convertKeyToNumber(settings,"mDec"),settings.mDec="CHF"===settings.mRound?"2":settings.mDec,settings.allowLeading=!0,settings.aNeg=settings.vMin<0?"-":"",vmax[0]=vmax[0].replace("-",""),vmin[0]=vmin[0].replace("-",""),settings.mInt=Math.max(vmax[0].length,vmin[0].length,1),null===settings.mDec){var vmaxLength=0,vminLength=0;vmax[1]&&(vmaxLength=vmax[1].length),vmin[1]&&(vminLength=vmin[1].length),settings.mDec=Math.max(vmaxLength,vminLength)}null===settings.altDec&&settings.mDec>0&&("."===settings.aDec&&","!==settings.aSep?settings.altDec=",":","===settings.aDec&&"."!==settings.aSep&&(settings.altDec="."));var aNegReg=settings.aNeg?"([-\\"+settings.aNeg+"]?)":"(-?)";settings.aNegRegAutoStrip=aNegReg,settings.skipFirstAutoStrip=new RegExp(aNegReg+"[^-"+(settings.aNeg?"\\"+settings.aNeg:"")+"\\"+settings.aDec+"\\d].*?(\\d|\\"+settings.aDec+"\\d)"),settings.skipLastAutoStrip=new RegExp("(\\d\\"+settings.aDec+"?)[^\\"+settings.aDec+"\\d]\\D*$");var allowed="-"+settings.aNum+"\\"+settings.aDec;return settings.allowedAutoStrip=new RegExp("[^"+allowed+"]","gi"),settings.numRegAutoStrip=new RegExp(aNegReg+"(?:\\"+settings.aDec+"?(\\d+\\"+settings.aDec+"\\d+)|(\\d*(?:\\"+settings.aDec+"\\d*)?))"),settings
}function autoStrip(s,settings,strip_zero){if(settings.aSign)for(;s.indexOf(settings.aSign)>-1;)s=s.replace(settings.aSign,"");s=s.replace(settings.skipFirstAutoStrip,"$1$2"),s=s.replace(settings.skipLastAutoStrip,"$1"),s=s.replace(settings.allowedAutoStrip,""),settings.altDec&&(s=s.replace(settings.altDec,settings.aDec));var m=s.match(settings.numRegAutoStrip);if(s=m?[m[1],m[2],m[3]].join(""):"",("allow"===settings.lZero||"keep"===settings.lZero)&&"strip"!==strip_zero){var parts=[],nSign="";parts=s.split(settings.aDec),-1!==parts[0].indexOf("-")&&(nSign="-",parts[0]=parts[0].replace("-","")),parts[0].length>settings.mInt&&"0"===parts[0].charAt(0)&&(parts[0]=parts[0].slice(1)),s=nSign+parts.join(settings.aDec)}if(strip_zero&&"deny"===settings.lZero||strip_zero&&"allow"===settings.lZero&&settings.allowLeading===!1){var strip_reg="^"+settings.aNegRegAutoStrip+"0*(\\d"+("leading"===strip_zero?")":"|$)");strip_reg=new RegExp(strip_reg),s=s.replace(strip_reg,"$1$2")}return s}function negativeBracket(s,nBracket,oEvent){return nBracket=nBracket.split(","),"set"===oEvent||"focusout"===oEvent?(s=s.replace("-",""),s=nBracket[0]+s+nBracket[1]):"get"!==oEvent&&"focusin"!==oEvent&&"pageLoad"!==oEvent||s.charAt(0)!==nBracket[0]||(s=s.replace(nBracket[0],"-"),s=s.replace(nBracket[1],"")),s}function truncateDecimal(s,aDec,mDec){if(aDec&&mDec){var parts=s.split(aDec);parts[1]&&parts[1].length>mDec&&(mDec>0?(parts[1]=parts[1].substring(0,mDec),s=parts.join(aDec)):s=parts[0])}return s}function fixNumber(s,aDec,aNeg){return aDec&&"."!==aDec&&(s=s.replace(aDec,".")),aNeg&&"-"!==aNeg&&(s=s.replace(aNeg,"-")),s.match(/\d/)||(s+="0"),s}function checkValue(value,settings){if(value){var checkSmall=+value;if(1e-6>checkSmall&&checkSmall>-1)value=+value,1e-6>value&&value>0&&(value=(value+10).toString(),value=value.substring(1)),0>value&&value>-1&&(value=(value-10).toString(),value="-"+value.substring(2)),value=value.toString();else{var parts=value.split(".");void 0!==parts[1]&&(0===+parts[1]?value=parts[0]:(parts[1]=parts[1].replace(/0*$/,""),value=parts.join(".")))}}return"keep"===settings.lZero?value:value.replace(/^0*(\d)/,"$1")}function presentNumber(s,aDec,aNeg){return aNeg&&"-"!==aNeg&&(s=s.replace("-",aNeg)),aDec&&"."!==aDec&&(s=s.replace(".",aDec)),s}function autoCheck(s,settings){s=autoStrip(s,settings),s=truncateDecimal(s,settings.aDec,settings.mDec),s=fixNumber(s,settings.aDec,settings.aNeg);var value=+s;return"set"===settings.oEvent&&(value<settings.vMin||value>settings.vMax)&&$.error("The value ("+value+") from the 'set' method falls outside of the vMin / vMax range"),value>=settings.vMin&&value<=settings.vMax}function checkEmpty(iv,settings,signOnEmpty){return""===iv||iv===settings.aNeg?"zero"===settings.wEmpty?iv+"0":"sign"===settings.wEmpty||signOnEmpty?iv+settings.aSign:iv:null}function autoGroup(iv,settings){iv=autoStrip(iv,settings);var testNeg=iv.replace(",","."),empty=checkEmpty(iv,settings,!0);if(null!==empty)return empty;var digitalGroup="";digitalGroup=2===settings.dGroup?/(\d)((\d)(\d{2}?)+)$/:4===settings.dGroup?/(\d)((\d{4}?)+)$/:/(\d)((\d{3}?)+)$/;var ivSplit=iv.split(settings.aDec);settings.altDec&&1===ivSplit.length&&(ivSplit=iv.split(settings.altDec));var s=ivSplit[0];if(settings.aSep)for(;digitalGroup.test(s);)s=s.replace(digitalGroup,"$1"+settings.aSep+"$2");if(0!==settings.mDec&&ivSplit.length>1?(ivSplit[1].length>settings.mDec&&(ivSplit[1]=ivSplit[1].substring(0,settings.mDec)),iv=s+settings.aDec+ivSplit[1]):iv=s,settings.aSign){var has_aNeg=-1!==iv.indexOf(settings.aNeg);iv=iv.replace(settings.aNeg,""),iv="p"===settings.pSign?settings.aSign+iv:iv+settings.aSign,has_aNeg&&(iv=settings.aNeg+iv)}return"set"===settings.oEvent&&0>testNeg&&null!==settings.nBracket&&(iv=negativeBracket(iv,settings.nBracket,settings.oEvent)),iv}function autoRound(iv,settings){iv=""===iv?"0":iv.toString(),convertKeyToNumber(settings,"mDec"),"CHF"===settings.mRound&&(iv=(Math.round(20*iv)/20).toString());var ivRounded="",i=0,nSign="",rDec="boolean"==typeof settings.aPad||null===settings.aPad?settings.aPad?settings.mDec:0:+settings.aPad,truncateZeros=function(ivRounded){var regex=0===rDec?/(\.(?:\d*[1-9])?)0*$/:1===rDec?/(\.\d(?:\d*[1-9])?)0*$/:new RegExp("(\\.\\d{"+rDec+"}(?:\\d*[1-9])?)0*$");return ivRounded=ivRounded.replace(regex,"$1"),0===rDec&&(ivRounded=ivRounded.replace(/\.$/,"")),ivRounded};"-"===iv.charAt(0)&&(nSign="-",iv=iv.replace("-","")),iv.match(/^\d/)||(iv="0"+iv),"-"===nSign&&0===+iv&&(nSign=""),(+iv>0&&"keep"!==settings.lZero||iv.length>0&&"allow"===settings.lZero)&&(iv=iv.replace(/^0*(\d)/,"$1"));var dPos=iv.lastIndexOf("."),vdPos=-1===dPos?iv.length-1:dPos,cDec=iv.length-1-vdPos;if(cDec<=settings.mDec){if(ivRounded=iv,rDec>cDec){-1===dPos&&(ivRounded+=".");for(var zeros="000000";rDec>cDec;)zeros=zeros.substring(0,rDec-cDec),ivRounded+=zeros,cDec+=zeros.length}else cDec>rDec?ivRounded=truncateZeros(ivRounded):0===cDec&&0===rDec&&(ivRounded=ivRounded.replace(/\.$/,""));if("CHF"!==settings.mRound)return 0===+ivRounded?ivRounded:nSign+ivRounded;"CHF"===settings.mRound&&(dPos=ivRounded.lastIndexOf("."),iv=ivRounded)}var rLength=dPos+settings.mDec,tRound=+iv.charAt(rLength+1),ivArray=iv.substring(0,rLength+1).split(""),odd="."===iv.charAt(rLength)?iv.charAt(rLength-1)%2:iv.charAt(rLength)%2,onePass=!0;if(odd=0===odd&&iv.substring(rLength+2,iv.length)>0?1:0,tRound>4&&"S"===settings.mRound||tRound>4&&"A"===settings.mRound&&""===nSign||tRound>5&&"A"===settings.mRound&&"-"===nSign||tRound>5&&"s"===settings.mRound||tRound>5&&"a"===settings.mRound&&""===nSign||tRound>4&&"a"===settings.mRound&&"-"===nSign||tRound>5&&"B"===settings.mRound||5===tRound&&"B"===settings.mRound&&1===odd||tRound>0&&"C"===settings.mRound&&""===nSign||tRound>0&&"F"===settings.mRound&&"-"===nSign||tRound>0&&"U"===settings.mRound||"CHF"===settings.mRound)for(i=ivArray.length-1;i>=0;i-=1)if("."!==ivArray[i]){if("CHF"===settings.mRound&&ivArray[i]<=2&&onePass){ivArray[i]=0,onePass=!1;break}if("CHF"===settings.mRound&&ivArray[i]<=7&&onePass){ivArray[i]=5,onePass=!1;break}if("CHF"===settings.mRound&&onePass?(ivArray[i]=10,onePass=!1):ivArray[i]=+ivArray[i]+1,ivArray[i]<10)break;i>0&&(ivArray[i]="0")}return ivArray=ivArray.slice(0,rLength+1),ivRounded=truncateZeros(ivArray.join("")),0===+ivRounded?ivRounded:nSign+ivRounded}function AutoNumericHolder(that,settings){this.settings=settings,this.that=that,this.$that=$(that),this.formatted=!1,this.settingsClone=autoCode(this.$that,this.settings),this.value=that.value}function autoGet(obj){return"string"==typeof obj&&(obj=obj.replace(/\[/g,"\\[").replace(/\]/g,"\\]"),obj="#"+obj.replace(/(:|\.)/g,"\\$1")),$(obj)}function getHolder($that,settings,update){var data=$that.data("autoNumeric");data||(data={},$that.data("autoNumeric",data));var holder=data.holder;return(void 0===holder&&settings||update)&&(holder=new AutoNumericHolder($that.get(0),settings),data.holder=holder),holder}AutoNumericHolder.prototype={init:function(e){this.value=this.that.value,this.settingsClone=autoCode(this.$that,this.settings),this.ctrlKey=e.ctrlKey,this.cmdKey=e.metaKey,this.shiftKey=e.shiftKey,this.selection=getElementSelection(this.that),("keydown"===e.type||"keyup"===e.type)&&(this.kdCode=e.keyCode),this.which=e.which,this.processed=!1,this.formatted=!1},setSelection:function(start,end,setReal){start=Math.max(start,0),end=Math.min(end,this.that.value.length),this.selection={start:start,end:end,length:end-start},(void 0===setReal||setReal)&&setElementSelection(this.that,start,end)},setPosition:function(pos,setReal){this.setSelection(pos,pos,setReal)},getBeforeAfter:function(){var value=this.value,left=value.substring(0,this.selection.start),right=value.substring(this.selection.end,value.length);return[left,right]},getBeforeAfterStriped:function(){var parts=this.getBeforeAfter();return parts[0]=autoStrip(parts[0],this.settingsClone),parts[1]=autoStrip(parts[1],this.settingsClone),parts},normalizeParts:function(left,right){var settingsClone=this.settingsClone;right=autoStrip(right,settingsClone);var strip=right.match(/^\d/)?!0:"leading";left=autoStrip(left,settingsClone,strip),""!==left&&left!==settingsClone.aNeg||"deny"!==settingsClone.lZero||right>""&&(right=right.replace(/^0*(\d)/,"$1"));var new_value=left+right;if(settingsClone.aDec){var m=new_value.match(new RegExp("^"+settingsClone.aNegRegAutoStrip+"\\"+settingsClone.aDec));m&&(left=left.replace(m[1],m[1]+"0"),new_value=left+right)}return"zero"!==settingsClone.wEmpty||new_value!==settingsClone.aNeg&&""!==new_value||(left+="0"),[left,right]},setValueParts:function(left,right){var settingsClone=this.settingsClone,parts=this.normalizeParts(left,right),new_value=parts.join(""),position=parts[0].length;return autoCheck(new_value,settingsClone)?(new_value=truncateDecimal(new_value,settingsClone.aDec,settingsClone.mDec),position>new_value.length&&(position=new_value.length),this.value=new_value,this.setPosition(position,!1),!0):!1},signPosition:function(){var settingsClone=this.settingsClone,aSign=settingsClone.aSign,that=this.that;if(aSign){var aSignLen=aSign.length;if("p"===settingsClone.pSign){var hasNeg=settingsClone.aNeg&&that.value&&that.value.charAt(0)===settingsClone.aNeg;return hasNeg?[1,aSignLen+1]:[0,aSignLen]}var valueLen=that.value.length;return[valueLen-aSignLen,valueLen]}return[1e3,-1]},expandSelectionOnSign:function(setReal){var sign_position=this.signPosition(),selection=this.selection;selection.start<sign_position[1]&&selection.end>sign_position[0]&&((selection.start<sign_position[0]||selection.end>sign_position[1])&&this.value.substring(Math.max(selection.start,sign_position[0]),Math.min(selection.end,sign_position[1])).match(/^\s*$/)?selection.start<sign_position[0]?this.setSelection(selection.start,sign_position[0],setReal):this.setSelection(sign_position[1],selection.end,setReal):this.setSelection(Math.min(selection.start,sign_position[0]),Math.max(selection.end,sign_position[1]),setReal))},checkPaste:function(){if(void 0!==this.valuePartsBeforePaste){var parts=this.getBeforeAfter(),oldParts=this.valuePartsBeforePaste;delete this.valuePartsBeforePaste,parts[0]=parts[0].substr(0,oldParts[0].length)+autoStrip(parts[0].substr(oldParts[0].length),this.settingsClone),this.setValueParts(parts[0],parts[1])||(this.value=oldParts.join(""),this.setPosition(oldParts[0].length,!1))}},skipAllways:function(e){var kdCode=this.kdCode,which=this.which,ctrlKey=this.ctrlKey,cmdKey=this.cmdKey,shiftKey=this.shiftKey;if((ctrlKey||cmdKey)&&"keyup"===e.type&&void 0!==this.valuePartsBeforePaste||shiftKey&&45===kdCode)return this.checkPaste(),!1;if(kdCode>=112&&123>=kdCode||kdCode>=91&&93>=kdCode||kdCode>=9&&31>=kdCode||8>kdCode&&(0===which||which===kdCode)||144===kdCode||145===kdCode||45===kdCode)return!0;if((ctrlKey||cmdKey)&&65===kdCode)return!0;if((ctrlKey||cmdKey)&&(67===kdCode||86===kdCode||88===kdCode))return"keydown"===e.type&&this.expandSelectionOnSign(),(86===kdCode||45===kdCode)&&("keydown"===e.type||"keypress"===e.type?void 0===this.valuePartsBeforePaste&&(this.valuePartsBeforePaste=this.getBeforeAfter()):this.checkPaste()),"keydown"===e.type||"keypress"===e.type||67===kdCode;if(ctrlKey||cmdKey)return!0;if(37===kdCode||39===kdCode){var aSep=this.settingsClone.aSep,start=this.selection.start,value=this.that.value;return"keydown"===e.type&&aSep&&!this.shiftKey&&(37===kdCode&&value.charAt(start-2)===aSep?this.setPosition(start-1):39===kdCode&&value.charAt(start+1)===aSep&&this.setPosition(start+1)),!0}return kdCode>=34&&40>=kdCode?!0:!1},processAllways:function(){var parts;return 8===this.kdCode||46===this.kdCode?(this.selection.length?(this.expandSelectionOnSign(!1),parts=this.getBeforeAfterStriped(),this.setValueParts(parts[0],parts[1])):(parts=this.getBeforeAfterStriped(),8===this.kdCode?parts[0]=parts[0].substring(0,parts[0].length-1):parts[1]=parts[1].substring(1,parts[1].length),this.setValueParts(parts[0],parts[1])),!0):!1},processKeypress:function(){var settingsClone=this.settingsClone,cCode=String.fromCharCode(this.which),parts=this.getBeforeAfterStriped(),left=parts[0],right=parts[1];return cCode===settingsClone.aDec||settingsClone.altDec&&cCode===settingsClone.altDec||("."===cCode||","===cCode)&&110===this.kdCode?settingsClone.mDec&&settingsClone.aDec?settingsClone.aNeg&&right.indexOf(settingsClone.aNeg)>-1?!0:left.indexOf(settingsClone.aDec)>-1?!0:right.indexOf(settingsClone.aDec)>0?!0:(0===right.indexOf(settingsClone.aDec)&&(right=right.substr(1)),this.setValueParts(left+settingsClone.aDec,right),!0):!0:"-"===cCode||"+"===cCode?settingsClone.aNeg?(""===left&&right.indexOf(settingsClone.aNeg)>-1&&(left=settingsClone.aNeg,right=right.substring(1,right.length)),left=left.charAt(0)===settingsClone.aNeg?left.substring(1,left.length):"-"===cCode?settingsClone.aNeg+left:left,this.setValueParts(left,right),!0):!0:cCode>="0"&&"9">=cCode?(settingsClone.aNeg&&""===left&&right.indexOf(settingsClone.aNeg)>-1&&(left=settingsClone.aNeg,right=right.substring(1,right.length)),settingsClone.vMax<=0&&settingsClone.vMin<settingsClone.vMax&&-1===this.value.indexOf(settingsClone.aNeg)&&"0"!==cCode&&(left=settingsClone.aNeg+left),this.setValueParts(left+cCode,right),!0):!0},formatQuick:function(){var settingsClone=this.settingsClone,parts=this.getBeforeAfterStriped(),leftLength=this.value;if((""===settingsClone.aSep||""!==settingsClone.aSep&&-1===leftLength.indexOf(settingsClone.aSep))&&(""===settingsClone.aSign||""!==settingsClone.aSign&&-1===leftLength.indexOf(settingsClone.aSign))){var subParts=[],nSign="";subParts=leftLength.split(settingsClone.aDec),subParts[0].indexOf("-")>-1&&(nSign="-",subParts[0]=subParts[0].replace("-",""),parts[0]=parts[0].replace("-","")),subParts[0].length>settingsClone.mInt&&"0"===parts[0].charAt(0)&&(parts[0]=parts[0].slice(1)),parts[0]=nSign+parts[0]}var value=autoGroup(this.value,this.settingsClone),position=value.length;if(value){var left_ar=parts[0].split(""),i=0;for(i;i<left_ar.length;i+=1)left_ar[i].match("\\d")||(left_ar[i]="\\"+left_ar[i]);var leftReg=new RegExp("^.*?"+left_ar.join(".*?")),newLeft=value.match(leftReg);newLeft?(position=newLeft[0].length,(0===position&&value.charAt(0)!==settingsClone.aNeg||1===position&&value.charAt(0)===settingsClone.aNeg)&&settingsClone.aSign&&"p"===settingsClone.pSign&&(position=this.settingsClone.aSign.length+("-"===value.charAt(0)?1:0))):settingsClone.aSign&&"s"===settingsClone.pSign&&(position-=settingsClone.aSign.length)}this.that.value=value,this.setPosition(position),this.formatted=!0}};var methods={init:function(options){return this.each(function(){var $this=$(this),settings=$this.data("autoNumeric"),tagData=$this.data();if("object"==typeof settings)return this;var defaults={aNum:"0123456789",aSep:",",dGroup:"3",aDec:".",altDec:null,aSign:"",pSign:"p",vMax:"9999999999999.99",vMin:"0.00",mDec:null,mRound:"S",aPad:!0,nBracket:null,wEmpty:"empty",lZero:"allow",aForm:!0,onSomeEvent:function(){}};if(settings=$.extend({},defaults,tagData,options),settings.aDec===settings.aSep)return $.error("autoNumeric will not function properly when the decimal character aDec: '"+settings.aDec+"' and thousand separator aSep: '"+settings.aSep+"' are the same character"),this;$this.data("autoNumeric",settings),settings.runOnce=!1;var holder=getHolder($this,settings);if(-1===$.inArray($this.prop("tagName"),settings.tagList)&&"INPUT"!==$this.prop("tagName"))return $.error("The <"+$this.prop("tagName")+"> is not supported by autoNumeric()"),this;if(settings.runOnce===!1&&settings.aForm){if($this.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])")){var setValue=!0;""===$this[0].value&&"empty"===settings.wEmpty&&($this[0].value="",setValue=!1),""===$this[0].value&&"sign"===settings.wEmpty&&($this[0].value=settings.aSign,setValue=!1),setValue&&$this.autoNumeric("set",$this.val())}-1!==$.inArray($this.prop("tagName"),settings.tagList)&&""!==$this.text()&&$this.autoNumeric("set",$this.text())}settings.runOnce=!0,$this.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])")&&($this.on("keydown.autoNumeric",function(e){return holder=getHolder($this),holder.settings.aDec===holder.settings.aSep?($.error("autoNumeric will not function properly when the decimal character aDec: '"+holder.settings.aDec+"' and thousand separator aSep: '"+holder.settings.aSep+"' are the same character"),this):holder.that.readOnly?(holder.processed=!0,!0):(holder.init(e),holder.settings.oEvent="keydown",holder.skipAllways(e)?(holder.processed=!0,!0):holder.processAllways()?(holder.processed=!0,holder.formatQuick(),e.preventDefault(),!1):(holder.formatted=!1,!0))}),$this.on("keypress.autoNumeric",function(e){var holder=getHolder($this),processed=holder.processed;return holder.init(e),holder.settings.oEvent="keypress",holder.skipAllways(e)?!0:processed?(e.preventDefault(),!1):holder.processAllways()||holder.processKeypress()?(holder.formatQuick(),e.preventDefault(),!1):void(holder.formatted=!1)}),$this.on("keyup.autoNumeric",function(e){var holder=getHolder($this);holder.init(e),holder.settings.oEvent="keyup";var skip=holder.skipAllways(e);return holder.kdCode=0,delete holder.valuePartsBeforePaste,$this[0].value===holder.settings.aSign&&("s"===holder.settings.pSign?setElementSelection(this,0,0):setElementSelection(this,holder.settings.aSign.length,holder.settings.aSign.length)),skip?!0:""===this.value?!0:void(holder.formatted||holder.formatQuick())}),$this.on("focusin.autoNumeric",function(){var holder=getHolder($this);if(holder.settingsClone.oEvent="focusin",null!==holder.settingsClone.nBracket){var checkVal=$this.val();$this.val(negativeBracket(checkVal,holder.settingsClone.nBracket,holder.settingsClone.oEvent))}holder.inVal=$this.val();var onempty=checkEmpty(holder.inVal,holder.settingsClone,!0);null!==onempty&&($this.val(onempty),"s"===holder.settings.pSign?setElementSelection(this,0,0):setElementSelection(this,holder.settings.aSign.length,holder.settings.aSign.length))}),$this.on("focusout.autoNumeric",function(){var holder=getHolder($this),settingsClone=holder.settingsClone,value=$this.val(),origValue=value;holder.settingsClone.oEvent="focusout";var strip_zero="";"allow"===settingsClone.lZero&&(settingsClone.allowLeading=!1,strip_zero="leading"),""!==value&&(value=autoStrip(value,settingsClone,strip_zero),null===checkEmpty(value,settingsClone)&&autoCheck(value,settingsClone,$this[0])?(value=fixNumber(value,settingsClone.aDec,settingsClone.aNeg),value=autoRound(value,settingsClone),value=presentNumber(value,settingsClone.aDec,settingsClone.aNeg)):value="");var groupedValue=checkEmpty(value,settingsClone,!1);null===groupedValue&&(groupedValue=autoGroup(value,settingsClone)),groupedValue!==origValue&&$this.val(groupedValue),groupedValue!==holder.inVal&&($this.change(),delete holder.inVal),null!==settingsClone.nBracket&&$this.autoNumeric("get")<0&&(holder.settingsClone.oEvent="focusout",$this.val(negativeBracket($this.val(),settingsClone.nBracket,settingsClone.oEvent)))}))})},destroy:function(){return $(this).each(function(){var $this=$(this);$this.off(".autoNumeric"),$this.removeData("autoNumeric")})},update:function(options){return $(this).each(function(){var $this=autoGet($(this)),settings=$this.data("autoNumeric");if("object"!=typeof settings)return $.error("You must initialize autoNumeric('init', {options}) prior to calling the 'update' method"),this;var strip=$this.autoNumeric("get");return settings=$.extend(settings,options),getHolder($this,settings,!0),settings.aDec===settings.aSep?($.error("autoNumeric will not function properly when the decimal character aDec: '"+settings.aDec+"' and thousand separator aSep: '"+settings.aSep+"' are the same character"),this):($this.data("autoNumeric",settings),""!==$this.val()||""!==$this.text()?$this.autoNumeric("set",strip):void 0)})},set:function(valueIn){return $(this).each(function(){var $this=autoGet($(this)),settings=$this.data("autoNumeric"),value=valueIn.toString(),testValue=valueIn.toString();return"object"!=typeof settings?($.error("You must initialize autoNumeric('init', {options}) prior to calling the 'set' method"),this):(testValue!==$this.attr("value")&&"INPUT"===$this.prop("tagName")&&settings.runOnce===!1&&(value=null!==settings.nBracket?negativeBracket($this.val(),settings.nBracket,"pageLoad"):value,value=autoStrip(value,settings)),testValue!==$this.attr("value")&&testValue!==$this.text()||settings.runOnce!==!1||(value=value.replace(",",".")),$.isNumeric(+value)?(value=checkValue(value,settings),settings.oEvent="set",value.toString(),""!==value&&(value=autoRound(value,settings)),value=presentNumber(value,settings.aDec,settings.aNeg),autoCheck(value,settings)||(value=autoRound("",settings)),value=autoGroup(value,settings),$this.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])")?$this.val(value):-1!==$.inArray($this.prop("tagName"),settings.tagList)?$this.text(value):($.error("The <"+$this.prop("tagName")+"> is not supported by autoNumeric()"),!1)):"")})},get:function(){var $this=autoGet($(this)),settings=$this.data("autoNumeric");if("object"!=typeof settings)return $.error("You must initialize autoNumeric('init', {options}) prior to calling the 'get' method"),this;settings.oEvent="get";var getValue="";if($this.is("input[type=text], input[type=hidden], input[type=tel], input:not([type])"))getValue=$this.eq(0).val();else{if(-1===$.inArray($this.prop("tagName"),settings.tagList))return $.error("The <"+$this.prop("tagName")+"> is not supported by autoNumeric()"),!1;getValue=$this.eq(0).text()}return""===getValue&&"empty"===settings.wEmpty||getValue===settings.aSign&&("sign"===settings.wEmpty||"empty"===settings.wEmpty)?"":(null!==settings.nBracket&&""!==getValue&&(getValue=negativeBracket(getValue,settings.nBracket,settings.oEvent)),(settings.runOnce||settings.aForm===!1)&&(getValue=autoStrip(getValue,settings)),getValue=fixNumber(getValue,settings.aDec,settings.aNeg),0===+getValue&&"keep"!==settings.lZero&&(getValue="0"),"keep"===settings.lZero?getValue:getValue=checkValue(getValue,settings))},getString:function(){var isAutoNumeric=!1,$this=autoGet($(this)),str=$this.serialize(),parts=str.split("&"),i=0;for(i;i<parts.length;i+=1){var miniParts=parts[i].split("="),settings=$('*[name="'+decodeURIComponent(miniParts[0])+'"]').data("autoNumeric");"object"==typeof settings&&null!==miniParts[1]&&void 0!==$('*[name="'+decodeURIComponent(miniParts[0])+'"]').data("autoNumeric")&&(miniParts[1]=$('input[name="'+decodeURIComponent(miniParts[0])+'"]').autoNumeric("get"),parts[i]=miniParts.join("="),isAutoNumeric=!0)}return isAutoNumeric===!0?parts.join("&"):($.error("You must initialize autoNumeric('init', {options}) prior to calling the 'getString' method"),this)},getArray:function(){var isAutoNumeric=!1,$this=autoGet($(this)),formFields=$this.serializeArray();return $.each(formFields,function(i,field){var settings=$('*[name="'+decodeURIComponent(field.name)+'"]').data("autoNumeric");"object"==typeof settings&&(""!==field.value&&void 0!==$('*[name="'+decodeURIComponent(field.name)+'"]').data("autoNumeric")&&(field.value=$('input[name="'+decodeURIComponent(field.name)+'"]').autoNumeric("get").toString()),isAutoNumeric=!0)}),isAutoNumeric===!0?formFields:($.error("You must initialize autoNumeric('init', {options}) prior to calling the 'getArray' method"),this)},getSettings:function(){var $this=autoGet($(this));return $this.eq(0).data("autoNumeric")}};$.fn.autoNumeric=function(method){return methods[method]?methods[method].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof method&&method?void $.error('Method "'+method+'" is not supported by autoNumeric()'):methods.init.apply(this,arguments)}}(jQuery),function(za,O,l){var N=function(h){function T(a){var b,c,d={};h.each(a,function(e){(b=e.match(/^([^A-Z]+?)([A-Z])/))&&-1!=="a aa ai ao as b fn i m o s ".indexOf(b[1]+" ")&&(c=e.replace(b[0],b[2].toLowerCase()),d[c]=e,"o"===b[1]&&T(a[e]))}),a._hungarianMap=d}function G(a,b,c){a._hungarianMap||T(a);var d;h.each(b,function(e){d=a._hungarianMap[e],d===l||!c&&b[d]!==l||("o"===d.charAt(0)?(b[d]||(b[d]={}),h.extend(!0,b[d],b[e]),G(a[d],b[d],c)):b[d]=b[e])})}function N(a){var b=p.defaults.oLanguage,c=a.sZeroRecords;!a.sEmptyTable&&c&&"No data available in table"===b.sEmptyTable&&D(a,a,"sZeroRecords","sEmptyTable"),!a.sLoadingRecords&&c&&"Loading..."===b.sLoadingRecords&&D(a,a,"sZeroRecords","sLoadingRecords"),a.sInfoThousands&&(a.sThousands=a.sInfoThousands),(a=a.sDecimal)&&cb(a)}function db(a){if(w(a,"ordering","bSort"),w(a,"orderMulti","bSortMulti"),w(a,"orderClasses","bSortClasses"),w(a,"orderCellsTop","bSortCellsTop"),w(a,"order","aaSorting"),w(a,"orderFixed","aaSortingFixed"),w(a,"paging","bPaginate"),w(a,"pagingType","sPaginationType"),w(a,"pageLength","iDisplayLength"),w(a,"searching","bFilter"),a=a.aoSearchCols)for(var b=0,c=a.length;c>b;b++)a[b]&&G(p.models.oSearch,a[b])}function eb(a){w(a,"orderable","bSortable"),w(a,"orderData","aDataSort"),w(a,"orderSequence","asSorting"),w(a,"orderDataType","sortDataType")}function fb(a){var a=a.oBrowser,b=h("<div/>").css({position:"absolute",top:0,left:0,height:1,width:1,overflow:"hidden"}).append(h("<div/>").css({position:"absolute",top:1,left:1,width:100,overflow:"scroll"}).append(h('<div class="test"/>').css({width:"100%",height:10}))).appendTo("body"),c=b.find(".test");a.bScrollOversize=100===c[0].offsetWidth,a.bScrollbarLeft=1!==c.offset().left,b.remove()}function gb(a,b,c,d,e,f){var g,j=!1;for(c!==l&&(g=c,j=!0);d!==e;)a.hasOwnProperty(d)&&(g=j?b(g,a[d],d,a):a[d],j=!0,d+=f);return g}function Aa(a,b){var c=p.defaults.column,d=a.aoColumns.length,c=h.extend({},p.models.oColumn,c,{nTh:b?b:O.createElement("th"),sTitle:c.sTitle?c.sTitle:b?b.innerHTML:"",aDataSort:c.aDataSort?c.aDataSort:[d],mData:c.mData?c.mData:d,idx:d});a.aoColumns.push(c),c=a.aoPreSearchCols,c[d]=h.extend({},p.models.oSearch,c[d]),fa(a,d,null)}function fa(a,b,c){var b=a.aoColumns[b],d=a.oClasses,e=h(b.nTh);if(!b.sWidthOrig){b.sWidthOrig=e.attr("width")||null;var f=(e.attr("style")||"").match(/width:\s*(\d+[pxem%]+)/);f&&(b.sWidthOrig=f[1])}c!==l&&null!==c&&(eb(c),G(p.defaults.column,c),c.mDataProp!==l&&!c.mData&&(c.mData=c.mDataProp),c.sType&&(b._sManualType=c.sType),c.className&&!c.sClass&&(c.sClass=c.className),h.extend(b,c),D(b,c,"sWidth","sWidthOrig"),"number"==typeof c.iDataSort&&(b.aDataSort=[c.iDataSort]),D(b,c,"aDataSort"));var g=b.mData,j=U(g),i=b.mRender?U(b.mRender):null,c=function(a){return"string"==typeof a&&-1!==a.indexOf("@")};b._bAttrSrc=h.isPlainObject(g)&&(c(g.sort)||c(g.type)||c(g.filter)),b.fnGetData=function(a,b,c){var d=j(a,b,l,c);return i&&b?i(d,b,a,c):d},b.fnSetData=function(a,b,c){return Ba(g)(a,b,c)},a.oFeatures.bSort||(b.bSortable=!1,e.addClass(d.sSortableNone)),a=-1!==h.inArray("asc",b.asSorting),c=-1!==h.inArray("desc",b.asSorting),b.bSortable&&(a||c)?a&&!c?(b.sSortingClass=d.sSortableAsc,b.sSortingClassJUI=d.sSortJUIAscAllowed):!a&&c?(b.sSortingClass=d.sSortableDesc,b.sSortingClassJUI=d.sSortJUIDescAllowed):(b.sSortingClass=d.sSortable,b.sSortingClassJUI=d.sSortJUI):(b.sSortingClass=d.sSortableNone,b.sSortingClassJUI="")}function V(a){if(!1!==a.oFeatures.bAutoWidth){var b=a.aoColumns;Ca(a);for(var c=0,d=b.length;d>c;c++)b[c].nTh.style.width=b[c].sWidth}b=a.oScroll,(""!==b.sY||""!==b.sX)&&W(a),u(a,null,"column-sizing",[a])}function ga(a,b){var c=X(a,"bVisible");return"number"==typeof c[b]?c[b]:null}function Y(a,b){var c=X(a,"bVisible"),c=h.inArray(b,c);return-1!==c?c:null}function Z(a){return X(a,"bVisible").length}function X(a,b){var c=[];return h.map(a.aoColumns,function(a,e){a[b]&&c.push(e)}),c}function Da(a){var e,f,g,j,i,h,m,o,k,b=a.aoColumns,c=a.aoData,d=p.ext.type.detect;for(e=0,f=b.length;f>e;e++)if(m=b[e],k=[],!m.sType&&m._sManualType)m.sType=m._sManualType;else if(!m.sType){for(g=0,j=d.length;j>g;g++){for(i=0,h=c.length;h>i&&(k[i]===l&&(k[i]=A(a,i,e,"type")),o=d[g](k[i],a),!(!o||"html"===o));i++);if(o){m.sType=o;break}}m.sType||(m.sType="string")}}function hb(a,b,c,d){var e,f,g,j,i,n,m=a.aoColumns;if(b)for(e=b.length-1;e>=0;e--){n=b[e];var o=n.targets!==l?n.targets:n.aTargets;for(h.isArray(o)||(o=[o]),f=0,g=o.length;g>f;f++)if("number"==typeof o[f]&&0<=o[f]){for(;m.length<=o[f];)Aa(a);d(o[f],n)}else if("number"==typeof o[f]&&0>o[f])d(m.length+o[f],n);else if("string"==typeof o[f])for(j=0,i=m.length;i>j;j++)("_all"==o[f]||h(m[j].nTh).hasClass(o[f]))&&d(j,n)}if(c)for(e=0,a=c.length;a>e;e++)d(e,c[e])}function I(a,b,c,d){var e=a.aoData.length,f=h.extend(!0,{},p.models.oRow,{src:c?"dom":"data"});f._aData=b,a.aoData.push(f);for(var b=a.aoColumns,f=0,g=b.length;g>f;f++)c&&Ea(a,e,f,A(a,e,f)),b[f].sType=null;return a.aiDisplayMaster.push(e),(c||!a.oFeatures.bDeferRender)&&Fa(a,e,c,d),e}function ha(a,b){var c;return b instanceof h||(b=h(b)),b.map(function(b,e){return c=ia(a,e),I(a,c.data,e,c.cells)})}function A(a,b,c,d){var e=a.iDraw,f=a.aoColumns[c],g=a.aoData[b]._aData,j=f.sDefaultContent,c=f.fnGetData(g,d,{settings:a,row:b,col:c});if(c===l)return a.iDrawError!=e&&null===j&&(P(a,0,"Requested unknown parameter "+("function"==typeof f.mData?"{function}":"'"+f.mData+"'")+" for row "+b,4),a.iDrawError=e),j;if(c!==g&&null!==c||null===j){if("function"==typeof c)return c.call(g)}else c=j;return null===c&&"display"==d?"":c}function Ea(a,b,c,d){a.aoColumns[c].fnSetData(a.aoData[b]._aData,d,{settings:a,row:b,col:c})}function Ga(a){return h.map(a.match(/(\\.|[^\.])+/g),function(a){return a.replace(/\\./g,".")})}function U(a){if(h.isPlainObject(a)){var b={};return h.each(a,function(a,c){c&&(b[a]=U(c))}),function(a,c,f,g){var j=b[c]||b._;return j!==l?j(a,c,f,g):a}}if(null===a)return function(a){return a};if("function"==typeof a)return function(b,c,f,g){return a(b,c,f,g)};if("string"==typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var c=function(a,b,f){var g,j;if(""!==f){j=Ga(f);for(var i=0,h=j.length;h>i;i++){if(f=j[i].match($),g=j[i].match(Q),f){for(j[i]=j[i].replace($,""),""!==j[i]&&(a=a[j[i]]),g=[],j.splice(0,i+1),j=j.join("."),i=0,h=a.length;h>i;i++)g.push(c(a[i],b,j));a=f[0].substring(1,f[0].length-1),a=""===a?g:g.join(a);break}if(g)j[i]=j[i].replace(Q,""),a=a[j[i]]();else{if(null===a||a[j[i]]===l)return l;a=a[j[i]]}}}return a};return function(b,e){return c(b,e,a)}}return function(b){return b[a]}}function Ba(a){if(h.isPlainObject(a))return Ba(a._);if(null===a)return function(){};if("function"==typeof a)return function(b,d,e){a(b,"set",d,e)};if("string"==typeof a&&(-1!==a.indexOf(".")||-1!==a.indexOf("[")||-1!==a.indexOf("("))){var b=function(a,d,e){var f,e=Ga(e);f=e[e.length-1];for(var g,j,i=0,h=e.length-1;h>i;i++){if(g=e[i].match($),j=e[i].match(Q),g){for(e[i]=e[i].replace($,""),a[e[i]]=[],f=e.slice(),f.splice(0,i+1),g=f.join("."),j=0,h=d.length;h>j;j++)f={},b(f,d[j],g),a[e[i]].push(f);return}j&&(e[i]=e[i].replace(Q,""),a=a[e[i]](d)),(null===a[e[i]]||a[e[i]]===l)&&(a[e[i]]={}),a=a[e[i]]}f.match(Q)?a[f.replace(Q,"")](d):a[f.replace($,"")]=d};return function(c,d){return b(c,d,a)}}return function(b,d){b[a]=d}}function Ha(a){return C(a.aoData,"_aData")}function ja(a){a.aoData.length=0,a.aiDisplayMaster.length=0,a.aiDisplay.length=0}function ka(a,b,c){for(var d=-1,e=0,f=a.length;f>e;e++)a[e]==b?d=e:a[e]>b&&a[e]--;-1!=d&&c===l&&a.splice(d,1)}function la(a,b,c,d){var f,e=a.aoData[b];if("dom"!==c&&(c&&"auto"!==c||"dom"!==e.src)){var j,g=e.anCells;if(g)for(c=0,f=g.length;f>c;c++){for(j=g[c];j.childNodes.length;)j.removeChild(j.firstChild);g[c].innerHTML=A(a,b,c,"display")}}else e._aData=ia(a,e).data;if(e._aSortData=null,e._aFilterData=null,a=a.aoColumns,d!==l)a[d].sType=null;else for(c=0,f=a.length;f>c;c++)a[c].sType=null;Ia(e)}function ia(a,b){var f,g,j,n,c=[],d=[],e=b.firstChild,i=0,m=a.aoColumns,o=function(a,b,c){"string"==typeof a&&(b=a.indexOf("@"),-1!==b&&(a=a.substring(b+1),j["@"+a]=c.getAttribute(a)))},k=function(a){g=m[i],n=h.trim(a.innerHTML),g&&g._bAttrSrc?(j={display:n},o(g.mData.sort,j,a),o(g.mData.type,j,a),o(g.mData.filter,j,a),c.push(j)):c.push(n),i++};if(e)for(;e;)f=e.nodeName.toUpperCase(),("TD"==f||"TH"==f)&&(k(e),d.push(e)),e=e.nextSibling;
else for(d=b.anCells,e=0,f=d.length;f>e;e++)k(d[e]);return{data:c,cells:d}}function Fa(a,b,c,d){var j,i,h,m,o,e=a.aoData[b],f=e._aData,g=[];if(null===e.nTr){for(j=c||O.createElement("tr"),e.nTr=j,e.anCells=g,j._DT_RowIndex=b,Ia(e),m=0,o=a.aoColumns.length;o>m;m++)h=a.aoColumns[m],i=c?d[m]:O.createElement(h.sCellType),g.push(i),(!c||h.mRender||h.mData!==m)&&(i.innerHTML=A(a,b,m,"display")),h.sClass&&(i.className+=" "+h.sClass),h.bVisible&&!c?j.appendChild(i):!h.bVisible&&c&&i.parentNode.removeChild(i),h.fnCreatedCell&&h.fnCreatedCell.call(a.oInstance,i,A(a,b,m),f,b,m);u(a,"aoRowCreatedCallback",null,[j,f,b])}e.nTr.setAttribute("role","row")}function Ia(a){var b=a.nTr,c=a._aData;if(b){if(c.DT_RowId&&(b.id=c.DT_RowId),c.DT_RowClass){var d=c.DT_RowClass.split(" ");a.__rowc=a.__rowc?Ja(a.__rowc.concat(d)):d,h(b).removeClass(a.__rowc.join(" ")).addClass(c.DT_RowClass)}c.DT_RowData&&h(b).data(c.DT_RowData)}}function ib(a){var b,c,d,e,f,g=a.nTHead,j=a.nTFoot,i=0===h("th, td",g).length,n=a.oClasses,m=a.aoColumns;for(i&&(e=h("<tr/>").appendTo(g)),b=0,c=m.length;c>b;b++)f=m[b],d=h(f.nTh).addClass(f.sClass),i&&d.appendTo(e),a.oFeatures.bSort&&(d.addClass(f.sSortingClass),!1!==f.bSortable&&(d.attr("tabindex",a.iTabIndex).attr("aria-controls",a.sTableId),Ka(a,f.nTh,b))),f.sTitle!=d.html()&&d.html(f.sTitle),La(a,"header")(a,d,f,n);if(i&&aa(a.aoHeader,g),h(g).find(">tr").attr("role","row"),h(g).find(">tr>th, >tr>td").addClass(n.sHeaderTH),h(j).find(">tr>th, >tr>td").addClass(n.sFooterTH),null!==j)for(a=a.aoFooter[0],b=0,c=a.length;c>b;b++)f=m[b],f.nTf=a[b].cell,f.sClass&&h(f.nTf).addClass(f.sClass)}function ba(a,b,c){var d,e,f,n,g=[],j=[],i=a.aoColumns.length;if(b){for(c===l&&(c=!1),d=0,e=b.length;e>d;d++){for(g[d]=b[d].slice(),g[d].nTr=b[d].nTr,f=i-1;f>=0;f--)!a.aoColumns[f].bVisible&&!c&&g[d].splice(f,1);j.push([])}for(d=0,e=g.length;e>d;d++){if(a=g[d].nTr)for(;f=a.firstChild;)a.removeChild(f);for(f=0,b=g[d].length;b>f;f++)if(n=i=1,j[d][f]===l){for(a.appendChild(g[d][f].cell),j[d][f]=1;g[d+i]!==l&&g[d][f].cell==g[d+i][f].cell;)j[d+i][f]=1,i++;for(;g[d][f+n]!==l&&g[d][f].cell==g[d][f+n].cell;){for(c=0;i>c;c++)j[d+c][f+n]=1;n++}h(g[d][f].cell).attr("rowspan",i).attr("colspan",n)}}}}function K(a){var b=u(a,"aoPreDrawCallback","preDraw",[a]);if(-1!==h.inArray(!1,b))B(a,!1);else{var b=[],c=0,d=a.asStripeClasses,e=d.length,f=a.oLanguage,g=a.iInitDisplayStart,j="ssp"==z(a),i=a.aiDisplay;a.bDrawing=!0,g!==l&&-1!==g&&(a._iDisplayStart=j?g:g>=a.fnRecordsDisplay()?0:g,a.iInitDisplayStart=-1);var g=a._iDisplayStart,n=a.fnDisplayEnd();if(a.bDeferLoading)a.bDeferLoading=!1,a.iDraw++,B(a,!1);else if(j){if(!a.bDestroying&&!jb(a))return}else a.iDraw++;if(0!==i.length)for(f=j?a.aoData.length:n,j=j?0:g;f>j;j++){var m=i[j],o=a.aoData[m];if(null===o.nTr&&Fa(a,m),m=o.nTr,0!==e){var k=d[c%e];o._sRowStripe!=k&&(h(m).removeClass(o._sRowStripe).addClass(k),o._sRowStripe=k)}u(a,"aoRowCallback",null,[m,o._aData,c,j]),b.push(m),c++}else c=f.sZeroRecords,1==a.iDraw&&"ajax"==z(a)?c=f.sLoadingRecords:f.sEmptyTable&&0===a.fnRecordsTotal()&&(c=f.sEmptyTable),b[0]=h("<tr/>",{"class":e?d[0]:""}).append(h("<td />",{valign:"top",colSpan:Z(a),"class":a.oClasses.sRowEmpty}).html(c))[0];u(a,"aoHeaderCallback","header",[h(a.nTHead).children("tr")[0],Ha(a),g,n,i]),u(a,"aoFooterCallback","footer",[h(a.nTFoot).children("tr")[0],Ha(a),g,n,i]),d=h(a.nTBody),d.children().detach(),d.append(h(b)),u(a,"aoDrawCallback","draw",[a]),a.bSorted=!1,a.bFiltered=!1,a.bDrawing=!1}}function L(a,b){var c=a.oFeatures,d=c.bFilter;c.bSort&&kb(a),d?ca(a,a.oPreviousSearch):a.aiDisplay=a.aiDisplayMaster.slice(),!0!==b&&(a._iDisplayStart=0),a._drawHold=b,K(a),a._drawHold=!1}function lb(a){var b=a.oClasses,c=h(a.nTable),c=h("<div/>").insertBefore(c),d=a.oFeatures,e=h("<div/>",{id:a.sTableId+"_wrapper","class":b.sWrapper+(a.nTFoot?"":" "+b.sNoFooter)});a.nHolding=c[0],a.nTableWrapper=e[0],a.nTableReinsertBefore=a.nTable.nextSibling;for(var g,j,i,n,m,o,f=a.sDom.split(""),k=0;k<f.length;k++){if(g=null,j=f[k],"<"==j){if(i=h("<div/>")[0],n=f[k+1],"'"==n||'"'==n){for(m="",o=2;f[k+o]!=n;)m+=f[k+o],o++;"H"==m?m=b.sJUIHeader:"F"==m&&(m=b.sJUIFooter),-1!=m.indexOf(".")?(n=m.split("."),i.id=n[0].substr(1,n[0].length-1),i.className=n[1]):"#"==m.charAt(0)?i.id=m.substr(1,m.length-1):i.className=m,k+=o}e.append(i),e=h(i)}else if(">"==j)e=e.parent();else if("l"==j&&d.bPaginate&&d.bLengthChange)g=mb(a);else if("f"==j&&d.bFilter)g=nb(a);else if("r"==j&&d.bProcessing)g=ob(a);else if("t"==j)g=pb(a);else if("i"==j&&d.bInfo)g=qb(a);else if("p"==j&&d.bPaginate)g=rb(a);else if(0!==p.ext.feature.length)for(i=p.ext.feature,o=0,n=i.length;n>o;o++)if(j==i[o].cFeature){g=i[o].fnInit(a);break}g&&(i=a.aanFeatures,i[j]||(i[j]=[]),i[j].push(g),e.append(g))}c.replaceWith(e)}function aa(a,b){var d,e,f,g,j,i,n,m,o,k,c=h(b).children("tr");for(a.splice(0,a.length),f=0,i=c.length;i>f;f++)a.push([]);for(f=0,i=c.length;i>f;f++)for(d=c[f],e=d.firstChild;e;){if("TD"==e.nodeName.toUpperCase()||"TH"==e.nodeName.toUpperCase()){for(m=1*e.getAttribute("colspan"),o=1*e.getAttribute("rowspan"),m=m&&0!==m&&1!==m?m:1,o=o&&0!==o&&1!==o?o:1,g=0,j=a[f];j[g];)g++;for(n=g,k=1===m?!0:!1,j=0;m>j;j++)for(g=0;o>g;g++)a[f+g][n+j]={cell:e,unique:k},a[f+g].nTr=d}e=e.nextSibling}}function ma(a,b,c){var d=[];c||(c=a.aoHeader,b&&(c=[],aa(c,b)));for(var b=0,e=c.length;e>b;b++)for(var f=0,g=c[b].length;g>f;f++)!c[b][f].unique||d[f]&&a.bSortCellsTop||(d[f]=c[b][f].cell);return d}function na(a,b,c){if(u(a,"aoServerParams","serverParams",[b]),b&&h.isArray(b)){var d={},e=/(.*?)\[\]$/;h.each(b,function(a,b){var c=b.name.match(e);c?(c=c[0],d[c]||(d[c]=[]),d[c].push(b.value)):d[b.name]=b.value}),b=d}var f,g=a.ajax,j=a.oInstance;if(h.isPlainObject(g)&&g.data){f=g.data;var i=h.isFunction(f)?f(b):f,b=h.isFunction(f)&&i?i:h.extend(!0,b,i);delete g.data}i={data:b,success:function(b){var d=b.error||b.sError;d&&a.oApi._fnLog(a,0,d),a.json=b,u(a,null,"xhr",[a,b]),c(b)},dataType:"json",cache:!1,type:a.sServerMethod,error:function(b,c){var d=a.oApi._fnLog;"parsererror"==c?d(a,0,"Invalid JSON response",1):4===b.readyState&&d(a,0,"Ajax error",7),B(a,!1)}},a.oAjaxData=b,u(a,null,"preXhr",[a,b]),a.fnServerData?a.fnServerData.call(j,a.sAjaxSource,h.map(b,function(a,b){return{name:b,value:a}}),c,a):a.sAjaxSource||"string"==typeof g?a.jqXHR=h.ajax(h.extend(i,{url:g||a.sAjaxSource})):h.isFunction(g)?a.jqXHR=g.call(j,b,c,a):(a.jqXHR=h.ajax(h.extend(i,g)),g.data=f)}function jb(a){return a.bAjaxDataGet?(a.iDraw++,B(a,!0),na(a,sb(a),function(b){tb(a,b)}),!1):!0}function sb(a){var g,i,n,m,b=a.aoColumns,c=b.length,d=a.oFeatures,e=a.oPreviousSearch,f=a.aoPreSearchCols,j=[],o=R(a);g=a._iDisplayStart,i=!1!==d.bPaginate?a._iDisplayLength:-1;var k=function(a,b){j.push({name:a,value:b})};k("sEcho",a.iDraw),k("iColumns",c),k("sColumns",C(b,"sName").join(",")),k("iDisplayStart",g),k("iDisplayLength",i);var l={draw:a.iDraw,columns:[],order:[],start:g,length:i,search:{value:e.sSearch,regex:e.bRegex}};for(g=0;c>g;g++)n=b[g],m=f[g],i="function"==typeof n.mData?"function":n.mData,l.columns.push({data:i,name:n.sName,searchable:n.bSearchable,orderable:n.bSortable,search:{value:m.sSearch,regex:m.bRegex}}),k("mDataProp_"+g,i),d.bFilter&&(k("sSearch_"+g,m.sSearch),k("bRegex_"+g,m.bRegex),k("bSearchable_"+g,n.bSearchable)),d.bSort&&k("bSortable_"+g,n.bSortable);return d.bFilter&&(k("sSearch",e.sSearch),k("bRegex",e.bRegex)),d.bSort&&(h.each(o,function(a,b){l.order.push({column:b.col,dir:b.dir}),k("iSortCol_"+a,b.col),k("sSortDir_"+a,b.dir)}),k("iSortingCols",o.length)),b=p.ext.legacy.ajax,null===b?a.sAjaxSource?j:l:b?j:l}function tb(a,b){var c=b.sEcho!==l?b.sEcho:b.draw,d=b.iTotalRecords!==l?b.iTotalRecords:b.recordsTotal,e=b.iTotalDisplayRecords!==l?b.iTotalDisplayRecords:b.recordsFiltered;if(c){if(1*c<a.iDraw)return;a.iDraw=1*c}for(ja(a),a._iRecordsTotal=parseInt(d,10),a._iRecordsDisplay=parseInt(e,10),c=oa(a,b),d=0,e=c.length;e>d;d++)I(a,c[d]);a.aiDisplay=a.aiDisplayMaster.slice(),a.bAjaxDataGet=!1,K(a),a._bInitComplete||pa(a,b),a.bAjaxDataGet=!0,B(a,!1)}function oa(a,b){var c=h.isPlainObject(a.ajax)&&a.ajax.dataSrc!==l?a.ajax.dataSrc:a.sAjaxDataProp;return"data"===c?b.aaData||b[c]:""!==c?U(c)(b):b}function nb(a){var b=a.oClasses,c=a.sTableId,d=a.oLanguage,e=a.oPreviousSearch,f=a.aanFeatures,g='<input type="search" class="'+b.sFilterInput+'"/>',j=d.sSearch,j=j.match(/_INPUT_/)?j.replace("_INPUT_",g):j+g,b=h("<div/>",{id:f.f?null:c+"_filter","class":b.sFilter}).append(h("<label/>").append(j)),f=function(){var b=this.value?this.value:"";b!=e.sSearch&&(ca(a,{sSearch:b,bRegex:e.bRegex,bSmart:e.bSmart,bCaseInsensitive:e.bCaseInsensitive}),a._iDisplayStart=0,K(a))},i=h("input",b).val(e.sSearch).attr("placeholder",d.sSearchPlaceholder).bind("keyup.DT search.DT input.DT paste.DT cut.DT","ssp"===z(a)?Ma(f,400):f).bind("keypress.DT",function(a){return 13==a.keyCode?!1:void 0}).attr("aria-controls",c);return h(a.nTable).on("search.dt.DT",function(b,c){if(a===c)try{i[0]!==O.activeElement&&i.val(e.sSearch)}catch(d){}}),b[0]}function ca(a,b,c){var d=a.oPreviousSearch,e=a.aoPreSearchCols,f=function(a){d.sSearch=a.sSearch,d.bRegex=a.bRegex,d.bSmart=a.bSmart,d.bCaseInsensitive=a.bCaseInsensitive};if(Da(a),"ssp"!=z(a)){for(ub(a,b.sSearch,c,b.bEscapeRegex!==l?!b.bEscapeRegex:b.bRegex,b.bSmart,b.bCaseInsensitive),f(b),b=0;b<e.length;b++)vb(a,e[b].sSearch,b,e[b].bEscapeRegex!==l?!e[b].bEscapeRegex:e[b].bRegex,e[b].bSmart,e[b].bCaseInsensitive);wb(a)}else f(b);a.bFiltered=!0,u(a,null,"search",[a])}function wb(a){for(var d,e,b=p.ext.search,c=a.aiDisplay,f=0,g=b.length;g>f;f++){for(var j=[],i=0,h=c.length;h>i;i++)e=c[i],d=a.aoData[e],b[f](a,d._aFilterData,e,d._aData,i)&&j.push(e);c.length=0,c.push.apply(c,j)}}function vb(a,b,c,d,e,f){if(""!==b)for(var g=a.aiDisplay,d=Na(b,d,e,f),e=g.length-1;e>=0;e--)b=a.aoData[g[e]]._aFilterData[c],d.test(b)||g.splice(e,1)}function ub(a,b,c,d,e,f){var g,d=Na(b,d,e,f),e=a.oPreviousSearch.sSearch,f=a.aiDisplayMaster;if(0!==p.ext.search.length&&(c=!0),g=xb(a),0>=b.length)a.aiDisplay=f.slice();else for((g||c||e.length>b.length||0!==b.indexOf(e)||a.bSorted)&&(a.aiDisplay=f.slice()),b=a.aiDisplay,c=b.length-1;c>=0;c--)d.test(a.aoData[b[c]]._sFilterRow)||b.splice(c,1)}function Na(a,b,c,d){return a=b?a:Oa(a),c&&(a="^(?=.*?"+h.map(a.match(/"[^"]+"|[^ ]+/g)||"",function(a){return'"'===a.charAt(0)?a.match(/^"(.*)"$/)[1]:a}).join(")(?=.*?")+").*$"),RegExp(a,d?"i":"")}function Oa(a){return a.replace(Vb,"\\$1")}function xb(a){var c,d,e,f,g,j,i,h,b=a.aoColumns,m=p.ext.type.search;for(c=!1,d=0,f=a.aoData.length;f>d;d++)if(h=a.aoData[d],!h._aFilterData){for(j=[],e=0,g=b.length;g>e;e++)c=b[e],c.bSearchable?(i=A(a,d,e,"filter"),m[c.sType]&&(i=m[c.sType](i)),null===i&&(i=""),"string"!=typeof i&&i.toString&&(i=i.toString())):i="",i.indexOf&&-1!==i.indexOf("&")&&(qa.innerHTML=i,i=Wb?qa.textContent:qa.innerText),i.replace&&(i=i.replace(/[\r\n]/g,"")),j.push(i);h._aFilterData=j,h._sFilterRow=j.join("  "),c=!0}return c}function yb(a){return{search:a.sSearch,smart:a.bSmart,regex:a.bRegex,caseInsensitive:a.bCaseInsensitive}}function zb(a){return{sSearch:a.search,bSmart:a.smart,bRegex:a.regex,bCaseInsensitive:a.caseInsensitive}}function qb(a){var b=a.sTableId,c=a.aanFeatures.i,d=h("<div/>",{"class":a.oClasses.sInfo,id:c?null:b+"_info"});return c||(a.aoDrawCallback.push({fn:Ab,sName:"information"}),d.attr("role","status").attr("aria-live","polite"),h(a.nTable).attr("aria-describedby",b+"_info")),d[0]}function Ab(a){var b=a.aanFeatures.i;if(0!==b.length){var c=a.oLanguage,d=a._iDisplayStart+1,e=a.fnDisplayEnd(),f=a.fnRecordsTotal(),g=a.fnRecordsDisplay(),j=g?c.sInfo:c.sInfoEmpty;g!==f&&(j+=" "+c.sInfoFiltered),j+=c.sInfoPostFix,j=Bb(a,j),c=c.fnInfoCallback,null!==c&&(j=c.call(a.oInstance,a,d,e,f,g,j)),h(b).html(j)}}function Bb(a,b){var c=a.fnFormatNumber,d=a._iDisplayStart+1,e=a._iDisplayLength,f=a.fnRecordsDisplay(),g=-1===e;return b.replace(/_START_/g,c.call(a,d)).replace(/_END_/g,c.call(a,a.fnDisplayEnd())).replace(/_MAX_/g,c.call(a,a.fnRecordsTotal())).replace(/_TOTAL_/g,c.call(a,f)).replace(/_PAGE_/g,c.call(a,g?1:Math.ceil(d/e))).replace(/_PAGES_/g,c.call(a,g?1:Math.ceil(f/e)))}function ra(a){var b,c,f,d=a.iInitDisplayStart,e=a.aoColumns;if(c=a.oFeatures,a.bInitialised){for(lb(a),ib(a),ba(a,a.aoHeader),ba(a,a.aoFooter),B(a,!0),c.bAutoWidth&&Ca(a),b=0,c=e.length;c>b;b++)f=e[b],f.sWidth&&(f.nTh.style.width=s(f.sWidth));L(a),e=z(a),"ssp"!=e&&("ajax"==e?na(a,[],function(c){var f=oa(a,c);for(b=0;b<f.length;b++)I(a,f[b]);a.iInitDisplayStart=d,L(a),B(a,!1),pa(a,c)},a):(B(a,!1),pa(a)))}else setTimeout(function(){ra(a)},200)}function pa(a,b){a._bInitComplete=!0,b&&V(a),u(a,"aoInitComplete","init",[a,b])}function Pa(a,b){var c=parseInt(b,10);a._iDisplayLength=c,Qa(a),u(a,null,"length",[a,c])}function mb(a){for(var b=a.oClasses,c=a.sTableId,d=a.aLengthMenu,e=h.isArray(d[0]),f=e?d[0]:d,d=e?d[1]:d,e=h("<select/>",{name:c+"_length","aria-controls":c,"class":b.sLengthSelect}),g=0,j=f.length;j>g;g++)e[0][g]=new Option(d[g],f[g]);var i=h("<div><label/></div>").addClass(b.sLength);return a.aanFeatures.l||(i[0].id=c+"_length"),i.children().append(a.oLanguage.sLengthMenu.replace("_MENU_",e[0].outerHTML)),h("select",i).val(a._iDisplayLength).bind("change.DT",function(){Pa(a,h(this).val()),K(a)}),h(a.nTable).bind("length.dt.DT",function(b,c,d){a===c&&h("select",i).val(d)}),i[0]}function rb(a){var b=a.sPaginationType,c=p.ext.pager[b],d="function"==typeof c,e=function(a){K(a)},b=h("<div/>").addClass(a.oClasses.sPaging+b)[0],f=a.aanFeatures;return d||c.fnInit(a,b,e),f.p||(b.id=a.sTableId+"_paginate",a.aoDrawCallback.push({fn:function(a){if(d){var o,b=a._iDisplayStart,i=a._iDisplayLength,h=a.fnRecordsDisplay(),m=-1===i,b=m?0:Math.ceil(b/i),i=m?1:Math.ceil(h/i),h=c(b,i),m=0;for(o=f.p.length;o>m;m++)La(a,"pageButton")(a,f.p[m],m,h,b,i)}else c.fnUpdate(a,e)},sName:"pagination"})),b}function Ra(a,b,c){var d=a._iDisplayStart,e=a._iDisplayLength,f=a.fnRecordsDisplay();return 0===f||-1===e?d=0:"number"==typeof b?(d=b*e,d>f&&(d=0)):"first"==b?d=0:"previous"==b?(d=e>=0?d-e:0,0>d&&(d=0)):"next"==b?f>d+e&&(d+=e):"last"==b?d=Math.floor((f-1)/e)*e:P(a,0,"Unknown paging action: "+b,5),b=a._iDisplayStart!==d,a._iDisplayStart=d,b&&(u(a,null,"page",[a]),c&&K(a)),b}function ob(a){return h("<div/>",{id:a.aanFeatures.r?null:a.sTableId+"_processing","class":a.oClasses.sProcessing}).html(a.oLanguage.sProcessing).insertBefore(a.nTable)[0]}function B(a,b){a.oFeatures.bProcessing&&h(a.aanFeatures.r).css("display",b?"block":"none"),u(a,null,"processing",[a,b])}function pb(a){var b=h(a.nTable);b.attr("role","grid");var c=a.oScroll;if(""===c.sX&&""===c.sY)return a.nTable;var d=c.sX,e=c.sY,f=a.oClasses,g=b.children("caption"),j=g.length?g[0]._captionSide:null,i=h(b[0].cloneNode(!1)),n=h(b[0].cloneNode(!1)),m=b.children("tfoot");c.sX&&"100%"===b.attr("width")&&b.removeAttr("width"),m.length||(m=null),c=h("<div/>",{"class":f.sScrollWrapper}).append(h("<div/>",{"class":f.sScrollHead}).css({overflow:"hidden",position:"relative",border:0,width:d?d?s(d):null:"100%"}).append(h("<div/>",{"class":f.sScrollHeadInner}).css({"box-sizing":"content-box",width:c.sXInner||"100%"}).append(i.removeAttr("id").css("margin-left",0).append(b.children("thead")))).append("top"===j?g:null)).append(h("<div/>",{"class":f.sScrollBody}).css({overflow:"auto",height:e?s(e):null,width:d?s(d):null}).append(b)),m&&c.append(h("<div/>",{"class":f.sScrollFoot}).css({overflow:"hidden",border:0,width:d?d?s(d):null:"100%"}).append(h("<div/>",{"class":f.sScrollFootInner}).append(n.removeAttr("id").css("margin-left",0).append(b.children("tfoot")))).append("bottom"===j?g:null));var b=c.children(),o=b[0],f=b[1],k=m?b[2]:null;return d&&h(f).scroll(function(){var a=this.scrollLeft;o.scrollLeft=a,m&&(k.scrollLeft=a)}),a.nScrollHead=o,a.nScrollBody=f,a.nScrollFoot=k,a.aoDrawCallback.push({fn:W,sName:"scrolling"}),c[0]}function W(a){var y,t,x,w,z,D,b=a.oScroll,c=b.sX,d=b.sXInner,e=b.sY,f=b.iBarWidth,g=h(a.nScrollHead),j=g[0].style,i=g.children("div"),n=i[0].style,m=i.children("table"),i=a.nScrollBody,o=h(i),k=i.style,l=h(a.nScrollFoot).children("div"),p=l.children("table"),r=h(a.nTHead),q=h(a.nTable),da=q[0],M=da.style,J=a.nTFoot?h(a.nTFoot):null,u=a.oBrowser,v=u.bScrollOversize,A=[],B=[],C=[],E=function(a){a=a.style,a.paddingTop="0",a.paddingBottom="0",a.borderTopWidth="0",a.borderBottomWidth="0",a.height=0};q.children("thead, tfoot").remove(),z=r.clone().prependTo(q),y=r.find("tr"),x=z.find("tr"),z.find("th, td").removeAttr("tabindex"),J&&(w=J.clone().prependTo(q),t=J.find("tr"),w=w.find("tr")),c||(k.width="100%",g[0].style.width="100%"),h.each(ma(a,z),function(b,c){D=ga(a,b),c.style.width=a.aoColumns[D].sWidth}),J&&F(function(a){a.style.width=""},w),b.bCollapse&&""!==e&&(k.height=o[0].offsetHeight+r[0].offsetHeight+"px"),g=q.outerWidth(),""===c?(M.width="100%",v&&(q.find("tbody").height()>i.offsetHeight||"scroll"==o.css("overflow-y"))&&(M.width=s(q.outerWidth()-f))):""!==d?M.width=s(d):g==o.width()&&o.height()<q.height()?(M.width=s(g-f),q.outerWidth()>g-f&&(M.width=s(g))):M.width=s(g),g=q.outerWidth(),F(E,x),F(function(a){C.push(a.innerHTML),A.push(s(h(a).css("width")))},x),F(function(a,b){a.style.width=A[b]},y),h(x).height(0),J&&(F(E,w),F(function(a){B.push(s(h(a).css("width")))},w),F(function(a,b){a.style.width=B[b]},t),h(w).height(0)),F(function(a,b){a.innerHTML='<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+C[b]+"</div>",a.style.width=A[b]},x),J&&F(function(a,b){a.innerHTML="",a.style.width=B[b]},w),q.outerWidth()<g?(t=i.scrollHeight>i.offsetHeight||"scroll"==o.css("overflow-y")?g+f:g,v&&(i.scrollHeight>i.offsetHeight||"scroll"==o.css("overflow-y"))&&(M.width=s(t-f)),(""===c||""!==d)&&P(a,1,"Possible column misalignment",6)):t="100%",k.width=s(t),j.width=s(t),J&&(a.nScrollFoot.style.width=s(t)),!e&&v&&(k.height=s(da.offsetHeight+f)),e&&b.bCollapse&&(k.height=s(e),b=c&&da.offsetWidth>i.offsetWidth?f:0,da.offsetHeight<i.offsetHeight&&(k.height=s(da.offsetHeight+b))),b=q.outerWidth(),m[0].style.width=s(b),n.width=s(b),m=q.height()>i.clientHeight||"scroll"==o.css("overflow-y"),u="padding"+(u.bScrollbarLeft?"Left":"Right"),n[u]=m?f+"px":"0px",J&&(p[0].style.width=s(b),l[0].style.width=s(b),l[0].style[u]=m?f+"px":"0px"),o.scroll(),!a.bSorted&&!a.bFiltered||a._drawHold||(i.scrollTop=0)}function F(a,b,c){for(var g,j,d=0,e=0,f=b.length;f>e;){for(g=b[e].firstChild,j=c?c[e].firstChild:null;g;)1===g.nodeType&&(c?a(g,j,d):a(g,d),d++),g=g.nextSibling,j=c?j.nextSibling:null;e++}}function Ca(a){var k,l,b=a.nTable,c=a.aoColumns,d=a.oScroll,e=d.sY,f=d.sX,g=d.sXInner,j=c.length,d=X(a,"bVisible"),i=h("th",a.nTHead),n=b.getAttribute("width"),m=b.parentNode,o=!1;for(k=0;k<d.length;k++)l=c[d[k]],null!==l.sWidth&&(l.sWidth=Cb(l.sWidthOrig,m),o=!0);if(o||f||e||j!=Z(a)||j!=i.length){j=h(b).clone().empty().css("visibility","hidden").removeAttr("id").append(h(a.nTHead).clone(!1)).append(h(a.nTFoot).clone(!1)).append(h("<tbody><tr/></tbody>")),j.find("tfoot th, tfoot td").css("width","");var p=j.find("tbody tr"),i=ma(a,j.find("thead")[0]);for(k=0;k<d.length;k++)l=c[d[k]],i[k].style.width=null!==l.sWidthOrig&&""!==l.sWidthOrig?s(l.sWidthOrig):"";if(a.aoData.length)for(k=0;k<d.length;k++)o=d[k],l=c[o],h(Db(a,o)).clone(!1).append(l.sContentPadding).appendTo(p);if(j.appendTo(m),f&&g?j.width(g):f?(j.css("width","auto"),j.width()<m.offsetWidth&&j.width(m.offsetWidth)):e?j.width(m.offsetWidth):n&&j.width(n),Eb(a,j[0]),f){for(k=g=0;k<d.length;k++)l=c[d[k]],e=h(i[k]).outerWidth(),g+=null===l.sWidthOrig?e:parseInt(l.sWidth,10)+e-h(i[k]).width();j.width(s(g)),b.style.width=s(g)}for(k=0;k<d.length;k++)l=c[d[k]],(e=h(i[k]).width())&&(l.sWidth=s(e));b.style.width=s(j.css("width")),j.remove()}else for(k=0;j>k;k++)c[k].sWidth=s(i.eq(k).width());n&&(b.style.width=s(n)),!n&&!f||a._reszEvt||(h(za).bind("resize.DT-"+a.sInstance,Ma(function(){V(a)})),a._reszEvt=!0)}function Ma(a,b){var d,e,c=b||200;return function(){var b=this,g=+new Date,j=arguments;d&&d+c>g?(clearTimeout(e),e=setTimeout(function(){d=l,a.apply(b,j)},c)):d?(d=g,a.apply(b,j)):d=g}}function Cb(a,b){if(!a)return 0;var c=h("<div/>").css("width",s(a)).appendTo(b||O.body),d=c[0].offsetWidth;return c.remove(),d}function Eb(a,b){var c=a.oScroll;(c.sX||c.sY)&&(c=c.sX?0:c.iBarWidth,b.style.width=s(h(b).outerWidth()-c))}function Db(a,b){var c=Fb(a,b);if(0>c)return null;var d=a.aoData[c];return d.nTr?d.anCells[b]:h("<td/>").html(A(a,c,b,"display"))[0]}function Fb(a,b){for(var c,d=-1,e=-1,f=0,g=a.aoData.length;g>f;f++)c=A(a,f,b,"display")+"",c=c.replace(Xb,""),c.length>d&&(d=c.length,e=f);return e}function s(a){return null===a?"0px":"number"==typeof a?0>a?"0px":a+"px":a.match(/\d$/)?a+"px":a}function Gb(){if(!p.__scrollbarWidth){var a=h("<p/>").css({width:"100%",height:200,padding:0})[0],b=h("<div/>").css({position:"absolute",top:0,left:0,width:200,height:150,padding:0,overflow:"hidden",visibility:"hidden"}).append(a).appendTo("body"),c=a.offsetWidth;b.css("overflow","scroll"),a=a.offsetWidth,c===a&&(a=b[0].clientWidth),b.remove(),p.__scrollbarWidth=c-a}return p.__scrollbarWidth}function R(a){var b,c,f,g,j,i,d=[],e=a.aoColumns;b=a.aaSortingFixed,c=h.isPlainObject(b);var n=[];for(f=function(a){a.length&&!h.isArray(a[0])?n.push(a):n.push.apply(n,a)},h.isArray(b)&&f(b),c&&b.pre&&f(b.pre),f(a.aaSorting),c&&b.post&&f(b.post),a=0;a<n.length;a++)for(i=n[a][0],f=e[i].aDataSort,b=0,c=f.length;c>b;b++)g=f[b],j=e[g].sType||"string",d.push({src:i,col:g,dir:n[a][1],index:n[a][2],type:j,formatter:p.ext.type.order[j+"-pre"]});return d}function kb(a){var b,c,j,h,d=[],e=p.ext.type.order,f=a.aoData,g=0,i=a.aiDisplayMaster;for(Da(a),h=R(a),b=0,c=h.length;c>b;b++)j=h[b],j.formatter&&g++,Hb(a,j.col);if("ssp"!=z(a)&&0!==h.length){for(b=0,c=i.length;c>b;b++)d[i[b]]=b;i.sort(g===h.length?function(a,b){var c,e,g,j,i=h.length,l=f[a]._aSortData,p=f[b]._aSortData;for(g=0;i>g;g++)if(j=h[g],c=l[j.col],e=p[j.col],c=e>c?-1:c>e?1:0,0!==c)return"asc"===j.dir?c:-c;return c=d[a],e=d[b],e>c?-1:c>e?1:0}:function(a,b){var c,g,j,i,l=h.length,p=f[a]._aSortData,r=f[b]._aSortData;for(j=0;l>j;j++)if(i=h[j],c=p[i.col],g=r[i.col],i=e[i.type+"-"+i.dir]||e["string-"+i.dir],c=i(c,g),0!==c)return c;return c=d[a],g=d[b],g>c?-1:c>g?1:0})}a.bSorted=!0}function Ib(a){for(var b,c,d=a.aoColumns,e=R(a),a=a.oLanguage.oAria,f=0,g=d.length;g>f;f++){c=d[f];var j=c.asSorting;b=c.sTitle.replace(/<.*?>/g,"");var i=c.nTh;i.removeAttribute("aria-sort"),c.bSortable&&(0<e.length&&e[0].col==f?(i.setAttribute("aria-sort","asc"==e[0].dir?"ascending":"descending"),c=j[e[0].index+1]||j[0]):c=j[0],b+="asc"===c?a.sSortAscending:a.sSortDescending),i.setAttribute("aria-label",b)}}function Sa(a,b,c,d){var e=a.aaSorting,f=a.aoColumns[b].asSorting,g=function(a){var b=a._idx;return b===l&&(b=h.inArray(a[1],f)),b+1>=f.length?0:b+1};"number"==typeof e[0]&&(e=a.aaSorting=[e]),c&&a.oFeatures.bSortMulti?(c=h.inArray(b,C(e,"0")),-1!==c?(b=g(e[c]),e[c][1]=f[b],e[c]._idx=b):(e.push([b,f[0],0]),e[e.length-1]._idx=0)):e.length&&e[0][0]==b?(b=g(e[0]),e.length=1,e[0][1]=f[b],e[0]._idx=b):(e.length=0,e.push([b,f[0]]),e[0]._idx=0),L(a),"function"==typeof d&&d(a)}function Ka(a,b,c,d){var e=a.aoColumns[c];Ta(b,{},function(b){!1!==e.bSortable&&(a.oFeatures.bProcessing?(B(a,!0),setTimeout(function(){Sa(a,c,b.shiftKey,d),"ssp"!==z(a)&&B(a,!1)},0)):Sa(a,c,b.shiftKey,d))})}function sa(a){var f,g,b=a.aLastSort,c=a.oClasses.sSortColumn,d=R(a),e=a.oFeatures;if(e.bSort&&e.bSortClasses){for(e=0,f=b.length;f>e;e++)g=b[e].src,h(C(a.aoData,"anCells",g)).removeClass(c+(2>e?e+1:3));for(e=0,f=d.length;f>e;e++)g=d[e].src,h(C(a.aoData,"anCells",g)).addClass(c+(2>e?e+1:3))}a.aLastSort=d}function Hb(a,b){var e,c=a.aoColumns[b],d=p.ext.order[c.sSortDataType];d&&(e=d.call(a.oInstance,a,b,Y(a,b)));for(var f,g=p.ext.type.order[c.sType+"-pre"],j=0,i=a.aoData.length;i>j;j++)c=a.aoData[j],c._aSortData||(c._aSortData=[]),(!c._aSortData[b]||d)&&(f=d?e[j]:A(a,j,b,"sort"),c._aSortData[b]=g?g(f):f)}function ta(a){if(a.oFeatures.bStateSave&&!a.bDestroying){var b={time:+new Date,start:a._iDisplayStart,length:a._iDisplayLength,order:h.extend(!0,[],a.aaSorting),search:yb(a.oPreviousSearch),columns:h.map(a.aoColumns,function(b,d){return{visible:b.bVisible,search:yb(a.aoPreSearchCols[d])}})};u(a,"aoStateSaveParams","stateSaveParams",[a,b]),a.oSavedState=b,a.fnStateSaveCallback.call(a.oInstance,a,b)}}function Jb(a){var b,c,d=a.aoColumns;if(a.oFeatures.bStateSave){var e=a.fnStateLoadCallback.call(a.oInstance,a);if(e&&e.time&&(b=u(a,"aoStateLoadParams","stateLoadParams",[a,e]),-1===h.inArray(!1,b)&&(b=a.iStateDuration,!(b>0&&e.time<+new Date-1e3*b)&&d.length===e.columns.length))){for(a.oLoadedState=h.extend(!0,{},e),a._iDisplayStart=e.start,a.iInitDisplayStart=e.start,a._iDisplayLength=e.length,a.aaSorting=[],h.each(e.order,function(b,c){a.aaSorting.push(c[0]>=d.length?[0,c[1]]:c)}),h.extend(a.oPreviousSearch,zb(e.search)),b=0,c=e.columns.length;c>b;b++){var f=e.columns[b];d[b].bVisible=f.visible,h.extend(a.aoPreSearchCols[b],zb(f.search))}u(a,"aoStateLoaded","stateLoaded",[a,e])}}}function ua(a){var b=p.settings,a=h.inArray(a,C(b,"nTable"));return-1!==a?b[a]:null}function P(a,b,c,d){if(c="DataTables warning: "+(null!==a?"table id="+a.sTableId+" - ":"")+c,d&&(c+=". For more information about this error, please see http://datatables.net/tn/"+d),b)za.console&&console.log&&console.log(c);else{if(a=p.ext,"alert"!=(a.sErrMode||a.errMode))throw Error(c);alert(c)}}function D(a,b,c,d){h.isArray(c)?h.each(c,function(c,d){h.isArray(d)?D(a,b,d[0],d[1]):D(a,b,d)}):(d===l&&(d=c),b[c]!==l&&(a[d]=b[c]))}function Kb(a,b,c){var d,e;for(e in b)b.hasOwnProperty(e)&&(d=b[e],h.isPlainObject(d)?(h.isPlainObject(a[e])||(a[e]={}),h.extend(!0,a[e],d)):a[e]=c&&"data"!==e&&"aaData"!==e&&h.isArray(d)?d.slice():d);return a}function Ta(a,b,c){h(a).bind("click.DT",b,function(b){a.blur(),c(b)}).bind("keypress.DT",b,function(a){13===a.which&&(a.preventDefault(),c(a))}).bind("selectstart.DT",function(){return!1})}function x(a,b,c,d){c&&a[b].push({fn:c,sName:d})}function u(a,b,c,d){var e=[];return b&&(e=h.map(a[b].slice().reverse(),function(b){return b.fn.apply(a.oInstance,d)})),null!==c&&h(a.nTable).trigger(c+".dt",d),e}function Qa(a){var b=a._iDisplayStart,c=a.fnDisplayEnd(),d=a._iDisplayLength;c===a.fnRecordsDisplay()&&(b=c-d),(-1===d||0>b)&&(b=0),a._iDisplayStart=b}function La(a,b){var c=a.renderer,d=p.ext.renderer[b];return h.isPlainObject(c)&&c[b]?d[c[b]]||d._:"string"==typeof c?d[c]||d._:d._}function z(a){return a.oFeatures.bServerSide?"ssp":a.ajax||a.sAjaxSource?"ajax":"dom"}function Ua(a,b){var c=[],c=Lb.numbers_length,d=Math.floor(c/2);return c>=b?c=S(0,b):d>=a?(c=S(0,c-2),c.push("ellipsis"),c.push(b-1)):(a>=b-1-d?c=S(b-(c-2),b):(c=S(a-1,a+2),c.push("ellipsis"),c.push(b-1)),c.splice(0,0,"ellipsis"),c.splice(0,0,0)),c.DT_el="span",c}function cb(a){h.each({num:function(b){return va(b,a)},"num-fmt":function(b){return va(b,a,Va)},"html-num":function(b){return va(b,a,wa)},"html-num-fmt":function(b){return va(b,a,wa,Va)}},function(b,c){t.type.order[b+a+"-pre"]=c})}function Mb(a){return function(){var b=[ua(this[p.ext.iApiIndex])].concat(Array.prototype.slice.call(arguments));return p.ext.internal[a].apply(this,b)}}var p,t,q,r,v,Wa={},Nb=/[\r\n]/g,wa=/<.*?>/g,Yb=/^[\w\+\-]/,Zb=/[\w\+\-]$/,Vb=RegExp("(\\/|\\.|\\*|\\+|\\?|\\||\\(|\\)|\\[|\\]|\\{|\\}|\\\\|\\$|\\^|\\-)","g"),Va=/[',$\u00a3\u20ac\u00a5%\u2009\u202F]/g,H=function(a){return a&&!0!==a&&"-"!==a?!1:!0},Ob=function(a){var b=parseInt(a,10);return!isNaN(b)&&isFinite(a)?b:null},Pb=function(a,b){return Wa[b]||(Wa[b]=RegExp(Oa(b),"g")),"string"==typeof a?a.replace(/\./g,"").replace(Wa[b],"."):a},Xa=function(a,b,c){var d="string"==typeof a;return b&&d&&(a=Pb(a,b)),c&&d&&(a=a.replace(Va,"")),H(a)||!isNaN(parseFloat(a))&&isFinite(a)},Qb=function(a,b,c){return H(a)?!0:(H(a)||"string"==typeof a)&&Xa(a.replace(wa,""),b,c)?!0:null},C=function(a,b,c){var d=[],e=0,f=a.length;if(c!==l)for(;f>e;e++)a[e]&&a[e][b]&&d.push(a[e][b][c]);else for(;f>e;e++)a[e]&&d.push(a[e][b]);return d},xa=function(a,b,c,d){var e=[],f=0,g=b.length;if(d!==l)for(;g>f;f++)e.push(a[b[f]][c][d]);else for(;g>f;f++)e.push(a[b[f]][c]);return e},S=function(a,b){var d,c=[];b===l?(b=0,d=a):(d=b,b=a);for(var e=b;d>e;e++)c.push(e);return c},Ja=function(a){var c,d,f,b=[],e=a.length,g=0;d=0;a:for(;e>d;d++){for(c=a[d],f=0;g>f;f++)if(b[f]===c)continue a;b.push(c),g++}return b},w=function(a,b,c){a[b]!==l&&(a[c]=a[b])},$=/\[.*?\]$/,Q=/\(\)$/,qa=h("<div>")[0],Wb=qa.textContent!==l,Xb=/<.*?>/g;p=function(a){this.$=function(a,b){return this.api(!0).$(a,b)},this._=function(a,b){return this.api(!0).rows(a,b).data()},this.api=function(a){return new q(a?ua(this[t.iApiIndex]):this)},this.fnAddData=function(a,b){var c=this.api(!0),d=h.isArray(a)&&(h.isArray(a[0])||h.isPlainObject(a[0]))?c.rows.add(a):c.row.add(a);return(b===l||b)&&c.draw(),d.flatten().toArray()},this.fnAdjustColumnSizing=function(a){var b=this.api(!0).columns.adjust(),c=b.settings()[0],d=c.oScroll;a===l||a?b.draw(!1):(""!==d.sX||""!==d.sY)&&W(c)},this.fnClearTable=function(a){var b=this.api(!0).clear();(a===l||a)&&b.draw()},this.fnClose=function(a){this.api(!0).row(a).child.hide()},this.fnDeleteRow=function(a,b,c){var d=this.api(!0),a=d.rows(a),e=a.settings()[0],h=e.aoData[a[0][0]];return a.remove(),b&&b.call(this,e,h),(c===l||c)&&d.draw(),h},this.fnDestroy=function(a){this.api(!0).destroy(a)},this.fnDraw=function(a){this.api(!0).draw(!a)},this.fnFilter=function(a,b,c,d,e,h){e=this.api(!0),null===b||b===l?e.search(a,c,d,h):e.column(b).search(a,c,d,h),e.draw()},this.fnGetData=function(a,b){var c=this.api(!0);if(a!==l){var d=a.nodeName?a.nodeName.toLowerCase():"";return b!==l||"td"==d||"th"==d?c.cell(a,b).data():c.row(a).data()||null}return c.data().toArray()},this.fnGetNodes=function(a){var b=this.api(!0);return a!==l?b.row(a).node():b.rows().nodes().flatten().toArray()},this.fnGetPosition=function(a){var b=this.api(!0),c=a.nodeName.toUpperCase();return"TR"==c?b.row(a).index():"TD"==c||"TH"==c?(a=b.cell(a).index(),[a.row,a.columnVisible,a.column]):null},this.fnIsOpen=function(a){return this.api(!0).row(a).child.isShown()},this.fnOpen=function(a,b,c){return this.api(!0).row(a).child(b,c).show().child()[0]},this.fnPageChange=function(a,b){var c=this.api(!0).page(a);(b===l||b)&&c.draw(!1)},this.fnSetColumnVis=function(a,b,c){a=this.api(!0).column(a).visible(b),(c===l||c)&&a.columns.adjust().draw()},this.fnSettings=function(){return ua(this[t.iApiIndex])},this.fnSort=function(a){this.api(!0).order(a).draw()},this.fnSortListener=function(a,b,c){this.api(!0).order.listener(a,b,c)},this.fnUpdate=function(a,b,c,d,e){var h=this.api(!0);return c===l||null===c?h.row(b).data(a):h.cell(b,c).data(a),(e===l||e)&&h.columns.adjust(),(d===l||d)&&h.draw(),0},this.fnVersionCheck=t.fnVersionCheck;var b=this,c=a===l,d=this.length;c&&(a={}),this.oApi=this.internal=t.internal;for(var e in p.ext.internal)e&&(this[e]=Mb(e));return this.each(function(){var i,e={},g=d>1?Kb(e,a,!0):a,j=0,n=this.getAttribute("id"),e=!1,m=p.defaults;if("table"!=this.nodeName.toLowerCase())P(null,0,"Non-table node initialisation ("+this.nodeName+")",2);else{db(m),eb(m.column),G(m,m,!0),G(m.column,m.column,!0),G(m,g);var o=p.settings,j=0;for(i=o.length;i>j;j++){if(o[j].nTable==this){if(i=g.bRetrieve!==l?g.bRetrieve:m.bRetrieve,c||i)return o[j].oInstance;if(g.bDestroy!==l?g.bDestroy:m.bDestroy){o[j].oInstance.fnDestroy();break}return void P(o[j],0,"Cannot reinitialise DataTable",3)}if(o[j].sTableId==this.id){o.splice(j,1);break}}(null===n||""===n)&&(this.id=n="DataTables_Table_"+p.ext._unique++);var k=h.extend(!0,{},p.models.oSettings,{nTable:this,oApi:b.internal,oInit:g,sDestroyWidth:h(this)[0].style.width,sInstance:n,sTableId:n});o.push(k),k.oInstance=1===b.length?b:h(this).dataTable(),db(g),g.oLanguage&&N(g.oLanguage),g.aLengthMenu&&!g.iDisplayLength&&(g.iDisplayLength=h.isArray(g.aLengthMenu[0])?g.aLengthMenu[0][0]:g.aLengthMenu[0]),g=Kb(h.extend(!0,{},m),g),D(k.oFeatures,g,"bPaginate bLengthChange bFilter bSort bSortMulti bInfo bProcessing bAutoWidth bSortClasses bServerSide bDeferRender".split(" ")),D(k,g,["asStripeClasses","ajax","fnServerData","fnFormatNumber","sServerMethod","aaSorting","aaSortingFixed","aLengthMenu","sPaginationType","sAjaxSource","sAjaxDataProp","iStateDuration","sDom","bSortCellsTop","iTabIndex","fnStateLoadCallback","fnStateSaveCallback","renderer",["iCookieDuration","iStateDuration"],["oSearch","oPreviousSearch"],["aoSearchCols","aoPreSearchCols"],["iDisplayLength","_iDisplayLength"],["bJQueryUI","bJUI"]]),D(k.oScroll,g,[["sScrollX","sX"],["sScrollXInner","sXInner"],["sScrollY","sY"],["bScrollCollapse","bCollapse"]]),D(k.oLanguage,g,"fnInfoCallback"),x(k,"aoDrawCallback",g.fnDrawCallback,"user"),x(k,"aoServerParams",g.fnServerParams,"user"),x(k,"aoStateSaveParams",g.fnStateSaveParams,"user"),x(k,"aoStateLoadParams",g.fnStateLoadParams,"user"),x(k,"aoStateLoaded",g.fnStateLoaded,"user"),x(k,"aoRowCallback",g.fnRowCallback,"user"),x(k,"aoRowCreatedCallback",g.fnCreatedRow,"user"),x(k,"aoHeaderCallback",g.fnHeaderCallback,"user"),x(k,"aoFooterCallback",g.fnFooterCallback,"user"),x(k,"aoInitComplete",g.fnInitComplete,"user"),x(k,"aoPreDrawCallback",g.fnPreDrawCallback,"user"),n=k.oClasses,g.bJQueryUI?(h.extend(n,p.ext.oJUIClasses,g.oClasses),g.sDom===m.sDom&&"lfrtip"===m.sDom&&(k.sDom='<"H"lfr>t<"F"ip>'),k.renderer?h.isPlainObject(k.renderer)&&!k.renderer.header&&(k.renderer.header="jqueryui"):k.renderer="jqueryui"):h.extend(n,p.ext.classes,g.oClasses),h(this).addClass(n.sTable),(""!==k.oScroll.sX||""!==k.oScroll.sY)&&(k.oScroll.iBarWidth=Gb()),!0===k.oScroll.sX&&(k.oScroll.sX="100%"),k.iInitDisplayStart===l&&(k.iInitDisplayStart=g.iDisplayStart,k._iDisplayStart=g.iDisplayStart),null!==g.iDeferLoading&&(k.bDeferLoading=!0,j=h.isArray(g.iDeferLoading),k._iRecordsDisplay=j?g.iDeferLoading[0]:g.iDeferLoading,k._iRecordsTotal=j?g.iDeferLoading[1]:g.iDeferLoading),""!==g.oLanguage.sUrl?(k.oLanguage.sUrl=g.oLanguage.sUrl,h.getJSON(k.oLanguage.sUrl,null,function(a){N(a),G(m.oLanguage,a),h.extend(!0,k.oLanguage,g.oLanguage,a),ra(k)
}),e=!0):h.extend(!0,k.oLanguage,g.oLanguage),null===g.asStripeClasses&&(k.asStripeClasses=[n.sStripeOdd,n.sStripeEven]);var j=k.asStripeClasses,r=h("tbody tr:eq(0)",this);-1!==h.inArray(!0,h.map(j,function(a){return r.hasClass(a)}))&&(h("tbody tr",this).removeClass(j.join(" ")),k.asDestroyStripes=j.slice());var q,o=[],j=this.getElementsByTagName("thead");if(0!==j.length&&(aa(k.aoHeader,j[0]),o=ma(k)),null===g.aoColumns)for(q=[],j=0,i=o.length;i>j;j++)q.push(null);else q=g.aoColumns;for(j=0,i=q.length;i>j;j++)Aa(k,o?o[j]:null);if(hb(k,g.aoColumnDefs,q,function(a,b){fa(k,a,b)}),r.length){var s=function(a,b){return a.getAttribute("data-"+b)?b:null};h.each(ia(k,r[0]).cells,function(a,b){var c=k.aoColumns[a];if(c.mData===a){var d=s(b,"sort")||s(b,"order"),e=s(b,"filter")||s(b,"search");(null!==d||null!==e)&&(c.mData={_:a+".display",sort:null!==d?a+".@data-"+d:l,type:null!==d?a+".@data-"+d:l,filter:null!==e?a+".@data-"+e:l},fa(k,a))}})}var t=k.oFeatures;if(g.bStateSave&&(t.bStateSave=!0,Jb(k,g),x(k,"aoDrawCallback",ta,"state_save")),g.aaSorting===l)for(o=k.aaSorting,j=0,i=o.length;i>j;j++)o[j][1]=k.aoColumns[j].asSorting[0];if(sa(k),t.bSort&&x(k,"aoDrawCallback",function(){if(k.bSorted){var a=R(k),b={};h.each(a,function(a,c){b[c.src]=c.dir}),u(k,null,"order",[k,a,b]),Ib(k)}}),x(k,"aoDrawCallback",function(){(k.bSorted||"ssp"===z(k)||t.bDeferRender)&&sa(k)},"sc"),fb(k),j=h(this).children("caption").each(function(){this._captionSide=h(this).css("caption-side")}),i=h(this).children("thead"),0===i.length&&(i=h("<thead/>").appendTo(this)),k.nTHead=i[0],i=h(this).children("tbody"),0===i.length&&(i=h("<tbody/>").appendTo(this)),k.nTBody=i[0],i=h(this).children("tfoot"),0===i.length&&0<j.length&&(""!==k.oScroll.sX||""!==k.oScroll.sY)&&(i=h("<tfoot/>").appendTo(this)),0===i.length||0===i.children().length?h(this).addClass(n.sNoFooter):0<i.length&&(k.nTFoot=i[0],aa(k.aoFooter,k.nTFoot)),g.aaData)for(j=0;j<g.aaData.length;j++)I(k,g.aaData[j]);else(k.bDeferLoading||"dom"==z(k))&&ha(k,h(k.nTBody).children("tr"));k.aiDisplay=k.aiDisplayMaster.slice(),k.bInitialised=!0,!1===e&&ra(k)}}),b=null,this};var Rb=[],y=Array.prototype,$b=function(a){var b,c,d=p.settings,e=h.map(d,function(a){return a.nTable});return a?a.nTable&&a.oApi?[a]:a.nodeName&&"table"===a.nodeName.toLowerCase()?(b=h.inArray(a,e),-1!==b?[d[b]]:null):a&&"function"==typeof a.settings?a.settings().toArray():("string"==typeof a?c=h(a):a instanceof h&&(c=a),c?c.map(function(){return b=h.inArray(this,e),-1!==b?d[b]:null}).toArray():void 0):[]};q=function(a,b){if(!this instanceof q)throw"DT API must be constructed as a new object";var c=[],d=function(a){(a=$b(a))&&c.push.apply(c,a)};if(h.isArray(a))for(var e=0,f=a.length;f>e;e++)d(a[e]);else d(a);this.context=Ja(c),b&&this.push.apply(this,b.toArray?b.toArray():b),this.selector={rows:null,cols:null,opts:null},q.extend(this,this,Rb)},p.Api=q,q.prototype={concat:y.concat,context:[],each:function(a){for(var b=0,c=this.length;c>b;b++)a.call(this,this[b],b,this);return this},eq:function(a){var b=this.context;return b.length>a?new q(b[a],this[a]):null},filter:function(a){var b=[];if(y.filter)b=y.filter.call(this,a,this);else for(var c=0,d=this.length;d>c;c++)a.call(this,this[c],c,this)&&b.push(this[c]);return new q(this.context,b)},flatten:function(){var a=[];return new q(this.context,a.concat.apply(a,this.toArray()))},join:y.join,indexOf:y.indexOf||function(a,b){for(var c=b||0,d=this.length;d>c;c++)if(this[c]===a)return c;return-1},iterator:function(a,b,c){var e,f,g,h,i,m,o,d=[],n=this.context,k=this.selector;for("string"==typeof a&&(c=b,b=a,a=!1),f=0,g=n.length;g>f;f++)if("table"===b)e=c(n[f],f),e!==l&&d.push(e);else if("columns"===b||"rows"===b)e=c(n[f],this[f],f),e!==l&&d.push(e);else if("column"===b||"column-rows"===b||"row"===b||"cell"===b)for(o=this[f],"column-rows"===b&&(m=Ya(n[f],k.opts)),h=0,i=o.length;i>h;h++)e=o[h],e="cell"===b?c(n[f],e.row,e.column,f,h):c(n[f],e,f,h,m),e!==l&&d.push(e);return d.length?(a=new q(n,a?d.concat.apply([],d):d),b=a.selector,b.rows=k.rows,b.cols=k.cols,b.opts=k.opts,a):this},lastIndexOf:y.lastIndexOf||function(){return this.indexOf.apply(this.toArray.reverse(),arguments)},length:0,map:function(a){var b=[];if(y.map)b=y.map.call(this,a,this);else for(var c=0,d=this.length;d>c;c++)b.push(a.call(this,this[c],c));return new q(this.context,b)},pluck:function(a){return this.map(function(b){return b[a]})},pop:y.pop,push:y.push,reduce:y.reduce||function(a,b){return gb(this,a,b,0,this.length,1)},reduceRight:y.reduceRight||function(a,b){return gb(this,a,b,this.length-1,-1,-1)},reverse:y.reverse,selector:null,shift:y.shift,sort:y.sort,splice:y.splice,toArray:function(){return y.slice.call(this)},to$:function(){return h(this)},toJQuery:function(){return h(this)},unique:function(){return new q(this.context,Ja(this))},unshift:y.unshift},q.extend=function(a,b,c){if(b&&(b instanceof q||b.__dt_wrapper)){var d,e,f,g=function(a,b,c){return function(){var d=b.apply(a,arguments);return q.extend(d,d,c.methodExt),d}};for(d=0,e=c.length;e>d;d++)f=c[d],b[f.name]="function"==typeof f.val?g(a,f.val,f):h.isPlainObject(f.val)?{}:f.val,b[f.name].__dt_wrapper=!0,q.extend(a,b[f.name],f.propExt)}},q.register=r=function(a,b){if(h.isArray(a))for(var c=0,d=a.length;d>c;c++)q.register(a[c],b);else for(var g,j,e=a.split("."),f=Rb,c=0,d=e.length;d>c;c++){g=(j=-1!==e[c].indexOf("()"))?e[c].replace("()",""):e[c];var i;a:{i=0;for(var n=f.length;n>i;i++)if(f[i].name===g){i=f[i];break a}i=null}i||(i={name:g,val:{},methodExt:[],propExt:[]},f.push(i)),c===d-1?i.val=b:f=j?i.methodExt:i.propExt}},q.registerPlural=v=function(a,b,c){q.register(a,c),q.register(b,function(){var a=c.apply(this,arguments);return a===this?this:a instanceof q?a.length?h.isArray(a[0])?new q(a.context,a[0]):a[0]:l:a})},r("tables()",function(a){var b;if(a){b=q;var c=this.context;if("number"==typeof a)a=[c[a]];else var d=h.map(c,function(a){return a.nTable}),a=h(d).filter(a).map(function(){var a=h.inArray(this,d);return c[a]}).toArray();b=new b(a)}else b=this;return b}),r("table()",function(a){var a=this.tables(a),b=a.context;return b.length?new q(b[0]):a}),v("tables().nodes()","table().node()",function(){return this.iterator("table",function(a){return a.nTable})}),v("tables().body()","table().body()",function(){return this.iterator("table",function(a){return a.nTBody})}),v("tables().header()","table().header()",function(){return this.iterator("table",function(a){return a.nTHead})}),v("tables().footer()","table().footer()",function(){return this.iterator("table",function(a){return a.nTFoot})}),v("tables().containers()","table().container()",function(){return this.iterator("table",function(a){return a.nTableWrapper})}),r("draw()",function(a){return this.iterator("table",function(b){L(b,!1===a)})}),r("page()",function(a){return a===l?this.page.info().page:this.iterator("table",function(b){Ra(b,a)})}),r("page.info()",function(){if(0===this.context.length)return l;var a=this.context[0],b=a._iDisplayStart,c=a._iDisplayLength,d=a.fnRecordsDisplay(),e=-1===c;return{page:e?0:Math.floor(b/c),pages:e?1:Math.ceil(d/c),start:b,end:a.fnDisplayEnd(),length:c,recordsTotal:a.fnRecordsTotal(),recordsDisplay:d}}),r("page.len()",function(a){return a===l?0!==this.context.length?this.context[0]._iDisplayLength:l:this.iterator("table",function(b){Pa(b,a)})});var Sb=function(a,b,c){if("ssp"==z(a)?L(a,b):(B(a,!0),na(a,[],function(c){ja(a);for(var c=oa(a,c),d=0,g=c.length;g>d;d++)I(a,c[d]);L(a,b),B(a,!1)})),c){var d=new q(a);d.one("draw",function(){c(d.ajax.json())})}};r("ajax.json()",function(){var a=this.context;return 0<a.length?a[0].json:void 0}),r("ajax.params()",function(){var a=this.context;return 0<a.length?a[0].oAjaxData:void 0}),r("ajax.reload()",function(a,b){return this.iterator("table",function(c){Sb(c,!1===b,a)})}),r("ajax.url()",function(a){var b=this.context;return a===l?0===b.length?l:(b=b[0],b.ajax?h.isPlainObject(b.ajax)?b.ajax.url:b.ajax:b.sAjaxSource):this.iterator("table",function(b){h.isPlainObject(b.ajax)?b.ajax.url=a:b.ajax=a})}),r("ajax.url().load()",function(a,b){return this.iterator("table",function(c){Sb(c,!1===b,a)})});var Za=function(a,b){var d,e,f,g,j,i,c=[];for(a&&"string"!=typeof a&&a.length!==l||(a=[a]),f=0,g=a.length;g>f;f++)for(e=a[f]&&a[f].split?a[f].split(","):[a[f]],j=0,i=e.length;i>j;j++)(d=b("string"==typeof e[j]?h.trim(e[j]):e[j]))&&d.length&&c.push.apply(c,d);return c},$a=function(a){return a||(a={}),a.filter&&!a.search&&(a.search=a.filter),{search:a.search||"none",order:a.order||"current",page:a.page||"all"}},ab=function(a){for(var b=0,c=a.length;c>b;b++)if(0<a[b].length)return a[0]=a[b],a.length=1,a.context=[a.context[b]],a;return a.length=0,a},Ya=function(a,b){var c,d,e,f=[],g=a.aiDisplay;c=a.aiDisplayMaster;var j=b.search;if(d=b.order,e=b.page,"ssp"==z(a))return"removed"===j?[]:S(0,c.length);if("current"==e)for(c=a._iDisplayStart,d=a.fnDisplayEnd();d>c;c++)f.push(g[c]);else if("current"==d||"applied"==d)f="none"==j?c.slice():"applied"==j?g.slice():h.map(c,function(a){return-1===h.inArray(a,g)?a:null});else if("index"==d||"original"==d)for(c=0,d=a.aoData.length;d>c;c++)"none"==j?f.push(c):(e=h.inArray(c,g),(-1===e&&"removed"==j||e>=0&&"applied"==j)&&f.push(c));return f};r("rows()",function(a,b){a===l?a="":h.isPlainObject(a)&&(b=a,a="");var b=$a(b),c=this.iterator("table",function(c){var e=b;return Za(a,function(a){var b=Ob(a);if(null!==b&&!e)return[b];var j=Ya(c,e);if(null!==b&&-1!==h.inArray(b,j))return[b];if(!a)return j;for(var b=[],i=0,n=j.length;n>i;i++)b.push(c.aoData[j[i]].nTr);return a.nodeName&&-1!==h.inArray(a,b)?[a._DT_RowIndex]:h(b).filter(a).map(function(){return this._DT_RowIndex}).toArray()})});return c.selector.rows=a,c.selector.opts=b,c}),r("rows().nodes()",function(){return this.iterator("row",function(a,b){return a.aoData[b].nTr||l})}),r("rows().data()",function(){return this.iterator(!0,"rows",function(a,b){return xa(a.aoData,b,"_aData")})}),v("rows().cache()","row().cache()",function(a){return this.iterator("row",function(b,c){var d=b.aoData[c];return"search"===a?d._aFilterData:d._aSortData})}),v("rows().invalidate()","row().invalidate()",function(a){return this.iterator("row",function(b,c){la(b,c,a)})}),v("rows().indexes()","row().index()",function(){return this.iterator("row",function(a,b){return b})}),v("rows().remove()","row().remove()",function(){var a=this;return this.iterator("row",function(b,c,d){var e=b.aoData;e.splice(c,1);for(var f=0,g=e.length;g>f;f++)null!==e[f].nTr&&(e[f].nTr._DT_RowIndex=f);h.inArray(c,b.aiDisplay),ka(b.aiDisplayMaster,c),ka(b.aiDisplay,c),ka(a[d],c,!1),Qa(b)})}),r("rows.add()",function(a){var b=this.iterator("table",function(b){var c,f,g,h=[];for(f=0,g=a.length;g>f;f++)c=a[f],h.push(c.nodeName&&"TR"===c.nodeName.toUpperCase()?ha(b,c)[0]:I(b,c));return h}),c=this.rows(-1);return c.pop(),c.push.apply(c,b.toArray()),c}),r("row()",function(a,b){return ab(this.rows(a,b))}),r("row().data()",function(a){var b=this.context;return a===l?b.length&&this.length?b[0].aoData[this[0]]._aData:l:(b[0].aoData[this[0]]._aData=a,la(b[0],this[0],"data"),this)}),r("row().node()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]].nTr||null:null}),r("row.add()",function(a){a instanceof h&&a.length&&(a=a[0]);var b=this.iterator("table",function(b){return a.nodeName&&"TR"===a.nodeName.toUpperCase()?ha(b,a)[0]:I(b,a)});return this.row(b[0])});var bb=function(a){var b=a.context;b.length&&a.length&&(a=b[0].aoData[a[0]],a._details&&(a._details.remove(),a._detailsShow=l,a._details=l))},Tb=function(a,b){var c=a.context;if(c.length&&a.length){var d=c[0].aoData[a[0]];if(d._details){(d._detailsShow=b)?d._details.insertAfter(d.nTr):d._details.detach();var e=c[0],f=new q(e),g=e.aoData;f.off("draw.dt.DT_details column-visibility.dt.DT_details destroy.dt.DT_details"),0<C(g,"_details").length&&(f.on("draw.dt.DT_details",function(a,b){e===b&&f.rows({page:"current"}).eq(0).each(function(a){a=g[a],a._detailsShow&&a._details.insertAfter(a.nTr)})}),f.on("column-visibility.dt.DT_details",function(a,b){if(e===b)for(var c,d=Z(b),f=0,h=g.length;h>f;f++)c=g[f],c._details&&c._details.children("td[colspan]").attr("colspan",d)}),f.on("destroy.dt.DT_details",function(a,b){if(e===b)for(var c=0,d=g.length;d>c;c++)g[c]._details&&bb(g[c])}))}}};r("row().child()",function(a,b){var c=this.context;if(a===l)return c.length&&this.length?c[0].aoData[this[0]]._details:l;if(!0===a)this.child.show();else if(!1===a)bb(this);else if(c.length&&this.length){var d=c[0],c=c[0].aoData[this[0]],e=[],f=function(a,b){if(a.nodeName&&"tr"===a.nodeName.toLowerCase())e.push(a);else{var c=h("<tr><td/></tr>").addClass(b);h("td",c).addClass(b).html(a)[0].colSpan=Z(d),e.push(c[0])}};if(h.isArray(a)||a instanceof h)for(var g=0,j=a.length;j>g;g++)f(a[g],b);else f(a,b);c._details&&c._details.remove(),c._details=h(e),c._detailsShow&&c._details.insertAfter(c.nTr)}return this}),r(["row().child.show()","row().child().show()"],function(){return Tb(this,!0),this}),r(["row().child.hide()","row().child().hide()"],function(){return Tb(this,!1),this}),r(["row().child.remove()","row().child().remove()"],function(){return bb(this),this}),r("row().child.isShown()",function(){var a=this.context;return a.length&&this.length?a[0].aoData[this[0]]._detailsShow||!1:!1});var ac=/^(.+):(name|visIdx|visible)$/;r("columns()",function(a,b){a===l?a="":h.isPlainObject(a)&&(b=a,a="");var b=$a(b),c=this.iterator("table",function(b){var c=a,f=b.aoColumns,g=C(f,"sName"),j=C(f,"nTh");return Za(c,function(a){var c=Ob(a);if(""===a)return S(f.length);if(null!==c)return[c>=0?c:f.length+c];var e="string"==typeof a?a.match(ac):"";if(!e)return h(j).filter(a).map(function(){return h.inArray(this,j)}).toArray();switch(e[2]){case"visIdx":case"visible":return a=parseInt(e[1],10),0>a?(c=h.map(f,function(a,b){return a.bVisible?b:null}),[c[c.length+a]]):[ga(b,a)];case"name":return h.map(g,function(a,b){return a===e[1]?b:null})}})});return c.selector.cols=a,c.selector.opts=b,c}),v("columns().header()","column().header()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTh})}),v("columns().footer()","column().footer()",function(){return this.iterator("column",function(a,b){return a.aoColumns[b].nTf})}),v("columns().data()","column().data()",function(){return this.iterator("column-rows",function(a,b,c,d,e){for(var c=[],d=0,f=e.length;f>d;d++)c.push(A(a,e[d],b,""));return c})}),v("columns().cache()","column().cache()",function(a){return this.iterator("column-rows",function(b,c,d,e,f){return xa(b.aoData,f,"search"===a?"_aFilterData":"_aSortData",c)})}),v("columns().nodes()","column().nodes()",function(){return this.iterator("column-rows",function(a,b,c,d,e){return xa(a.aoData,e,"anCells",b)})}),v("columns().visible()","column().visible()",function(a,b){return this.iterator("column",function(c,d){var e;if(a===l)e=c.aoColumns[d].bVisible;else{var f=c.aoColumns;e=f[d];var j,i,n,g=c.aoData;if(a===l)e=e.bVisible;else{if(e.bVisible!==a){if(a){var m=h.inArray(!0,C(f,"bVisible"),d+1);for(j=0,i=g.length;i>j;j++)n=g[j].nTr,f=g[j].anCells,n&&n.insertBefore(f[d],f[m]||null)}else h(C(c.aoData,"anCells",d)).detach();e.bVisible=a,ba(c,c.aoHeader),ba(c,c.aoFooter),(b===l||b)&&(V(c),(c.oScroll.sX||c.oScroll.sY)&&W(c)),u(c,null,"column-visibility",[c,d,a]),ta(c)}e=void 0}}return e})}),v("columns().indexes()","column().index()",function(a){return this.iterator("column",function(b,c){return"visible"===a?Y(b,c):c})}),r("columns.adjust()",function(){return this.iterator("table",function(a){V(a)})}),r("column.index()",function(a,b){if(0!==this.context.length){var c=this.context[0];if("fromVisible"===a||"toData"===a)return ga(c,b);if("fromData"===a||"toVisible"===a)return Y(c,b)}}),r("column()",function(a,b){return ab(this.columns(a,b))}),r("cells()",function(a,b,c){if(h.isPlainObject(a)&&(typeof a.row!==l?(c=b,b=null):(c=a,a=null)),h.isPlainObject(b)&&(c=b,b=null),null===b||b===l)return this.iterator("table",function(b){var i,n,p,r,q,d=a,e=$a(c),f=b.aoData,g=Ya(b,e),e=xa(f,g,"anCells"),j=h([].concat.apply([],e)),m=b.aoColumns.length;return Za(d,function(a){if(null===a||a===l){for(n=[],p=0,r=g.length;r>p;p++)for(i=g[p],q=0;m>q;q++)n.push({row:i,column:q});return n}return h.isPlainObject(a)?[a]:j.filter(a).map(function(a,b){return i=b.parentNode._DT_RowIndex,{row:i,column:h.inArray(b,f[i].anCells)}}).toArray()})});var f,g,j,i,n,d=this.columns(b,c),e=this.rows(a,c),m=this.iterator("table",function(a,b){for(f=[],g=0,j=e[b].length;j>g;g++)for(i=0,n=d[b].length;n>i;i++)f.push({row:e[b][g],column:d[b][i]});return f});return h.extend(m.selector,{cols:b,rows:a,opts:c}),m}),v("cells().nodes()","cell().node()",function(){return this.iterator("cell",function(a,b,c){return a.aoData[b].anCells[c]})}),r("cells().data()",function(){return this.iterator("cell",function(a,b,c){return A(a,b,c)})}),v("cells().cache()","cell().cache()",function(a){return a="search"===a?"_aFilterData":"_aSortData",this.iterator("cell",function(b,c,d){return b.aoData[c][a][d]})}),v("cells().indexes()","cell().index()",function(){return this.iterator("cell",function(a,b,c){return{row:b,column:c,columnVisible:Y(a,c)}})}),r(["cells().invalidate()","cell().invalidate()"],function(a){var b=this.selector;return this.rows(b.rows,b.opts).invalidate(a),this}),r("cell()",function(a,b,c){return ab(this.cells(a,b,c))}),r("cell().data()",function(a){var b=this.context,c=this[0];return a===l?b.length&&c.length?A(b[0],c[0].row,c[0].column):l:(Ea(b[0],c[0].row,c[0].column,a),la(b[0],c[0].row,"data",c[0].column),this)}),r("order()",function(a,b){var c=this.context;return a===l?0!==c.length?c[0].aaSorting:l:("number"==typeof a?a=[[a,b]]:h.isArray(a[0])||(a=Array.prototype.slice.call(arguments)),this.iterator("table",function(b){b.aaSorting=a.slice()}))}),r("order.listener()",function(a,b,c){return this.iterator("table",function(d){Ka(d,a,b,c)})}),r(["columns().order()","column().order()"],function(a){var b=this;return this.iterator("table",function(c,d){var e=[];h.each(b[d],function(b,c){e.push([c,a])}),c.aaSorting=e})}),r("search()",function(a,b,c,d){var e=this.context;return a===l?0!==e.length?e[0].oPreviousSearch.sSearch:l:this.iterator("table",function(e){e.oFeatures.bFilter&&ca(e,h.extend({},e.oPreviousSearch,{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),1)})}),v("columns().search()","column().search()",function(a,b,c,d){return this.iterator("column",function(e,f){var g=e.aoPreSearchCols;return a===l?g[f].sSearch:void(e.oFeatures.bFilter&&(h.extend(g[f],{sSearch:a+"",bRegex:null===b?!1:b,bSmart:null===c?!0:c,bCaseInsensitive:null===d?!0:d}),ca(e,e.oPreviousSearch,1)))})}),r("state()",function(){return this.context.length?this.context[0].oSavedState:null}),r("state.clear()",function(){return this.iterator("table",function(a){a.fnStateSaveCallback.call(a.oInstance,a,{})})}),r("state.loaded()",function(){return this.context.length?this.context[0].oLoadedState:null}),r("state.save()",function(){return this.iterator("table",function(a){ta(a)})}),p.versionCheck=p.fnVersionCheck=function(a){for(var c,d,b=p.version.split("."),a=a.split("."),e=0,f=a.length;f>e;e++)if(c=parseInt(b[e],10)||0,d=parseInt(a[e],10)||0,c!==d)return c>d;return!0},p.isDataTable=p.fnIsDataTable=function(a){var b=h(a).get(0),c=!1;return h.each(p.settings,function(a,e){(e.nTable===b||e.nScrollHead===b||e.nScrollFoot===b)&&(c=!0)}),c},p.tables=p.fnTables=function(a){return jQuery.map(p.settings,function(b){return!a||a&&h(b.nTable).is(":visible")?b.nTable:void 0})},p.camelToHungarian=G,r("$()",function(a,b){var c=this.rows(b).nodes(),c=h(c);return h([].concat(c.filter(a).toArray(),c.find(a).toArray()))}),h.each(["on","one","off"],function(a,b){r(b+"()",function(){var a=Array.prototype.slice.call(arguments);a[0].match(/\.dt\b/)||(a[0]+=".dt");var d=h(this.tables().nodes());return d[b].apply(d,a),this})}),r("clear()",function(){return this.iterator("table",function(a){ja(a)})}),r("settings()",function(){return new q(this.context,this.context)}),r("data()",function(){return this.iterator("table",function(a){return C(a.aoData,"_aData")}).flatten()}),r("destroy()",function(a){return a=a||!1,this.iterator("table",function(b){var o,c=b.nTableWrapper.parentNode,d=b.oClasses,e=b.nTable,f=b.nTBody,g=b.nTHead,j=b.nTFoot,i=h(e),f=h(f),l=h(b.nTableWrapper),m=h.map(b.aoData,function(a){return a.nTr});b.bDestroying=!0,u(b,"aoDestroyCallback","destroy",[b]),a||new q(b).columns().visible(!0),l.unbind(".DT").find(":not(tbody *)").unbind(".DT"),h(za).unbind(".DT-"+b.sInstance),e!=g.parentNode&&(i.children("thead").detach(),i.append(g)),j&&e!=j.parentNode&&(i.children("tfoot").detach(),i.append(j)),i.detach(),l.detach(),b.aaSorting=[],b.aaSortingFixed=[],sa(b),h(m).removeClass(b.asStripeClasses.join(" ")),h("th, td",g).removeClass(d.sSortable+" "+d.sSortableAsc+" "+d.sSortableDesc+" "+d.sSortableNone),b.bJUI&&(h("th span."+d.sSortIcon+", td span."+d.sSortIcon,g).detach(),h("th, td",g).each(function(){var a=h("div."+d.sSortJUIWrapper,this);h(this).append(a.contents()),a.detach()})),!a&&c&&c.insertBefore(e,b.nTableReinsertBefore),f.children().detach(),f.append(m),i.css("width",b.sDestroyWidth).removeClass(d.sTable),(o=b.asDestroyStripes.length)&&f.children().each(function(a){h(this).addClass(b.asDestroyStripes[a%o])}),c=h.inArray(b,p.settings),-1!==c&&p.settings.splice(c,1)})}),p.version="1.10.2",p.settings=[],p.models={},p.models.oSearch={bCaseInsensitive:!0,sSearch:"",bRegex:!1,bSmart:!0},p.models.oRow={nTr:null,anCells:null,_aData:[],_aSortData:null,_aFilterData:null,_sFilterRow:null,_sRowStripe:"",src:null},p.models.oColumn={idx:null,aDataSort:null,asSorting:null,bSearchable:null,bSortable:null,bVisible:null,_sManualType:null,_bAttrSrc:!1,fnCreatedCell:null,fnGetData:null,fnSetData:null,mData:null,mRender:null,nTh:null,nTf:null,sClass:null,sContentPadding:null,sDefaultContent:null,sName:null,sSortDataType:"std",sSortingClass:null,sSortingClassJUI:null,sTitle:null,sType:null,sWidth:null,sWidthOrig:null},p.defaults={aaData:null,aaSorting:[[0,"asc"]],aaSortingFixed:[],ajax:null,aLengthMenu:[10,25,50,100],aoColumns:null,aoColumnDefs:null,aoSearchCols:[],asStripeClasses:null,bAutoWidth:!0,bDeferRender:!1,bDestroy:!1,bFilter:!0,bInfo:!0,bJQueryUI:!1,bLengthChange:!0,bPaginate:!0,bProcessing:!1,bRetrieve:!1,bScrollCollapse:!1,bServerSide:!1,bSort:!0,bSortMulti:!0,bSortCellsTop:!1,bSortClasses:!0,bStateSave:!1,fnCreatedRow:null,fnDrawCallback:null,fnFooterCallback:null,fnFormatNumber:function(a){return a.toString().replace(/\B(?=(\d{3})+(?!\d))/g,this.oLanguage.sThousands)},fnHeaderCallback:null,fnInfoCallback:null,fnInitComplete:null,fnPreDrawCallback:null,fnRowCallback:null,fnServerData:null,fnServerParams:null,fnStateLoadCallback:function(a){try{return JSON.parse((-1===a.iStateDuration?sessionStorage:localStorage).getItem("DataTables_"+a.sInstance+"_"+location.pathname))}catch(b){}},fnStateLoadParams:null,fnStateLoaded:null,fnStateSaveCallback:function(a,b){try{(-1===a.iStateDuration?sessionStorage:localStorage).setItem("DataTables_"+a.sInstance+"_"+location.pathname,JSON.stringify(b))}catch(c){}},fnStateSaveParams:null,iStateDuration:7200,iDeferLoading:null,iDisplayLength:10,iDisplayStart:0,iTabIndex:0,oClasses:{},oLanguage:{oAria:{sSortAscending:": activate to sort column ascending",sSortDescending:": activate to sort column descending"},oPaginate:{sFirst:"First",sLast:"Last",sNext:"Next",sPrevious:"Previous"},sEmptyTable:"No data available in table",sInfo:"Showing _START_ to _END_ of _TOTAL_ entries",sInfoEmpty:"Showing 0 to 0 of 0 entries",sInfoFiltered:"(filtered from _MAX_ total entries)",sInfoPostFix:"",sDecimal:"",sThousands:",",sLengthMenu:"Show _MENU_ entries",sLoadingRecords:"Loading...",sProcessing:"Processing...",sSearch:"Search:",sSearchPlaceholder:"",sUrl:"",sZeroRecords:"No matching records found"},oSearch:h.extend({},p.models.oSearch),sAjaxDataProp:"data",sAjaxSource:null,sDom:"lfrtip",sPaginationType:"simple_numbers",sScrollX:"",sScrollXInner:"",sScrollY:"",sServerMethod:"GET",renderer:null},T(p.defaults),p.defaults.column={aDataSort:null,iDataSort:-1,asSorting:["asc","desc"],bSearchable:!0,bSortable:!0,bVisible:!0,fnCreatedCell:null,mData:null,mRender:null,sCellType:"td",sClass:"",sContentPadding:"",sDefaultContent:null,sName:"",sSortDataType:"std",sTitle:null,sType:null,sWidth:null},T(p.defaults.column),p.models.oSettings={oFeatures:{bAutoWidth:null,bDeferRender:null,bFilter:null,bInfo:null,bLengthChange:null,bPaginate:null,bProcessing:null,bServerSide:null,bSort:null,bSortMulti:null,bSortClasses:null,bStateSave:null},oScroll:{bCollapse:null,iBarWidth:0,sX:null,sXInner:null,sY:null},oLanguage:{fnInfoCallback:null},oBrowser:{bScrollOversize:!1,bScrollbarLeft:!1},ajax:null,aanFeatures:[],aoData:[],aiDisplay:[],aiDisplayMaster:[],aoColumns:[],aoHeader:[],aoFooter:[],oPreviousSearch:{},aoPreSearchCols:[],aaSorting:null,aaSortingFixed:[],asStripeClasses:null,asDestroyStripes:[],sDestroyWidth:0,aoRowCallback:[],aoHeaderCallback:[],aoFooterCallback:[],aoDrawCallback:[],aoRowCreatedCallback:[],aoPreDrawCallback:[],aoInitComplete:[],aoStateSaveParams:[],aoStateLoadParams:[],aoStateLoaded:[],sTableId:"",nTable:null,nTHead:null,nTFoot:null,nTBody:null,nTableWrapper:null,bDeferLoading:!1,bInitialised:!1,aoOpenRows:[],sDom:null,sPaginationType:"two_button",iStateDuration:0,aoStateSave:[],aoStateLoad:[],oSavedState:null,oLoadedState:null,sAjaxSource:null,sAjaxDataProp:null,bAjaxDataGet:!0,jqXHR:null,json:l,oAjaxData:l,fnServerData:null,aoServerParams:[],sServerMethod:null,fnFormatNumber:null,aLengthMenu:null,iDraw:0,bDrawing:!1,iDrawError:-1,_iDisplayLength:10,_iDisplayStart:0,_iRecordsTotal:0,_iRecordsDisplay:0,bJUI:null,oClasses:{},bFiltered:!1,bSorted:!1,bSortCellsTop:null,oInit:null,aoDestroyCallback:[],fnRecordsTotal:function(){return"ssp"==z(this)?1*this._iRecordsTotal:this.aiDisplayMaster.length},fnRecordsDisplay:function(){return"ssp"==z(this)?1*this._iRecordsDisplay:this.aiDisplay.length},fnDisplayEnd:function(){var a=this._iDisplayLength,b=this._iDisplayStart,c=b+a,d=this.aiDisplay.length,e=this.oFeatures,f=e.bPaginate;return e.bServerSide?!1===f||-1===a?b+d:Math.min(b+a,this._iRecordsDisplay):!f||c>d||-1===a?d:c},oInstance:null,sInstance:null,iTabIndex:0,nScrollHead:null,nScrollFoot:null,aLastSort:[],oPlugins:{}},p.ext=t={classes:{},errMode:"alert",feature:[],search:[],internal:{},legacy:{ajax:null},pager:{},renderer:{pageButton:{},header:{}},order:{},type:{detect:[],search:{},order:{}},_unique:0,fnVersionCheck:p.fnVersionCheck,iApiIndex:0,oJUIClasses:{},sVersion:p.version},h.extend(t,{afnFiltering:t.search,aTypes:t.type.detect,ofnSearch:t.type.search,oSort:t.type.order,afnSortData:t.order,aoFeatures:t.feature,oApi:t.internal,oStdClasses:t.classes,oPagination:t.pager}),h.extend(p.ext.classes,{sTable:"dataTable",sNoFooter:"no-footer",sPageButton:"paginate_button",sPageButtonActive:"current",sPageButtonDisabled:"disabled",sStripeOdd:"odd",sStripeEven:"even",sRowEmpty:"dataTables_empty",sWrapper:"dataTables_wrapper",sFilter:"dataTables_filter",sInfo:"dataTables_info",sPaging:"dataTables_paginate paging_",sLength:"dataTables_length",sProcessing:"dataTables_processing",sSortAsc:"sorting_asc",sSortDesc:"sorting_desc",sSortable:"sorting",sSortableAsc:"sorting_asc_disabled",sSortableDesc:"sorting_desc_disabled",sSortableNone:"sorting_disabled",sSortColumn:"sorting_",sFilterInput:"",sLengthSelect:"",sScrollWrapper:"dataTables_scroll",sScrollHead:"dataTables_scrollHead",sScrollHeadInner:"dataTables_scrollHeadInner",sScrollBody:"dataTables_scrollBody",sScrollFoot:"dataTables_scrollFoot",sScrollFootInner:"dataTables_scrollFootInner",sHeaderTH:"",sFooterTH:"",sSortJUIAsc:"",sSortJUIDesc:"",sSortJUI:"",sSortJUIAscAllowed:"",sSortJUIDescAllowed:"",sSortJUIWrapper:"",sSortIcon:"",sJUIHeader:"",sJUIFooter:""});var ya="",ya="",E=ya+"ui-state-default",ea=ya+"css_right ui-icon ui-icon-",Ub=ya+"fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix";h.extend(p.ext.oJUIClasses,p.ext.classes,{sPageButton:"fg-button ui-button "+E,sPageButtonActive:"ui-state-disabled",sPageButtonDisabled:"ui-state-disabled",sPaging:"dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi ui-buttonset-multi paging_",sSortAsc:E+" sorting_asc",sSortDesc:E+" sorting_desc",sSortable:E+" sorting",sSortableAsc:E+" sorting_asc_disabled",sSortableDesc:E+" sorting_desc_disabled",sSortableNone:E+" sorting_disabled",sSortJUIAsc:ea+"triangle-1-n",sSortJUIDesc:ea+"triangle-1-s",sSortJUI:ea+"carat-2-n-s",sSortJUIAscAllowed:ea+"carat-1-n",sSortJUIDescAllowed:ea+"carat-1-s",sSortJUIWrapper:"DataTables_sort_wrapper",sSortIcon:"DataTables_sort_icon",sScrollHead:"dataTables_scrollHead "+E,sScrollFoot:"dataTables_scrollFoot "+E,sHeaderTH:E,sFooterTH:E,sJUIHeader:Ub+" ui-corner-tl ui-corner-tr",sJUIFooter:Ub+" ui-corner-bl ui-corner-br"});var Lb=p.ext.pager;h.extend(Lb,{simple:function(){return["previous","next"]},full:function(){return["first","previous","next","last"]},simple_numbers:function(a,b){return["previous",Ua(a,b),"next"]},full_numbers:function(a,b){return["first","previous",Ua(a,b),"next","last"]},_numbers:Ua,numbers_length:7}),h.extend(!0,p.ext.renderer,{pageButton:{_:function(a,b,c,d,e,f){var i,l,g=a.oClasses,j=a.oLanguage.oPaginate,m=0,o=function(b,d){var k,p,r,q,s=function(b){Ra(a,b.data.action,!0)};for(k=0,p=d.length;p>k;k++)if(q=d[k],h.isArray(q))r=h("<"+(q.DT_el||"div")+"/>").appendTo(b),o(r,q);else{switch(l=i="",q){case"ellipsis":b.append("<span>&hellip;</span>");break;case"first":i=j.sFirst,l=q+(e>0?"":" "+g.sPageButtonDisabled);break;case"previous":i=j.sPrevious,l=q+(e>0?"":" "+g.sPageButtonDisabled);break;case"next":i=j.sNext,l=q+(f-1>e?"":" "+g.sPageButtonDisabled);break;case"last":i=j.sLast,l=q+(f-1>e?"":" "+g.sPageButtonDisabled);break;default:i=q+1,l=e===q?g.sPageButtonActive:""}i&&(r=h("<a>",{"class":g.sPageButton+" "+l,"aria-controls":a.sTableId,"data-dt-idx":m,tabindex:a.iTabIndex,id:0===c&&"string"==typeof q?a.sTableId+"_"+q:null}).html(i).appendTo(b),Ta(r,{action:q},s),m++)}};try{var k=h(O.activeElement).data("dt-idx");o(h(b).empty(),d),null!==k&&h(b).find("[data-dt-idx="+k+"]").focus()}catch(p){}}}});var va=function(a,b,c,d){return a&&"-"!==a?(b&&(a=Pb(a,b)),a.replace&&(c&&(a=a.replace(c,"")),d&&(a=a.replace(d,""))),1*a):-1/0};return h.extend(t.type.order,{"date-pre":function(a){return Date.parse(a)||0},"html-pre":function(a){return H(a)?"":a.replace?a.replace(/<.*?>/g,"").toLowerCase():a+""},"string-pre":function(a){return H(a)?"":"string"==typeof a?a.toLowerCase():a.toString?a.toString():""},"string-asc":function(a,b){return b>a?-1:a>b?1:0},"string-desc":function(a,b){return b>a?1:a>b?-1:0}}),cb(""),h.extend(p.ext.type.detect,[function(a,b){var c=b.oLanguage.sDecimal;return Xa(a,c)?"num"+c:null},function(a){if(a&&(!Yb.test(a)||!Zb.test(a)))return null;var b=Date.parse(a);return null!==b&&!isNaN(b)||H(a)?"date":null},function(a,b){var c=b.oLanguage.sDecimal;return Xa(a,c,!0)?"num-fmt"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Qb(a,c)?"html-num"+c:null},function(a,b){var c=b.oLanguage.sDecimal;return Qb(a,c,!0)?"html-num-fmt"+c:null},function(a){return H(a)||"string"==typeof a&&-1!==a.indexOf("<")?"html":null}]),h.extend(p.ext.type.search,{html:function(a){return H(a)?a:"string"==typeof a?a.replace(Nb," ").replace(wa,""):""},string:function(a){return H(a)?a:"string"==typeof a?a.replace(Nb," "):a}}),h.extend(!0,p.ext.renderer,{header:{_:function(a,b,c,d){h(a.nTable).on("order.dt.DT",function(e,f,g,h){a===f&&(e=c.idx,b.removeClass(c.sSortingClass+" "+d.sSortAsc+" "+d.sSortDesc).addClass("asc"==h[e]?d.sSortAsc:"desc"==h[e]?d.sSortDesc:c.sSortingClass))})},jqueryui:function(a,b,c,d){var e=c.idx;h("<div/>").addClass(d.sSortJUIWrapper).append(b.contents()).append(h("<span/>").addClass(d.sSortIcon+" "+c.sSortingClassJUI)).appendTo(b),h(a.nTable).on("order.dt.DT",function(f,g,h,i){a===g&&(b.removeClass(d.sSortAsc+" "+d.sSortDesc).addClass("asc"==i[e]?d.sSortAsc:"desc"==i[e]?d.sSortDesc:c.sSortingClass),b.find("span."+d.sSortIcon).removeClass(d.sSortJUIAsc+" "+d.sSortJUIDesc+" "+d.sSortJUI+" "+d.sSortJUIAscAllowed+" "+d.sSortJUIDescAllowed).addClass("asc"==i[e]?d.sSortJUIAsc:"desc"==i[e]?d.sSortJUIDesc:c.sSortingClassJUI))
})}}}),p.render={number:function(a,b,c,d){return{display:function(e){var f=0>e?"-":"",e=Math.abs(parseFloat(e)),g=parseInt(e,10),e=c?b+(e-g).toFixed(c).substring(2):"";return f+(d||"")+g.toString().replace(/\B(?=(\d{3})+(?!\d))/g,a)+e}}}},h.extend(p.ext.internal,{_fnExternApiFunc:Mb,_fnBuildAjax:na,_fnAjaxUpdate:jb,_fnAjaxParameters:sb,_fnAjaxUpdateDraw:tb,_fnAjaxDataSrc:oa,_fnAddColumn:Aa,_fnColumnOptions:fa,_fnAdjustColumnSizing:V,_fnVisibleToColumnIndex:ga,_fnColumnIndexToVisible:Y,_fnVisbleColumns:Z,_fnGetColumns:X,_fnColumnTypes:Da,_fnApplyColumnDefs:hb,_fnHungarianMap:T,_fnCamelToHungarian:G,_fnLanguageCompat:N,_fnBrowserDetect:fb,_fnAddData:I,_fnAddTr:ha,_fnNodeToDataIndex:function(a,b){return b._DT_RowIndex!==l?b._DT_RowIndex:null},_fnNodeToColumnIndex:function(a,b,c){return h.inArray(c,a.aoData[b].anCells)},_fnGetCellData:A,_fnSetCellData:Ea,_fnSplitObjNotation:Ga,_fnGetObjectDataFn:U,_fnSetObjectDataFn:Ba,_fnGetDataMaster:Ha,_fnClearTable:ja,_fnDeleteIndex:ka,_fnInvalidateRow:la,_fnGetRowElements:ia,_fnCreateTr:Fa,_fnBuildHead:ib,_fnDrawHead:ba,_fnDraw:K,_fnReDraw:L,_fnAddOptionsHtml:lb,_fnDetectHeader:aa,_fnGetUniqueThs:ma,_fnFeatureHtmlFilter:nb,_fnFilterComplete:ca,_fnFilterCustom:wb,_fnFilterColumn:vb,_fnFilter:ub,_fnFilterCreateSearch:Na,_fnEscapeRegex:Oa,_fnFilterData:xb,_fnFeatureHtmlInfo:qb,_fnUpdateInfo:Ab,_fnInfoMacros:Bb,_fnInitialise:ra,_fnInitComplete:pa,_fnLengthChange:Pa,_fnFeatureHtmlLength:mb,_fnFeatureHtmlPaginate:rb,_fnPageChange:Ra,_fnFeatureHtmlProcessing:ob,_fnProcessingDisplay:B,_fnFeatureHtmlTable:pb,_fnScrollDraw:W,_fnApplyToChildren:F,_fnCalculateColumnWidths:Ca,_fnThrottle:Ma,_fnConvertToWidth:Cb,_fnScrollingWidthAdjust:Eb,_fnGetWidestNode:Db,_fnGetMaxLenString:Fb,_fnStringToCss:s,_fnScrollBarWidth:Gb,_fnSortFlatten:R,_fnSort:kb,_fnSortAria:Ib,_fnSortListener:Sa,_fnSortAttachListener:Ka,_fnSortingClasses:sa,_fnSortData:Hb,_fnSaveState:ta,_fnLoadState:Jb,_fnSettingsFromNode:ua,_fnLog:P,_fnMap:D,_fnBindAction:Ta,_fnCallbackReg:x,_fnCallbackFire:u,_fnLengthOverflow:Qa,_fnRenderer:La,_fnDataSource:z,_fnRowAttributes:Ia,_fnCalculateEnd:function(){}}),h.fn.dataTable=p,h.fn.dataTableSettings=p.settings,h.fn.dataTableExt=p.ext,h.fn.DataTable=function(a){return h(this).dataTable(a).api()},h.each(p,function(a,b){h.fn.DataTable[a]=b}),h.fn.dataTable};"function"==typeof define&&define.amd?define("datatables",["jquery"],N):"object"==typeof exports?N(require("jquery")):jQuery&&!jQuery.fn.dataTable&&N(jQuery)}(window,document),function(m,n,k){var l=function(e){var g=function(a,b){!this instanceof g?alert("Scroller warning: Scroller must be initialised with the 'new' keyword."):("undefined"==typeof b&&(b={}),this.s={dt:a,tableTop:0,tableBottom:0,redrawTop:0,redrawBottom:0,autoHeight:!0,viewportRows:0,stateTO:null,drawTO:null,heights:{jump:null,page:null,virtual:null,scroll:null,row:null,viewport:null},topRowFloat:0,scrollDrawDiff:null,loaderVisible:!1},this.s=e.extend(this.s,g.oDefaults,b),this.s.heights.row=this.s.rowHeight,this.dom={force:n.createElement("div"),scroller:null,table:null,loader:null},this.s.dt.oScroller=this,this._fnConstruct())};if(g.prototype={fnRowToPixels:function(a,b,c){return a=c?this._domain("virtualToPhysical",a*this.s.heights.row):this.s.baseScrollTop+(a-this.s.baseRowTop)*this.s.heights.row,b||b===k?parseInt(a,10):a},fnPixelsToRow:function(a,b,c){var d=a-this.s.baseScrollTop,a=c?this._domain("physicalToVirtual",a)/this.s.heights.row:d/this.s.heights.row+this.s.baseRowTop;return b||b===k?parseInt(a,10):a},fnScrollToRow:function(a,b){var c=this,d=!1,f=this.fnRowToPixels(a),h=a-(this.s.displayBuffer-1)/2*this.s.viewportRows;0>h&&(h=0),(f>this.s.redrawBottom||f<this.s.redrawTop)&&this.s.dt._iDisplayStart!==h&&(d=!0,f=this.fnRowToPixels(a,!1,!0)),"undefined"==typeof b||b?(this.s.ani=d,e(this.dom.scroller).animate({scrollTop:f},function(){setTimeout(function(){c.s.ani=!1},25)})):e(this.dom.scroller).scrollTop(f)},fnMeasure:function(a){this.s.autoHeight&&this._fnCalcRowHeight();var b=this.s.heights;b.viewport=e(this.dom.scroller).height(),this.s.viewportRows=parseInt(b.viewport/b.row,10)+1,this.s.dt._iDisplayLength=this.s.viewportRows*this.s.displayBuffer,(a===k||a)&&this.s.dt.oInstance.fnDraw()},_fnConstruct:function(){var a=this;if(this.s.dt.oFeatures.bPaginate){this.dom.force.style.position="absolute",this.dom.force.style.top="0px",this.dom.force.style.left="0px",this.dom.force.style.width="1px",this.dom.scroller=e("div."+this.s.dt.oClasses.sScrollBody,this.s.dt.nTableWrapper)[0],this.dom.scroller.appendChild(this.dom.force),this.dom.scroller.style.position="relative",this.dom.table=e(">table",this.dom.scroller)[0],this.dom.table.style.position="absolute",this.dom.table.style.top="0px",this.dom.table.style.left="0px",e(this.s.dt.nTableWrapper).addClass("DTS"),this.s.loadingIndicator&&(this.dom.loader=e('<div class="DTS_Loading">'+this.s.dt.oLanguage.sLoadingRecords+"</div>").css("display","none"),e(this.dom.scroller.parentNode).css("position","relative").append(this.dom.loader)),this.s.heights.row&&"auto"!=this.s.heights.row&&(this.s.autoHeight=!1),this.fnMeasure(!1),this.s.ingnoreScroll=!0,this.s.stateSaveThrottle=this.s.dt.oApi._fnThrottle(function(){a.s.dt.oApi._fnSaveState(a.s.dt)},500),e(this.dom.scroller).on("scroll.DTS",function(){a._fnScroll.call(a)}),e(this.dom.scroller).on("touchstart.DTS",function(){a._fnScroll.call(a)}),this.s.dt.aoDrawCallback.push({fn:function(){a.s.dt.bInitialised&&a._fnDrawCallback.call(a)},sName:"Scroller"}),e(m).on("resize.DTS",function(){a.fnMeasure(!1),a._fnInfo()});var b=!0;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",function(c,d){b&&a.s.dt.oLoadedState?(d.iScroller=a.s.dt.oLoadedState.iScroller,d.iScrollerTopRow=a.s.dt.oLoadedState.iScrollerTopRow,b=!1):(d.iScroller=a.dom.scroller.scrollTop,d.iScrollerTopRow=a.s.topRowFloat)},"Scroller_State"),this.s.dt.oLoadedState&&(this.s.topRowFloat=this.s.dt.oLoadedState.iScrollerTopRow||0),this.s.dt.aoDestroyCallback.push({sName:"Scroller",fn:function(){e(m).off("resize.DTS"),e(a.dom.scroller).off("touchstart.DTS scroll.DTS"),e(a.s.dt.nTableWrapper).removeClass("DTS"),e("div.DTS_Loading",a.dom.scroller.parentNode).remove(),a.dom.table.style.position="",a.dom.table.style.top="",a.dom.table.style.left=""}})}else this.s.dt.oApi._fnLog(this.s.dt,0,"Pagination must be enabled for Scroller")},_fnScroll:function(){var d,a=this,b=this.s.heights,c=this.dom.scroller.scrollTop;if(!this.s.skip&&!this.s.ingnoreScroll)if(this.s.dt.bFiltered||this.s.dt.bSorted)this.s.lastScrollTop=0;else{if(this._fnInfo(),clearTimeout(this.s.stateTO),this.s.stateTO=setTimeout(function(){a.s.dt.oApi._fnSaveState(a.s.dt)},250),c<this.s.redrawTop||c>this.s.redrawBottom){var f=Math.ceil((this.s.displayBuffer-1)/2*this.s.viewportRows);Math.abs(c-this.s.lastScrollTop)>b.viewport||this.s.ani?(d=parseInt(this._domain("physicalToVirtual",c)/b.row,10)-f,this.s.topRowFloat=this._domain("physicalToVirtual",c)/b.row):(d=this.fnPixelsToRow(c)-f,this.s.topRowFloat=this.fnPixelsToRow(c,!1)),0>=d?d=0:d+this.s.dt._iDisplayLength>this.s.dt.fnRecordsDisplay()?(d=this.s.dt.fnRecordsDisplay()-this.s.dt._iDisplayLength,0>d&&(d=0)):0!==d%2&&d++,d!=this.s.dt._iDisplayStart&&(this.s.tableTop=e(this.s.dt.nTable).offset().top,this.s.tableBottom=e(this.s.dt.nTable).height()+this.s.tableTop,b=function(){null===a.s.scrollDrawReq&&(a.s.scrollDrawReq=c),a.s.dt._iDisplayStart=d,a.s.dt.oApi._fnCalculateEnd&&a.s.dt.oApi._fnCalculateEnd(a.s.dt),a.s.dt.oApi._fnDraw(a.s.dt)},this.s.dt.oFeatures.bServerSide?(clearTimeout(this.s.drawTO),this.s.drawTO=setTimeout(b,this.s.serverWait)):b(),this.dom.loader&&!this.s.loaderVisible)&&(this.dom.loader.css("display","block"),this.s.loaderVisible=!0)}this.s.lastScrollTop=c,this.s.stateSaveThrottle()}},_domain:function(a,b){var d,c=this.s.heights;if(c.virtual===c.scroll){if(d=(c.virtual-c.viewport)/(c.scroll-c.viewport),"virtualToPhysical"===a)return b/d;if("physicalToVirtual"===a)return b*d}var e=(c.scroll-c.viewport)/2,h=(c.virtual-c.viewport)/2;return d=h/(e*e),"virtualToPhysical"===a?h>b?Math.pow(b/d,.5):(b=2*h-b,0>b?c.scroll:2*e-Math.pow(b/d,.5)):"physicalToVirtual"===a?e>b?b*b*d:(b=2*e-b,0>b?c.virtual:2*h-b*b*d):void 0},_fnDrawCallback:function(){var a=this,b=this.s.heights,c=this.dom.scroller.scrollTop,d=e(this.s.dt.nTable).height(),f=this.s.dt._iDisplayStart,h=this.s.dt._iDisplayLength,g=this.s.dt.fnRecordsDisplay();this.s.skip=!0,this._fnScrollForce(),c=0===f?this.s.topRowFloat*b.row:f+h>=g?b.scroll-(g-this.s.topRowFloat)*b.row:this._domain("virtualToPhysical",this.s.topRowFloat*b.row),this.dom.scroller.scrollTop=c,this.s.baseScrollTop=c,this.s.baseRowTop=this.s.topRowFloat;var j=c-(this.s.topRowFloat-f)*b.row;0===f?j=0:f+h>=g&&(j=b.scroll-d),this.dom.table.style.top=j+"px",this.s.tableTop=j,this.s.tableBottom=d+this.s.tableTop,d=(c-this.s.tableTop)*this.s.boundaryScale,this.s.redrawTop=c-d,this.s.redrawBottom=c+d,this.s.skip=!1,this.s.dt.oFeatures.bStateSave&&null!==this.s.dt.oLoadedState&&"undefined"!=typeof this.s.dt.oLoadedState.iScroller?((c=!this.s.dt.sAjaxSource&&!a.s.dt.ajax||this.s.dt.oFeatures.bServerSide?!1:!0)&&2==this.s.dt.iDraw||!c&&1==this.s.dt.iDraw)&&setTimeout(function(){e(a.dom.scroller).scrollTop(a.s.dt.oLoadedState.iScroller),a.s.redrawTop=a.s.dt.oLoadedState.iScroller-b.viewport/2,setTimeout(function(){a.s.ingnoreScroll=!1},0)},0):a.s.ingnoreScroll=!1,setTimeout(function(){a._fnInfo.call(a)},0),this.dom.loader&&this.s.loaderVisible&&(this.dom.loader.css("display","none"),this.s.loaderVisible=!1)},_fnScrollForce:function(){var a=this.s.heights;a.virtual=a.row*this.s.dt.fnRecordsDisplay(),a.scroll=a.virtual,1e6<a.scroll&&(a.scroll=1e6),this.dom.force.style.height=a.scroll+"px"},_fnCalcRowHeight:function(){var a=this.s.dt,b=a.nTable,c=b.cloneNode(!1),d=e("<tbody/>").appendTo(c),f=e('<div class="'+a.oClasses.sWrapper+' DTS"><div class="'+a.oClasses.sScrollWrapper+'"><div class="'+a.oClasses.sScrollBody+'"></div></div></div>');for(e("tbody tr:lt(4)",b).clone().appendTo(d);3>e("tr",d).length;)d.append("<tr><td>&nbsp;</td></tr>");e("div."+a.oClasses.sScrollBody,f).append(c),a._bInitComplete?a=b.parentNode:(this.s.dt.nHolding||(this.s.dt.nHolding=e("<div></div>").insertBefore(this.s.dt.nTable)),a=this.s.dt.nHolding),f.appendTo(a),this.s.heights.row=e("tr",d).eq(1).outerHeight(),f.remove()},_fnInfo:function(){if(this.s.dt.oFeatures.bInfo){var a=this.s.dt,b=a.oLanguage,c=this.dom.scroller.scrollTop,d=Math.floor(this.fnPixelsToRow(c,!1,this.s.ani)+1),f=a.fnRecordsTotal(),h=a.fnRecordsDisplay(),c=Math.ceil(this.fnPixelsToRow(c+this.s.heights.viewport,!1,this.s.ani)),c=c>h?h:c,g=a.fnFormatNumber(d),j=a.fnFormatNumber(c),i=a.fnFormatNumber(f),k=a.fnFormatNumber(h),g=0===a.fnRecordsDisplay()&&a.fnRecordsDisplay()==a.fnRecordsTotal()?b.sInfoEmpty+b.sInfoPostFix:0===a.fnRecordsDisplay()?b.sInfoEmpty+" "+b.sInfoFiltered.replace("_MAX_",i)+b.sInfoPostFix:a.fnRecordsDisplay()==a.fnRecordsTotal()?b.sInfo.replace("_START_",g).replace("_END_",j).replace("_MAX_",i).replace("_TOTAL_",k)+b.sInfoPostFix:b.sInfo.replace("_START_",g).replace("_END_",j).replace("_MAX_",i).replace("_TOTAL_",k)+" "+b.sInfoFiltered.replace("_MAX_",a.fnFormatNumber(a.fnRecordsTotal()))+b.sInfoPostFix;if((b=b.fnInfoCallback)&&(g=b.call(a.oInstance,a,d,c,f,h,g)),a=a.aanFeatures.i,"undefined"!=typeof a)for(d=0,f=a.length;f>d;d++)e(a[d]).html(g)}}},g.defaults={trace:!1,rowHeight:"auto",serverWait:200,displayBuffer:9,boundaryScale:.5,loadingIndicator:!1},g.oDefaults=g.defaults,g.version="1.2.2","function"==typeof e.fn.dataTable&&"function"==typeof e.fn.dataTableExt.fnVersionCheck&&e.fn.dataTableExt.fnVersionCheck("1.9.0")?e.fn.dataTableExt.aoFeatures.push({fnInit:function(a){var b=a.oInit;return new g(a,b.scroller||b.oScroller||{}).dom.wrapper},cFeature:"S",sFeature:"Scroller"}):alert("Warning: Scroller requires DataTables 1.9.0 or greater - www.datatables.net/download"),e.fn.dataTable.Scroller=g,e.fn.DataTable.Scroller=g,e.fn.dataTable.Api){var i=e.fn.dataTable.Api;i.register("scroller()",function(){return this}),i.register("scroller().rowToPixels()",function(a,b,c){var d=this.context;return d.length&&d[0].oScroller?d[0].oScroller.fnRowToPixels(a,b,c):void 0}),i.register("scroller().pixelsToRow()",function(a,b,c){var d=this.context;return d.length&&d[0].oScroller?d[0].oScroller.fnPixelsToRow(a,b,c):void 0}),i.register("scroller().scrollToRow()",function(a,b){return this.iterator("table",function(c){c.oScroller&&c.oScroller.fnScrollToRow(a,b)}),this}),i.register("scroller().measure()",function(a){return this.iterator("table",function(b){b.oScroller&&b.oScroller.fnMeasure(a)}),this})}return g};"function"==typeof define&&define.amd?define(["jquery","datatables"],l):"object"==typeof exports?l(require("jquery"),require("datatables")):jQuery&&!jQuery.fn.dataTable.Scroller&&l(jQuery,jQuery.fn.dataTable)}(window,document);var graphs={},updateIntervalID=0,updateTimeoutID=0,asv=null,prev_tree_state=[],treeState={items:{},warn:{},err:{},expand:{},timer:{}},ws_queue=[],ws=null;!function($){$.fn.timepicker=function(){mask=/^([01]\d|2[0123]):([0-5]\d)$/;var pad=function(what){return what+="",what.length<2?"0"+what:what},h=function(el){return pad(el.value.substring(0,2))},m=function(el){return pad(el.value.substring(3,el.value.length))},curofs=0,focused=0;$(this).bind("selectstart",!1),$(this).click(function(){this.selectionStart<2?(this.selectionStart=0,this.selectionEnd=2):(this.selectionStart=3,this.selectionEnd=5)}),$(this).focus(function(){focused=1}),$(this).mouseup(function(){return!1}),$(this).keydown(function(event){var s_st=this.selectionStart,s_en=this.selectionEnd;if(9==event.keyCode)return!0;if(36==event.keyCode||35==event.keyCode)return this.selectionStart=s_st,this.selectionEnd=s_en,!1;if(8==event.keyCode||46==event.keyCode)return this.value=this.selectionStart<2?"00:"+m(this):h(this)+":00",this.selectionStart=s_st,this.selectionEnd=s_en,!1;if(38==event.keyCode){if(this.selectionStart<2){var hours=parseInt(h(this),10)+1;hours>23&&(hours=0),this.value=pad(hours)+":"+m(this)}else{var minutes=parseInt(m(this),10)+1;minutes>59&&(minutes=0),this.value=h(this)+":"+pad(minutes)}return this.selectionStart=s_st,this.selectionEnd=s_en,!1}if(40==event.keyCode){if(this.selectionStart<2){var hours=parseInt(h(this),10)-1;0>hours&&(hours=23),this.value=pad(hours)+":"+m(this)}else{var minutes=parseInt(m(this),10)-1;0>minutes&&(minutes=59),this.value=h(this)+":"+pad(minutes)}return this.selectionStart=s_st,this.selectionEnd=s_en,!1}return 39==event.keyCode?(this.selectionStart=3,this.selectionEnd=5,!1):37==event.keyCode?(curofs=0,this.selectionStart=0,this.selectionEnd=2,!1):(this.selectionStart=s_st,void(this.selectionEnd=s_en))}),$(this).keypress(function(event){if(!event.charCode)return!0;var ch=String.fromCharCode(event.charCode);if(!/^\d$/.test(ch))return!1;var s_st=this.selectionStart,s_en=this.selectionEnd,part1=this.value.substring(0,curofs+s_st),part2=this.value.substring(curofs+s_st+1,this.value.length);return curofs++,curofs&=1,0==s_st&&0==curofs&&(s_st=3,s_en=5),this.value=part1+ch+part2,parseInt(h(this),10)>23&&(this.value="23:"+m(this)),parseInt(m(this),10)>59&&(this.value=h(this)+":59"),this.selectionStart=s_st,this.selectionEnd=s_en,!1})}}(jQuery);var soundEmbed=null,ding=function(){var which="wine-glass";soundEmbed?(document.body.removeChild(soundEmbed),soundEmbed.removed=!0,soundEmbed=null,soundEmbed=document.createElement("embed"),soundEmbed.setAttribute("src","/images/"+which+".wav"),soundEmbed.setAttribute("hidden",!0),soundEmbed.setAttribute("autostart",!0)):(soundEmbed=document.createElement("embed"),soundEmbed.setAttribute("src","/images/"+which+".wav"),soundEmbed.setAttribute("hidden",!0),soundEmbed.setAttribute("autostart",!0)),soundEmbed.removed=!1,document.body.appendChild(soundEmbed)},jqHtmlUpdateCompare=function(src,dest){src.text()!=dest.text()&&(src.find("#detailed").length&&(dest.find("#detailed").is(":visible")?src.find("#detailed").show():src.find("#detailed").hide()),dest.html(src.html()),src.find("#detailed").length&&$(".clear_remote").click(function(){confirm($("clear_remote_msg").text())&&updateTick([{what:"clearremote",datasrc:11}])}))},updateRequest=[{what:"navigation"}],subscribe=function(obj){for(u in updateRequest)if(updateRequest[u].what==obj.what&&updateRequest[u].datasrc==obj.datasrc)return void(updateRequest[u]=obj);updateRequest.push(obj)},unsubscribeAll=function(){updateRequest=[{what:"navigation"}]},clientDelta=0,updateTick=function(obj){var req=JSON.stringify(obj?obj:updateRequest),requestStartTime=moment.utc().valueOf();this.fpc&&this.fpc.updateTimestamps(updateRequest),$.ajax({url:"/update/",type:"POST",data:{req:req},success:function(data){var jqObject=$("<div>"+data+"</div>"),ts=jqObject.find("#timestamp");if(ts.length&&0==updateTimeoutID){var requestEndTime=moment.utc().valueOf(),tripTime=(requestEndTime-requestStartTime)/2,serverTime=Number(ts.val());clientDelta=requestEndTime-tripTime-serverTime;var nextUpdateAt=5e3*Math.floor(serverTime/5e3)+5e3+clientDelta,timeUntilNextUpdate=Math.ceil(nextUpdateAt-requestEndTime)+100;clearInterval(updateIntervalID),updateTimeoutID=setTimeout(function(){updateIntervalID=setInterval(updateTick,5e3),clearTimeout(updateTimeoutID),updateTimeoutID=0,updateTick()},timeUntilNextUpdate)}if(jqObject.find("#groupdata").length&&($("#groupdata").html(jqObject.find(" #groupdata").html()),bind_address()),$("#network-name").html(jqObject.find("#network-name").html()),jqObject.find(".graphupdate").length&&$(".gdatasrc").each(function(){for(var dsrc=jqObject.find(".gdatasrc"),i=dsrc.length-1;i>=0;i--)$(this).text()==$(dsrc[i]).text()&&pushtograph($(this).text(),$(dsrc[i]).closest(".graphupdate").find(".gdata").text(),$(dsrc[i]).closest(".graphupdate").find(".gannotations").text())}),jqObject.find(".ip_and_static_list_result").length){var result=jqObject.find(".ip_and_static_list_result").text();result=JSON.parse(result),$(".ip_and_static_list option").remove();var select=$(".ip_and_static_list");$.each(result,function(){select.append($("<option />").val(this.id).text(this.text))}),select.val(select.attr("data-selected-item"))}if(jqObject.find(".widgetdatasrc").length&&($(".widgetdatasrc").each(function(){for(var dsrc=jqObject.find(".widgetdatasrc"),i=dsrc.length-1;i>=0;i--){var sourceequal=$(this).val()==$(dsrc[i]).val();if(sourceequal){var w_p=$(this).closest(".widgetparent"),dsrc_p=$(dsrc[i]).closest(".widgetparent");jqHtmlUpdateCompare(dsrc_p,w_p)}}}),bind_address(),bind_widget_handlers()),jqObject.find("#nav_tree .Container").length?($("#nav_tree").html(jqObject.find("#nav_tree").html()),onContentReady(),processTreeState(),hideTreeItems()):jqObject.find("#tree_faults").length&&($("#tree_faults").val(jqObject.find("#tree_faults").val()),processTreeState()),jqObject.find("#corestart").length&&($("#corestart").html(jqObject.find("#corestart")),onContentReady()),jqObject.find("#fpdata").length&&fpc&&fpc.f){var data=JSON.parse(jqObject.find("#fpdata").html());fpc.f.update(data,!1)}if(jqObject.find("#frequency_plan").length&&fpc&&fpc.fdisp){var data=JSON.parse(jqObject.find("#frequency_plan").html());fpc.fdisp.update(data,!1)}if(jqObject.find("#widget_controller_acm_stat").length&&asv){var data=JSON.parse(jqObject.find("#widget_controller_acm_stat").html());asv.update(data)}if(jqObject.find("#world-map-markers-update").length&&(updated_markers=jqObject.find("#world-map-markers-update").text(),$("#world-map").length)){var current_markers=$("#world-map-markers").text();if(current_markers!=updated_markers&&$("#world-map-markers").text(updated_markers),$(".world-map-tool-item-offline").hasClass("selected")){var updated_markers_parsed=$.parseJSON(updated_markers),current_markers_parsed=$.parseJSON(current_markers);for(var key in current_markers_parsed)key in updated_markers_parsed||worldMap.removeLayer(worldMapMarkers[key]),key in updated_markers_parsed&&updated_markers_parsed[key].state!=current_markers_parsed[key].state&&worldMapMarkers[key].setIcon(1==updated_markers_parsed[key].state?iconDown:iconUp);for(var key in updated_markers_parsed)if(!(key in current_markers_parsed)){var icon=iconUp;1==updated_markers_parsed[key].state&&(icon=iconDown);var marker=new L.marker(L.latLng(updated_markers_parsed[key].latlng[0],updated_markers_parsed[key].latlng[1]),{icon:icon}).bindPopup('<a href="/remote_dashboard/'+key+'/" class="remote-link">'+updated_markers_parsed[key].name+"</a>");worldMapMarkers[key]=marker,marker.addTo(worldMap)}}}if(jqObject.find("#widget_remote_params_update").length){var data=jqObject.find("#widget_remote_params_update").html(),params=$.parseJSON(data);$("#remote_status").html(params.remote_status),$("#remote_bad_state").html(params.remote_bad_state),$("#remote_good_state").html(params.remote_good_state),$("#remote_tx_sp").html(params.remote_tx_sp),$("#remote_rx_sp").html(params.remote_rx_sp),$("#remote_cn_rem").removeClass().addClass(params.remote_cn_rem_class),$("#remote_cn_rem").html(params.remote_cn_rem),$("#remote_cn_hub").removeClass().addClass(params.remote_cn_hub_class),$("#remote_cn_hub").html(params.remote_cn_hub),$("#remote_txlvl").html(params.remote_txlvl),$("#remote_txname").html(params.remote_txname),$("#remote_rxname").html(params.remote_rxname),$("#remote_ip_list").html(params.remote_ip_list),$("#remote_access").html(params.remote_access),$("#remote_serial_num").html(params.remote_serial_num),$("#remote_location").html(params.remote_location),$("#remote_comment").html(params.remote_comment),$("#remote_weather").html(params.remote_weather)}jqObject.find("#widget_controller_acm_stat").length&&$("#acm_stat_data").html(jqObject.find("#widget_controller_acm_stat").html()),$("#nav .inner #alert").hide()},error:function(){$("#nav .inner #alert").show()}})},need_load=!0;$.address.change(function(event){need_load&&onContentLoad(event.value)});var updateEverySecond=function(){var formatTime=function(timestamp){var date=moment.utc(1e3*timestamp+clientDelta),now=moment.utc(),diff=date.diff(now),diff_date=moment.utc(diff);if(diff>36e5)return[diff_date.format("H:mm"),0];var blink=0;return 6e4>diff&&(blink=1),[diff_date.format("mm:ss"),blink]};$("span.timer").each(function(){var timestamp=parseInt($(this).attr("data-time-left"),10),running=parseInt($(this).attr("data-running"),10),time=formatTime(timestamp);$(this).text(time[0]),!running&&time[1]?$(this).addClass("blink"):$(this).removeClass("blink")})},ganttInterval=0,graphClickCallback=null,fpc=null,current_network=0,loading,pending,stopUpdates=function(){clearInterval(updateIntervalID),clearTimeout(updateTimeoutID),console.log("Updates stopped"),$(document).off("contextmenu","#nav_tree .Container .Content")},hideTreeItems=function(){supports_html5_storage()&&$("li.ExpandOpen:not(.ExpandLeaf)").each(function(index,node){var name=$(node).attr("id");1==localStorage[name]&&($(node).children("ul").hide(),$(node).removeClass("ExpandOpen").addClass("ExpandClosed"))})};$(document).ready(function(){var zoom=function(zoom_in){$("#graphselect_1\\[zoom\\]").val(zoom_in),$("#line_graph").submit()};$(document).on("click","#zoom1",function(){zoom(1)}),$(document).on("click","#zoom2",function(){zoom(2)}),$(document).on("click","#nav_tree",tree_toggle),Date.prototype.addHours=function(h){return this.setHours(this.getHours()+h),this},Date.prototype.addMinutes=function(m){return this.setMinutes(this.getMinutes()+m),this},Date.prototype.addSeconds=function(seconds){return this.setTime(this.getTime()+1e3*seconds)},Date.serverNow=function(){var now=new Date,now_utc=new Date(now.getUTCFullYear(),now.getUTCMonth(),now.getUTCDate(),now.getUTCHours(),now.getUTCMinutes(),now.getUTCSeconds());return now_utc.addSeconds($("#tzoffset").val()),now_utc},Date.fromUnixTimestamp=function(ts){var date=new Date(1e3*ts),date_utc=new Date(date.getUTCFullYear(),date.getUTCMonth(),date.getUTCDate(),date.getUTCHours(),date.getUTCMinutes(),date.getUTCSeconds());return date_utc.addSeconds($("#tzoffset").val()),date_utc},pending=0,$("#load").hide(),jQuery.ajaxSetup({beforeSend:function(){pending++,loading=setTimeout(function(){pending&&($("#load").show(),$("#load").text(pending))},3e3)},complete:function(){clearTimeout(loading),pending&&(pending--,$("#load").text(pending),0==pending&&$("#load").hide())},timeout:1e4}),$(document).on("click","#nav_tree .Container .Content",tree_item_click),$(document).on("contextmenu","#nav_tree .Container .Content",tree_item_click),$("#nav_tree").height($(window).height()-30),$("#nav_tree>div>.Container").height($(window).height()-30),updateIntervalID=setInterval(updateTick,5e3),updateTick(),"/"==$.address.value()&&$.address.value("/net_usage/"),$("#acknowledge").click(function(){updateTick([{what:"acknowledge"}])}),supports_html5_storage()&&$("li.ExpandOpen:not(.ExpandLeaf)").each(function(index,node){var name=$(node).attr("id");1==localStorage[name]&&($(node).children("ul").hide(),$(node).removeClass("ExpandOpen").addClass("ExpandClosed"))}),tree_item_click(null,"menuitem_"+$("#selected_item").val()),processTreeState(),$(document).on("click",".triangle_marker",function(){$(".navContainer").toggle("slide",{direction:"left"},1e3)});setInterval(function(){updateEverySecond()},1e3)});
//# sourceMappingURL=combined.min.map